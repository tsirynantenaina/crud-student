"use strict";(self.webpackChunkangularfirebase_student_app=self.webpackChunkangularfirebase_student_app||[]).push([[179],{2011:(Et,xe,U)=>{U.d(xe,{Dh:()=>Ce,GT:()=>ie,cc:()=>Se,hO:()=>ze,on:()=>z,pX:()=>le,xv:()=>me});var c=U(4650),ee=U(9260),L=U(4976);Et=U.hmd(Et);const ue=["ngOnDestroy"],le=(ke,Oe,Ge,Fe={})=>new Proxy(ke,{get:(be,Te)=>Ge.runOutsideAngular(()=>{var Ke;if(ke[Te])return!(null===(Ke=Fe?.spy)||void 0===Ke)&&Ke.get&&Fe.spy.get(Te,ke[Te]),ke[Te];if(ue.indexOf(Te)>-1)return()=>{};const Ue=Oe.toPromise().then(ot=>{const ae=ot&&ot[Te];return"function"==typeof ae?ae.bind(ot):ae&&ae.then?ae.then(At=>Ge.run(()=>At)):Ge.run(()=>ae)});return new Proxy(()=>{},{get:(ot,ae)=>Ue[ae],apply:(ot,ae,At)=>Ue.then(nt=>{var Kt;const ct=nt&&nt(...At);return!(null===(Kt=Fe?.spy)||void 0===Kt)&&Kt.apply&&Fe.spy.apply(Te,At,ct),ct})})})}),ie=(ke,Oe)=>{Oe.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(Fe=>{Object.defineProperty(ke.prototype,Fe,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,Fe))})})};class we{constructor(Oe){return Oe}}const Ce=new c.OlP("angularfire2.app.options"),me=new c.OlP("angularfire2.app.name");function z(ke,Oe,Ge){const be="object"==typeof Ge&&Ge||{};be.name=be.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const Ke=ee.Z.apps.filter(Ue=>Ue&&Ue.name===be.name)[0]||Oe.runOutsideAngular(()=>ee.Z.initializeApp(ke,be));try{JSON.stringify(ke)!==JSON.stringify(Ke.options)&&G("error",`${Ke.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we(Ke)}const G=(ke,...Oe)=>{(0,c.X6Q)()&&typeof console<"u"&&console[ke](...Oe)},Y={provide:we,useFactory:z,deps:[Ce,c.R0b,[new c.FiY,me]]};let ze=(()=>{class ke{constructor(Ge){ee.Z.registerVersion("angularfire",L.q4.full,"core"),ee.Z.registerVersion("angularfire",L.q4.full,"app-compat"),ee.Z.registerVersion("angular",c.q4F.full,Ge.toString())}static initializeApp(Ge,Fe){return{ngModule:ke,providers:[{provide:Ce,useValue:Ge},{provide:me,useValue:Fe}]}}}return ke.\u0275fac=function(Ge){return new(Ge||ke)(c.LFG(c.Lbi))},ke.\u0275mod=c.oAB({type:ke}),ke.\u0275inj=c.cJS({providers:[Y]}),ke})();function Se(ke,Oe,Ge,Fe,be){const[,Te,Ke]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===ke)||[];if(Te)return function Qe(ke,Oe){try{return ke.toString()===Oe.toString()}catch{return ke===Oe}}(be,Ke)||(_e("error",`${Oe} was already initialized on the ${Ge} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:be,was:Ke})),Te;{const Ue=Fe();return globalThis.\u0275AngularfireInstanceCache.push([ke,Ue,be]),Ue}}const ut=!!Et.hot,_e=(ke,...Oe)=>{(0,c.X6Q)()&&typeof console<"u"&&console[ke](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Et,xe,U)=>{U.d(xe,{q4:()=>Ii,iC:()=>rs,fc:()=>Xh,HU:()=>bt,vb:()=>nc,JM:()=>tc});var c=U(4650),ee=U(259),L=U(5861),ue=U(6881),le=U(2090),ie=U(4859),we=U(1877);const Ce=(I,T)=>T.some(x=>I instanceof x);let me,z;const ze=new WeakMap,Se=new WeakMap,Qe=new WeakMap,ut=new WeakMap,_e=new WeakMap;let Ge={get(I,T,x){if(I instanceof IDBTransaction){if("done"===T)return Se.get(I);if("objectStoreNames"===T)return I.objectStoreNames||Qe.get(I);if("store"===T)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Ke(I[T])},set:(I,T,x)=>(I[T]=x,!0),has:(I,T)=>I instanceof IDBTransaction&&("done"===T||"store"===T)||T in I};function Te(I){return"function"==typeof I?function be(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Y(){return z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...T){return I.apply(Ue(this),T),Ke(ze.get(this))}:function(...T){return Ke(I.apply(Ue(this),T))}:function(T,...x){const F=I.call(Ue(this),T,...x);return Qe.set(F,T.sort?T.sort():[T]),Ke(F)}}(I):(I instanceof IDBTransaction&&function Oe(I){if(Se.has(I))return;const T=new Promise((x,F)=>{const q=()=>{I.removeEventListener("complete",Q),I.removeEventListener("error",se),I.removeEventListener("abort",se)},Q=()=>{x(),q()},se=()=>{F(I.error||new DOMException("AbortError","AbortError")),q()};I.addEventListener("complete",Q),I.addEventListener("error",se),I.addEventListener("abort",se)});Se.set(I,T)}(I),Ce(I,function G(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,Ge):I)}function Ke(I){if(I instanceof IDBRequest)return function ke(I){const T=new Promise((x,F)=>{const q=()=>{I.removeEventListener("success",Q),I.removeEventListener("error",se)},Q=()=>{x(Ke(I.result)),q()},se=()=>{F(I.error),q()};I.addEventListener("success",Q),I.addEventListener("error",se)});return T.then(x=>{x instanceof IDBCursor&&ze.set(x,I)}).catch(()=>{}),_e.set(T,I),T}(I);if(ut.has(I))return ut.get(I);const T=Te(I);return T!==I&&(ut.set(I,T),_e.set(T,I)),T}const Ue=I=>_e.get(I),At=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],Kt=new Map;function ct(I,T){if(!(I instanceof IDBDatabase)||T in I||"string"!=typeof T)return;if(Kt.get(T))return Kt.get(T);const x=T.replace(/FromIndex$/,""),F=T!==x,q=nt.includes(x);if(!(x in(F?IDBIndex:IDBObjectStore).prototype)||!q&&!At.includes(x))return;const Q=function(){var se=(0,L.Z)(function*(Ze,...qe){const dt=this.transaction(Ze,q?"readwrite":"readonly");let Nt=dt.store;return F&&(Nt=Nt.index(qe.shift())),(yield Promise.all([Nt[x](...qe),q&&dt.done]))[0]});return function(qe){return se.apply(this,arguments)}}();return Kt.set(T,Q),Q}!function Fe(I){Ge=I(Ge)}(I=>({...I,get:(T,x,F)=>ct(T,x)||I.get(T,x,F),has:(T,x)=>!!ct(T,x)||I.has(T,x)}));const fo="@firebase/installations",gi="0.6.4",po=1e4,_s=`w:${gi}`,de="FIS_v2",fe="https://firebaseinstallations.googleapis.com/v1",ye=36e5,ft=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pt(I){return I instanceof le.ZR&&I.code.includes("request-failed")}function Sn({projectId:I}){return`${fe}/projects/${I}/installations`}function mt(I){return{token:I.token,requestStatus:2,expiresIn:zr(I.expiresIn),creationTime:Date.now()}}function Qt(I,T){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,L.Z)(function*(I,T){const F=(yield T.json()).error;return ft.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Tn({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function mr(I){return zn.apply(this,arguments)}function zn(){return(zn=(0,L.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function zr(I){return Number(I.replace("s","000"))}function vt(){return(vt=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:x}){const F=Sn(I),q=Tn(I),Q=T.getImmediate({optional:!0});if(Q){const dt=yield Q.getHeartbeatsHeader();dt&&q.append("x-firebase-client",dt)}const Ze={method:"POST",headers:q,body:JSON.stringify({fid:x,authVersion:de,appId:I.appId,sdkVersion:_s})},qe=yield mr(()=>fetch(F,Ze));if(qe.ok){const dt=yield qe.json();return{fid:dt.fid||x,registrationStatus:2,refreshToken:dt.refreshToken,authToken:mt(dt.authToken)}}throw yield Qt("Create Installation",qe)})).apply(this,arguments)}function _i(I){return new Promise(T=>{setTimeout(T,I)})}const Lr=/^[cdef][\w-]{21}$/,ri="";function ys(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function an(I){return function $c(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Lr.test(x)?x:ri}catch{return ri}}function cn(I){return`${I.appName}!${I.appId}`}const at=new Map;function Ft(I,T){const x=cn(I);_r(x,T),function qr(I,T){const x=function ii(){return!Bn&&"BroadcastChannel"in self&&(Bn=new BroadcastChannel("[Firebase] FID Change"),Bn.onmessage=I=>{_r(I.data.key,I.data.fid)}),Bn}();x&&x.postMessage({key:I,fid:T}),function mn(){0===at.size&&Bn&&(Bn.close(),Bn=null)}()}(x,T)}function _r(I,T){const x=at.get(I);if(x)for(const F of x)F(T)}let Bn=null;const Ls="firebase-installations-database",Jt=1,vs="firebase-installations-store";let dn=null;function Ai(){return dn||(dn=function ot(I,T,{blocked:x,upgrade:F,blocking:q,terminated:Q}={}){const se=indexedDB.open(I,T),Ze=Ke(se);return F&&se.addEventListener("upgradeneeded",qe=>{F(Ke(se.result),qe.oldVersion,qe.newVersion,Ke(se.transaction))}),x&&se.addEventListener("blocked",()=>x()),Ze.then(qe=>{Q&&qe.addEventListener("close",()=>Q()),q&&qe.addEventListener("versionchange",()=>q())}).catch(()=>{}),Ze}(Ls,Jt,{upgrade:(I,T)=>{0===T&&I.createObjectStore(vs)}})),dn}function qn(I,T){return sr.apply(this,arguments)}function sr(){return(sr=(0,L.Z)(function*(I,T){const x=cn(I),q=(yield Ai()).transaction(vs,"readwrite"),Q=q.objectStore(vs),se=yield Q.get(x);return yield Q.put(T,x),yield q.done,(!se||se.fid!==T.fid)&&Ft(I,T.fid),T})).apply(this,arguments)}function Ki(I){return xn.apply(this,arguments)}function xn(){return(xn=(0,L.Z)(function*(I){const T=cn(I),F=(yield Ai()).transaction(vs,"readwrite");yield F.objectStore(vs).delete(T),yield F.done})).apply(this,arguments)}function Zi(I,T){return si.apply(this,arguments)}function si(){return(si=(0,L.Z)(function*(I,T){const x=cn(I),q=(yield Ai()).transaction(vs,"readwrite"),Q=q.objectStore(vs),se=yield Q.get(x),Ze=T(se);return void 0===Ze?yield Q.delete(x):yield Q.put(Ze,x),yield q.done,Ze&&(!se||se.fid!==Ze.fid)&&Ft(I,Ze.fid),Ze})).apply(this,arguments)}function H(I){return j.apply(this,arguments)}function j(){return j=(0,L.Z)(function*(I){let T;const x=yield Zi(I.appConfig,F=>{const q=function K(I){return Mn(I||{fid:ys(),registrationStatus:0})}(F),Q=function Ee(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(ft.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},F=function ne(I,T){return Ve.apply(this,arguments)}(I,x);return{installationEntry:x,registrationPromise:F}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:xt(I)}:{installationEntry:T}}(I,q);return T=Q.registrationPromise,Q.installationEntry});return x.fid===ri?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}}),j.apply(this,arguments)}function Ve(){return Ve=(0,L.Z)(function*(I,T){try{const x=yield function Fr(I,T){return vt.apply(this,arguments)}(I,T);return qn(I.appConfig,x)}catch(x){throw pt(x)&&409===x.customData.serverCode?yield Ki(I.appConfig):yield qn(I.appConfig,{fid:T.fid,registrationStatus:0}),x}}),Ve.apply(this,arguments)}function xt(I){return rn.apply(this,arguments)}function rn(){return(rn=(0,L.Z)(function*(I){let T=yield Yn(I.appConfig);for(;1===T.registrationStatus;)yield _i(100),T=yield Yn(I.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield H(I);return F||x}return T})).apply(this,arguments)}function Yn(I){return Zi(I,T=>{if(!T)throw ft.create("installation-not-found");return Mn(T)})}function Mn(I){return function gn(I){return 1===I.registrationStatus&&I.registrationTime+po<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Wr(){return(Wr=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:T},x){const F=function Yi(I,{fid:T}){return`${Sn(I)}/${T}/authTokens:generate`}(I,x),q=function Gn(I,{refreshToken:T}){const x=Tn(I);return x.append("Authorization",function mi(I){return`${de} ${I}`}(T)),x}(I,x),Q=T.getImmediate({optional:!0});if(Q){const dt=yield Q.getHeartbeatsHeader();dt&&q.append("x-firebase-client",dt)}const Ze={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:_s,appId:I.appId}})},qe=yield mr(()=>fetch(F,Ze));if(qe.ok)return mt(yield qe.json());throw yield Qt("Generate Auth Token",qe)})).apply(this,arguments)}function ws(I){return _l.apply(this,arguments)}function _l(){return _l=(0,L.Z)(function*(I,T=!1){let x;const F=yield Zi(I.appConfig,Q=>{if(!zt(Q))throw ft.create("not-registered");const se=Q.authToken;if(!T&&function wt(I){return 2===I.requestStatus&&!function un(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+ye}(I)}(se))return Q;if(1===se.requestStatus)return x=function pe(I,T){return re.apply(this,arguments)}(I,T),Q;{if(!navigator.onLine)throw ft.create("app-offline");const Ze=function sn(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}(Q);return x=function _t(I,T){return Dt.apply(this,arguments)}(I,Ze),Ze}});return x?yield x:F.authToken}),_l.apply(this,arguments)}function re(){return(re=(0,L.Z)(function*(I,T){let x=yield Le(I.appConfig);for(;1===x.authToken.requestStatus;)yield _i(100),x=yield Le(I.appConfig);const F=x.authToken;return 0===F.requestStatus?ws(I,T):F})).apply(this,arguments)}function Le(I){return Zi(I,T=>{if(!zt(T))throw ft.create("not-registered");return function Dr(I){return 1===I.requestStatus&&I.requestTime+po<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Dt(){return Dt=(0,L.Z)(function*(I,T){try{const x=yield function Yt(I,T){return Wr.apply(this,arguments)}(I,T),F=Object.assign(Object.assign({},T),{authToken:x});return yield qn(I.appConfig,F),x}catch(x){if(!pt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield qn(I.appConfig,F)}else yield Ki(I.appConfig);throw x}}),Dt.apply(this,arguments)}function zt(I){return void 0!==I&&2===I.registrationStatus}function yu(){return(yu=(0,L.Z)(function*(I){const T=I,{installationEntry:x,registrationPromise:F}=yield H(T);return F?F.catch(console.error):ws(T).catch(console.error),x.fid})).apply(this,arguments)}function Oa(){return Oa=(0,L.Z)(function*(I,T=!1){const x=I;return yield function xi(I){return Je.apply(this,arguments)}(x),(yield ws(x,T)).token}),Oa.apply(this,arguments)}function Je(){return(Je=(0,L.Z)(function*(I){const{registrationPromise:T}=yield H(I);T&&(yield T)})).apply(this,arguments)}function oi(I){return ft.create("missing-app-config-values",{valueName:I})}const Ht="installations",Vo=I=>{const T=I.getProvider("app").getImmediate(),x=function yl(I){if(!I||!I.options)throw oi("App Configuration");if(!I.name)throw oi("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!I.options[x])throw oi(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ue._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Us=I=>{const T=I.getProvider("app").getImmediate(),x=(0,ue._getProvider)(T,Ht).getImmediate();return{getId:()=>function or(I){return yu.apply(this,arguments)}(x),getToken:q=>function Fp(I){return Oa.apply(this,arguments)}(x,q)}};(function Bo(){(0,ue._registerComponent)(new ie.wA(Ht,Vo,"PUBLIC")),(0,ue._registerComponent)(new ie.wA("installations-internal",Us,"PRIVATE"))})(),(0,ue.registerVersion)(fo,gi),(0,ue.registerVersion)(fo,gi,"esm2017");const Qn="@firebase/remote-config",Ur=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Bs{constructor(T,x,F,q){this.client=T,this.storage=x,this.storageCache=F,this.logger=q}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,q=F<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${q}.`),q}fetch(T){var x=this;return(0,L.Z)(function*(){const[F,q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(q&&x.isCachedDataFresh(T.cacheMaxAgeMillis,F))return q;T.eTag=q&&q.eTag;const Q=yield x.client.fetch(T),se=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Q.status&&se.push(x.storage.setLastSuccessfulFetchResponse(Q)),yield Promise.all(se),Q})()}}function o_(I=navigator){return I.languages&&I.languages[0]||I.language}class zc{constructor(T,x,F,q,Q,se){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=F,this.projectId=q,this.apiKey=Q,this.appId=se}fetch(T){var x=this;return(0,L.Z)(function*(){const[F,q]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},qe={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:q,app_id:x.appId,language_code:o_()},dt={method:"POST",headers:Ze,body:JSON.stringify(qe)},Nt=fetch(se,dt),Mt=new Promise((Nr,is)=>{T.signal.addEventListener(()=>{const So=new Error("The operation was aborted.");So.name="AbortError",is(So)})});let Qr;try{yield Promise.race([Nt,Mt]),Qr=yield Nt}catch(Nr){let is="fetch-client-network";throw"AbortError"===Nr?.name&&(is="fetch-timeout"),Ur.create(is,{originalErrorMessage:Nr?.message})}let Cn=Qr.status;const Ut=Qr.headers.get("ETag")||void 0;let Do,ha;if(200===Qr.status){let Nr;try{Nr=yield Qr.json()}catch(is){throw Ur.create("fetch-client-parse",{originalErrorMessage:is?.message})}Do=Nr.entries,ha=Nr.state}if("INSTANCE_STATE_UNSPECIFIED"===ha?Cn=500:"NO_CHANGE"===ha?Cn=304:("NO_TEMPLATE"===ha||"EMPTY_CONFIG"===ha)&&(Do={}),304!==Cn&&200!==Cn)throw Ur.create("fetch-status",{httpStatus:Cn});return{status:Cn,eTag:Ut,config:Do}})()}}class a_{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,L.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,F)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:F}){var q=this;return(0,L.Z)(function*(){yield function Up(I,T){return new Promise((x,F)=>{const q=Math.max(T-Date.now(),0),Q=setTimeout(x,q);I.addEventListener(()=>{clearTimeout(Q),F(Ur.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const Q=yield q.client.fetch(T);return yield q.storage.deleteThrottleMetadata(),Q}catch(Q){if(!function xh(I){if(!(I instanceof le.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Q))throw Q;const se={throttleEndTimeMillis:Date.now()+(0,le.$s)(F),backoffCount:F+1};return yield q.storage.setThrottleMetadata(se),q.attemptFetch(T,se)}})()}}class Ov{constructor(T,x,F,q,Q){this.app=T,this._client=x,this._storageCache=F,this._storage=q,this._logger=Q,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Iu(I,T){const x=I.target.error||void 0;return Ur.create(T,{originalErrorMessage:x&&x?.message})}const Kr="app_namespace_store";class Fv{constructor(T,x,F,q=function Va(){return new Promise((I,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{T(Iu(F,"storage-open"))},x.onsuccess=F=>{I(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Kr,{keyPath:"compositeKey"})}}catch(x){T(Ur.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=T,this.appName=x,this.namespace=F,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,L.Z)(function*(){const F=yield x.openDbPromise;return new Promise((q,Q)=>{const Ze=F.transaction([Kr],"readonly").objectStore(Kr),qe=x.createCompositeKey(T);try{const dt=Ze.get(qe);dt.onerror=Nt=>{Q(Iu(Nt,"storage-get"))},dt.onsuccess=Nt=>{const Mt=Nt.target.result;q(Mt?Mt.value:void 0)}}catch(dt){Q(Ur.create("storage-get",{originalErrorMessage:dt?.message}))}})})()}set(T,x){var F=this;return(0,L.Z)(function*(){const q=yield F.openDbPromise;return new Promise((Q,se)=>{const qe=q.transaction([Kr],"readwrite").objectStore(Kr),dt=F.createCompositeKey(T);try{const Nt=qe.put({compositeKey:dt,value:x});Nt.onerror=Mt=>{se(Iu(Mt,"storage-set"))},Nt.onsuccess=()=>{Q()}}catch(Nt){se(Ur.create("storage-set",{originalErrorMessage:Nt?.message}))}})})()}delete(T){var x=this;return(0,L.Z)(function*(){const F=yield x.openDbPromise;return new Promise((q,Q)=>{const Ze=F.transaction([Kr],"readwrite").objectStore(Kr),qe=x.createCompositeKey(T);try{const dt=Ze.delete(qe);dt.onerror=Nt=>{Q(Iu(Nt,"storage-delete"))},dt.onsuccess=()=>{q()}}catch(dt){Q(Ur.create("storage-delete",{originalErrorMessage:dt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Bp{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,L.Z)(function*(){const x=T.storage.getLastFetchStatus(),F=T.storage.getLastSuccessfulFetchTimestampMillis(),q=T.storage.getActiveConfig(),Q=yield x;Q&&(T.lastFetchStatus=Q);const se=yield F;se&&(T.lastSuccessfulFetchTimestampMillis=se);const Ze=yield q;Ze&&(T.activeConfig=Ze)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function qc(){return Il.apply(this,arguments)}function Il(){return(Il=(0,L.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function js(){(0,ue._registerComponent)(new ie.wA("remote-config",function I(T,{instanceIdentifier:x}){const F=T.getProvider("app").getImmediate(),q=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ur.create("registration-window");if(!(0,le.hl)())throw Ur.create("indexed-db-unavailable");const{projectId:Q,apiKey:se,appId:Ze}=F.options;if(!Q)throw Ur.create("registration-project-id");if(!se)throw Ur.create("registration-api-key");if(!Ze)throw Ur.create("registration-app-id");const qe=new Fv(Ze,F.name,x=x||"firebase"),dt=new Bp(qe),Nt=new we.Yd(Qn);Nt.logLevel=we.in.ERROR;const Mt=new zc(q,ue.SDK_VERSION,x,Q,se,Ze),Qr=new a_(Mt,qe),Cn=new Bs(Qr,qe,dt,Nt),Ut=new Ov(F,Cn,dt,qe,Nt);return function wi(I){const T=(0,le.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ut),Ut},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Qn,"0.4.4"),(0,ue.registerVersion)(Qn,"0.4.4","esm2017")}();const Mh=(I,T)=>T.some(x=>I instanceof x);let Wc,yo;const bu=new WeakMap,vo=new WeakMap,ai=new WeakMap,Zr=new WeakMap,Cl=new WeakMap;let $s={get(I,T,x){if(I instanceof IDBTransaction){if("done"===T)return vo.get(I);if("objectStoreNames"===T)return I.objectStoreNames||ai.get(I);if("store"===T)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Yr(I[T])},set:(I,T,x)=>(I[T]=x,!0),has:(I,T)=>I instanceof IDBTransaction&&("done"===T||"store"===T)||T in I};function kh(I){return"function"==typeof I?function Ph(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Cu(){return yo||(yo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...T){return I.apply(yr(this),T),Yr(bu.get(this))}:function(...T){return Yr(I.apply(yr(this),T))}:function(T,...x){const F=I.call(yr(this),T,...x);return ai.set(F,T.sort?T.sort():[T]),Yr(F)}}(I):(I instanceof IDBTransaction&&function Ba(I){if(vo.has(I))return;const T=new Promise((x,F)=>{const q=()=>{I.removeEventListener("complete",Q),I.removeEventListener("error",se),I.removeEventListener("abort",se)},Q=()=>{x(),q()},se=()=>{F(I.error||new DOMException("AbortError","AbortError")),q()};I.addEventListener("complete",Q),I.addEventListener("error",se),I.addEventListener("abort",se)});vo.set(I,T)}(I),Mh(I,function jp(){return Wc||(Wc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,$s):I)}function Yr(I){if(I instanceof IDBRequest)return function Ar(I){const T=new Promise((x,F)=>{const q=()=>{I.removeEventListener("success",Q),I.removeEventListener("error",se)},Q=()=>{x(Yr(I.result)),q()},se=()=>{F(I.error),q()};I.addEventListener("success",Q),I.addEventListener("error",se)});return T.then(x=>{x instanceof IDBCursor&&bu.set(x,I)}).catch(()=>{}),Cl.set(T,I),T}(I);if(Zr.has(I))return Zr.get(I);const T=kh(I);return T!==I&&(Zr.set(I,T),Cl.set(T,I)),T}const yr=I=>Cl.get(I);function Tu(I,T,{blocked:x,upgrade:F,blocking:q,terminated:Q}={}){const se=indexedDB.open(I,T),Ze=Yr(se);return F&&se.addEventListener("upgradeneeded",qe=>{F(Yr(se.result),qe.oldVersion,qe.newVersion,Yr(se.transaction))}),x&&se.addEventListener("blocked",()=>x()),Ze.then(qe=>{Q&&qe.addEventListener("close",()=>Q()),q&&qe.addEventListener("versionchange",()=>q())}).catch(()=>{}),Ze}function Hs(I,{blocked:T}={}){const x=indexedDB.deleteDatabase(I);return T&&x.addEventListener("blocked",()=>T()),Yr(x).then(()=>{})}const Kc=["get","getKey","getAll","getAllKeys","count"],wo=["put","add","delete","clear"],ja=new Map;function bl(I,T){if(!(I instanceof IDBDatabase)||T in I||"string"!=typeof T)return;if(ja.get(T))return ja.get(T);const x=T.replace(/FromIndex$/,""),F=T!==x,q=wo.includes(x);if(!(x in(F?IDBIndex:IDBObjectStore).prototype)||!q&&!Kc.includes(x))return;const Q=function(){var se=(0,L.Z)(function*(Ze,...qe){const dt=this.transaction(Ze,q?"readwrite":"readonly");let Nt=dt.store;return F&&(Nt=Nt.index(qe.shift())),(yield Promise.all([Nt[x](...qe),q&&dt.done]))[0]});return function(qe){return se.apply(this,arguments)}}();return ja.set(T,Q),Q}!function xr(I){$s=I($s)}(I=>({...I,get:(T,x,F)=>bl(T,x)||I.get(T,x,F),has:(T,x)=>!!bl(T,x)||I.has(T,x)}));const Lt="/firebase-messaging-sw.js",Tl="/firebase-cloud-messaging-push-scope",Oh="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Fh="https://fcmregistrations.googleapis.com/v1",Du="google.c.a.c_id",Lh="google.c.a.c_l",Su="google.c.a.ts",l_="google.c.a.e";var ge=(()=>{return(I=ge||(ge={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ge;var I})();function Bt(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dl(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),q=new Uint8Array(F.length);for(let Q=0;Q<F.length;++Q)q[Q]=F.charCodeAt(Q);return q}const Sl="fcm_token_details_db",vr=5,Ho="fcm_token_object_Store";function li(){return li=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Q=>Q.name).includes(Sl))return null;let T=null;return(yield Tu(Sl,vr,{upgrade:(F=(0,L.Z)(function*(q,Q,se,Ze){var qe;if(Q<2||!q.objectStoreNames.contains(Ho))return;const dt=Ze.objectStore(Ho),Nt=yield dt.index("fcmSenderId").get(I);if(yield dt.clear(),Nt)if(2===Q){const Mt=Nt;if(!Mt.auth||!Mt.p256dh||!Mt.endpoint)return;T={token:Mt.fcmToken,createTime:null!==(qe=Mt.createTime)&&void 0!==qe?qe:Date.now(),subscriptionOptions:{auth:Mt.auth,p256dh:Mt.p256dh,endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:"string"==typeof Mt.vapidKey?Mt.vapidKey:Bt(Mt.vapidKey)}}}else if(3===Q){const Mt=Nt;T={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Bt(Mt.auth),p256dh:Bt(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Bt(Mt.vapidKey)}}}else if(4===Q){const Mt=Nt;T={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Bt(Mt.auth),p256dh:Bt(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Bt(Mt.vapidKey)}}}}),function(Q,se,Ze,qe){return F.apply(this,arguments)})})).close(),yield Hs(Sl),yield Hs("fcm_vapid_details_db"),yield Hs("undefined"),function Vh(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var F}),li.apply(this,arguments)}const xu="firebase-messaging-database",u_=1,Gs="firebase-messaging-store";let Al=null;function lr(){return Al||(Al=Tu(xu,u_,{upgrade:(I,T)=>{0===T&&I.createObjectStore(Gs)}})),Al}function Mi(I){return Is.apply(this,arguments)}function Is(){return Is=(0,L.Z)(function*(I){const T=Ru(I),F=yield(yield lr()).transaction(Gs).objectStore(Gs).get(T);if(F)return F;{const q=yield function Au(I){return li.apply(this,arguments)}(I.appConfig.senderId);if(q)return yield Go(I,q),q}}),Is.apply(this,arguments)}function Go(I,T){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,L.Z)(function*(I,T){const x=Ru(I),q=(yield lr()).transaction(Gs,"readwrite");return yield q.objectStore(Gs).put(T,x),yield q.done,T})).apply(this,arguments)}function xl(){return(xl=(0,L.Z)(function*(I){const T=Ru(I),F=(yield lr()).transaction(Gs,"readwrite");yield F.objectStore(Gs).delete(T),yield F.done})).apply(this,arguments)}function Ru({appConfig:I}){return I.appId}const ur=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function $a(I,T){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,L.Z)(function*(I,T){const x=yield Yc(I),F=$h(T),q={method:"POST",headers:x,body:JSON.stringify(F)};let Q;try{Q=yield(yield fetch(Rl(I.appConfig),q)).json()}catch(se){throw ur.create("token-subscribe-failed",{errorInfo:se?.toString()})}if(Q.error)throw ur.create("token-subscribe-failed",{errorInfo:Q.error.message});if(!Q.token)throw ur.create("token-subscribe-no-token");return Q.token})).apply(this,arguments)}function jh(){return(jh=(0,L.Z)(function*(I,T){const x=yield Yc(I),F=$h(T.subscriptionOptions),q={method:"PATCH",headers:x,body:JSON.stringify(F)};let Q;try{Q=yield(yield fetch(`${Rl(I.appConfig)}/${T.token}`,q)).json()}catch(se){throw ur.create("token-update-failed",{errorInfo:se?.toString()})}if(Q.error)throw ur.create("token-update-failed",{errorInfo:Q.error.message});if(!Q.token)throw ur.create("token-update-no-token");return Q.token})).apply(this,arguments)}function Mu(I,T){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,L.Z)(function*(I,T){const F={method:"DELETE",headers:yield Yc(I)};try{const Q=yield(yield fetch(`${Rl(I.appConfig)}/${T}`,F)).json();if(Q.error)throw ur.create("token-unsubscribe-failed",{errorInfo:Q.error.message})}catch(q){throw ur.create("token-unsubscribe-failed",{errorInfo:q?.toString()})}})).apply(this,arguments)}function Rl({projectId:I}){return`${Fh}/projects/${I}/registrations`}function Yc(I){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,L.Z)(function*({appConfig:I,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function $h({p256dh:I,auth:T,endpoint:x,vapidKey:F}){const q={web:{endpoint:x,auth:T,p256dh:I}};return F!==Oh&&(q.web.applicationPubKey=F),q}const ku=6048e5;function Ou(){return Ou=(0,L.Z)(function*(I){const T=yield function Gp(I,T){return Hh.apply(this,arguments)}(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:Bt(T.getKey("auth")),p256dh:Bt(T.getKey("p256dh"))},F=yield Mi(I.firebaseDependencies);if(F){if(function d_(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}(F.subscriptionOptions,x))return Date.now()>=F.createTime+ku?function Pn(I,T){return Fu.apply(this,arguments)}(I,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Mu(I.firebaseDependencies,F.token)}catch(q){console.warn(q)}return Hp(I.firebaseDependencies,x)}return Hp(I.firebaseDependencies,x)}),Ou.apply(this,arguments)}function zs(){return zs=(0,L.Z)(function*(I){const T=yield Mi(I.firebaseDependencies);T&&(yield Mu(I.firebaseDependencies,T.token),yield function Bh(I){return xl.apply(this,arguments)}(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),zs.apply(this,arguments)}function Fu(){return Fu=(0,L.Z)(function*(I,T){try{const x=yield function Nu(I,T){return jh.apply(this,arguments)}(I.firebaseDependencies,T),F=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield Go(I.firebaseDependencies,F),x}catch(x){throw yield function Vr(I){return zs.apply(this,arguments)}(I),x}}),Fu.apply(this,arguments)}function Hp(I,T){return zo.apply(this,arguments)}function zo(){return(zo=(0,L.Z)(function*(I,T){const F={token:yield $a(I,T),createTime:Date.now(),subscriptionOptions:T};return yield Go(I,F),F.token})).apply(this,arguments)}function Hh(){return(Hh=(0,L.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Dl(T)})})).apply(this,arguments)}function Lu(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Qc(I,T){if(!T.notification)return;I.notification={};const x=T.notification.title;x&&(I.notification.title=x);const F=T.notification.body;F&&(I.notification.body=F);const q=T.notification.image;q&&(I.notification.image=q);const Q=T.notification.icon;Q&&(I.notification.icon=Q)}(T,I),function Jc(I,T){T.data&&(I.data=T.data)}(T,I),function Gh(I,T){var x,F,q,Q,se;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;I.fcmOptions={};const Ze=null!==(q=null===(F=T.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==q?q:null===(Q=T.notification)||void 0===Q?void 0:Q.click_action;Ze&&(I.fcmOptions.link=Ze);const qe=null===(se=T.fcmOptions)||void 0===se?void 0:se.analytics_label;qe&&(I.fcmOptions.analyticsLabel=qe)}(T,I),T}function Ha(I,T){const x=[];for(let F=0;F<I.length;F++)x.push(I.charAt(F)),F<T.length&&x.push(T.charAt(F));return x.join("")}function qs(I){return ur.create("missing-app-config-values",{valueName:I})}Ha("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ha("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class h_{constructor(T,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function Ga(I){if(!I||!I.options)throw qs("App Configuration Object");if(!I.name)throw qs("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const F of T)if(!x[F])throw qs(F);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:q,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function zp(I){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,L.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Lt,{scope:Tl}),I.swRegistration.update().catch(()=>{})}catch(T){throw ur.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Ml(){return(Ml=(0,L.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield zp(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw ur.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function Wo(){return(Wo=(0,L.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=Oh)})).apply(this,arguments)}function za(){return za=(0,L.Z)(function*(I,T){if(!navigator)throw ur.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ur.create("permission-blocked");return yield function qo(I,T){return Wo.apply(this,arguments)}(I,T?.vapidKey),yield function Lv(I,T){return Ml.apply(this,arguments)}(I,T?.serviceWorkerRegistration),function $p(I){return Ou.apply(this,arguments)}(I)}),za.apply(this,arguments)}function Ko(){return(Ko=(0,L.Z)(function*(I,T,x){const F=function Zo(I){switch(I){case ge.NOTIFICATION_CLICKED:return"notification_open";case ge.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Du],message_name:x[Lh],message_time:x[Su],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Yo(){return Yo=(0,L.Z)(function*(I,T){const x=T.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===ge.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Lu(x)):I.onMessageHandler.next(Lu(x)));const F=x.data;(function Xc(I){return"object"==typeof I&&!!I&&Du in I})(F)&&"1"===F[l_]&&(yield function ed(I,T,x){return Ko.apply(this,arguments)}(I,x.messageType,F))}),Yo.apply(this,arguments)}const Eo="@firebase/messaging",Qo=I=>{const T=new h_(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Bu(I,T){return Yo.apply(this,arguments)}(T,x)),T},ju=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:F=>function Vu(I,T){return za.apply(this,arguments)}(T,F)}};function qp(){return $u.apply(this,arguments)}function $u(){return($u=(0,L.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pl(){(0,ue._registerComponent)(new ie.wA("messaging",Qo,"PUBLIC")),(0,ue._registerComponent)(new ie.wA("messaging-internal",ju,"PRIVATE")),(0,ue.registerVersion)(Eo,"0.12.4"),(0,ue.registerVersion)(Eo,"0.12.4","esm2017")}();const In="analytics",Kh="firebase_id",Hu="origin",nd=6e4,Gu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zu="https://www.googletagmanager.com/gtag/js",wr=new we.Yd("@firebase/analytics"),Jn=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function rd(I){if(!I.startsWith(zu)){const T=Jn.create("invalid-gtag-resource",{gtagURL:I});return wr.warn(T.message),""}return I}function kl(I){return Promise.all(I.map(T=>T.catch(x=>x)))}function ea(){return(ea=(0,L.Z)(function*(I,T,x,F,q,Q){const se=F[q];try{if(se)yield T[se];else{const qe=(yield kl(x)).find(dt=>dt.measurementId===q);qe&&(yield T[qe.appId])}}catch(Ze){wr.error(Ze)}I("config",q,Q)})).apply(this,arguments)}function Fl(){return(Fl=(0,L.Z)(function*(I,T,x,F,q){try{let Q=[];if(q&&q.send_to){let se=q.send_to;Array.isArray(se)||(se=[se]);const Ze=yield kl(x);for(const qe of se){const dt=Ze.find(Mt=>Mt.measurementId===qe),Nt=dt&&T[dt.appId];if(!Nt){Q=[];break}Q.push(Nt)}}0===Q.length&&(Q=Object.values(T)),yield Promise.all(Q),I("event",F,q||{})}catch(Q){wr.error(Q)}})).apply(this,arguments)}const Ll=30,ra=new class na{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Zp(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function tn(){return(tn=(0,L.Z)(function*(I){var T;const{appId:x,apiKey:F}=I,q={method:"GET",headers:Zp(F)},Q=Gu.replace("{app-id}",x),se=yield fetch(Q,q);if(200!==se.status&&304!==se.status){let Ze="";try{const qe=yield se.json();null!==(T=qe.error)&&void 0!==T&&T.message&&(Ze=qe.error.message)}catch{}throw Jn.create("config-fetch-failed",{httpStatus:se.status,responseMessage:Ze})}return se.json()})).apply(this,arguments)}function Ul(){return(Ul=(0,L.Z)(function*(I,T=ra,x){const{appId:F,apiKey:q,measurementId:Q}=I.options;if(!F)throw Jn.create("no-app-id");if(!q){if(Q)return{measurementId:Q,appId:F};throw Jn.create("no-api-key")}const se=T.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new Vv;return setTimeout((0,L.Z)(function*(){Ze.abort()}),void 0!==x?x:nd),sd({appId:F,apiKey:q,measurementId:Q},se,Ze,T)})).apply(this,arguments)}function sd(I,T,x){return od.apply(this,arguments)}function od(){return od=(0,L.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:x},F,q=ra){var Q;const{appId:se,measurementId:Ze}=I;try{yield function Uv(I,T){return new Promise((x,F)=>{const q=Math.max(T-Date.now(),0),Q=setTimeout(x,q);I.addEventListener(()=>{clearTimeout(Q),F(Jn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(F,T)}catch(qe){if(Ze)return wr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${qe?.message}]`),{appId:se,measurementId:Ze};throw qe}try{const qe=yield function Zh(I){return tn.apply(this,arguments)}(I);return q.deleteThrottleMetadata(se),qe}catch(qe){const dt=qe;if(!function Yp(I){if(!(I instanceof le.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(dt)){if(q.deleteThrottleMetadata(se),Ze)return wr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${dt?.message}]`),{appId:se,measurementId:Ze};throw qe}const Nt=503===Number(null===(Q=dt?.customData)||void 0===Q?void 0:Q.httpStatus)?(0,le.$s)(x,q.intervalMillis,Ll):(0,le.$s)(x,q.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+Nt,backoffCount:x+1};return q.setThrottleMetadata(se,Mt),wr.debug(`Calling attemptFetch again in ${Nt} millis`),sd(I,Mt,F,q)}}),od.apply(this,arguments)}class Vv{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let ia,ld;function Qp(){return(Qp=(0,L.Z)(function*(I,T,x,F,q){if(q&&q.global)I("event",x,F);else{const Q=yield T;I("event",x,Object.assign(Object.assign({},F),{send_to:Q}))}})).apply(this,arguments)}function ln(){return(ln=(0,L.Z)(function*(){if(!(0,le.hl)())return wr.warn(Jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(I){return wr.warn(Jn.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function lt(){return lt=(0,L.Z)(function*(I,T,x,F,q,Q,se){var Ze;const qe=function f_(I){return Ul.apply(this,arguments)}(I);qe.then(Cn=>{x[Cn.measurementId]=Cn.appId,I.options.measurementId&&Cn.measurementId!==I.options.measurementId&&wr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Cn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Cn=>wr.error(Cn)),T.push(qe);const dt=function ui(){return ln.apply(this,arguments)}().then(Cn=>{if(Cn)return F.getId()}),[Nt,Mt]=yield Promise.all([qe,dt]);(function ta(I){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(zu)&&x.src.includes(I))return x;return null})(Q)||function Ks(I,T){const x=function Ol(I,T){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(I,T)),x}("firebase-js-sdk-policy",{createScriptURL:rd}),F=document.createElement("script"),q=`${zu}?l=${I}&id=${T}`;F.src=x?x?.createScriptURL(q):q,F.async=!0,document.head.appendChild(F)}(Q,Nt.measurementId),ld&&(q("consent","default",ld),function Yu(I){ld=I}(void 0)),q("js",new Date);const Qr=null!==(Ze=se?.config)&&void 0!==Ze?Ze:{};return Qr[Hu]="firebase",Qr.update=!0,null!=Mt&&(Qr[Kh]=Mt),q("config",Nt.measurementId,Qr),ia&&(q("set",ia),function Bl(I){ia=I}(void 0)),Nt.measurementId}),lt.apply(this,arguments)}class jn{constructor(T){this.app=T}_delete(){return delete $n[this.app.options.appId],Promise.resolve()}}let $n={},Yh=[];const jl={};let ud,Oi,di="dataLayer",Qu="gtag",Za=!1;function Zs(I,T,x){!function Hl(){const I=[];if((0,le.ru)()&&I.push("This is a browser extension environment."),(0,le.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((F,q)=>`(${q+1}) ${F}`).join(" "),x=Jn.create("invalid-analytics-context",{errorInfo:T});wr.warn(x.message)}}();const F=I.options.appId;if(!F)throw Jn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Jn.create("no-api-key");wr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$n[F])throw Jn.create("already-exists",{id:F});if(!Za){!function Wp(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(di);const{wrappedGtag:Q,gtagCore:se}=function Io(I,T,x,F,q){let Q=function(...se){window[F].push(arguments)};return window[q]&&"function"==typeof window[q]&&(Q=window[q]),window[q]=function Ka(I,T,x,F){function Q(){return Q=(0,L.Z)(function*(se,...Ze){try{if("event"===se){const[qe,dt]=Ze;yield function id(I,T,x,F,q){return Fl.apply(this,arguments)}(I,T,x,qe,dt)}else if("config"===se){const[qe,dt]=Ze;yield function qu(I,T,x,F,q,Q){return ea.apply(this,arguments)}(I,T,x,F,qe,dt)}else if("consent"===se){const[qe]=Ze;I("consent","update",qe)}else if("get"===se){const[qe,dt,Nt]=Ze;I("get",qe,dt,Nt)}else if("set"===se){const[qe]=Ze;I("set",qe)}else I(se,...Ze)}catch(qe){wr.error(qe)}}),Q.apply(this,arguments)}return function q(se){return Q.apply(this,arguments)}}(Q,I,T,x),{gtagCore:Q,wrappedGtag:window[q]}}($n,Yh,jl,di,Qu);Oi=Q,ud=se,Za=!0}return $n[F]=function ci(I,T,x,F,q,Q,se){return lt.apply(this,arguments)}(I,Yh,jl,T,ud,di,x),new jn(I)}function Ju(){return Co.apply(this,arguments)}function Co(){return(Co=(0,L.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const la="@firebase/analytics";!function Xp(){(0,ue._registerComponent)(new ie.wA(In,(T,{options:x})=>Zs(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ue._registerComponent)(new ie.wA("analytics-internal",function I(T){try{const x=T.getProvider(In).getImmediate();return{logEvent:(F,q,Q)=>function Qh(I,T,x,F){I=(0,le.m9)(I),function Bv(I,T,x,F,q){return Qp.apply(this,arguments)}(Oi,$n[I.app.options.appId],T,x,F).catch(q=>wr.error(q))}(x,F,q,Q)}}catch(x){throw Jn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ue.registerVersion)(la,"0.10.0"),(0,ue.registerVersion)(la,"0.10.0","esm2017")}();var Gl=U(4408),es=U(7565);const Ir=new class ql extends es.v{}(class zl extends Gl.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(T,x,F):(T.flush(this),0)}});var pd=U(4986),Hn=U(8505),To=U(5363),ua=U(9468);const Ii=new c.GfV("7.6.1"),er="__angularfire_symbol__analyticsIsSupportedValue",ca="__angularfire_symbol__analyticsIsSupported",gd="__angularfire_symbol__remoteConfigIsSupportedValue",Ya="__angularfire_symbol__remoteConfigIsSupported",ts="__angularfire_symbol__messagingIsSupportedValue",Ys="__angularfire_symbol__messagingIsSupported";function tc(I,T,x){if(T){if(1===T.length)return T[0];const Q=T.filter(se=>se.app===x);if(1===Q.length)return Q[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[ca]||(globalThis[ca]=Ju().then(I=>globalThis[er]=I).catch(()=>globalThis[er]=!1)),globalThis[Ys]||(globalThis[Ys]=qp().then(I=>globalThis[ts]=I).catch(()=>globalThis[ts]=!1)),globalThis[Ya]||(globalThis[Ya]=qc().then(I=>globalThis[gd]=I).catch(()=>globalThis[gd]=!1));const nc=(I,T)=>{const x=T?[T]:(0,ee.C6)(),F=[];return x.forEach(q=>{q.container.getProvider(I).instances.forEach(se=>{F.includes(se)||F.push(se)})}),F};function Qs(){}class md{constructor(T,x=Ir){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,F){const q=this.zone;return this.delegate.schedule(function(se){q.runGuarded(()=>{T.apply(this,[se])})},x,F)}}class Wl{constructor(T){this.zone=T,this.task=null}call(T,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qs,{},Qs,Qs)),x.pipe((0,Hn.b)({next:F,complete:F,error:F})).subscribe(T).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let bt=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new md(Zone.current)),this.insideAngular=x.run(()=>new md(Zone.current,pd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(c.LFG(c.R0b))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ns(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Xh(I){return I.pipe((0,To.Q)(ns().outsideAngular))}function rs(I){return ns(),function tf(I){return function(x){return(x=x.lift(new Wl(I.ngZone))).pipe((0,ua.R)(I.outsideAngular),(0,To.Q)(I.insideAngular))}}(ns())(I)}},2090:(Et,xe,U)=>{U.d(xe,{$s:()=>Ki,BH:()=>Te,DV:()=>zr,Dv:()=>_r,G6:()=>_s,GJ:()=>mr,L:()=>me,LL:()=>De,Pz:()=>be,Sg:()=>Ke,UG:()=>ae,UI:()=>Fr,US:()=>ie,Wj:()=>ii,Wl:()=>mt,Yr:()=>po,ZB:()=>Y,ZR:()=>Ae,aH:()=>Fe,b$:()=>Kt,cI:()=>Sn,dS:()=>Ls,eu:()=>fe,g5:()=>L,gK:()=>qr,gQ:()=>an,h$:()=>Ce,hl:()=>de,hu:()=>ee,jU:()=>At,lb:()=>mn,m9:()=>si,ne:()=>cn,p$:()=>G,pd:()=>ys,r3:()=>zn,ru:()=>nt,tV:()=>z,uI:()=>ot,ug:()=>Jt,vZ:()=>vt,w1:()=>fo,w9:()=>Gn,xO:()=>Lr,xb:()=>mi,z$:()=>Ue,zI:()=>ye,zd:()=>ri});const c={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ee=function(H,j){if(!H)throw L(j)},L=function(H){return new Error("Firebase Database ("+c.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},ue=function(H){const j=[];let K=0;for(let Ee=0;Ee<H.length;Ee++){let ne=H.charCodeAt(Ee);ne<128?j[K++]=ne:ne<2048?(j[K++]=ne>>6|192,j[K++]=63&ne|128):55296==(64512&ne)&&Ee+1<H.length&&56320==(64512&H.charCodeAt(Ee+1))?(ne=65536+((1023&ne)<<10)+(1023&H.charCodeAt(++Ee)),j[K++]=ne>>18|240,j[K++]=ne>>12&63|128,j[K++]=ne>>6&63|128,j[K++]=63&ne|128):(j[K++]=ne>>12|224,j[K++]=ne>>6&63|128,j[K++]=63&ne|128)}return j},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,j){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let ne=0;ne<H.length;ne+=3){const Ve=H[ne],xt=ne+1<H.length,rn=xt?H[ne+1]:0,Yn=ne+2<H.length,Mn=Yn?H[ne+2]:0;let Wr=(15&rn)<<2|Mn>>6,Yi=63&Mn;Yn||(Yi=64,xt||(Wr=64)),Ee.push(K[Ve>>2],K[(3&Ve)<<4|rn>>4],K[Wr],K[Yi])}return Ee.join("")},encodeString(H,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(H):this.encodeByteArray(ue(H),j)},decodeString(H,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(H):function(H){const j=[];let K=0,Ee=0;for(;K<H.length;){const ne=H[K++];if(ne<128)j[Ee++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const Ve=H[K++];j[Ee++]=String.fromCharCode((31&ne)<<6|63&Ve)}else if(ne>239&&ne<365){const Yn=((7&ne)<<18|(63&H[K++])<<12|(63&H[K++])<<6|63&H[K++])-65536;j[Ee++]=String.fromCharCode(55296+(Yn>>10)),j[Ee++]=String.fromCharCode(56320+(1023&Yn))}else{const Ve=H[K++],xt=H[K++];j[Ee++]=String.fromCharCode((15&ne)<<12|(63&Ve)<<6|63&xt)}}return j.join("")}(this.decodeStringToByteArray(H,j))},decodeStringToByteArray(H,j){this.init_();const K=j?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let ne=0;ne<H.length;){const Ve=K[H.charAt(ne++)],rn=ne<H.length?K[H.charAt(ne)]:0;++ne;const Mn=ne<H.length?K[H.charAt(ne)]:64;++ne;const Yt=ne<H.length?K[H.charAt(ne)]:64;if(++ne,null==Ve||null==rn||null==Mn||null==Yt)throw new we;Ee.push(Ve<<2|rn>>4),64!==Mn&&(Ee.push(rn<<4&240|Mn>>2),64!==Yt&&Ee.push(Mn<<6&192|Yt))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ce=function(H){const j=ue(H);return ie.encodeByteArray(j,!0)},me=function(H){return Ce(H).replace(/\./g,"")},z=function(H){try{return ie.decodeString(H,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function G(H){return Y(void 0,H)}function Y(H,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return j}for(const K in j)!j.hasOwnProperty(K)||!ze(K)||(H[K]=Y(H[K],j[K]));return H}function ze(H){return"__proto__"!==H}const ke=()=>{try{return function Se(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=H&&z(H[1]);return j&&JSON.parse(j)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},Fe=()=>{var H;return null===(H=ke())||void 0===H?void 0:H.config},be=H=>{var j;return null===(j=ke())||void 0===j?void 0:j[`_${H}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,K)=>{this.resolve=j,this.reject=K})}wrapCallback(j){return(K,Ee)=>{K?this.reject(K):this.resolve(Ee),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(K):j(K,Ee))}}}function Ke(H,j){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=j||"demo-project",ne=H.iat||0,Ve=H.sub||H.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xt=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:ne,exp:ne+3600,auth_time:ne,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},H);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(xt)),""].join(".")}function Ue(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ot(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function ae(){var H;const j=null===(H=ke())||void 0===H?void 0:H.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function At(){return"object"==typeof self&&self.self===self}function nt(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function fo(){const H=Ue();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function po(){return!0===c.NODE_CLIENT||!0===c.NODE_ADMIN}function _s(){return!ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function de(){try{return"object"==typeof indexedDB}catch{return!1}}function fe(){return new Promise((H,j)=>{try{let K=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(Ee);ne.onsuccess=()=>{ne.result.close(),K||self.indexedDB.deleteDatabase(Ee),H(!0)},ne.onupgradeneeded=()=>{K=!1},ne.onerror=()=>{var Ve;j((null===(Ve=ne.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(K){j(K)}})}function ye(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ae extends Error{constructor(j,K,Ee){super(K),this.code=j,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,De.prototype.create)}}class De{constructor(j,K,Ee){this.service=j,this.serviceName=K,this.errors=Ee}create(j,...K){const Ee=K[0]||{},ne=`${this.service}/${j}`,Ve=this.errors[j],xt=Ve?function ft(H,j){return H.replace(pt,(K,Ee)=>{const ne=j[Ee];return null!=ne?String(ne):`<${Ee}?>`})}(Ve,Ee):"Error";return new Ae(ne,`${this.serviceName}: ${xt} (${ne}).`,Ee)}}const pt=/\{\$([^}]+)}/g;function Sn(H){return JSON.parse(H)}function mt(H){return JSON.stringify(H)}const Qt=function(H){let j={},K={},Ee={},ne="";try{const Ve=H.split(".");j=Sn(z(Ve[0])||""),K=Sn(z(Ve[1])||""),ne=Ve[2],Ee=K.d||{},delete K.d}catch{}return{header:j,claims:K,data:Ee,signature:ne}},Gn=function(H){const K=Qt(H).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},mr=function(H){const j=Qt(H).claims;return"object"==typeof j&&!0===j.admin};function zn(H,j){return Object.prototype.hasOwnProperty.call(H,j)}function zr(H,j){if(Object.prototype.hasOwnProperty.call(H,j))return H[j]}function mi(H){for(const j in H)if(Object.prototype.hasOwnProperty.call(H,j))return!1;return!0}function Fr(H,j,K){const Ee={};for(const ne in H)Object.prototype.hasOwnProperty.call(H,ne)&&(Ee[ne]=j.call(K,H[ne],ne,H));return Ee}function vt(H,j){if(H===j)return!0;const K=Object.keys(H),Ee=Object.keys(j);for(const ne of K){if(!Ee.includes(ne))return!1;const Ve=H[ne],xt=j[ne];if(_i(Ve)&&_i(xt)){if(!vt(Ve,xt))return!1}else if(Ve!==xt)return!1}for(const ne of Ee)if(!K.includes(ne))return!1;return!0}function _i(H){return null!==H&&"object"==typeof H}function Lr(H){const j=[];for(const[K,Ee]of Object.entries(H))Array.isArray(Ee)?Ee.forEach(ne=>{j.push(encodeURIComponent(K)+"="+encodeURIComponent(ne))}):j.push(encodeURIComponent(K)+"="+encodeURIComponent(Ee));return j.length?"&"+j.join("&"):""}function ri(H){const j={};return H.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[ne,Ve]=Ee.split("=");j[decodeURIComponent(ne)]=decodeURIComponent(Ve)}}),j}function ys(H){const j=H.indexOf("?");if(!j)return"";const K=H.indexOf("#",j);return H.substring(j,K>0?K:void 0)}class an{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,K){K||(K=0);const Ee=this.W_;if("string"==typeof j)for(let Yt=0;Yt<16;Yt++)Ee[Yt]=j.charCodeAt(K)<<24|j.charCodeAt(K+1)<<16|j.charCodeAt(K+2)<<8|j.charCodeAt(K+3),K+=4;else for(let Yt=0;Yt<16;Yt++)Ee[Yt]=j[K]<<24|j[K+1]<<16|j[K+2]<<8|j[K+3],K+=4;for(let Yt=16;Yt<80;Yt++){const Wr=Ee[Yt-3]^Ee[Yt-8]^Ee[Yt-14]^Ee[Yt-16];Ee[Yt]=4294967295&(Wr<<1|Wr>>>31)}let Mn,gn,ne=this.chain_[0],Ve=this.chain_[1],xt=this.chain_[2],rn=this.chain_[3],Yn=this.chain_[4];for(let Yt=0;Yt<80;Yt++){Yt<40?Yt<20?(Mn=rn^Ve&(xt^rn),gn=1518500249):(Mn=Ve^xt^rn,gn=1859775393):Yt<60?(Mn=Ve&xt|rn&(Ve|xt),gn=2400959708):(Mn=Ve^xt^rn,gn=3395469782);const Wr=(ne<<5|ne>>>27)+Mn+Yn+gn+Ee[Yt]&4294967295;Yn=rn,rn=xt,xt=4294967295&(Ve<<30|Ve>>>2),Ve=ne,ne=Wr}this.chain_[0]=this.chain_[0]+ne&4294967295,this.chain_[1]=this.chain_[1]+Ve&4294967295,this.chain_[2]=this.chain_[2]+xt&4294967295,this.chain_[3]=this.chain_[3]+rn&4294967295,this.chain_[4]=this.chain_[4]+Yn&4294967295}update(j,K){if(null==j)return;void 0===K&&(K=j.length);const Ee=K-this.blockSize;let ne=0;const Ve=this.buf_;let xt=this.inbuf_;for(;ne<K;){if(0===xt)for(;ne<=Ee;)this.compress_(j,ne),ne+=this.blockSize;if("string"==typeof j){for(;ne<K;)if(Ve[xt]=j.charCodeAt(ne),++xt,++ne,xt===this.blockSize){this.compress_(Ve),xt=0;break}}else for(;ne<K;)if(Ve[xt]=j[ne],++xt,++ne,xt===this.blockSize){this.compress_(Ve),xt=0;break}}this.inbuf_=xt,this.total_+=K}digest(){const j=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ne=this.blockSize-1;ne>=56;ne--)this.buf_[ne]=255&K,K/=256;this.compress_(this.buf_);let Ee=0;for(let ne=0;ne<5;ne++)for(let Ve=24;Ve>=0;Ve-=8)j[Ee]=this.chain_[ne]>>Ve&255,++Ee;return j}}function cn(H,j){const K=new at(H,j);return K.subscribe.bind(K)}class at{constructor(j,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{j(this)}).catch(Ee=>{this.error(Ee)})}next(j){this.forEachObserver(K=>{K.next(j)})}error(j){this.forEachObserver(K=>{K.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,K,Ee){let ne;if(void 0===j&&void 0===K&&void 0===Ee)throw new Error("Missing Observer.");ne=function Si(H,j){if("object"!=typeof H||null===H)return!1;for(const K of j)if(K in H&&"function"==typeof H[K])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:K,complete:Ee},void 0===ne.next&&(ne.next=yi),void 0===ne.error&&(ne.error=yi),void 0===ne.complete&&(ne.complete=yi);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),Ve}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,j)}sendOne(j,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{K(this.observers[j])}catch(Ee){typeof console<"u"&&console.error&&console.error(Ee)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yi(){}const _r=function(H,j,K,Ee){let ne;if(Ee<j?ne="at least "+j:Ee>K&&(ne=0===K?"none":"no more than "+K),ne)throw new Error(H+" failed: Was called with "+Ee+(1===Ee?" argument.":" arguments.")+" Expects "+ne+".")};function qr(H,j){return`${H} failed: ${j} argument `}function ii(H,j,K,Ee){if((!Ee||K)&&"function"!=typeof K)throw new Error(qr(H,j)+"must be a valid function.")}function mn(H,j,K,Ee){if((!Ee||K)&&("object"!=typeof K||null===K))throw new Error(qr(H,j)+"must be a valid context object.")}const Ls=function(H){const j=[];let K=0;for(let Ee=0;Ee<H.length;Ee++){let ne=H.charCodeAt(Ee);if(ne>=55296&&ne<=56319){const Ve=ne-55296;Ee++,ee(Ee<H.length,"Surrogate pair missing trail surrogate."),ne=65536+(Ve<<10)+(H.charCodeAt(Ee)-56320)}ne<128?j[K++]=ne:ne<2048?(j[K++]=ne>>6|192,j[K++]=63&ne|128):ne<65536?(j[K++]=ne>>12|224,j[K++]=ne>>6&63|128,j[K++]=63&ne|128):(j[K++]=ne>>18|240,j[K++]=ne>>12&63|128,j[K++]=ne>>6&63|128,j[K++]=63&ne|128)}return j},Jt=function(H){let j=0;for(let K=0;K<H.length;K++){const Ee=H.charCodeAt(K);Ee<128?j++:Ee<2048?j+=2:Ee>=55296&&Ee<=56319?(j+=4,K++):j+=3}return j},dn=1e3,Ai=2,qn=144e5,sr=.5;function Ki(H,j=dn,K=Ai){const Ee=j*Math.pow(K,H),ne=Math.round(sr*Ee*(Math.random()-.5)*2);return Math.min(qn,Ee+ne)}function si(H){return H&&H._delegate?H._delegate:H}},6767:(Et,xe,U)=>{var c=U(4650);let ee=null;function L(){return ee}class le{}const ie=new c.OlP("DocumentToken");let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ce(){return(0,c.LFG)(z)}()},providedIn:"platform"}),n})();const me=new c.OlP("Location Initialized");let z=(()=>{class n extends we{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){G()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){G()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Y(){return new z((0,c.LFG)(ie))}()},providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function ze(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Qe(n){return n&&"?"!==n[0]?"?"+n:n}let ut=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(ke)},providedIn:"root"}),n})();const _e=new c.OlP("appBaseHref");let ke=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ze(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const l=this.prepareExternalUrl(i+Qe(s));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){const l=this.prepareExternalUrl(i+Qe(s));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(we),c.LFG(_e,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ze(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let l=this.prepareExternalUrl(i+Qe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){let l=this.prepareExternalUrl(i+Qe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(we),c.LFG(_e,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ge=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ke(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Se(Te(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qe(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Qe,n.joinWithSlash=ze,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(c.LFG(ut))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Fe(){return new Ge((0,c.LFG)(ut))}()},providedIn:"root"}),n})();function Te(n){return n.replace(/\/index.html$/,"")}var ot=(()=>((ot=ot||{})[ot.Decimal=0]="Decimal",ot[ot.Percent=1]="Percent",ot[ot.Currency=2]="Currency",ot[ot.Scientific=3]="Scientific",ot))(),ct=(()=>((ct=ct||{})[ct.Decimal=0]="Decimal",ct[ct.Group=1]="Group",ct[ct.List=2]="List",ct[ct.PercentSign=3]="PercentSign",ct[ct.PlusSign=4]="PlusSign",ct[ct.MinusSign=5]="MinusSign",ct[ct.Exponential=6]="Exponential",ct[ct.SuperscriptingExponent=7]="SuperscriptingExponent",ct[ct.PerMille=8]="PerMille",ct[ct.Infinity=9]="Infinity",ct[ct.NaN=10]="NaN",ct[ct.TimeSeparator=11]="TimeSeparator",ct[ct.CurrencyDecimal=12]="CurrencyDecimal",ct[ct.CurrencyGroup=13]="CurrencyGroup",ct))();function pt(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ct.CurrencyDecimal)return t[c.wAp.NumberSymbols][ct.Decimal];if(e===ct.CurrencyGroup)return t[c.wAp.NumberSymbols][ct.Group]}return r}const rn=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Yn=22,Mn=".",gn="0",Yt=";",Wr=",",Yi="#";function sn(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class ar{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let go=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ar(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,l),Wn(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Wn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Wn(n,e){n.context.$implicit=e.item}let oi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ht,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ht{constructor(){this.$implicit=null,this.ngIf=null}}function vl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}let mo=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),l=-1===i.indexOf("-")?void 0:c.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();let Up=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Eu(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function _t(n,e,t){return function pe(n,e,t,r,i,s,l=!1){let h="",g=!1;if(isFinite(n)){let y=function wt(n){let r,i,s,l,h,e=Math.abs(n)+"",t=0;for((i=e.indexOf(Mn))>-1&&(e=e.replace(Mn,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===gn;s++);if(s===(h=e.length))r=[0],i=1;else{for(h--;e.charAt(h)===gn;)h--;for(i-=s,r=[],l=0;s<=h;s++,l++)r[l]=Number(e.charAt(s))}return i>Yn&&(r=r.splice(0,Yn-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(y=function zt(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let C=e.minInt,S=e.minFrac,N=e.maxFrac;if(s){const He=s.match(rn);if(null===He)throw new Error(`${s} is not a valid digit info`);const je=He[1],Ye=He[3],St=He[5];null!=je&&(C=sn(je)),null!=Ye&&(S=sn(Ye)),null!=St?N=sn(St):null!=Ye&&S>N&&(N=S)}!function un(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let l=s+n.integerLen,h=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let S=l;S<r.length;S++)r[S]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=s+1),r[0]=0;for(let S=1;S<l;S++)r[S]=0}if(h>=5)if(l-1<0){for(let S=0;S>l;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,s);i++)r.push(0);let g=0!==s;const y=e+n.integerLen,C=r.reduceRight(function(S,N,k,B){return B[k]=(N+=S)<10?N:N-10,g&&(0===B[k]&&k>=y?B.pop():g=!1),N>=10?1:0},0);C&&(r.unshift(C),n.integerLen++)}(y,S,N);let k=y.digits,B=y.integerLen;const Z=y.exponent;let J=[];for(g=k.every(He=>!He);B<C;B++)k.unshift(0);for(;B<0;B++)k.unshift(0);B>0?J=k.splice(B,k.length):(J=k,k=[0]);const Me=[];for(k.length>=e.lgSize&&Me.unshift(k.splice(-e.lgSize,k.length).join(""));k.length>e.gSize;)Me.unshift(k.splice(-e.gSize,k.length).join(""));k.length&&Me.unshift(k.join("")),h=Me.join(pt(t,r)),J.length&&(h+=pt(t,i)+J.join("")),Z&&(h+=pt(t,ct.Exponential)+"+"+Z)}else h=pt(t,ct.Infinity);return h=n<0&&!g?e.negPre+h+e.negSuf:e.posPre+h+e.posSuf,h}(n,function Dt(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(Yt),i=r[0],s=r[1],l=-1!==i.indexOf(Mn)?i.split(Mn):[i.substring(0,i.lastIndexOf(gn)+1),i.substring(i.lastIndexOf(gn)+1)],h=l[0],g=l[1]||"";t.posPre=h.substring(0,h.indexOf(Yi));for(let C=0;C<g.length;C++){const S=g.charAt(C);S===gn?t.minFrac=t.maxFrac=C+1:S===Yi?t.maxFrac=C+1:t.posSuf+=S}const y=h.split(Wr);if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,s){const C=i.length-t.posPre.length-t.posSuf.length,S=s.indexOf(Yi);t.negPre=s.substring(0,S).replace(/'/g,""),t.negSuf=s.slice(S+C).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Sn(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,ot.Decimal),pt(e,ct.MinusSign)),e,ct.Group,ct.Decimal,t)}(function Rh(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw function vi(n,e){return new c.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16))},n.\u0275pipe=c.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let Kr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Nh="server";function js(n){return n===Nh}let Il=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Mh((0,c.LFG)(ie),window)}),n})();class Mh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function yo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Wc(this.window.history)||Wc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Wc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Gh extends le{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Xc extends Gh{static makeCurrent(){!function ue(n){ee||(ee=n)}(new Xc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ga(){return Ha=Ha||document.querySelector("base"),Ha?Ha.getAttribute("href"):null}();return null==t?null:function h_(n){qs=qs||document.createElement("a"),qs.setAttribute("href",n);const e=qs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ha=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Oa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let qs,Ha=null;const zp=new c.OlP("TRANSITION_ID"),Lv=[{provide:c.ip1,useFactory:function Uu(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[zp,ie,c.zs3],multi:!0}];let qo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Wo=new c.OlP("EventManagerPlugins");let Vu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Wo),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class za{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ed=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let s=i.get(t)??0;return s+=r,s>0?i.set(t,s):i.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ko=(()=>{class n extends ed{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(s=>s.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Zo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bu=/%COMP%/g,Pl=new c.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function qh(n,e){return e.flat(100).map(t=>t.replace(Bu,n))}function Jo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ki=(()=>{class n{constructor(t,r,i,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new Ws(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Kh?i.applyToHost(t):i instanceof In&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const l=this.eventManager,h=this.sharedStylesHost,g=this.removeStylesOnCompDestory;switch(r.encapsulation){case c.ifc.Emulated:s=new Kh(l,h,r,this.appId,g);break;case c.ifc.ShadowDom:return new Wh(l,h,t,r);default:s=new In(l,h,r,g)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vu),c.LFG(Ko),c.LFG(c.AFp),c.LFG(Pl))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Ws{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Zo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Wa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Wa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Zo[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Zo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Jo(r)):this.eventManager.addEventListener(e,t,Jo(r))}}function Wa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Wh extends Ws{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=qh(i.id,i.styles);for(const l of s){const h=document.createElement("style");h.textContent=l,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class In extends Ws{constructor(e,t,r,i,s=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=qh(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Kh extends In{constructor(e,t,r,i,s){const l=i+"-"+r.id;super(e,t,r,s,l),this.contentAttr=function qp(n){return"_ngcontent-%COMP%".replace(Bu,n)}(l),this.hostAttr=function $u(n){return"_nghost-%COMP%".replace(Bu,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Hu=(()=>{class n extends za{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const nd=["alt","control","meta","shift"],Gu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wr=(()=>{class n extends za{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),l=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),nd.forEach(y=>{const C=r.indexOf(y);C>-1&&(r.splice(C,1),l+=y+".")}),l+=s,0!=r.length||0===s.length)return null;const g={};return g.domEventName=i,g.fullKey=l,g}static matchEventFullKeyCode(t,r){let i=Gu[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),nd.forEach(l=>{l!==i&&(0,zu[l])(t)&&(s+=l+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const id=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Ks(){Xc.makeCurrent()},multi:!0},{provide:ie,useFactory:function qu(){return(0,c.RDi)(document),document},deps:[]}]),Fl=new c.OlP(""),Ka=[{provide:c.rWj,useClass:class Ml{addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const h=function(g){l=l||g,s--,0==s&&r(l)};i.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],Io=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Wp(){return new c.qLn},deps:[]},{provide:Wo,useClass:Hu,multi:!0,deps:[ie,c.R0b,c.Lbi]},{provide:Wo,useClass:wr,multi:!0,deps:[ie]},{provide:ki,useClass:ki,deps:[Vu,Ko,c.AFp,Pl]},{provide:c.FYo,useExisting:ki},{provide:ed,useExisting:Ko},{provide:Ko,useClass:Ko,deps:[ie]},{provide:Vu,useClass:Vu,deps:[Wo,c.R0b]},{provide:class Cu{},useClass:qo,deps:[]},[]];let ta=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:zp,useExisting:c.AFp},Lv]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Fl,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...Io,...Ka],imports:[Kr,c.hGG]}),n})(),Zp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ra(){return new Zp((0,c.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let ld=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(Bl),r},providedIn:"root"}),n})(),Bl=(()=>{class n extends ld{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${c.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${c.JZr})`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Yu(n){return new Bl(n.get(ie))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var ln=U(8996),ci=U(7669);function lt(...n){const e=(0,ci.yG)(n);return(0,ln.D)(n,e)}var jn=U(7579);class $n extends jn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const jl=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var di=U(9751);const{isArray:Qu}=Array,{getPrototypeOf:ud,prototype:Oi,keys:Za}=Object;function $l(n){if(1===n.length){const e=n[0];if(Qu(e))return{args:e,keys:null};if(function Hl(n){return n&&"object"==typeof n&&ud(n)===Oi}(e)){const t=Za(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Zs=U(4671),yt=U(4004);const{isArray:cd}=Array;function Co(n){return(0,yt.U)(e=>function Ju(n,e){return cd(e)?n(...e):n(e)}(n,e))}function bo(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Xn=U(5403),dd=U(9672);function hd(...n){const e=(0,ci.yG)(n),t=(0,ci.jO)(n),{args:r,keys:i}=$l(n);if(0===r.length)return(0,ln.D)([],e);const s=new di.y(function oa(n,e,t=Zs.y){return r=>{aa(e,()=>{const{length:i}=n,s=new Array(i);let l=i,h=i;for(let g=0;g<i;g++)aa(e,()=>{const y=(0,ln.D)(n[g],e);let C=!1;y.subscribe((0,Xn.x)(r,S=>{s[g]=S,C||(C=!0,h--),h||r.next(t(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>bo(i,l):Zs.y));return t?s.pipe(Co(t)):s}function aa(n,e,t){n?(0,dd.f)(t,n,e):e()}var Xu=U(8189);function ec(...n){return function Qh(){return(0,Xu.J)(1)}()((0,ln.D)(n,(0,ci.yG)(n)))}var la=U(8421);function Jh(n){return new di.y(e=>{(0,la.Xf)(n()).subscribe(e)})}var Xp=U(9635),Gl=U(576);function zl(n,e){const t=(0,Gl.m)(n)?n:()=>n,r=i=>i.error(t());return new di.y(e?i=>e.schedule(r,0,i):r)}var es=U(515),ql=U(727),Ir=U(4482);function fd(){return(0,Ir.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Xn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class pd extends di.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ir.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ql.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Xn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ql.w0.EMPTY)}return e}refCount(){return fd()(this)}}function Hn(n,e){return(0,Ir.e)((t,r)=>{let i=null,s=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,Xn.x)(r,g=>{i?.unsubscribe();let y=0;const C=s++;(0,la.Xf)(n(g,C)).subscribe(i=(0,Xn.x)(r,S=>r.next(e?e(g,S,C,y++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function To(n){return n<=0?()=>es.E:(0,Ir.e)((e,t)=>{let r=0;e.subscribe((0,Xn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ua(...n){const e=(0,ci.yG)(n);return(0,Ir.e)((t,r)=>{(e?ec(n,t,e):ec(n,t)).subscribe(r)})}function Ii(n,e){return(0,Ir.e)((t,r)=>{let i=0;t.subscribe((0,Xn.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var er=U(5577);function ca(n){return(0,Ir.e)((e,t)=>{let r=!1;e.subscribe((0,Xn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function gd(n=Ya){return(0,Ir.e)((e,t)=>{let r=!1;e.subscribe((0,Xn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ya(){return new jl}function ts(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ii((i,s)=>n(i,s,r)):Zs.y,To(1),t?ca(e):gd(()=>new jl))}function Ys(n,e){return(0,Gl.m)(e)?(0,er.z)(n,e,1):(0,er.z)(n,1)}var Rr=U(8505);function da(n){return(0,Ir.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,Xn.x)(t,void 0,void 0,l=>{s=(0,la.Xf)(n(l,da(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Qa(n,e){return(0,Ir.e)(function eg(n,e,t,r,i){return(s,l)=>{let h=t,g=e,y=0;s.subscribe((0,Xn.x)(l,C=>{const S=y++;g=h?n(g,C,S):(h=!0,C),r&&l.next(g)},i&&(()=>{h&&l.next(g),l.complete()})))}}(n,e,arguments.length>=2,!0))}function tc(n){return n<=0?()=>es.E:(0,Ir.e)((e,t)=>{let r=[];e.subscribe((0,Xn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function nc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ii((i,s)=>n(i,s,r)):Zs.y,tc(1),t?ca(e):gd(()=>new jl))}function Wl(n){return(0,Ir.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const bt="primary",ns=Symbol("RouteTitle");class rc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Fi(n){return new rc(n)}function Xh(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const l=r[s],h=n[s];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function rs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!tf(n[i],e[i]))return!1;return!0}function tf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function nf(n){return Array.prototype.concat.apply([],n)}function rf(n){return n.length>0?n[n.length-1]:null}function T(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function x(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,ln.D)(Promise.resolve(n)):lt(n)}const F=!1,q={exact:function qe(n,e,t){if(!Nr(n.segments,e.segments)||!Qr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!qe(n.children[r],e.children[r],t))return!1;return!0},subset:Nt},Q={exact:function Ze(n,e){return rs(n,e)},subset:function dt(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tf(n[t],e[t]))},ignored:()=>!0};function se(n,e,t){return q[t.paths](n.root,e.root,t.matrixParams)&&Q[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Nt(n,e,t){return Mt(n,e,e.segments,t)}function Mt(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Nr(i,t)||e.hasChildren()||!Qr(i,t,r))}if(n.segments.length===t.length){if(!Nr(n.segments,t)||!Qr(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Nt(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Nr(n.segments,i)&&Qr(n.segments,i,r)&&n.children[bt])&&Mt(n.children[bt],e,s,r)}}function Qr(n,e,t){return e.every((r,i)=>Q[t](n[i].parameters,r.parameters))}class Cn{constructor(e=new Ut([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fi(this.queryParams)),this._queryParamMap}toString(){return yd.serialize(this)}}class Ut{constructor(e,t){this.segments=e,this.children=t,this.parent=null,T(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tg(this)}}class Do{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Fi(this.parameters)),this._parameterMap}toString(){return p_(this)}}function Nr(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let So=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new _d},providedIn:"root"}),n})();class _d{parse(e){const t=new wd(e);return new Cn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Kl(e.root,!0)}`,r=function jv(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${fa(t)}=${fa(i)}`).join("&"):`${fa(t)}=${fa(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ng(n){return encodeURI(n)}(e.fragment)}`:""}`}}const yd=new _d;function tg(n){return n.segments.map(e=>p_(e)).join("/")}function Kl(n,e){if(!n.hasChildren())return tg(n);if(e){const t=n.children[bt]?Kl(n.children[bt],!1):"",r=[];return T(n.children,(i,s)=>{s!==bt&&r.push(`${s}:${Kl(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function is(n,e){let t=[];return T(n.children,(r,i)=>{i===bt&&(t=t.concat(e(r,i)))}),T(n.children,(r,i)=>{i!==bt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===bt?[Kl(n.children[bt],!1)]:[`${i}:${Kl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bt]?`${tg(n)}/${t[0]}`:`${tg(n)}/(${t.join("//")})`}}function vd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fa(n){return vd(n).replace(/%3B/gi,";")}function pa(n){return vd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ic(n){return decodeURIComponent(n)}function rg(n){return ic(n.replace(/\+/g,"%20"))}function p_(n){return`${pa(n.path)}${function ig(n){return Object.keys(n).map(e=>`;${pa(e)}=${pa(n[e])}`).join("")}(n.parameters)}`}const g_=/^[^\/()?;=#]+/;function sf(n){const e=n.match(g_);return e?e[0]:""}const WI=/^[^=?&#]+/,$v=/^[^&#]+/;class wd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[bt]=new Ut(e,t)),r}parseSegment(){const e=sf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,F);return this.capture(e),new Do(ic(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=sf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=sf(this.remaining);i&&(r=i,this.capture(r))}e[ic(t)]=ic(r)}parseQueryParam(e){const t=function Zl(n){const e=n.match(WI);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function m_(n){const e=n.match($v);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=rg(t),s=rg(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=sf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new c.vHH(4010,F);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=bt);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[bt]:new Ut([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,F)}}function af(n){return n.segments.length>0?new Ut([],{[bt]:n}):n}function Ja(n){const e={};for(const r of Object.keys(n.children)){const s=Ja(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Hv(n){if(1===n.numberOfChildren&&n.children[bt]){const e=n.children[bt];return new Ut(n.segments.concat(e.segments),e.children)}return n}(new Ut(n.segments,e))}function Yl(n){return n instanceof Cn}const sc=!1;function __(n,e,t,r,i){if(0===t.length)return ga(e.root,e.root,e.root,r,i);const s=function Cd(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new uf(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return T(s.outlets,(g,y)=>{h[y]="string"==typeof g?g.split("/"):g}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===l?(s.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new uf(t,e,r)}(t);return s.toRoot()?ga(e.root,e.root,new Ut([],{}),r,i):function l(g){const y=function cf(n,e,t,r){if(n.isAbsolute)return new Ql(e.root,!0,0);if(-1===r)return new Ql(t,t===e.root,0);return function Jl(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new c.vHH(4005,sc&&"Invalid number of '../'");i=r.segments.length}return new Ql(r,!1,i-s)}(t,r+(Id(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,g),C=y.processChildren?Js(y.segmentGroup,y.index,s.commands):hf(y.segmentGroup,y.index,s.commands);return ga(e.root,y.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function Id(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function lf(n){return"object"==typeof n&&null!=n&&n.outlets}function ga(n,e,t,r,i){let l,s={};r&&T(r,(g,y)=>{s[y]=Array.isArray(g)?g.map(C=>`${C}`):`${g}`}),l=n===e?t:y_(n,e,t);const h=af(Ja(l));return new Cn(h,s,i)}function y_(n,e,t){const r={};return T(n.children,(i,s)=>{r[s]=i===e?t:y_(i,e,t)}),new Ut(n.segments,r)}class uf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Id(r[0]))throw new c.vHH(4003,sc&&"Root segment cannot have matrix parameters");const i=r.find(lf);if(i&&i!==rf(r))throw new c.vHH(4004,sc&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ql{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function hf(n,e,t){if(n||(n=new Ut([],{})),0===n.segments.length&&n.hasChildren())return Js(n,e,t);const r=function og(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const l=n.segments[i],h=t[r];if(lf(h))break;const g=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!lg(g,y,l))return s;r+=2}else{if(!lg(g,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Ut(n.segments.slice(0,r.pathIndex),{});return s.children[bt]=new Ut(n.segments.slice(r.pathIndex),n.children),Js(s,0,i)}return r.match&&0===i.length?new Ut(n.segments,{}):r.match&&!n.hasChildren()?bd(n,e,t):r.match?Js(n,0,i):bd(n,e,t)}function Js(n,e,t){if(0===t.length)return new Ut(n.segments,{});{const r=function df(n){return lf(n[0])?n[0].outlets:{[bt]:n}}(t),i={};if(!r[bt]&&n.children[bt]&&1===n.numberOfChildren&&0===n.children[bt].segments.length){const s=Js(n.children[bt],e,t);return new Ut(n.segments,s.children)}return T(r,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[l]=hf(n.children[l],e,s))}),T(n.children,(s,l)=>{void 0===r[l]&&(i[l]=s)}),new Ut(n.segments,i)}}function bd(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(lf(s)){const g=Td(s.outlets);return new Ut(r,g)}if(0===i&&Id(t[0])){r.push(new Do(n.segments[e].path,ag(t[0]))),i++;continue}const l=lf(s)?s.outlets[bt]:`${s}`,h=i<t.length-1?t[i+1]:null;l&&h&&Id(h)?(r.push(new Do(l,ag(h))),i+=2):(r.push(new Do(l,{})),i++)}return new Ut(r,{})}function Td(n){const e={};return T(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=bd(new Ut([],{}),0,t))}),e}function ag(n){const e={};return T(n,(t,r)=>e[r]=`${t}`),e}function lg(n,e,t){return n==t.path&&rs(e,t.parameters)}const Dd="imperative";class Ao{constructor(e,t){this.id=e,this.url=t}}class ug extends Ao{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bs extends Ao{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sd extends Ao{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class el extends Ao{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Ad extends Ao{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oc extends Ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zv extends Ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qv extends Ao{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wv extends Ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cg extends Ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xd{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class v_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class w_{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ac{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dg{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Li{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let fg=(()=>{class n{createUrlTree(t,r,i,s,l,h){return __(t||r.root,i,s,l,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Kv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(e){return fg.\u0275fac(e)},providedIn:"root"}),n})();class gg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=mg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=mg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Br(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Br(e,this._root).map(t=>t.value)}}function mg(n,e){if(n===e.value)return e;for(const t of e.children){const r=mg(n,t);if(r)return r}return null}function Br(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Br(n,t);if(r.length)return r.unshift(e),r}return[]}class Ci{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function lc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class E_ extends gg{constructor(e,t){super(e),this.snapshot=t,tu(this,e)}toString(){return this.snapshot.toString()}}function I_(n,e){const t=function C_(n,e){const l=new gf([],{},{},"",{},bt,e,null,n.root,-1,{});return new xo("",new Ci(l,[]))}(n,e),r=new $n([new Do("",{})]),i=new $n({}),s=new $n({}),l=new $n({}),h=new $n(""),g=new Cr(r,i,l,h,s,bt,e,t.root);return g.snapshot=t.root,new E_(new Ci(g,[]),t)}class Cr{constructor(e,t,r,i,s,l,h,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,yt.U)(y=>y[ns]))??lt(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>Fi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>Fi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ff(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function pf(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class gf{get title(){return this.data?.[ns]}constructor(e,t,r,i,s,l,h,g,y,C,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=h,this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=C,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xo extends gg{constructor(e,t){super(t),this.url=e,tu(this,t)}toString(){return _g(this._root)}}function tu(n,e){e.value._routerState=n,e.children.forEach(t=>tu(n,t))}function _g(n){const e=n.children.length>0?` { ${n.children.map(_g).join(", ")} } `:"";return`${n.value}${e}`}function nu(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,rs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),rs(e.params,t.params)||n.params.next(t.params),function ef(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!rs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),rs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Xs(n,e){const t=rs(n.params,e.params)&&function ha(n,e){return Nr(n,e)&&n.every((t,r)=>rs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Xs(n.parent,e.parent))}function uc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function b_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return uc(n,r,i);return uc(n,r)})}(n,e,t);return new Ci(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>uc(n,h)),l}}const r=function T_(n){return new Cr(new $n(n.url),new $n(n.params),new $n(n.queryParams),new $n(n.fragment),new $n(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>uc(n,s));return new Ci(r,i)}}const D_="ngNavigationCancelingError";function v(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Yl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=p(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function p(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[D_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function m(n){return E(n)&&Yl(n.url)}function E(n){return n&&n[D_]}class A{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new M,this.attachRef=null}}let M=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new A,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $=!1;let X=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=bt,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(M),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,$);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,$);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,$);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,$);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new Ne(t,h,i.injector);if(r&&function We(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(l);this.activated=i.createComponent(y,i.length,g)}else this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]}),n})();class Ne{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Cr?this.route:e===M?this.childContexts:this.parent.get(e,t)}}let rt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[X],encapsulation:2}),n})();function st(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Md(n){const e=n.children&&n.children.map(Md),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==bt&&(t.component=rt),t}function ss(n){return n.outlet||bt}function mf(n,e){const t=n.filter(r=>ss(r)===e);return t.push(...n.filter(r=>ss(r)!==e)),t}function cc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _f{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),nu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=lc(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),T(i,(s,l)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=lc(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=lc(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=lc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Li(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ac(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(nu(i),i===s)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),nu(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=cc(i.snapshot),g=h?.get(c._Vd)??null;l.attachRef=null,l.route=i,l.resolver=g,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Qv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Jv{constructor(e,t){this.component=e,this.route=t}}function vg(n,e,t){const r=n._root;return yf(r,e?e._root:null,t,[r.value])}function Pd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function yf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=lc(e);return n.children.forEach(l=>{(function KI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const g=function N1(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Nr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Nr(n.url,e.url)||!rs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xs(n,e)||!rs(n.queryParams,e.queryParams);default:return!Xs(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new Qv(r)):(s.data=l.data,s._resolvedData=l._resolvedData),yf(n,e,s.component?h?h.children:null:t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Jv(h.outlet.component,l))}else l&&wg(e,h,i),i.canActivateChecks.push(new Qv(r)),yf(n,null,s.component?h?h.children:null:t,r,i)})(l,s[l.value.outlet],t,r.concat([l.value]),i),delete s[l.value.outlet]}),T(s,(l,h)=>wg(l,t.getContext(h),i)),i}function wg(n,e,t){const r=lc(n),i=n.value;T(r,(s,l)=>{wg(s,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Jv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function vf(n){return"function"==typeof n}function iu(n){return n instanceof jl||"EmptyError"===n?.name}const A_=Symbol("INITIAL_VALUE");function dc(){return Hn(n=>hd(n.map(e=>e.pipe(To(1),ua(A_)))).pipe((0,yt.U)(e=>{for(const t of e)if(!0!==t){if(t===A_)return A_;if(!1===t||t instanceof Cn)return t}return!0}),Ii(e=>e!==A_),To(1)))}function sw(n){return(0,Xp.z)((0,Rr.b)(e=>{if(Yl(e))throw v(0,e)}),(0,yt.U)(e=>!0===e))}const ow={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JI(n,e,t,r,i){const s=aw(n,e,t);return s.matched?function wf(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?lt(i.map(l=>{const h=Pd(l,n);return x(function nw(n){return n&&vf(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(dc(),sw()):lt(!0)}(r=st(e,r),e,t).pipe((0,yt.U)(l=>!0===l?s:{...ow})):lt(s)}function aw(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ow}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Xh)(t,n,e);if(!i)return{...ow};const s={};T(i.posParams,(h,g)=>{s[g]=h.path});const l=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Ef(n,e,t,r){if(t.length>0&&function DA(n,e,t){return t.some(r=>lw(n,e,r)&&ss(r)!==bt)}(n,t,r)){const s=new Ut(e,function XI(n,e,t,r){const i={};i[bt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ss(s)!==bt){const l=new Ut([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[ss(s)]=l}return i}(n,e,r,new Ut(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function eC(n,e,t){return t.some(r=>lw(n,e,r))}(n,t,r)){const s=new Ut(n.segments,function TA(n,e,t,r,i){const s={};for(const l of r)if(lw(n,t,l)&&!i[ss(l)]){const h=new Ut([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[ss(l)]=h}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new Ut(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function lw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function tC(n,e,t,r){return!!(ss(n)===r||r!==bt&&lw(e,t,n))&&("**"===n.path||aw(e,n,t).matched)}function If(n,e,t){return 0===e.length&&!n.children[t]}const N_=!1;class su{constructor(e){this.segmentGroup=e||null}}class Cf{constructor(e){this.urlTree=e}}function Eg(n){return zl(new su(n))}function uw(n){return zl(new Cf(n))}class nC{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Ef(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ut(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,bt).pipe((0,yt.U)(s=>this.createUrlTree(Ja(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(da(s=>{if(s instanceof Cf)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof su?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,bt).pipe((0,yt.U)(i=>this.createUrlTree(Ja(i),e.queryParams,e.fragment))).pipe(da(i=>{throw i instanceof su?this.noMatchError(i):i}))}noMatchError(e){return new c.vHH(4002,N_)}createUrlTree(e,t,r){const i=af(e);return new Cn(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(s=>new Ut([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,ln.D)(i).pipe(Ys(s=>{const l=r.children[s],h=mf(t,s);return this.expandSegmentGroup(e,h,l,s).pipe((0,yt.U)(g=>({segment:g,outlet:s})))}),Qa((s,l)=>(s[l.outlet]=l.segment,s),{}),nc())}expandSegment(e,t,r,i,s,l){return(0,ln.D)(r).pipe(Ys(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,l).pipe(da(y=>{if(y instanceof su)return lt(null);throw y}))),ts(h=>!!h),da((h,g)=>{if(iu(h))return If(t,i,s)?lt(new Ut([],{})):Eg(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,l,h){return tC(i,t,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l):Eg(t):Eg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?uw(s):this.lineralizeSegments(r,s).pipe((0,er.z)(l=>{const h=new Ut(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){const{matched:h,consumedSegments:g,remainingSegments:y,positionalParamSegments:C}=aw(t,i,s);if(!h)return Eg(t);const S=this.applyRedirectCommands(g,i.redirectTo,C);return i.redirectTo.startsWith("/")?uw(S):this.lineralizeSegments(i,S).pipe((0,er.z)(N=>this.expandSegment(e,t,r,N.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=st(r,e),r.loadChildren?(r._loadedRoutes?lt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,yt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Ut(i,{})))):lt(new Ut(i,{}))):JI(t,r,i,e).pipe(Hn(({matched:l,consumedSegments:h,remainingSegments:g})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,er.z)(C=>{const S=C.injector??e,N=C.routes,{segmentGroup:k,slicedSegments:B}=Ef(t,h,g,N),Z=new Ut(k.segments,k.children);if(0===B.length&&Z.hasChildren())return this.expandChildren(S,N,Z).pipe((0,yt.U)(je=>new Ut(h,je)));if(0===N.length&&0===B.length)return lt(new Ut(h,{}));const J=ss(r)===s;return this.expandSegment(S,Z,N,B,J?bt:s,!0).pipe((0,yt.U)(He=>new Ut(h.concat(He.segments),He.children)))})):Eg(t)))}getChildConfig(e,t,r){return t.children?lt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?lt({routes:t._loadedRoutes,injector:t._loadedInjector}):function bA(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?lt(!0):lt(i.map(l=>{const h=Pd(l,n);return x(function ew(n){return n&&vf(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(dc(),sw())}(e,t,r).pipe((0,er.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Rr.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function AA(n){return zl(p(N_,3))}())):lt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return lt(r);if(i.numberOfChildren>1||!i.children[bt])return e.redirectTo,zl(new c.vHH(4e3,N_));i=i.children[bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Cn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return T(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let l={};return T(t.children,(h,g)=>{l[g]=this.createSegmentGroup(e,h,r,i)}),new Ut(s,l)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new c.vHH(4001,N_);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class cw{}class Ig{constructor(e,t,r,i,s,l,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=l,this.urlSerializer=h}recognize(){const e=Ef(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,bt).pipe((0,yt.U)(t=>{if(null===t)return null;const r=new gf([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},bt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ci(r,t),s=new xo(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=ff(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,ln.D)(Object.keys(r.children)).pipe(Ys(i=>{const s=r.children[i],l=mf(t,i);return this.processSegmentGroup(e,l,s,i)}),Qa((i,s)=>i&&s?(i.push(...s),i):null),function Qs(n,e=!1){return(0,Ir.e)((t,r)=>{let i=0;t.subscribe((0,Xn.x)(r,s=>{const l=n(s,i++);(l||e)&&r.next(s),!l&&r.complete()}))})}(i=>null!==i),ca(null),nc(),(0,yt.U)(i=>{if(null===i)return null;const s=iC(i);return function NA(n){n.sort((e,t)=>e.value.outlet===bt?-1:t.value.outlet===bt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,ln.D)(t).pipe(Ys(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,s)),ts(l=>!!l),da(l=>{if(iu(l))return If(r,i,s)?lt([]):lt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!tC(t,r,i,s))return lt(null);let l;if("**"===t.path){const h=i.length>0?rf(i).parameters:{},g=oC(r)+i.length;l=lt({snapshot:new gf(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tl(t),ss(t),t.component??t._loadedComponent??null,t,sC(r),g,aC(t)),consumedSegments:[],remainingSegments:[]})}else l=JI(r,t,i,e).pipe((0,yt.U)(({matched:h,consumedSegments:g,remainingSegments:y,parameters:C})=>{if(!h)return null;const S=oC(r)+g.length;return{snapshot:new gf(g,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tl(t),ss(t),t.component??t._loadedComponent??null,t,sC(r),S,aC(t)),consumedSegments:g,remainingSegments:y}}));return l.pipe(Hn(h=>{if(null===h)return lt(null);const{snapshot:g,consumedSegments:y,remainingSegments:C}=h;e=t._injector??e;const S=t._loadedInjector??e,N=function MA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:k,slicedSegments:B}=Ef(r,y,C,N.filter(J=>void 0===J.redirectTo));if(0===B.length&&k.hasChildren())return this.processChildren(S,N,k).pipe((0,yt.U)(J=>null===J?null:[new Ci(g,J)]));if(0===N.length&&0===B.length)return lt([new Ci(g,[])]);const Z=ss(t)===s;return this.processSegment(S,N,k,B,Z?bt:s).pipe((0,yt.U)(J=>null===J?null:[new Ci(g,J)]))}))}}function PA(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function iC(n){const e=[],t=new Set;for(const r of n){if(!PA(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=iC(r.children);e.push(new Ci(r.value,i))}return e.filter(r=>!t.has(r))}function sC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function oC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function tl(n){return n.data||{}}function aC(n){return n.resolve||{}}function hw(n){return"string"==typeof n.title||null===n.title}function fw(n){return Hn(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,yt.U)(()=>e)):lt(e)})}const bf=new c.OlP("ROUTES");let gw=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,c.f3M)(c.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return lt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=x(t.loadComponent()).pipe((0,yt.U)(cC),(0,Rr.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Wl(()=>{this.componentLoaders.delete(t)})),i=new pd(r,()=>new jn.x).pipe(fd());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return lt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,yt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,y,C=!1;Array.isArray(h)?y=h:(g=h.create(t).injector,y=nf(g.get(bf,[],c.XFs.Self|c.XFs.Optional)));return{routes:y.map(Md),injector:g}}),Wl(()=>{this.childrenLoaders.delete(r)})),l=new pd(s,()=>new jn.x).pipe(fd());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return x(t()).pipe((0,yt.U)(cC),(0,er.z)(r=>r instanceof c.YKP||Array.isArray(r)?lt(r):(0,ln.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cC(n){return function ma(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let P_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new jn.x,this.configLoader=(0,c.f3M)(gw),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(So),this.rootContexts=(0,c.f3M)(M),this.navigationId=0,this.afterPreactivation=()=>lt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new v_(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new xd(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new $n({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Dd,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ii(r=>0!==r.id),(0,yt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Hn(r=>{let i=!1,s=!1;return lt(r).pipe((0,Rr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Hn(l=>{const h=t.browserUrlTree.toString(),g=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!g&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const C="";return this.events.next(new el(l.id,t.serializeUrl(r.rawUrl),C,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),es.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return dC(l.source)&&(t.browserUrlTree=l.extractedUrl),lt(l).pipe(Hn(C=>{const S=this.transitions?.getValue();return this.events.next(new ug(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),S!==this.transitions?.getValue()?es.E:Promise.resolve(C)}),function rC(n,e,t,r){return Hn(i=>function xA(n,e,t,r,i){return new nC(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,yt.U)(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Rr.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},r.urlAfterRedirects=C.urlAfterRedirects}),function OA(n,e,t,r,i){return(0,er.z)(s=>function dw(n,e,t,r,i,s,l="emptyOnly"){return new Ig(n,e,t,r,i,l,s).recognize().pipe(Hn(h=>null===h?function RA(n){return new di.y(e=>e.error(n))}(new cw):lt(h)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe((0,yt.U)(l=>({...s,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Rr.b)(C=>{if(r.targetSnapshot=C.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!C.extras.skipLocationChange){const N=t.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);t.setBrowserUrl(N,C)}t.browserUrlTree=C.urlAfterRedirects}const S=new oc(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(S)}));if(g&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:C,extractedUrl:S,source:N,restoredState:k,extras:B}=l,Z=new ug(C,this.urlSerializer.serialize(S),N,k);this.events.next(Z);const J=I_(S,this.rootComponentType).snapshot;return lt(r={...l,targetSnapshot:J,urlAfterRedirects:S,extras:{...B,skipLocationChange:!1,replaceUrl:!1}})}{const C="";return this.events.next(new el(l.id,t.serializeUrl(r.extractedUrl),C,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),es.E}}),(0,Rr.b)(l=>{const h=new zv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,yt.U)(l=>r={...l,guards:vg(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function x_(n,e){return(0,er.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?lt({...t,guardsResult:!0}):function IA(n,e,t,r){return(0,ln.D)(n).pipe((0,er.z)(i=>function CA(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?lt(s.map(h=>{const g=cc(e)??i,y=Pd(h,g);return x(function wA(n){return n&&vf(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):g.runInContext(()=>y(n,e,t,r))).pipe(ts())})).pipe(dc()):lt(!0)}(i.component,i.route,t,e,r)),ts(i=>!0!==i,!0))}(l,r,i,n).pipe((0,er.z)(h=>h&&function ZI(n){return"boolean"==typeof n}(h)?function rw(n,e,t,r){return(0,ln.D)(e).pipe(Ys(i=>ec(function kd(n,e){return null!==n&&e&&e(new w_(n)),lt(!0)}(i.route.parent,r),function R_(n,e){return null!==n&&e&&e(new dg(n)),lt(!0)}(i.route,r),function iw(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function Xv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Jh(()=>lt(l.guards.map(g=>{const y=cc(l.node)??t,C=Pd(g,y);return x(function tw(n){return n&&vf(n.canActivateChild)}(C)?C.canActivateChild(r,n):y.runInContext(()=>C(r,n))).pipe(ts())})).pipe(dc())));return lt(s).pipe(dc())}(n,i.path,t),function QI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return lt(!0);const i=r.map(s=>Jh(()=>{const l=cc(e)??t,h=Pd(s,l);return x(function M1(n){return n&&vf(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(ts())}));return lt(i).pipe(dc())}(n,i.route,t))),ts(i=>!0!==i,!0))}(r,s,n,e):lt(h)),(0,yt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Rr.b)(l=>{if(r.guardsResult=l.guardsResult,Yl(l.guardsResult))throw v(0,l.guardsResult);const h=new qv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Ii(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),fw(l=>{if(l.guards.canActivateChecks.length)return lt(l).pipe((0,Rr.b)(h=>{const g=new Wv(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}),Hn(h=>{let g=!1;return lt(h).pipe(function P1(n,e){return(0,er.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return lt(t);let s=0;return(0,ln.D)(i).pipe(Ys(l=>function k1(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!hw(i)&&(s[ns]=i.title),function lC(n,e,t,r){const i=function O1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return lt({});const s={};return(0,ln.D)(i).pipe((0,er.z)(l=>function uC(n,e,t,r){const i=cc(e)??r,s=Pd(n,i);return x(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[l],e,t,r).pipe(ts(),(0,Rr.b)(h=>{s[l]=h}))),tc(1),function md(n){return(0,yt.U)(()=>n)}(s),da(l=>iu(l)?es.E:zl(l)))}(s,n,e,r).pipe((0,yt.U)(l=>(n._resolvedData=l,n.data=ff(n,t).resolve,i&&hw(i)&&(n.data[ns]=i.title),null)))}(l.route,r,n,e)),(0,Rr.b)(()=>s++),tc(1),(0,er.z)(l=>s===i.length?lt(t):es.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Rr.b)({next:()=>g=!0,complete:()=>{g||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,Rr.b)(h=>{const g=new cg(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}))}),fw(l=>{const h=g=>{const y=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(g.routeConfig).pipe((0,Rr.b)(C=>{g.component=C}),(0,yt.U)(()=>{})));for(const C of g.children)y.push(...h(C));return y};return hd(h(l.targetSnapshot.root)).pipe(ca(),To(1))}),fw(()=>this.afterPreactivation()),(0,yt.U)(l=>{const h=function ru(n,e,t){const r=uc(n,e._root,t?t._root:void 0);return new E_(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:h}}),(0,Rr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new _f(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),To(1),(0,Rr.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new bs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),Wl(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),da(l=>{if(s=!0,E(l)){m(l)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new Sd(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),m(l)){const g=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||dC(r.source)};t.scheduleNavigation(g,Dd,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new Ad(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(l))}catch(g){r.reject(g)}}return es.E}))}))}cancelNavigationTransition(t,r,i){const s=new Sd(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dC(n){return n!==Dd}let hC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===bt);return r}getResolvedTitleForRoute(t){return t.data[ns]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(FA)},providedIn:"root"}),n})(),FA=(()=>{class n extends hC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Zp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(UA)},providedIn:"root"}),n})();class LA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let UA=(()=>{class n extends LA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jt=new c.OlP("",{providedIn:"root",factory:()=>({})});let pC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(gC)},providedIn:"root"}),n})(),gC=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BA(n){throw n}function jA(n,e,t){return e.parse("/")}const mC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$A={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let os=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this.options=(0,c.f3M)(jt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||BA,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||jA,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(pC),this.routeReuseStrategy=(0,c.f3M)(fC),this.urlCreationStrategy=(0,c.f3M)(Kv),this.titleStrategy=(0,c.f3M)(hC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=nf((0,c.f3M)(bf,{optional:!0})??[]),this.navigationTransitions=(0,c.f3M)(P_),this.urlSerializer=(0,c.f3M)(So),this.location=(0,c.f3M)(Ge),this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Cn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=I_(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Dd,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(s.state=g)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,l,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Md),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:h,preserveFragment:g}=r,y=g?this.currentUrlTree.fragment:l;let C=null;switch(h){case"merge":C={...this.currentUrlTree.queryParams,...s};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=s||null}return null!==C&&(C=this.removeEmptyProps(C)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,C,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Yl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Dd,null,r)}navigate(t,r={skipLocationChange:!1}){return function HA(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new c.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...mC}:!1===r?{...$A}:r,Yl(t))return se(this.currentUrlTree,t,i);const s=this.parseUrl(t);return se(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,l){if(this.disposed)return Promise.resolve(!1);let h,g,y,C;return l?(h=l.resolve,g=l.reject,y=l.promise):y=new Promise((S,N)=>{h=S,g=N}),C="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:h,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tg=(()=>{class n{constructor(t,r,i,s,l,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=l,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new jn.x;const g=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof bs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,c.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(os),c.Y36(Cr),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(ut))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&c.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})(),GA=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,l){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(h=>{h instanceof bs&&this.update()})}ngAfterContentInit(){lt(this.links.changes,lt(null)).pipe((0,Xu.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,ln.D)(t).pipe((0,Xu.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function _C(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(os),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(Tg,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,Tg,5),2&t){let s;c.iGM(s=c.CRH())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[c.TTD]}),n})();class mw{}let _w=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ii(t=>t instanceof bs),Ys(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,c.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,h=s._loadedInjector??l;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(l,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,ln.D)(i).pipe((0,Xu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):lt(null);const s=i.pipe((0,er.z)(l=>null===l?lt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,ln.D)([s,l]).pipe((0,Xu.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(os),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(mw),c.LFG(gw))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Dg=new c.OlP("");let yC=(()=>{class n{constructor(t,r,i,s,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ug?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof bs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Xl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();var Ro=(()=>((Ro=Ro||{})[Ro.COMPLETE=0]="COMPLETE",Ro[Ro.FAILED=1]="FAILED",Ro[Ro.REDIRECTING=2]="REDIRECTING",Ro))();const Sg=!1;function Od(n,e){return{\u0275kind:n,\u0275providers:e}}const vw=new c.OlP("",{providedIn:"root",factory:()=>!1});function Ag(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(os),i=n.get(vC);1===n.get(O_)&&r.initialNavigation(),n.get(wC,null,c.XFs.Optional)?.setUpPreloading(),n.get(Dg,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const vC=new c.OlP(Sg?"bootstrap done indicator":"",{factory:()=>new jn.x}),O_=new c.OlP(Sg?"initial navigation":"",{providedIn:"root",factory:()=>1});function KA(){let n=[];return n=Sg?[{provide:c.Xts,multi:!0,useFactory:()=>{const e=(0,c.f3M)(os);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function hg(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Od(1,n)}const wC=new c.OlP(Sg?"router preloader":"");function ZA(n){return Od(0,[{provide:wC,useExisting:_w},{provide:mw,useExisting:n}])}const Sf=!1,JA=new c.OlP(Sf?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),ww=[Ge,{provide:So,useClass:_d},os,M,{provide:Cr,useFactory:function yw(n){return n.routerState.root},deps:[os]},gw,Sf?{provide:vw,useValue:!0}:[]];function XA(){return new c.PXZ("Router",os)}let ex=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[ww,Sf&&r?.enableTracing?KA().\u0275providers:[],{provide:bf,multi:!0,useValue:t},{provide:JA,useFactory:CC,deps:[[os,new c.FiY,new c.tp0]]},{provide:jt,useValue:r||{}},r?.useHash?{provide:ut,useClass:Oe}:{provide:ut,useClass:ke},{provide:Dg,useFactory:()=>{const n=(0,c.f3M)(Il),e=(0,c.f3M)(c.R0b),t=(0,c.f3M)(jt),r=(0,c.f3M)(P_),i=(0,c.f3M)(So);return t.scrollOffset&&n.setOffset(t.scrollOffset),new yC(i,r,n,e,t)}},r?.preloadingStrategy?ZA(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:XA},r?.initialNavigation?nx(r):[],[{provide:bC,useFactory:Ag},{provide:c.tb,multi:!0,useExisting:bC}]]}}static forChild(t){return{ngModule:n,providers:[{provide:bf,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(JA,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[rt]}),n})();function CC(n){if(Sf&&n)throw new c.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function nx(n){return["disabled"===n.initialNavigation?Od(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(os);return()=>{e.setUpLocationChangeListener()}}},{provide:O_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Od(2,[{provide:O_,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(me,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(os),s=e.get(vC);(function L1(n,e){n.events.pipe(Ii(t=>t instanceof bs||t instanceof Sd||t instanceof Ad||t instanceof el),(0,yt.U)(t=>t instanceof bs||t instanceof el?Ro.COMPLETE:t instanceof Sd&&(0===t.code||1===t.code)?Ro.REDIRECTING:Ro.FAILED),Ii(t=>t!==Ro.REDIRECTING),To(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(P_).afterPreactivation=()=>(r(!0),s.closed?lt(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const bC=new c.OlP(Sf?"Router Initializer":"");let xf=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),ou=(()=>{class n extends xf{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const to=new c.OlP("NgValueAccessor"),Iw={provide:to,useExisting:(0,c.Gpc)(()=>Fd),multi:!0},DC=new c.OlP("CompositionEventMode");let Fd=(()=>{class n extends xf{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Cw(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(DC,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[c._Bn([Iw]),c.qOj]}),n})();const rx=!1;function hc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function bw(n){return null!=n&&"number"==typeof n.length}const Ui=new c.OlP("NgValidators"),au=new c.OlP("NgAsyncValidators"),SC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class No{static min(e){return function AC(n){return e=>{if(hc(e.value)||hc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Ts(n){return e=>{if(hc(e.value)||hc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return xC(e)}static requiredTrue(e){return function RC(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function ix(n){return hc(n.value)||SC.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function U_(n){return e=>hc(e.value)||!bw(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Tw(n){return e=>bw(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function NC(n){if(!n)return V_;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(hc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return FC(e)}static composeAsync(e){return LC(e)}}function xC(n){return hc(n.value)?{required:!0}:null}function V_(n){return null}function MC(n){return null!=n}function Dw(n){const e=(0,c.QGY)(n)?(0,ln.D)(n):n;if(rx&&!(0,c.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new c.vHH(-1101,t)}return e}function PC(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function kC(n,e){return e.map(t=>t(n))}function OC(n){return n.map(e=>function Sw(n){return!n.validate}(e)?e:t=>e.validate(t))}function FC(n){if(!n)return null;const e=n.filter(MC);return 0==e.length?null:function(t){return PC(kC(t,e))}}function Aw(n){return null!=n?FC(OC(n)):null}function LC(n){if(!n)return null;const e=n.filter(MC);return 0==e.length?null:function(t){return function Ew(...n){const e=(0,ci.jO)(n),{args:t,keys:r}=$l(n),i=new di.y(s=>{const{length:l}=t;if(!l)return void s.complete();const h=new Array(l);let g=l,y=l;for(let C=0;C<l;C++){let S=!1;(0,la.Xf)(t[C]).subscribe((0,Xn.x)(s,N=>{S||(S=!0,y--),h[C]=N},()=>g--,void 0,()=>{(!g||!S)&&(y||s.next(r?bo(r,h):h),s.complete())}))}});return e?i.pipe(Co(e)):i}(kC(t,e).map(Dw)).pipe((0,yt.U)(PC))}}function xw(n){return null!=n?LC(OC(n)):null}function _a(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function B_(n){return n._rawValidators}function UC(n){return n._rawAsyncValidators}function Rw(n){return n?Array.isArray(n)?n:[n]:[]}function Rg(n,e){return Array.isArray(n)?n.includes(e):n===e}function VC(n,e){const t=Rw(e);return Rw(n).forEach(i=>{Rg(t,i)||t.push(i)}),t}function BC(n,e){return Rw(e).filter(t=>!Rg(n,t))}class jC{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Aw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class bi extends jC{get formDirective(){return null}get path(){return null}}class fc extends jC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $C{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Rf=(()=>{class n extends $C{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(fc,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]}),n})(),HC=(()=>{class n extends $C{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(bi,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[c.qOj]}),n})();function Fw(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const Lw=!1,H_="VALID",G_="INVALID",Nf="PENDING",Pg="DISABLED";function Uw(n){return(kg(n)?n.validators:n)||null}function Vw(n,e){return(kg(e)?e.asyncValidators:n)||null}function kg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function z_(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,Lw?function ox(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new c.vHH(1001,Lw?function ax(n,e){return`Cannot find form control ${Fw(n,e)}`}(e,t):"")}function KC(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new c.vHH(1002,Lw?function Mg(n,e){return`Must supply a value for form control ${Fw(n,e)}`}(e,i):"")})}class Mf{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===H_}get invalid(){return this.status===G_}get pending(){return this.status==Nf}get disabled(){return this.status===Pg}get enabled(){return this.status!==Pg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(VC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(VC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(BC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(BC(e,this._rawAsyncValidators))}hasValidator(e){return Rg(this._rawValidators,e)}hasAsyncValidator(e){return Rg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Nf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Pg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=H_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===H_||this.status===Nf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pg:H_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Nf,this._hasOwnPendingAsyncValidator=!0;const t=Dw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Pg:this.errors?G_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Nf)?Nf:this._anyControlsHaveStatus(G_)?G_:H_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function lx(n){return Array.isArray(n)?Aw(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function ux(n){return Array.isArray(n)?xw(n):n||null}(this._rawAsyncValidators)}}class Og extends Mf{constructor(e,t,r){super(Uw(t),Vw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){KC(this,!0,e),Object.keys(e).forEach(r=>{z_(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class ZC extends Og{}const Ld=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Fg}),Fg="always";function Pf(n,e,t=Fg){QC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function cx(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&W_(n,e)})}(n,e),function hx(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function dx(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&W_(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function YC(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function q_(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ud(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Bw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function QC(n,e){const t=B_(n);null!==e.validator?n.setValidators(_a(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=UC(n);null!==e.asyncValidator?n.setAsyncValidators(_a(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Bw(e._rawValidators,i),Bw(e._rawAsyncValidators,i)}function Ud(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=B_(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=UC(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return Bw(e._rawValidators,r),Bw(e._rawAsyncValidators,r),t}function W_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function $w(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Uf=class extends Mf{constructor(e=null,t,r){super(Uw(t),Vw(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=$w(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){$w(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Bg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),tb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Hg=new c.OlP("NgModelWithFormControlWarning"),Kw={provide:bi,useExisting:(0,c.Gpc)(()=>Vf)};let Vf=(()=>{class n extends bi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ud(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Pf(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){q_(t.control||null,t,!1),function Ff(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Bd(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(q_(r||null,t),(n=>n instanceof Uf)(i)&&(Pf(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function ya(n,e){QC(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Ug(n,e){return Ud(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){QC(this.form,this),this._oldForm&&Ud(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ui,10),c.Y36(au,10),c.Y36(Ld,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Kw]),c.qOj,c.TTD]}),n})();const Ex={provide:fc,useExisting:(0,c.Gpc)(()=>X_)};let X_=(()=>{class n extends fc{set isDisabled(t){}constructor(t,r,i,s,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function mc(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Fd?t=s:function Of(n){return Object.getPrototypeOf(n.constructor)===ou}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function gc(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Lg(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(bi,13),c.Y36(Ui,10),c.Y36(au,10),c.Y36(to,10),c.Y36(Hg,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([Ex]),c.qOj,c.TTD]}),n})(),jd=(()=>{class n{constructor(){this._validator=V_}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):V_,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const Tx={provide:Ui,useExisting:(0,c.Gpc)(()=>oy),multi:!0};let oy=(()=>{class n extends jd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=c.D6c,this.createValidator=t=>xC}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([Tx]),c.qOj]}),n})(),Xw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[tb]}),n})();class Hd extends Mf{constructor(e,t,r){super(Uw(t),Vw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){KC(this,!1,e),e.forEach((r,i)=>{z_(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function e0(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let fb=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return e0(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Og(i,s)}record(t,r=null){const i=this._reduceControls(t);return new ZC(i,r)}control(t,r,i){let s={};return this.useNonNullable?(e0(r)?s=r:(s.validators=r,s.asyncValidators=i),new Uf(t,{...s,nonNullable:!0})):new Uf(t,r,i)}array(t,r,i){const s=t.map(l=>this._createControl(l));return new Hd(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Uf||t instanceof Mf?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),t0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ld,useValue:t.callSetDisabledState??Fg}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Xw]}),n})(),rl=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Hg,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ld,useValue:t.callSetDisabledState??Fg}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Xw]}),n})();var n0=U(4986),ay=U(6451),wa=U(3099);function Mo(n,e=Zs.y){return n=n??Ea,(0,Ir.e)((t,r)=>{let i,s=!0;t.subscribe((0,Xn.x)(r,l=>{const h=e(l);(s||!n(i,h))&&(s=!1,i=h,r.next(l))}))})}function Ea(n,e){return n===e}var gb=U(5032),yn=U(4976),Xr=U(2011),zg=(U(2644),U(3942)),ls=U(4859),ve=U(5861),Vi=U(6881),O=U(2090),Ia=U(1877);const r0="@firebase/database";let Bf="";function _b(n){Bf=n}class yb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class vb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ly=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yb(e)}}catch{}return new vb},il=ly("localStorage"),qg=ly("sessionStorage"),Gd=new Ia.Yd("@firebase/database"),o0=function(){let n=1;return function(){return n++}}(),a0=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},jf=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=jf.apply(null,r):e+="object"==typeof r?(0,O.Wl)(r):r,e+=" "}return e};let yc=null,l0=!0;const u0=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Gd.logLevel=Ia.in.VERBOSE,yc=Gd.log.bind(Gd),e&&qg.set("logging_enabled",!0)):"function"==typeof n?yc=n:(yc=null,qg.remove("logging_enabled"))},hi=function(...n){if(!0===l0&&(l0=!1,null===yc&&!0===qg.get("logging_enabled")&&u0(!0)),yc){const e=jf.apply(null,n);yc(e)}},Wg=function(n){return function(...e){hi(n,...e)}},c0=function(...n){const e="FIREBASE INTERNAL ERROR: "+jf(...n);Gd.error(e)},sl=function(...n){const e=`FIREBASE FATAL ERROR: ${jf(...n)}`;throw Gd.error(e),new Error(e)},Bi=function(...n){const e="FIREBASE WARNING: "+jf(...n);Gd.warn(e)},uy=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vc="[MIN_NAME]",uu="[MAX_NAME]",zd=function(n,e){if(n===e)return 0;if(n===vc||e===uu)return-1;if(e===vc||n===uu)return 1;{const t=h0(n),r=h0(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Ox=function(n,e){return n===e?0:n<e?-1:1},Kg=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Wl)(e))},d0=function(n){if("object"!=typeof n||null===n)return(0,O.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Wl)(e[r]),t+=":",t+=d0(n[e[r]]);return t+="}",t},wb=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function fi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Eb=function(n){(0,O.hu)(!uy(n),"Invalid JSON number");const r=1023;let i,s,l,h,g;0===n?(s=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const C=y.join("");let S="";for(g=0;g<64;g+=8){let N=parseInt(C.substr(g,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},bb=new RegExp("^-?(0*)\\d{1,10}$"),h0=function(n){if(bb.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},qd=function(n){try{n()}catch(e){setTimeout(()=>{throw Bi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Sb=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$f=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Ab{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Bi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class f0{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bi(e)}}let Ca=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Ux=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Rt="websocket",Nb="long_polling";class m0{constructor(e,t,r,i,s=!1,l="",h=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=il.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&il.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Kd(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===Rt)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Nb)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Vx(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return fi(t,(s,l)=>{i.push(s+"="+l)}),r+i.join("&")}class Bx{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const Hf={},Gf={};function tr(n){const e=n.toString();return Hf[e]||(Hf[e]=new Bx),Hf[e]}class Mb{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&qd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class wc{constructor(e,t,r,i,s,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Wg(e),this.stats_=tr(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),Kd(t,Nb,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Mb(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zd((...s)=>{const[l,h,g,y,C]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ux.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wc.forceAllow_=!0}static forceDisallow(){wc.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!wc.forceAllow_&&(wc.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=wb(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Zd{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=o0(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Zd.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){hi("frame writing exception"),h.stack&&hi(h.stack),hi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||hi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{hi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let hy=null;typeof MozWebSocket<"u"?hy=MozWebSocket:typeof WebSocket<"u"&&(hy=WebSocket);let zf=(()=>{class n{constructor(t,r,i,s,l,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Wg(this.connId),this.stats_=tr(r),this.connURL=n.connectionURL_(r,h,g,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,l){const h={v:"5"};return!(0,O.Yr)()&&typeof location<"u"&&location.hostname&&Ux.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),l&&(h.p=l),Kd(t,Rt,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,il.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Bf}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new hy(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==hy&&!n.forceDisallow_}static previouslyFailed(){return il.isInMemoryStorage||!0===il.get("previous_websocket_failure")}markConnectionHealthy(){il.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=wb(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),w0=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[wc,zf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=zf&&zf.isAvailable();let i=r&&!zf.previouslyFailed();if(t.webSocketOnly&&(r||Bi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[zf];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class C0{constructor(e,t,r,i,s,l,h,g,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Wg("c:"+this.id+":"),this.transportManager_=new w0(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$f(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Kg("t",e),r=Kg("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Kg("t",e),r=Kg("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Kg("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?c0("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):c0("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Bi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),$f(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$f(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(il.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qf{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class zb{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class fy extends zb{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new fy}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const qb=32,Wb=768;class An{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function vn(){return new An("")}function Xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ec(n){return n.pieces_.length-n.pieceNum_}function Fn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new An(n.pieces_,e)}function Yd(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Wf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Kb(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new An(e,0)}function Kn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof An)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new An(t,0)}function nn(n){return n.pieceNum_>=n.pieces_.length}function ji(n,e){const t=Xt(n),r=Xt(e);if(null===t)return e;if(t===r)return ji(Fn(n),Fn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Jx(n,e){const t=Wf(n,0),r=Wf(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=zd(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function Xg(n,e){if(Ec(n)!==Ec(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Po(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ec(n)>Ec(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Zb{constructor(e,t){this.errorPrefix_=t,this.parts_=Wf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);Qb(this)}}function Qb(n){if(n.byteLength_>Wb)throw new Error(n.errorPrefix_+"has a key path longer than "+Wb+" bytes ("+n.byteLength_+").");if(n.parts_.length>qb)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qb+") or object contains a cycle "+Qd(n))}function Qd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class em extends zb{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new em}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const tm=1e3;let nm,Jd=(()=>{class n extends qf{constructor(t,r,i,s,l,h,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Wg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tm,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");em.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&fy.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,l={r:s,a:t,b:r};this.log_((0,O.Wl)(l)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new O.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const g=h.d;"ok"===h.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const g={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const y=g.d,C=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",g),"ok"!==C&&this.removeListen_(i,s),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Bi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const l=s.s,h=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const l={p:t};s&&(l.q=i,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):c0("Unrecognized action received from server: "+(0,O.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tm,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=tm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=tm),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ve.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,y=null;const C=function(){y?y.close():(g=!0,s())};t.realtime_={close:C,sendRequest:function(k){(0,O.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(k)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[k,B]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);g?hi("getToken() completed but was canceled"):(hi("getToken() completed. Creating connection."),t.authToken_=k&&k.accessToken,t.appCheckToken_=B&&B.token,y=new C0(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,Z=>{Bi(Z+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(k){t.log_("Failed to get token: "+k),g||(t.repoInfo_.nodeAdmin&&Bi(k),C())}}})()}interrupt(t){hi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){hi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=tm,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>d0(l)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new An(t).toString();let s;if(this.listens.has(i)){const l=this.listens.get(i);s=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){hi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){hi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Bf.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=fy.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class on{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new on(e,t)}}class py{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new on(vc,e),i=new on(vc,t);return 0!==this.compare(r,i)}minPost(){return on.MIN}}class b0 extends py{static get __EMPTY_NODE(){return nm}static set __EMPTY_NODE(e){nm=e}compare(e,t){return zd(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return on.MIN}maxPost(){return new on(uu,nm)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new on(e,nm)}toString(){return".key"}}const ol=new b0;class gy{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let im,ko=(()=>{class n{constructor(t,r,i,s,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Ds.EMPTY_NODE,this.right=l??Ds.EMPTY_NODE}copy(t,r,i,s,l){return new n(t??this.key,r??this.value,i??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const l=i(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===l?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ds.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ds.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ds{constructor(e,t=Ds.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ds(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ko.BLACK,null,null))}remove(e){return new Ds(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ko.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new gy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new gy(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new gy(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new gy(this.root_,null,this.comparator_,!0,e)}}function iR(n,e){return zd(n.name,e.name)}function rm(n,e){return zd(n,e)}Ds.EMPTY_NODE=new class rR{copy(e,t,r,i,s){return this}insert(e,t,r){return new ko(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const my=function(n){return"number"==typeof n?"number:"+Eb(n):"string:"+n},nT=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===im||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===im||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let rT,iT,T0,Ic=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),nT(this.priorityNode_)}static set __childrenNodeConstructor(t){rT=t}static get __childrenNodeConstructor(){return rT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return nn(t)?this:".priority"===Xt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Xt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===Ec(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+my(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Eb(this.value_):this.value_,this.lazyHash_=a0(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(s>=0,"Unknown leaf type: "+r),(0,O.hu)(l>=0,"Unknown leaf type: "+i),s===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Zn=new class sR extends py{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?zd(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return on.MIN}maxPost(){return new on(uu,new Ic("[PRIORITY-POST]",T0))}makePost(e,t){const r=iT(e);return new on(t,new Ic("[PRIORITY-POST]",r))}toString(){return".priority"}},oT=Math.log(2);class D0{constructor(e){this.count=parseInt(Math.log(e+1)/oT,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _y=function(n,e,t,r){n.sort(e);const i=function(g,y){const C=y-g;let S,N;if(0===C)return null;if(1===C)return S=n[g],N=t?t(S):S,new ko(N,S.node,ko.BLACK,null,null);{const k=parseInt(C/2,10)+g,B=i(g,k),Z=i(k+1,y);return S=n[k],N=t?t(S):S,new ko(N,S.node,ko.BLACK,B,Z)}},h=function(g){let y=null,C=null,S=n.length;const N=function(B,Z){const J=S-B,Me=S;S-=B;const He=i(J+1,Me),je=n[J],Ye=t?t(je):je;k(new ko(Ye,je.node,Z,null,He))},k=function(B){y?(y.left=B,y=B):(C=B,y=B)};for(let B=0;B<g.count;++B){const Z=g.nextBitIsOne(),J=Math.pow(2,g.count-(B+1));Z?N(J,ko.BLACK):(N(J,ko.BLACK),N(J,ko.RED))}return C}(new D0(n.length));return new Ds(r||e,h)};let sm;const Zf={};class al{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(Zf&&Zn,"ChildrenNode.ts has not been loaded"),sm=sm||new al({".priority":Zf},{".priority":Zn}),sm}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ds?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==ol,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(on.Wrap);let h,l=s.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=s.getNext();h=i?_y(r,e.getCompare()):Zf;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const C=Object.assign({},this.indexes_);return C[g]=h,new al(C,y)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,s)=>{const l=(0,O.DV)(this.indexSet_,s);if((0,O.hu)(l,"Missing index implementation for "+s),i===Zf){if(l.isDefinedOn(e.node)){const h=[],g=t.getIterator(on.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&h.push(y),y=g.getNext();return h.push(e),_y(h,l.getCompare())}return Zf}{const h=t.get(e.name);let g=i;return h&&(g=g.remove(new on(e.name,h))),g.insert(e,e.node)}});return new al(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===Zf)return i;{const s=t.get(e.name);return s?i.remove(new on(e.name,s)):i}});return new al(r,this.indexSet_)}}let Xd,qt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&nT(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Xd||(Xd=new n(new Ds(rm),null,al.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xd}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Xd:r}}getChild(t){const r=Xt(t);return null===r?this:this.getImmediateChild(r).getChild(Fn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new on(t,r);let s,l;r.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?Xd:this.priorityNode_;return new n(s,h,l)}}updateChild(t,r){const i=Xt(t);if(null===i)return r;{(0,O.hu)(".priority"!==Xt(t)||1===Ec(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Fn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,l=!0;if(this.forEachChild(Zn,(h,g)=>{r[h]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):l=!1}),!t&&l&&s<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+my(this.getPriority().val())+":"),this.forEachChild(Zn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":a0(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const l=s.getPredecessorKey(new on(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new on(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new on(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,on.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,on.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Yf?-1:0}withIndex(t){if(t===ol||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ol||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Zn),s=r.getIterator(Zn);let l=i.getNext(),h=s.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=s.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===ol?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Yf=new class aT extends qt{constructor(){super(new Ds(rm),qt.EMPTY_NODE,al.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(on,{MIN:{value:new on(vc,qt.EMPTY_NODE)},MAX:{value:new on(uu,Yf)}}),b0.__EMPTY_NODE=qt.EMPTY_NODE,Ic.__childrenNodeConstructor=qt,function tT(n){im=n}(Yf),function sT(n){T0=n}(Yf);const lT=!0;function cr(n,e=null){if(null===n)return qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ic(n,cr(e));if(n instanceof Array||!lT){let t=qt.EMPTY_NODE;return fi(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const s=cr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(cr(e))}{const t=[];let r=!1;if(fi(n,(l,h)=>{if("."!==l.substring(0,1)){const g=cr(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new on(l,g)))}}),0===t.length)return qt.EMPTY_NODE;const s=_y(t,iR,l=>l.name,rm);if(r){const l=_y(t,Zn.getCompare());return new qt(s,cr(e),new al({".priority":l},{".priority":Zn}))}return new qt(s,cr(e),al.Default)}}!function Kf(n){iT=n}(cr);class S0 extends py{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!nn(e)&&".priority"!==Xt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?zd(e.name,t.name):s}makePost(e,t){const r=cr(e),i=qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new on(t,i)}maxPost(){const e=qt.EMPTY_NODE.updateChild(this.indexPath_,Yf);return new on(uu,e)}toString(){return Wf(this.indexPath_,0).join("/")}}const A0=new class oR extends py{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?zd(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return on.MIN}maxPost(){return on.MAX}makePost(e,t){const r=cr(e);return new on(t,r)}toString(){return".value"}};function x0(n){return{type:"value",snapshotNode:n}}function om(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Qf(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function am(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class uT{constructor(e){this.index_=e}updateChild(e,t,r,i,s,l){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Qf(t,h)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(om(t,r)):l.trackChildChange(am(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Zn,(i,s)=>{t.hasChild(i)||r.trackChildChange(Qf(i,s))}),t.isLeafNode()||t.forEachChild(Zn,(i,s)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(s)||r.trackChildChange(am(i,s,l))}else r.trackChildChange(om(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class lm{constructor(e){this.indexedFilter_=new uT(e.getIndex()),this.index_=e.getIndex(),this.startPost_=lm.getStartPost_(e),this.endPost_=lm.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,l){return this.matches(new on(t,r))||(r=qt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=qt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(qt.EMPTY_NODE);const s=this;return t.forEachChild(Zn,(l,h)=>{s.matches(new on(l,h))||(i=i.updateImmediateChild(l,qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class lR{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new lm(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,l){return this.rangedFilter_.matches(new on(t,r))||(r=qt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,l):this.fullLimitUpdateChild_(e,t,r,s,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=qt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const h=s.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),l++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(qt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;s.hasNext();){const h=s.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let l;if(this.reverse_){const S=this.index_.getCompare();l=(N,k)=>S(k,N)}else l=this.index_.getCompare();const h=e;(0,O.hu)(h.numChildren()===this.limit_,"");const g=new on(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(g);if(h.hasChild(t)){const S=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const k=null==N?1:l(N,g);if(C&&!r.isEmpty()&&k>=0)return s?.trackChildChange(am(t,r,S)),h.updateImmediateChild(t,r);{s?.trackChildChange(Qf(t,S));const Z=h.updateImmediateChild(t,qt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(s?.trackChildChange(om(N.name,N.node)),Z.updateImmediateChild(N.name,N.node)):Z}}return r.isEmpty()?e:C&&l(y,g)>=0?(null!=s&&(s.trackChildChange(Qf(y.name,y.node)),s.trackChildChange(om(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,qt.EMPTY_NODE)):e}}class yy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zn}copy(){const e=new yy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function R0(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function N0(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function vy(n,e){const t=n.copy();return t.index_=e,t}function dT(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Zn?t="$priority":n.index_===A0?t="$value":n.index_===ol?t="$key":((0,O.hu)(n.index_ instanceof S0,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,O.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,O.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Jf(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Zn&&(e.i=n.index_.toString()),e}class um extends qf{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Wg("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=um.getListenId_(e,r),h={};this.listens_[l]=h;const g=dT(e._queryParams);this.restRequest_(s+".json",g,(y,C)=>{let S=C;if(404===y&&(S=null,y=null),null===y&&this.onDataUpdate_(s,S,!1,r),(0,O.DV)(this.listens_,l)===h){let N;N=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(N,null)}})}unlisten(e,t){const r=um.getListenId_(e,t);delete this.listens_[r]}get(e){const t=dT(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(s,l)=>{let h=l;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,O.cI)(h.responseText)}catch{Bi("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&Bi("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class hT{constructor(){this.rootNode_=qt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function cm(){return{value:null,children:new Map}}function eh(n,e,t){if(nn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Xt(e);n.children.has(r)||n.children.set(r,cm()),eh(n.children.get(r),e=Fn(e),t)}}function wy(n,e){if(nn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Zn,(r,i)=>{eh(n,new An(r),i)}),wy(n,e)}}if(n.children.size>0){const t=Xt(e);return e=Fn(e),n.children.has(t)&&wy(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Ey(n,e,t){null!==n.value?t(e,n.value):function fR(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Ey(i,new An(e.toString()+"/"+r),t)})}class X1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&fi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class gR{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new X1(e);const r=1e4+2e4*Math.random();$f(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;fi(e,(i,s)=>{s>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),$f(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Oo=(()=>{return(n=Oo||(Oo={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Oo;var n})();function dm(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class no{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Oo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new An(e));return new no(vn(),t,this.revert)}}return(0,O.hu)(Xt(this.path)===e,"operationForChild called for unrelated child."),new no(Fn(this.path),this.affectedTree,this.revert)}}class hm{constructor(e,t){this.source=e,this.path=t,this.type=Oo.LISTEN_COMPLETE}operationForChild(e){return nn(this.path)?new hm(this.source,vn()):new hm(this.source,Fn(this.path))}}class cu{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Oo.OVERWRITE}operationForChild(e){return nn(this.path)?new cu(this.source,vn(),this.snap.getImmediateChild(e)):new cu(this.source,Fn(this.path),this.snap)}}class ll{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Oo.MERGE}operationForChild(e){if(nn(this.path)){const t=this.children.subtree(new An(e));return t.isEmpty()?null:t.value?new cu(this.source,vn(),t.value):new ll(this.source,vn(),t)}return(0,O.hu)(Xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ll(this.source,Fn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Cc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nn(e))return this.isFullyInitialized()&&!this.filtered_;const t=Xt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class mR{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bc(n,e,t,r,i,s){const l=r.filter(h=>h.type===t);l.sort((h,g)=>function yR(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new on(e.childName,e.snapshotNode),i=new on(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),l.forEach(h=>{const g=function Iy(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(g,n.query_))})})}function Cy(n,e){return{eventCache:n,serverCache:e}}function Xf(n,e,t,r){return Cy(new Cc(e,t,r),n.serverCache)}function P0(n,e,t,r){return Cy(n.eventCache,new Cc(e,t,r))}function ep(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Tc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let fm;class Ln{constructor(e,t=(()=>(fm||(fm=new Ds(Ox)),fm))()){this.value=e,this.children=t}static fromObject(e){let t=new Ln(null);return fi(e,(r,i)=>{t=t.set(new An(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:vn(),value:this.value};if(nn(e))return null;{const r=Xt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Fn(e),t);return null!=s?{path:Kn(new An(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nn(e))return this;{const t=Xt(e),r=this.children.get(t);return null!==r?r.subtree(Fn(e)):new Ln(null)}}set(e,t){if(nn(e))return new Ln(t,this.children);{const r=Xt(e),s=(this.children.get(r)||new Ln(null)).set(Fn(e),t),l=this.children.insert(r,s);return new Ln(this.value,l)}}remove(e){if(nn(e))return this.children.isEmpty()?new Ln(null):new Ln(null,this.children);{const t=Xt(e),r=this.children.get(t);if(r){const i=r.remove(Fn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Ln(null):new Ln(this.value,s)}return this}}get(e){if(nn(e))return this.value;{const t=Xt(e),r=this.children.get(t);return r?r.get(Fn(e)):null}}setTree(e,t){if(nn(e))return t;{const r=Xt(e),s=(this.children.get(r)||new Ln(null)).setTree(Fn(e),t);let l;return l=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Ln(this.value,l)}}fold(e){return this.fold_(vn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Kn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,vn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(nn(e))return null;{const s=Xt(e),l=this.children.get(s);return l?l.findOnPath_(Fn(e),Kn(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,vn(),t)}foreachOnPath_(e,t,r){if(nn(e))return this;{this.value&&r(t,this.value);const i=Xt(e),s=this.children.get(i);return s?s.foreachOnPath_(Fn(e),Kn(t,i),r):new Ln(null)}}foreach(e){this.foreach_(vn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Kn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ro{constructor(e){this.writeTree_=e}static empty(){return new ro(new Ln(null))}}function nh(n,e,t){if(nn(e))return new ro(new Ln(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const l=ji(i,e);return s=s.updateChild(l,t),new ro(n.writeTree_.set(i,s))}{const i=new Ln(t),s=n.writeTree_.setTree(e,i);return new ro(s)}}}function O0(n,e,t){let r=n;return fi(t,(i,s)=>{r=nh(r,Kn(e,i),s)}),r}function gT(n,e){if(nn(e))return ro.empty();{const t=n.writeTree_.setTree(e,new Ln(null));return new ro(t)}}function F0(n,e){return null!=rh(n,e)}function rh(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ji(t.path,e)):null}function L0(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Zn,(r,i)=>{e.push(new on(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new on(r,i.value))}),e}function ul(n,e){if(nn(e))return n;{const t=rh(n,e);return new ro(null!=t?new Ln(t):n.writeTree_.subtree(e))}}function by(n){return n.writeTree_.isEmpty()}function tp(n,e){return U0(vn(),n.writeTree_,e)}function U0(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,O.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=U0(Kn(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Kn(n,".priority"),r)),t}}function pm(n,e){return Dy(e,n)}function yT(n,e){if(n.snap)return Po(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Po(Kn(n.path,t),e))return!0;return!1}function us(n){return n.visible}function ih(n,e,t){let r=ro.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const l=s.path;let h;if(s.snap)Po(t,l)?(h=ji(t,l),r=nh(r,h,s.snap)):Po(l,t)&&(h=ji(l,t),r=nh(r,vn(),s.snap.getChild(h)));else{if(!s.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(Po(t,l))h=ji(t,l),r=O0(r,h,s.children);else if(Po(l,t))if(h=ji(l,t),nn(h))r=O0(r,vn(),s.children);else{const g=(0,O.DV)(s.children,Xt(h));if(g){const y=g.getChild(Fn(h));r=nh(r,vn(),y)}}}}}return r}function vT(n,e,t,r,i){if(r||i){const s=ul(n.visibleWrites,e);return!i&&by(s)?t:i||null!=t||F0(s,vn())?tp(ih(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Po(y.path,e)||Po(e,y.path))},e),t||qt.EMPTY_NODE):null}{const s=rh(n.visibleWrites,e);if(null!=s)return s;{const l=ul(n.visibleWrites,e);return by(l)?t:null!=t||F0(l,vn())?tp(l,t||qt.EMPTY_NODE):null}}}function Ty(n,e,t,r){return vT(n.writeTree,n.treePath,e,t,r)}function mm(n,e){return function IR(n,e,t){let r=qt.EMPTY_NODE;const i=rh(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Zn,(s,l)=>{r=r.updateImmediateChild(s,l)}),r;if(t){const s=ul(n.visibleWrites,e);return t.forEachChild(Zn,(l,h)=>{const g=tp(ul(s,new An(l)),h);r=r.updateImmediateChild(l,g)}),L0(s).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return L0(ul(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function ET(n,e,t,r){return function eO(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Kn(e,t);if(F0(n.visibleWrites,s))return null;{const l=ul(n.visibleWrites,s);return by(l)?i.getChild(t):tp(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function _m(n,e){return function wT(n,e){return rh(n.visibleWrites,e)}(n.writeTree,Kn(n.treePath,e))}function B0(n,e,t){return function tO(n,e,t,r){const i=Kn(e,t),s=rh(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?tp(ul(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function IT(n,e){return Dy(Kn(n.treePath,e),n.writeTree)}function Dy(n,e){return{treePath:n,writeTree:e}}class CT{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,am(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Qf(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,om(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,am(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const ym=new class bT{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class vm{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Cc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return B0(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Tc(this.viewCache_),s=function CR(n,e,t,r,i,s){return function V0(n,e,t,r,i,s,l){let h;const g=ul(n.visibleWrites,e),y=rh(g,vn());if(null!=y)h=y;else{if(null==t)return[];h=tp(g,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const C=[],S=l.getCompare(),N=s?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let k=N.getNext();for(;k&&C.length<i;)0!==S(k,r)&&C.push(k),k=N.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function sh(n,e,t,r,i,s){const l=e.eventCache;if(null!=_m(r,t))return e;{let h,g;if(nn(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Tc(e),S=mm(r,y instanceof qt?y:qt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,s)}else{const y=Ty(r,Tc(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Xt(t);if(".priority"===y){(0,O.hu)(1===Ec(t),"Can't have a priority with additional path components");const C=l.getNode();g=e.serverCache.getNode();const S=ET(r,t,C,g);h=null!=S?n.filter.updatePriority(C,S):l.getNode()}else{const C=Fn(t);let S;if(l.isCompleteForChild(y)){g=e.serverCache.getNode();const N=ET(r,t,l.getNode(),g);S=null!=N?l.getNode().getImmediateChild(y).updateChild(C,N):l.getNode().getImmediateChild(y)}else S=B0(r,y,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),y,S,C,i,s):l.getNode()}}return Xf(e,h,l.isFullyInitialized()||nn(t),n.filter.filtersNodes())}}function Sy(n,e,t,r,i,s,l,h){const g=e.serverCache;let y;const C=l?n.filter:n.filter.getIndexedFilter();if(nn(t))y=C.updateFullNode(g.getNode(),r,null);else if(C.filtersNodes()&&!g.isFiltered()){const k=g.getNode().updateChild(t,r);y=C.updateFullNode(g.getNode(),k,null)}else{const k=Xt(t);if(!g.isCompleteForPath(t)&&Ec(t)>1)return e;const B=Fn(t),J=g.getNode().getImmediateChild(k).updateChild(B,r);y=".priority"===k?C.updatePriority(g.getNode(),J):C.updateChild(g.getNode(),k,J,B,ym,null)}const S=P0(e,y,g.isFullyInitialized()||nn(t),C.filtersNodes());return sh(n,S,t,i,new vm(i,S,s),h)}function Ay(n,e,t,r,i,s,l){const h=e.eventCache;let g,y;const C=new vm(i,e,s);if(nn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=Xf(e,y,!0,n.filter.filtersNodes());else{const S=Xt(t);if(".priority"===S)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=Xf(e,y,h.isFullyInitialized(),h.isFiltered());else{const N=Fn(t),k=h.getNode().getImmediateChild(S);let B;if(nn(N))B=r;else{const Z=C.getCompleteChild(S);B=null!=Z?".priority"===Yd(N)&&Z.getChild(Kb(N)).isEmpty()?Z:Z.updateChild(N,r):qt.EMPTY_NODE}g=k.equals(B)?e:Xf(e,n.filter.updateChild(h.getNode(),S,B,N,C,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function xy(n,e){return n.eventCache.isCompleteForChild(e)}function ST(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function AT(n,e,t,r,i,s,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=nn(t)?r:new Ln(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((S,N)=>{if(C.hasChild(S)){const B=ST(0,e.serverCache.getNode().getImmediateChild(S),N);g=Sy(n,g,new An(S),B,i,s,l,h)}}),y.children.inorderTraversal((S,N)=>{const k=!e.serverCache.isCompleteForChild(S)&&null===N.value;if(!C.hasChild(S)&&!k){const Z=ST(0,e.serverCache.getNode().getImmediateChild(S),N);g=Sy(n,g,new An(S),Z,i,s,l,h)}}),g}class xT{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new uT(r.getIndex()),s=function cT(n){return n.loadsAllData()?new uT(n.getIndex()):n.hasLimit()?new lR(n):new lm(n)}(r);this.processor_=function nO(n){return{filter:n}}(s);const l=t.serverCache,h=t.eventCache,g=i.updateFullNode(qt.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode(qt.EMPTY_NODE,h.getNode(),null),C=new Cc(g,l.isFullyInitialized(),i.filtersNodes()),S=new Cc(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=Cy(S,C),this.eventGenerator_=new mR(this.query_)}get query(){return this.query_}}function NT(n,e){const t=Tc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!nn(e)&&!t.getImmediateChild(Xt(e)).isEmpty())?t.getChild(e):null}function j0(n){return 0===n.eventRegistrations_.length}function MT(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function $0(n,e,t,r){e.type===Oo.MERGE&&null!==e.source.queryId&&((0,O.hu)(Tc(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(ep(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function bR(n,e,t,r,i){const s=new CT;let l,h;if(t.type===Oo.OVERWRITE){const y=t;y.source.fromUser?l=Ay(n,e,y.path,y.snap,r,i,s):((0,O.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!nn(y.path),l=Sy(n,e,y.path,y.snap,r,i,h,s))}else if(t.type===Oo.MERGE){const y=t;y.source.fromUser?l=function rO(n,e,t,r,i,s,l){let h=e;return r.foreach((g,y)=>{const C=Kn(t,g);xy(e,Xt(C))&&(h=Ay(n,h,C,y,i,s,l))}),r.foreach((g,y)=>{const C=Kn(t,g);xy(e,Xt(C))||(h=Ay(n,h,C,y,i,s,l))}),h}(n,e,y.path,y.children,r,i,s):((0,O.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),l=AT(n,e,y.path,y.children,r,i,h,s))}else if(t.type===Oo.ACK_USER_WRITE){const y=t;l=y.revert?function SR(n,e,t,r,i,s){let l;if(null!=_m(r,t))return e;{const h=new vm(r,e,i),g=e.eventCache.getNode();let y;if(nn(t)||".priority"===Xt(t)){let C;if(e.serverCache.isFullyInitialized())C=Ty(r,Tc(e));else{const S=e.serverCache.getNode();(0,O.hu)(S instanceof qt,"serverChildren would be complete if leaf node"),C=mm(r,S)}y=n.filter.updateFullNode(g,C,s)}else{const C=Xt(t);let S=B0(r,C,e.serverCache);null==S&&e.serverCache.isCompleteForChild(C)&&(S=g.getImmediateChild(C)),y=null!=S?n.filter.updateChild(g,C,S,Fn(t),h,s):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(g,C,qt.EMPTY_NODE,Fn(t),h,s):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Ty(r,Tc(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=_m(r,vn()),Xf(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function TR(n,e,t,r,i,s,l){if(null!=_m(i,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(nn(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return Sy(n,e,t,g.getNode().getChild(t),i,s,h,l);if(nn(t)){let y=new Ln(null);return g.getNode().forEachChild(ol,(C,S)=>{y=y.set(new An(C),S)}),AT(n,e,t,y,i,s,h,l)}return e}{let y=new Ln(null);return r.foreach((C,S)=>{const N=Kn(t,C);g.isCompleteForPath(N)&&(y=y.set(C,g.getNode().getChild(N)))}),AT(n,e,t,y,i,s,h,l)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Oo.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);l=function DR(n,e,t,r,i){const s=e.serverCache;return sh(n,P0(e,s.getNode(),s.isFullyInitialized()||nn(t),s.isFiltered()),t,r,ym,i)}(n,e,t.path,r,s)}const g=s.getChanges();return function DT(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ep(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(x0(ep(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function TT(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,O.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,H0(n,s.changes,s.viewCache.eventCache.getNode(),null)}function H0(n,e,t,r){return function _R(n,e,t,r){const i=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function aR(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),bc(n,i,"child_removed",e,r,t),bc(n,i,"child_added",e,r,t),bc(n,i,"child_moved",s,r,t),bc(n,i,"child_changed",e,r,t),bc(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let wm,lh;class G0{constructor(){this.views=new Map}}function kT(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,O.hu)(null!=s,"SyncTree gave us an op for an invalid query."),$0(s,e,t,r)}{let s=[];for(const l of n.views.values())s=s.concat($0(l,e,t,r));return s}}function z0(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=Ty(t,i?r:null),g=!1;h?g=!0:r instanceof qt?(h=mm(t,r),g=!1):(h=qt.EMPTY_NODE,g=!1);const y=Cy(new Cc(h,g,!1),new Cc(r,i,!1));return new xT(e,y)}return l}function PR(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function oh(n,e){let t=null;for(const r of n.views.values())t=t||NT(r,e);return t}function kR(n,e){return e._queryParams.loadsAllData()?q0(n):n.views.get(e._queryIdentifier)}function OR(n,e){return null!=kR(n,e)}function ah(n){return null!=q0(n)}function q0(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Ry=1;class W0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ln(null),this.pendingWriteTree_=function gm(){return{visibleWrites:ro.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ny(n,e,t,r,i){return function vR(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=nh(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Em(n,new cu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function cl(n,e,t=!1){const r=function _T(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function wR(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&yT(h,r.path)?i=!1:Po(r.path,h.path)&&(s=!0)),l--}return!!i&&(s?(function ER(n){n.visibleWrites=ih(n.allWrites,us,vn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=gT(n.visibleWrites,r.path):fi(r.children,g=>{n.visibleWrites=gT(n.visibleWrites,Kn(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let s=new Ln(null);return null!=r.snap?s=s.set(vn(),!0):fi(r.children,l=>{s=s.set(new An(l),!0)}),Em(n,new no(r.path,s,t))}return[]}function np(n,e,t){return Em(n,new cu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function My(n,e,t,r,i=!1){const s=e._path,l=n.syncPointTree_.get(s);let h=[];if(l&&("default"===e._queryIdentifier||OR(l,e))){const g=function sO(n,e,t,r){const i=e._queryIdentifier,s=[];let l=[];const h=ah(n);if("default"===i)for(const[g,y]of n.views.entries())l=l.concat(MT(y,t,r)),j0(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||s.push(y.query));else{const g=n.views.get(i);g&&(l=l.concat(MT(g,t,r)),j0(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||s.push(g.query)))}return h&&!ah(n)&&s.push(new(function NR(){return(0,O.hu)(wm,"Reference.ts has not been loaded"),wm}())(e._repo,e._path)),{removed:s,events:l}}(l,e,t,r);(function MR(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=g.removed;if(h=g.events,!i){const C=-1!==y.findIndex(N=>N._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(s,(N,k)=>ah(k));if(C&&!S){const N=n.syncPointTree_.subtree(s);if(!N.isEmpty()){const k=function ba(n){return n.fold((e,t,r)=>{if(t&&ah(t))return[q0(t)];{let i=[];return t&&(i=PR(t)),fi(r,(s,l)=>{i=i.concat(l)}),i}})}(N);for(let B=0;B<k.length;++B){const Z=k[B],J=Z.query,Me=VT(n,Z);n.listenProvider_.startListening(Im(J),ky(n,J),Me.hashFn,Me.onComplete)}}}!S&&y.length>0&&!r&&(C?n.listenProvider_.stopListening(Im(e),null):y.forEach(N=>{const k=n.queryToTagMap.get(Oy(N));n.listenProvider_.stopListening(Im(N),k)}))}!function Y0(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Oy(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,y)}return h}function FT(n,e,t,r){const i=Fy(n,r);if(null!=i){const s=Ly(i),l=s.path,h=s.queryId,g=ji(l,e);return BT(n,l,new cu(dm(h),g,t))}return[]}function K0(n,e,t,r=!1){const i=e._path;let s=null,l=!1;n.syncPointTree_.foreachOnPath(i,(N,k)=>{const B=ji(N,i);s=s||oh(k,B),l=l||ah(k)});let g,h=n.syncPointTree_.get(i);h?(l=l||ah(h),s=s||oh(h,vn())):(h=new G0,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=s?g=!0:(g=!1,s=qt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((k,B)=>{const Z=oh(B,vn());Z&&(s=s.updateImmediateChild(k,Z))}));const y=OR(h,e);if(!y&&!e._queryParams.loadsAllData()){const N=Oy(e);(0,O.hu)(!n.queryToTagMap.has(N),"View does not exist, but we have a tag");const k=function UR(){return Ry++}();n.queryToTagMap.set(N,k),n.tagToQueryMap.set(k,N)}let S=function iO(n,e,t,r,i,s){const l=z0(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function xR(n,e){n.eventRegistrations_.push(e)}(l,t),function RR(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Zn,(s,l)=>{r.push(om(s,l))}),t.isFullyInitialized()&&r.push(x0(t.getNode())),H0(n,r,t.getNode(),e)}(l,t)}(h,e,t,pm(n.pendingWriteTree_,i),s,g);if(!y&&!l&&!r){const N=kR(h,e);S=S.concat(function cO(n,e,t){const r=e._path,i=ky(n,e),s=VT(n,t),l=n.listenProvider_.startListening(Im(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!ah(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((y,C,S)=>{if(!nn(y)&&C&&ah(C))return[q0(C).query];{let N=[];return C&&(N=N.concat(PR(C).map(k=>k.query))),fi(S,(k,B)=>{N=N.concat(B)}),N}});for(let y=0;y<g.length;++y){const C=g[y];n.listenProvider_.stopListening(Im(C),ky(n,C))}}return l}(n,e,N))}return S}function Z0(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,h)=>{const y=oh(h,ji(l,e));if(y)return y});return vT(i,e,s,t,!0)}function Em(n,e){return LT(e,n.syncPointTree_,null,pm(n.pendingWriteTree_,vn()))}function LT(n,e,t,r){if(nn(n.path))return UT(n,e,t,r);{const i=e.get(vn());null==t&&null!=i&&(t=oh(i,vn()));let s=[];const l=Xt(n.path),h=n.operationForChild(l),g=e.children.get(l);if(g&&h){const y=t?t.getImmediateChild(l):null,C=IT(r,l);s=s.concat(LT(h,g,y,C))}return i&&(s=s.concat(kT(i,n,r,t))),s}}function UT(n,e,t,r){const i=e.get(vn());null==t&&null!=i&&(t=oh(i,vn()));let s=[];return e.children.inorderTraversal((l,h)=>{const g=t?t.getImmediateChild(l):null,y=IT(r,l),C=n.operationForChild(l);C&&(s=s.concat(UT(C,h,g,y)))}),i&&(s=s.concat(kT(i,n,r,t))),s}function VT(n,e){const t=e.query,r=ky(n,t);return{hashFn:()=>(function RT(n){return n.viewCache_.serverCache.getNode()}(e)||qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function LR(n,e,t){const r=Fy(n,t);if(r){const i=Ly(r),s=i.path,l=i.queryId,h=ji(s,e);return BT(n,s,new hm(dm(l),h))}return[]}(n,t._path,r):function lO(n,e){return Em(n,new hm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Cb(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return My(n,t,null,s)}}}}function ky(n,e){const t=Oy(e);return n.queryToTagMap.get(t)}function Oy(n){return n._path.toString()+"$"+n._queryIdentifier}function Fy(n,e){return n.tagToQueryMap.get(e)}function Ly(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new An(n.substr(0,e))}}function BT(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),kT(r,t,pm(n.pendingWriteTree_,e),null)}function Im(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function OT(){return(0,O.hu)(lh,"Reference.ts has not been loaded"),lh}())(n._repo,n._path):n}class Ss{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ss(t)}node(){return this.node_}}class Q0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Kn(this.path_,e);return new Q0(this.syncTree_,t)}node(){return Z0(this.syncTree_,this.path_)}}const J0=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},jT=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?VR(n[".sv"],e,t):"object"==typeof n[".sv"]?X0(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},VR=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},X0=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},eE=function(n,e,t,r){return tE(e,new Q0(t,n),r)},Uy=function(n,e,t){return tE(n,new Ss(e),t)};function tE(n,e,t){const r=n.getPriority().val(),i=jT(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,h=jT(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new Ic(h,cr(i)):n}{const l=n;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new Ic(i))),l.forEachChild(Zn,(h,g)=>{const y=tE(g,e.getImmediateChild(h),t);y!==g&&(s=s.updateImmediateChild(h,y))}),s}}class Vy{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Cm(n,e){let t=e instanceof An?e:new An(e),r=n,i=Xt(t);for(;null!==i;){const s=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new Vy(i,r,s),t=Fn(t),i=Xt(t)}return r}function uh(n){return n.node.value}function By(n,e){n.node.value=e,jy(n)}function $T(n){return n.node.childCount>0}function Fo(n,e){fi(n.node.children,(t,r)=>{e(new Vy(t,n,r))})}function du(n,e,t,r){t&&!r&&e(n),Fo(n,i=>{du(i,e,!0,r)}),t&&r&&e(n)}function ch(n){return new An(null===n.parent?n.name:ch(n.parent)+"/"+n.name)}function jy(n){null!==n.parent&&function BR(n,e,t){const r=function nE(n){return void 0===uh(n)&&!$T(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,jy(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,jy(n))}(n.parent,n.name,n)}const dO=/[\[\].#$\/\u0000-\u001F\u007F]/,jR=/[\[\].#$\u0000-\u001F\u007F]/,rE=10485760,$y=function(n){return"string"==typeof n&&0!==n.length&&!dO.test(n)},GT=function(n){return"string"==typeof n&&0!==n.length&&!jR.test(n)},Hy=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!uy(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},Ta=function(n,e,t,r){r&&void 0===e||bm((0,O.gK)(n,"value"),e,t)},bm=function(n,e,t){const r=t instanceof An?new Zb(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Qd(r));if("function"==typeof e)throw new Error(n+"contains a function "+Qd(r)+" with contents = "+e.toString());if(uy(e))throw new Error(n+"contains "+e.toString()+" "+Qd(r));if("string"==typeof e&&e.length>rE/3&&(0,O.ug)(e)>rE)throw new Error(n+"contains a string greater than "+rE+" utf8 bytes "+Qd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(fi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!$y(l)))throw new Error(n+" contains an invalid key ("+l+") "+Qd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Yb(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),Qb(n)})(r,l),bm(n,h,r),function Xx(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Qd(r)+" in addition to actual children.")}},$R=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];fi(e,(l,h)=>{const g=new An(l);if(bm(i,h,Kn(t,g)),".priority"===Yd(g)&&!Hy(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Wf(r);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!$y(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Jx);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Po(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Tm=function(n,e,t){if(!t||void 0!==e){if(uy(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Hy(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rp=function(n,e,t,r){if(!(r&&void 0===t||$y(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ip=function(n,e,t,r){if(!(r&&void 0===t||GT(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},WT=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ip(n,e,t,r)},io=function(n,e){if(".info"===Xt(e))throw new Error(n+" failed = Can't modify data under /.info/")},iE=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!$y(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),GT(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Gy{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function dh(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!Xg(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function sE(n,e,t){dh(n,t),KT(n,r=>Xg(r,e))}function so(n,e,t){dh(n,t),KT(n,r=>Po(r,e)||Po(e,r))}function KT(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(hO(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function hO(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();yc&&hi("event: "+t.toString()),qd(r)}}}const HR="repo_interrupt",fO=25;class ZT{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cm(),this.transactionQueueTree_=new Vy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function YT(n){const t=n.infoData_.getNode(new An(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Dm(n){return J0({timestamp:YT(n)})}function zR(n,e,t,r,i){n.dataUpdateCount++;const s=new An(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,O.UI)(t,y=>cr(y));l=function Py(n,e,t,r){const i=Fy(n,r);if(i){const s=Ly(i),l=s.path,h=s.queryId,g=ji(l,e),y=Ln.fromObject(t);return BT(n,l,new ll(dm(h),g,y))}return[]}(n.serverSyncTree_,s,g,i)}else{const g=cr(t);l=FT(n.serverSyncTree_,s,g,i)}else if(r){const g=(0,O.UI)(t,y=>cr(y));l=function FR(n,e,t){const r=Ln.fromObject(t);return Em(n,new ll({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,g)}else{const g=cr(t);l=np(n.serverSyncTree_,s,g)}let h=s;l.length>0&&(h=op(n,s)),so(n.eventQueue_,h,l)}function qR(n,e){QT(n,"connected",e),!1===e&&function ZR(n){hu(n,"onDisconnectEvents");const e=Dm(n),t=cm();Ey(n.onDisconnect_,vn(),(i,s)=>{const l=eE(i,s,n.serverSyncTree_,e);eh(t,i,l)});let r=[];Ey(t,vn(),(i,s)=>{r=r.concat(np(n.serverSyncTree_,i,s));const l=qy(n,i);op(n,l)}),n.onDisconnect_=cm(),so(n.eventQueue_,vn(),r)}(n)}function QT(n,e,t){const r=new An("/.info/"+e),i=cr(t);n.infoData_.updateSnapshot(r,i);const s=np(n.infoSyncTree_,r,i);so(n.eventQueue_,r,s)}function oE(n){return n.nextWriteId_++}function sp(n,e,t,r,i){hu(n,"set",{path:e.toString(),value:t,priority:r});const s=Dm(n),l=cr(t,r),h=Z0(n.serverSyncTree_,e),g=Uy(l,h,s),y=oE(n),C=Ny(n.serverSyncTree_,e,g,y,!0);dh(n.eventQueue_,C),n.server_.put(e.toString(),l.val(!0),(N,k)=>{const B="ok"===N;B||Bi("set at "+e+" failed: "+N);const Z=cl(n.serverSyncTree_,y,!B);so(n.eventQueue_,e,Z),hh(0,i,N,k)});const S=qy(n,e);op(n,S),so(n.eventQueue_,S,[])}function JT(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&wy(n.onDisconnect_,e),hh(0,t,r,i)})}function Dc(n,e,t,r){const i=cr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,l)=>{"ok"===s&&eh(n.onDisconnect_,e,i),hh(0,r,s,l)})}function uE(n,e,t){let r;r=".info"===Xt(e._path)?My(n.infoSyncTree_,e,t):My(n.serverSyncTree_,e,t),sE(n.eventQueue_,e._path,r)}function zy(n){n.persistentConnection_&&n.persistentConnection_.interrupt(HR)}function hu(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),hi(t,...e)}function hh(n,e,t,r){e&&qd(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const l=new Error(s);l.code=i,e(l)}})}function eD(n,e,t){return Z0(n.serverSyncTree_,e,t)||qt.EMPTY_NODE}function dE(n,e=n.transactionQueueTree_){if(e||Sm(n,e),uh(e)){const t=rD(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function tD(n,e,t){const r=t.map(y=>y.currentWriteId),i=eD(n,e,r);let s=i;const l=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,O.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const S=ji(e,C.path);s=s.updateChild(S,C.currentOutputSnapshotRaw)}const h=s.val(!0),g=e;n.server_.put(g.toString(),h,y=>{hu(n,"transaction put response",{path:g.toString(),status:y});let C=[];if("ok"===y){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,C=C.concat(cl(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();Sm(n,Cm(n.transactionQueueTree_,e)),dE(n,n.transactionQueueTree_),so(n.eventQueue_,e,C);for(let N=0;N<S.length;N++)qd(S[N])}else{if("datastale"===y)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Bi("transaction at "+g.toString()+" failed: "+y);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=y}op(n,e)}},l)}(n,ch(e),t)}else $T(e)&&Fo(e,t=>{dE(n,t)})}function op(n,e){const t=nD(n,e),r=ch(t);return function YR(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],y=ji(t,g.path);let S,C=!1;if((0,O.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)C=!0,S=g.abortReason,i=i.concat(cl(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=fO)C=!0,S="maxretry",i=i.concat(cl(n.serverSyncTree_,g.currentWriteId,!0));else{const N=eD(n,g.path,l);g.currentInputSnapshot=N;const k=e[h].update(N.val());if(void 0!==k){bm("transaction failed: Data returned ",k,g.path);let B=cr(k);"object"==typeof k&&null!=k&&(0,O.r3)(k,".priority")||(B=B.updatePriority(N.getPriority()));const J=g.currentWriteId,Me=Dm(n),He=Uy(B,N,Me);g.currentOutputSnapshotRaw=B,g.currentOutputSnapshotResolved=He,g.currentWriteId=oE(n),l.splice(l.indexOf(J),1),i=i.concat(Ny(n.serverSyncTree_,g.path,He,g.currentWriteId,g.applyLocally)),i=i.concat(cl(n.serverSyncTree_,J,!0))}else C=!0,S="nodata",i=i.concat(cl(n.serverSyncTree_,g.currentWriteId,!0))}so(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}Sm(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)qd(r[h]);dE(n,n.transactionQueueTree_)}(n,rD(n,t),r),r}function nD(n,e){let t,r=n.transactionQueueTree_;for(t=Xt(e);null!==t&&void 0===uh(r);)r=Cm(r,t),t=Xt(e=Fn(e));return r}function rD(n,e){const t=[];return hE(n,e,t),t.sort((r,i)=>r.order-i.order),t}function hE(n,e,t){const r=uh(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Fo(e,i=>{hE(n,i,t)})}function Sm(n,e){const t=uh(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,By(e,t.length>0?t:void 0)}Fo(e,r=>{Sm(n,r)})}function qy(n,e){const t=ch(nD(n,e)),r=Cm(n.transactionQueueTree_,e);return function HT(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{fE(n,i)}),fE(n,r),du(r,i=>{fE(n,i)}),t}function fE(n,e){const t=uh(e);if(t){const r=[];let i=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,O.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,O.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(cl(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?By(e,void 0):t.length=s+1,so(n.eventQueue_,ch(e),i);for(let l=0;l<r.length;l++)qd(r[l])}}const Am=function(n,e){const t=mO(n),r=t.namespace;return"firebase.com"===t.domain&&sl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&sl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Bi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new m0(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new An(t.pathString)}},mO=function(n){let e="",t="",r="",i="",s="",l=!0,h="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(C,S)),C<S&&(i=function QR(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,S)));const N=function iD(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Bi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));y=e.indexOf(":"),y>=0?(l="https"===h||"wss"===h,g=parseInt(e.substring(y+1),10)):y=e.length;const k=e.slice(0,y);if("localhost"===k.toLowerCase())t="localhost";else if(k.split(".").length<=2)t=k;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),s=r}"ns"in N&&(s=N.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:s}},pE="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",gE=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=pE.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=pE.charAt(e[i]);return(0,O.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class sD{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Wl)(this.snapshot.exportVal())}}class oD{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class aD{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class JR{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return JT(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){io("OnDisconnect.remove",this._path);const e=new O.BH;return Dc(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){io("OnDisconnect.set",this._path),Ta("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return Dc(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){io("OnDisconnect.setWithPriority",this._path),Ta("OnDisconnect.setWithPriority",e,this._path,!1),Tm("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function XT(n,e,t,r,i){const s=cr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,h)=>{"ok"===l&&eh(n.onDisconnect_,e,s),hh(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){io("OnDisconnect.update",this._path),$R("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function aE(n,e,t,r){if((0,O.xb)(t))return hi("onDisconnect().update() called with empty data.  Don't do anything."),void hh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&fi(t,(l,h)=>{const g=cr(h);eh(n.onDisconnect_,Kn(e,l),g)}),hh(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class As{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return nn(this._path)?null:Yd(this._path)}get ref(){return new Da(this._repo,this._path)}get _queryIdentifier(){const e=Jf(this._queryParams),t=d0(e);return"{}"===t?"default":t}get _queryObject(){return Jf(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof As))return!1;const t=this._repo===e._repo,r=Xg(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Qx(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Wy(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Sc(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===ol){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==vc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==uu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Zn){if(null!=e&&!Hy(e)||null!=t&&!Hy(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof S0||n.getIndex()===A0,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function mE(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Da extends As{constructor(e,t){super(e,t,new yy,!1)}get parent(){const e=Kb(this._path);return null===e?null:new Da(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ap{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new An(e),r=lp(this.ref,e);return new ap(this._node.getChild(t),r,Zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new ap(i,lp(this.ref,r),Zn)))}hasChild(e){const t=new An(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function XR(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?lp(n._root,e):n._root}function lD(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=Am(e,n._repo.repoInfo_.nodeAdmin);iE("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&sl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),XR(n,t.path.toString())}function lp(n,e){return null===Xt((n=(0,O.m9)(n))._path)?WT("child","path",e,!1):ip("child","path",e,!1),new Da(n._repo,Kn(n._path,e))}function uD(n,e){n=(0,O.m9)(n),io("set",n._path),Ta("set",e,n._path,!1);const t=new O.BH;return sp(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function a(n,e){$R("update",e,n._path,!1);const t=new O.BH;return function KR(n,e,t,r){hu(n,"update",{path:e.toString(),value:t});let i=!0;const s=Dm(n),l={};if(fi(t,(h,g)=>{i=!1,l[h]=eE(Kn(e,h),cr(g),n.serverSyncTree_,s)}),i)hi("update() called with empty data.  Don't do anything."),hh(0,r,"ok",void 0);else{const h=oE(n),g=function aO(n,e,t,r){!function mT(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=O0(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Ln.fromObject(t);return Em(n,new ll({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);dh(n.eventQueue_,g),n.server_.merge(e.toString(),t,(y,C)=>{const S="ok"===y;S||Bi("update at "+e+" failed: "+y);const N=cl(n.serverSyncTree_,h,!S),k=N.length>0?op(n,e):e;so(n.eventQueue_,k,N),hh(0,r,y,C)}),fi(t,y=>{const C=qy(n,Kn(e,y));op(n,C)}),so(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function u(n){n=(0,O.m9)(n);const e=new aD(()=>{}),t=new d(e);return function WR(n,e,t){const r=function uO(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const S=ji(y,t);r=r||oh(C,S)});let i=n.syncPointTree_.get(t);i?r=r||oh(i,vn()):(i=new G0,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,l=s?new Cc(r,!0,!1):null;return function AR(n){return ep(n.viewCache_)}(z0(i,e,pm(n.pendingWriteTree_,e._path),s?l.getNode():qt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=cr(i).withIndex(e._queryParams.getIndex());let l;if(K0(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=np(n.serverSyncTree_,e._path,s);else{const h=ky(n.serverSyncTree_,e);l=FT(n.serverSyncTree_,e._path,s,h)}return so(n.eventQueue_,e._path,l),My(n.serverSyncTree_,e,t,null,!0),s},i=>(hu(n,"get for query "+(0,O.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new ap(r,new Da(n._repo,n._path),n._queryParams.getIndex()))}class d{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new sD("value",this,new ap(e.snapshotNode,new Da(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oD(this,e,t):null}matches(e){return e instanceof d&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class f{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oD(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=lp(new Da(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new sD(e.type,this,new ap(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof f&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function _(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const g=t,y=(C,S)=>{uE(n._repo,n,h),g(C,S)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new aD(t,s||void 0),h="value"===e?new d(l):new f(e,l);return function lE(n,e,t){let r;r=".info"===Xt(e._path)?K0(n.infoSyncTree_,e,t):K0(n.serverSyncTree_,e,t),sE(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>uE(n._repo,n,h)}function w(n,e,t,r){return _(n,"value",e,t,r)}function b(n,e,t,r){return _(n,"child_added",e,t,r)}function D(n,e,t,r){return _(n,"child_changed",e,t,r)}function R(n,e,t,r){return _(n,"child_moved",e,t,r)}function P(n,e,t,r){return _(n,"child_removed",e,t,r)}function V(n,e,t){let r=null;const i=t?new aD(t):null;"value"===e?r=new d(i):e&&(r=new f(e,i)),uE(n._repo,n,r)}class W{}class te extends W{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ta("endAt",this._value,e._path,!0);const t=N0(e._queryParams,this._value,this._key);if(mE(t),Sc(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new As(e._repo,e._path,t,e._orderByCalled)}}class $e extends W{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ta("endBefore",this._value,e._path,!1);const t=function hR(n,e,t){let r;return r=N0(n,e,n.index_===ol||t?t:vc),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(mE(t),Sc(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new As(e._repo,e._path,t,e._orderByCalled)}}class gt extends W{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ta("startAt",this._value,e._path,!0);const t=R0(e._queryParams,this._value,this._key);if(mE(t),Sc(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new As(e._repo,e._path,t,e._orderByCalled)}}class Pe extends W{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ta("startAfter",this._value,e._path,!1);const t=function dR(n,e,t){let r;return r=R0(n,e,n.index_===ol||t?t:uu),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(mE(t),Sc(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new As(e._repo,e._path,t,e._orderByCalled)}}class nr extends W{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new As(e._repo,e._path,function uR(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class wO extends W{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new As(e._repo,e._path,function cR(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Gj extends W{constructor(e){super(),this._path=e}_apply(e){Wy(e,"orderByChild");const t=new An(this._path);if(nn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new S0(t),i=vy(e._queryParams,r);return Sc(i),new As(e._repo,e._path,i,!0)}}class qj extends W{_apply(e){Wy(e,"orderByKey");const t=vy(e._queryParams,ol);return Sc(t),new As(e._repo,e._path,t,!0)}}class Kj extends W{_apply(e){Wy(e,"orderByPriority");const t=vy(e._queryParams,Zn);return Sc(t),new As(e._repo,e._path,t,!0)}}class Yj extends W{_apply(e){Wy(e,"orderByValue");const t=vy(e._queryParams,A0);return Sc(t),new As(e._repo,e._path,t,!0)}}class Jj extends W{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ta("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new te(this._value,this._key)._apply(new gt(this._value,this._key)._apply(e))}}function fu(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function PT(n){(0,O.hu)(!wm,"__referenceConstructor has already been defined"),wm=n})(Da),function oO(n){(0,O.hu)(!lh,"__referenceConstructor has already been defined"),lh=n}(Da);const e$="FIREBASE_DATABASE_EMULATOR_HOST",eN={};let EO=!1;function IO(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||sl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,l=Am(s,i),h=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env[e$]),y?(g=!0,s=`http://${y}?ns=${h.namespace}`,l=Am(s,i),h=l.repoInfo):g=!l.repoInfo.secure;const C=i&&g?new Ca(Ca.OWNER):new f0(n.name,n.options,e);iE("Invalid Firebase Database URL",l),nn(l.path)||sl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function r$(n,e,t,r){let i=eN[e.name];i||(i={},eN[e.name]=i);let s=i[n.toURLString()];return s&&sl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new ZT(n,EO,t,r),i[n.toURLString()]=s,s}(h,n,C,new Ab(n.name,t));return new s$(S,n)}class s${constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function GR(n,e,t){if(n.stats_=tr(n.repoInfo_),n.forceRestClient_||Sb())n.server_=new um(n.repoInfo_,(r,i,s,l)=>{zR(n,r,i,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>qR(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Jd(n.repoInfo_,e,(r,i,s,l)=>{zR(n,r,i,s,l)},r=>{qR(n,r)},r=>{!function pO(n,e){fi(e,(t,r)=>{QT(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Y1(n,e){const t=n.toString();return Gf[t]||(Gf[t]=e()),Gf[t]}(n.repoInfo_,()=>new gR(n.stats_,n.server_)),n.infoData_=new hT,n.infoSyncTree_=new W0({startListening:(r,i,s,l)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=np(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),QT(n,"connected",!1),n.serverSyncTree_=new W0({startListening:(r,i,s,l)=>(n.server_.listen(r,s,i,(h,g)=>{const y=l(h,g);so(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Da(this._repo,vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function n$(n,e){const t=eN[e];(!t||t[n.key]!==n)&&sl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),zy(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&sl("Cannot call "+e+" on a deleted database.")}}function CO(){w0.IS_TRANSPORT_INITIALIZED&&Bi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function o$(){CO(),wc.forceDisallow()}function a$(){CO(),zf.forceDisallow(),wc.forceAllow()}function c$(n,e){u0(n,e)}const h$={".sv":"timestamp"};class g${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Jd.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Jd.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function d$(n){_b(Vi.SDK_VERSION),(0,Vi._registerComponent)(new ls.wA("database",(e,{instanceIdentifier:t})=>IO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Vi.registerVersion)(r0,"0.14.4",n),(0,Vi.registerVersion)(r0,"0.14.4","esm2017")}();const v$=new Ia.Yd("@firebase/database-compat"),TO=function(n){v$.warn("FIREBASE WARNING: "+n)};class I${constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,TO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class C${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class up{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),ip("DataSnapshot.child","path",e,!1),new up(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ip("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new up(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new Sa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class cs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const l=cs.getCancelAndContextArgs_("Query.on",r,i),h=(y,C)=>{t.call(l.context,new up(this.database,y),C)};h.userCallback=t,h.context=l.context;const g=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return w(this._delegate,h,g),t;case"child_added":return b(this._delegate,h,g),t;case"child_removed":return P(this._delegate,h,g),t;case"child_changed":return D(this._delegate,h,g),t;case"child_moved":return R(this._delegate,h,g),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,V(this._delegate,e,i)}else V(this._delegate,e)}get(){return u(this._delegate).then(e=>new up(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const s=cs.getCancelAndContextArgs_("Query.once",r,i),l=new O.BH,h=(y,C)=>{const S=new up(this.database,y);t&&t.call(s.context,S,C),l.resolve(S)};h.userCallback=t,h.context=s.context;const g=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":w(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":b(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":P(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":D(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":R(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new cs(this.database,fu(this._delegate,function Mr(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new nr(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new cs(this.database,fu(this._delegate,function Hj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new wO(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new cs(this.database,fu(this._delegate,function zj(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ip("orderByChild","path",n,!1),new Gj(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new cs(this.database,fu(this._delegate,function Wj(){return new qj}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new cs(this.database,fu(this._delegate,function Zj(){return new Kj}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new cs(this.database,fu(this._delegate,function Qj(){return new Yj}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new cs(this.database,fu(this._delegate,function Pt(n=null,e){return rp("startAt","key",e,!0),new gt(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new cs(this.database,fu(this._delegate,function Gt(n,e){return rp("startAfter","key",e,!0),new Pe(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new cs(this.database,fu(this._delegate,function Ie(n,e){return rp("endAt","key",e,!0),new te(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new cs(this.database,fu(this._delegate,function Xe(n,e){return rp("endBefore","key",e,!0),new $e(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new cs(this.database,fu(this._delegate,function Xj(n,e){return rp("equalTo","key",e,!0),new Jj(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof cs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Sa(this.database,new Da(this._delegate._repo,this._delegate._path))}}class Sa extends cs{constructor(e,t){super(e,new As(t._repo,t._path,new yy,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Sa(this.database,lp(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Sa(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new Sa(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=uD(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,TO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}io("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=a(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function o(n,e,t){if(io("setWithPriority",n._path),Ta("setWithPriority",e,n._path,!1),Tm("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return sp(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function yO(n){return io("remove",n._path),uD(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function m$(n,e,t){var r;if(n=(0,O.m9)(n),io("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new O.BH,h=w(n,()=>{});return function gO(n,e,t,r,i,s){hu(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:o0(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=eD(n,e,void 0);l.currentInputSnapshot=h;const g=l.update(h.val());if(void 0===g)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{bm("transaction failed: Data returned ",g,l.path),l.status=0;const y=Cm(n.transactionQueueTree_,e),C=uh(y)||[];let S;C.push(l),By(y,C),"object"==typeof g&&null!==g&&(0,O.r3)(g,".priority")?(S=(0,O.DV)(g,".priority"),(0,O.hu)(Hy(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Z0(n.serverSyncTree_,e)||qt.EMPTY_NODE).getPriority().val();const N=Dm(n),k=cr(g,S),B=Uy(k,h,N);l.currentOutputSnapshotRaw=k,l.currentOutputSnapshotResolved=B,l.currentWriteId=oE(n);const Z=Ny(n.serverSyncTree_,e,B,l.currentWriteId,l.applyLocally);so(n.eventQueue_,e,Z),dE(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,y,C)=>{let S=null;g?s.reject(g):(S=new ap(C,new Da(n._repo,n._path),Zn),s.resolve(new g$(y,S)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new C$(s.committed,new up(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function vO(n,e){n=(0,O.m9)(n),io("setPriority",n._path),Tm("setPriority",e,!1);const t=new O.BH;return sp(n._repo,Kn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function _O(n,e){n=(0,O.m9)(n),io("push",n._path),Ta("push",e,n._path,!0);const t=YT(n._repo),r=gE(t),i=lp(n,r),s=lp(n,r);let l;return l=null!=e?uD(s,e).then(()=>s):Promise.resolve(s),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Sa(this.database,l));t&&i.then(()=>t(null),l=>t(l));const s=new Sa(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return io("Reference.onDisconnect",this._delegate._path),new I$(new JR(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class _E{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:o$,forceLongPolling:a$}}useEmulator(e,t,r={}){!function bO(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&sl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&sl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ca(Ca.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);s=new Ca(l)}!function t$(n,e,t,r){n.repoInfo_=new m0(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof Sa){const t=lD(this._delegate,e.toString());return new Sa(this,t)}{const t=XR(this._delegate,e);return new Sa(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=lD(this._delegate,e);return new Sa(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function l$(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),zy(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function u$(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function cE(n){n.persistentConnection_&&n.persistentConnection_.resume(HR)}(n._repo)}(this._delegate)}}_E.ServerValue={TIMESTAMP:function f$(){return h$}(),increment:n=>function p$(n){return{".sv":{increment:n}}}(n)};var T$=Object.freeze({__proto__:null,initStandalone:function b$({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){_b(t);const l=new ls.zt("auth-internal",new ls.H0("database-standalone"));return l.setComponent(new ls.wA("auth-internal",()=>r,"PRIVATE")),{instance:new _E(IO(n,l,void 0,e,s),n),namespace:i}}});const D$=_E.ServerValue;!function S$(n){n.INTERNAL.registerComponent(new ls.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new _E(i,r)},"PUBLIC").setServiceProps({Reference:Sa,Query:cs,Database:_E,DataSnapshot:up,enableLogging:c$,INTERNAL:T$,ServerValue:D$}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(zg.Z);var cD=U(5363),A$=U(6063);class x$ extends jn.x{constructor(e=1/0,t=1/0,r=A$.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(r.push(e),!i&&r.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!e.closed;l+=r?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const l=t.now();let h=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)h=g;h&&r.splice(0,h+1)}}}function DO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,wa.B)({connector:()=>new x$(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function SO(n,e){return(0,Gl.m)(e)?Hn(()=>n,e):Hn(()=>n)}var tN=U(9468);U(259);const rN=new Map,xO={activated:!1,tokenObservers:[]},k$={initialized:!1,enabled:!1};function jr(n){return rN.get(n)||Object.assign({},xO)}function hD(){return k$}const iN="https://content-firebaseappcheck.googleapis.com/v1",U$="exchangeDebugToken",RO={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class B${constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function j$(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ds=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function sN(n){if(!jr(n).activated)throw ds.create("use-before-activation",{appName:n.name})}function gD(n,e){return aN.apply(this,arguments)}function aN(){return(aN=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const s={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,s)}catch(S){throw ds.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw ds.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw ds.create("fetch-parse-error",{originalErrorMessage:S?.message})}const g=h.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(g[1]),C=Date.now();return{token:h.token,expireTimeMillis:C+y,issuedAtTimeMillis:C}})).apply(this,arguments)}function NO(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${iN}/projects/${t}/apps/${r}:${U$}?key=${i}`,body:{debug_token:e}}}const z$="firebase-app-check-database",q$=1,yE="firebase-app-check-store";let mD=null;function kO(n,e){return lN.apply(this,arguments)}function lN(){return(lN=(0,ve.Z)(function*(n,e){const r=(yield function PO(){return mD||(mD=new Promise((n,e)=>{try{const t=indexedDB.open(z$,q$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ds.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(yE,{keyPath:"compositeKey"})}}catch(t){e(ds.create("storage-open",{originalErrorMessage:t?.message}))}}),mD)}()).transaction(yE,"readwrite"),s=r.objectStore(yE).put({compositeKey:n,value:e});return new Promise((l,h)=>{s.onsuccess=g=>{l()},r.onerror=g=>{var y;h(ds.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const vE=new Ia.Yd("@firebase/app-check");function dN(n,e){return(0,O.hl)()?function K$(n,e){return kO(function FO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{vE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function fN(){return hD().enabled}function pN(){return gN.apply(this,arguments)}function gN(){return(gN=(0,ve.Z)(function*(){const n=hD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const eH={error:"UNKNOWN_ERROR"};function tH(n){return O.US.encodeString(JSON.stringify(n),!1)}function _D(n){return mN.apply(this,arguments)}function mN(){return(mN=(0,ve.Z)(function*(n,e=!1){const t=n.app;sN(t);const r=jr(t);let s,i=r.token;if(i&&!Ky(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(Ky(g)?i=g:yield dN(t,void 0))}if(!e&&i&&Ky(i))return{token:i.token};let h,l=!1;if(fN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gD(NO(t,yield pN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const g=yield r.exchangeTokenPromise;return yield dN(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield jr(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?vE.warn(g.message):vE.error(g),s=g}return i?s?h=Ky(i)?{token:i.token,internalError:s}:BO(s):(h={token:i.token},r.token=i,yield dN(t,i)):h=BO(s),l&&function VO(n,e){const t=jr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function LO(n){return _N.apply(this,arguments)}function _N(){return(_N=(0,ve.Z)(function*(n){const e=n.app;sN(e);const{provider:t}=jr(e);if(fN()){const r=yield pN(),{token:i}=yield gD(NO(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function vN(n,e){const t=jr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function UO(n){const{app:e}=n,t=jr(e);let r=t.tokenRefresher;r||(r=function nH(n){const{app:e}=n;return new B$((0,ve.Z)(function*(){let r;if(r=jr(e).token?yield _D(n,!0):yield _D(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=jr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},RO.RETRIAL_MIN_WAIT,RO.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ky(n){return n.expireTimeMillis-Date.now()>0}function BO(n){return{token:tH(eH),error:n}}class rH{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=jr(this.app);for(const t of e)vN(this.app,t.next);return Promise.resolve()}}const KO="app-check-internal";!function _H(){(0,Vi._registerComponent)(new ls.wA("app-check",n=>function iH(n,e){return new rH(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(KO).initialize()})),(0,Vi._registerComponent)(new ls.wA(KO,n=>function sH(n){return{getToken:e=>_D(n,e),getLimitedUseToken:()=>LO(n),addTokenListener:e=>function yN(n,e,t,r){const{app:i}=n,s=jr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Ky(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),UO(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>UO(n))}(n,"INTERNAL",e),removeTokenListener:e=>vN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vi.registerVersion)("@firebase/app-check","0.8.0")}();class wE{constructor(){return(0,yn.vb)("app-check")}}typeof window<"u"&&window;var vD=U(9260);const bN=new c.OlP("angularfire2.auth.use-emulator"),TN=new c.OlP("angularfire2.auth.settings"),DN=new c.OlP("angularfire2.auth.tenant-id"),SN=new c.OlP("angularfire2.auth.langugage-code"),AN=new c.OlP("angularfire2.auth.use-device-language"),xN=new c.OlP("angularfire.auth.persistence"),RN=(n,e,t,r,i,s,l,h)=>(0,Xr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,s&&g.useDeviceLanguage(),l)for(const[y,C]of Object.entries(l))g.settings[y]=C;return h&&g.setPersistence(h),g},[t,r,i,s,l,h]);let wD=(()=>{class n{constructor(t,r,i,s,l,h,g,y,C,S,N,k){const B=new jn.x,Z=lt(void 0).pipe((0,cD.Q)(l.outsideAngular),Hn(()=>s.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,2644)))),(0,yt.U)(()=>(0,Xr.on)(t,s,r)),(0,yt.U)(J=>RN(J,s,h,y,C,S,g,N)),DO({bufferSize:1,refCount:!1}));if(js(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=lt(null);else{Z.pipe(ts()).subscribe();const Me=Z.pipe(Hn(Ye=>Ye.getRedirectResult().then(St=>St,()=>null)),yn.iC,DO({bufferSize:1,refCount:!1})),He=Z.pipe(Hn(Ye=>new di.y(St=>({unsubscribe:s.runOutsideAngular(()=>Ye.onAuthStateChanged(kt=>St.next(kt),kt=>St.error(kt),()=>St.complete()))})))),je=Z.pipe(Hn(Ye=>new di.y(St=>({unsubscribe:s.runOutsideAngular(()=>Ye.onIdTokenChanged(kt=>St.next(kt),kt=>St.error(kt),()=>St.complete()))}))));this.authState=Me.pipe(SO(He),(0,tN.R)(l.outsideAngular),(0,cD.Q)(l.insideAngular)),this.user=Me.pipe(SO(je),(0,tN.R)(l.outsideAngular),(0,cD.Q)(l.insideAngular)),this.idToken=this.user.pipe(Hn(Ye=>Ye?(0,ln.D)(Ye.getIdToken()):lt(null))),this.idTokenResult=this.user.pipe(Hn(Ye=>Ye?(0,ln.D)(Ye.getIdTokenResult()):lt(null))),this.credential=(0,ay.T)(Me,B,this.authState.pipe(Ii(Ye=>!Ye))).pipe((0,yt.U)(Ye=>Ye?.user?Ye:null),(0,tN.R)(l.outsideAngular),(0,cD.Q)(l.insideAngular))}return(0,Xr.pX)(this,Z,s,{spy:{apply:(J,Me,He)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&He.then(je=>B.next(je))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xr.Dh),c.LFG(Xr.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(yn.HU),c.LFG(bN,8),c.LFG(TN,8),c.LFG(DN,8),c.LFG(SN,8),c.LFG(AN,8),c.LFG(xN,8),c.LFG(wE,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),CH=(()=>{class n{constructor(){vD.Z.registerVersion("angularfire",yn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[wD]}),n})();function YO(n){return null==n}function QO(n){return"function"==typeof n.set}function JO(n,e){return QO(e)?e:n.ref(e)}function XO(n,e){if(function bH(n){return"string"==typeof n}(n))return e.stringCase();if(QO(n))return e.firebaseCase();if(function TH(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function EE(n,e,t="on",r=n0.z){return new di.y(i=>{let s=null;return s=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,yt.U)(i=>{const{snapshot:s,prevKey:l}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:l,key:h}}),(0,wa.B)())}function eF(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function AH(n,e){const{payload:t,prevKey:r,key:i}=e,s=eF(n,i),l=function SH(n,e){if(YO(e))return 0;{const t=eF(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function tF(n){return(YO(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function nF(n,e,t){return function DH(n,e,t){return EE(n,"value","once",t).pipe(Hn(r=>{const i=[lt(r)];return e.forEach(s=>i.push(EE(n,s,"on",t))),(0,ay.T)(...i).pipe(Qa(AH,[]))}),Mo())}(n,e=tF(e),t)}function rF(n,e,t){const r=(e=tF(e)).map(i=>EE(n,i,"on",t));return(0,ay.T)(...r)}function iF(n,e){return function(r,i){return XO(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function MH(n){return function(t){return t?XO(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function sF(n,e){return function(){return EE(n,"value","on",e)}}const OH=new c.OlP("angularfire2.realtimeDatabaseURL"),FH=new c.OlP("angularfire2.database.use-emulator");let NN=(()=>{class n{constructor(t,r,i,s,l,h,g,y,C,S,N,k,B,Z,J){this.schedulers=h;const Me=g,He=(0,Xr.on)(t,l,r);y&&RN(He,l,C,N,k,B,S,Z),this.database=(0,Xr.cc)(`${He.name}.database.${i}`,"AngularFireDatabase",He.name,()=>{const je=l.runOutsideAngular(()=>He.database(i||void 0));return Me&&je.useEmulator(...Me),je},[Me])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>JO(this.database,t));let s=i;return r&&(s=r(i)),function PH(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:iF(r,"update"),set:iF(r,"set"),push:i=>r.push(i),remove:MH(r),snapshotChanges:i=>nF(n,i,t).pipe(yn.iC),stateChanges:i=>rF(n,i,t).pipe(yn.iC),auditTrail:i=>function xH(n,e,t){return function NH(n,e,t){return function RH(n,e){return EE(n,"value","on",e).pipe((0,yt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function mb(...n){const e=(0,ci.jO)(n);return(0,Ir.e)((t,r)=>{const i=n.length,s=new Array(i);let l=n.map(()=>!1),h=!1;for(let g=0;g<i;g++)(0,la.Xf)(n[g]).subscribe((0,Xn.x)(r,y=>{s[g]=y,!h&&!l[g]&&(l[g]=!0,(h=l.every(Zs.y))&&(l=null))},gb.Z));t.subscribe((0,Xn.x)(r,g=>{if(h){const y=[g,...s];r.next(e?e(...y):y)}}))})}(e),(0,yt.U)(([i,s])=>{const l=i.lastKeyToLoad,h=s.map(g=>g.key);return{actions:s,lastKeyToLoad:l,loadedKeys:h}}),function Mx(n){return(0,Ir.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Xn.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,yt.U)(i=>i.actions))}(n,rF(n,e).pipe(Qa((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(yn.iC),valueChanges:(i,s)=>nF(n,i,t).pipe((0,yt.U)(h=>h.map(g=>s&&s.idField?Object.assign(Object.assign({},g.payload.val()),{[s.idField]:g.key}):g.payload.val())),yn.iC)}}(s,this)}object(t){return function kH(n,e){return{query:n,snapshotChanges:()=>sF(n,e.schedulers.outsideAngular)().pipe(yn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>sF(n,e.schedulers.outsideAngular)().pipe(yn.iC,(0,yt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>JO(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xr.Dh),c.LFG(Xr.xv,8),c.LFG(OH,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(yn.HU),c.LFG(FH,8),c.LFG(wD,8),c.LFG(bN,8),c.LFG(TN,8),c.LFG(DN,8),c.LFG(SN,8),c.LFG(AN,8),c.LFG(xN,8),c.LFG(wE,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),LH=(()=>{class n{constructor(){vD.Z.registerVersion("angularfire",yn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[NN]}),n})(),MN=(()=>{class n{constructor(t){this.db=t}AddStudent(t){this.studentsRef.push({firstName:t.firstName,lastName:t.lastName,email:t.email,mobileNumber:t.mobileNumber})}GetStudent(t){return this.studentRef=this.db.object("students-list/"+t),this.studentRef}GetStudentsList(){return this.studentsRef=this.db.list("students-list"),this.studentsRef}UpdateStudent(t){this.studentRef.update({firstName:t.firstName,lastName:t.lastName,email:t.email,mobileNumber:t.mobileNumber})}DeleteStudent(t){this.studentRef=this.db.object("students-list/"+t),this.studentRef.remove()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(NN))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class oF{}class UH{}const fh="*";function VH(n,e){return{type:7,name:n,definitions:e,options:{}}}function aF(n,e=null){return{type:4,styles:e,timings:n}}function lF(n,e=null){return{type:2,steps:n,options:e}}function IE(n){return{type:6,styles:n,offset:null}}function PN(n,e,t){return{type:0,name:n,styles:e,options:t}}function uF(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function cF(n){Promise.resolve().then(n)}class CE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cF(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class dF{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?cF(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++r==s&&this._onDestroy()}),l.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const kN="!",hF=["toast-component",""];function BH(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.remove())}),c.TgZ(1,"span",6),c._uU(2,"\xd7"),c.qZA()()}}function jH(n,e){if(1&n&&(c.ynx(0),c._uU(1),c.BQk()),2&n){const t=c.oxw(2);c.xp6(1),c.hij("[",t.duplicatesCount+1,"]")}}function $H(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1),c.YNc(2,jH,2,1,"ng-container",4),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.titleClass),c.uIk("aria-label",t.title),c.xp6(1),c.hij(" ",t.title," "),c.xp6(1),c.Q6J("ngIf",t.duplicatesCount)}}function HH(n,e){if(1&n&&c._UZ(0,"div",7),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.Q6J("innerHTML",t.message,c.oJD)}}function GH(n,e){if(1&n&&(c.TgZ(0,"div",8),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.uIk("aria-label",t.message),c.xp6(1),c.hij(" ",t.message," ")}}function zH(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"div",9),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Udp("width",t.width+"%")}}class JH{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class XH{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class e3{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new jn.x,this._activate=new jn.x,this._manualClose=new jn.x,this._resetTimeout=new jn.x,this._countDuplicate=new jn.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class ED{constructor(e,t,r,i,s,l){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=l,this._onTap=new jn.x,this._onAction=new jn.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const pF=new c.OlP("ToastConfig");class t3 extends XH{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class n3{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let r3=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),i3=(()=>{class n{constructor(t,r,i,s){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=s,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new t3(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new n3(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(r3),c.LFG(c._Vd),c.LFG(c.z2F),c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bE=(()=>{class n{constructor(t,r,i,s,l){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=l,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){const{includeTitleDuplicates:l}=this.toastrConfig;for(const h of this.toasts)if((!l||l&&h.title===t)&&h.message===r)return h.toastRef.onDuplicate(i,s),h;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");const l=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==l)return l;this.previousToastMessage=r;let h=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(h=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const g=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&s.enableHtml&&(y=this.sanitizer.sanitize(c.q3G.HTML,r));const C=new e3(g),S=new ED(this.index,s,y,i,t,C),k=c.zs3.create({providers:[{provide:ED,useValue:S}],parent:this._injector}),B=new JH(s.toastComponent,k),Z=g.attach(B,s.newestOnTop);C.componentInstance=Z.instance;const J={toastId:this.index,title:i||"",message:r||"",toastRef:C,onShown:C.afterActivate(),onHidden:C.afterClosed(),onTap:S.onTap(),onAction:S.onAction(),portal:Z};return h||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{J.toastRef.activate()})),this.toasts.push(J),J}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(pF),c.LFG(i3),c.LFG(c.zs3),c.LFG(ld),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const s3={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(bE),c.Y36(ED),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(c.d8E("@flyInOut",r.state),c.Tol(r.toastClasses),c.Udp("display",r.displayStyle))},attrs:hF,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(c.YNc(0,BH,3,0,"button",0),c.YNc(1,$H,3,5,"div",1),c.YNc(2,HH,1,3,"div",2),c.YNc(3,GH,2,4,"div",3),c.YNc(4,zH,2,2,"div",4)),2&t&&(c.Q6J("ngIf",r.options.closeButton),c.xp6(1),c.Q6J("ngIf",r.title),c.xp6(1),c.Q6J("ngIf",r.message&&r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.message&&!r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.options.progressBar))},dependencies:[oi],encapsulation:2,data:{animation:[VH("flyInOut",[PN("inactive",IE({opacity:0})),PN("active",IE({opacity:1})),PN("removed",IE({opacity:0})),uF("inactive => active",aF("{{ easeTime }}ms {{ easing }}")),uF("active => removed",aF("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let o3=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:pF,useValue:{default:s3,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Kr]}),n})();function a3(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please enter atleast first name "),c.qZA())}function l3(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Name shouldn't be less than 2 words "),c.qZA())}function u3(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please provide email "),c.qZA())}function c3(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please enter correct email "),c.qZA())}function d3(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please provide contact number "),c.qZA())}function h3(n,e){1&n&&(c.TgZ(0,"p",14)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Use numbers only number "),c.qZA())}let f3=(()=>{class n{constructor(t,r,i){this.crudApi=t,this.fb=r,this.toastr=i}ngOnInit(){this.crudApi.GetStudentsList(),this.studenForm()}studenForm(){this.studentForm=this.fb.group({firstName:["",[No.required,No.minLength(2)]],lastName:[""],email:["",[No.required,No.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[No.required,No.pattern("^[0-9]+$")]]})}get firstName(){return this.studentForm.get("firstName")}get lastName(){return this.studentForm.get("lastName")}get email(){return this.studentForm.get("email")}get mobileNumber(){return this.studentForm.get("mobileNumber")}ResetForm(){this.studentForm.reset()}submitStudentData(){this.crudApi.AddStudent(this.studentForm.value),this.toastr.success(this.studentForm.controls.firstName.value+" successfully added!"),this.ResetForm()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(MN),c.Y36(fb),c.Y36(bE))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-add-student"]],decls:35,vars:8,consts:[[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","button",1,"btn","btn-secondary","gap-right",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"error"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2,"Add Student"),c.qZA()(),c.TgZ(3,"form",2),c.NdJ("ngSubmit",function(){return r.submitStudentData()}),c.TgZ(4,"div",3)(5,"div",4)(6,"div",3)(7,"div",5)(8,"label"),c._uU(9,"First name"),c.qZA(),c._UZ(10,"input",6),c.YNc(11,a3,4,0,"p",7),c.YNc(12,l3,4,0,"p",7),c.qZA(),c.TgZ(13,"div",5)(14,"label"),c._uU(15,"Last name"),c.qZA(),c._UZ(16,"input",8),c.qZA()(),c.TgZ(17,"div",3)(18,"div",5)(19,"label"),c._uU(20,"Email"),c.qZA(),c._UZ(21,"input",9),c.YNc(22,u3,4,0,"p",7),c.YNc(23,c3,4,0,"p",7),c.qZA(),c.TgZ(24,"div",5)(25,"label"),c._uU(26,"Mobile number"),c.qZA(),c._UZ(27,"input",10),c.YNc(28,d3,4,0,"p",7),c.YNc(29,h3,4,0,"p",7),c.qZA()(),c.TgZ(30,"div",11)(31,"button",12),c.NdJ("click",function(){return r.ResetForm()}),c._uU(32," Reset "),c.qZA(),c.TgZ(33,"button",13),c._uU(34," Add Student "),c.qZA()()()()()),2&t&&(c.xp6(3),c.Q6J("formGroup",r.studentForm),c.xp6(8),c.Q6J("ngIf",r.firstName.touched&&r.firstName.invalid),c.xp6(1),c.Q6J("ngIf",null==r.firstName.errors?null:r.firstName.errors.minlength),c.xp6(10),c.Q6J("ngIf",r.email.touched&&r.email.invalid),c.xp6(1),c.Q6J("ngIf",null==r.email.errors?null:r.email.errors.pattern),c.xp6(5),c.Q6J("ngIf",r.mobileNumber.touched&&r.mobileNumber.invalid),c.xp6(1),c.Q6J("ngIf",null==r.mobileNumber.errors?null:r.mobileNumber.errors.pattern),c.xp6(4),c.Q6J("disabled",!r.studentForm.valid))},dependencies:[oi,Bg,Fd,Rf,HC,oy,Vf,X_]}),n})();function p3(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",12),c.NdJ("keyup.enter",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.previous())})("click",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.previous())}),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.previousLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function g3(n,e){if(1&n&&(c.TgZ(0,"span",14),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()),2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.previousLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function m3(n,e){if(1&n&&(c.TgZ(0,"li",9),c.YNc(1,p3,4,2,"a",10),c.YNc(2,g3,4,2,"span",11),c.qZA()),2&n){c.oxw(2);const t=c.MAs(1);c.ekj("disabled",t.isFirstPage()),c.xp6(1),c.Q6J("ngIf",1<t.getCurrent()),c.xp6(1),c.Q6J("ngIf",t.isFirstPage())}}function _3(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",12),c.NdJ("keyup.enter",function(){c.CHM(t);const i=c.oxw().$implicit;c.oxw(2);const s=c.MAs(1);return c.KtG(s.setCurrent(i.value))})("click",function(){c.CHM(t);const i=c.oxw().$implicit;c.oxw(2);const s=c.MAs(1);return c.KtG(s.setCurrent(i.value))}),c.TgZ(1,"span",13),c._uU(2),c.qZA(),c.TgZ(3,"span"),c._uU(4),c.ALo(5,"number"),c.qZA()()}if(2&n){const t=c.oxw().$implicit,r=c.oxw(2);c.xp6(2),c.hij("",r.screenReaderPageLabel," "),c.xp6(2),c.Oqu("..."===t.label?t.label:c.xi3(5,2,t.label,""))}}function y3(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"span",16)(2,"span",13),c._uU(3),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"number"),c.qZA()(),c.BQk()),2&n){const t=c.oxw().$implicit,r=c.oxw(2);c.xp6(3),c.hij("",r.screenReaderCurrentLabel," "),c.xp6(2),c.Oqu("..."===t.label?t.label:c.xi3(6,2,t.label,""))}}function v3(n,e){if(1&n&&(c.TgZ(0,"li"),c.YNc(1,_3,6,5,"a",10),c.YNc(2,y3,7,5,"ng-container",15),c.qZA()),2&n){const t=e.$implicit;c.oxw(2);const r=c.MAs(1);c.ekj("current",r.getCurrent()===t.value)("ellipsis","..."===t.label),c.xp6(1),c.Q6J("ngIf",r.getCurrent()!==t.value),c.xp6(1),c.Q6J("ngIf",r.getCurrent()===t.value)}}function w3(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",12),c.NdJ("keyup.enter",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.next())})("click",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.next())}),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.nextLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function E3(n,e){if(1&n&&(c.TgZ(0,"span",14),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()),2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.nextLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function I3(n,e){if(1&n&&(c.TgZ(0,"li",17),c.YNc(1,w3,4,2,"a",10),c.YNc(2,E3,4,2,"span",11),c.qZA()),2&n){c.oxw(2);const t=c.MAs(1);c.ekj("disabled",t.isLastPage()),c.xp6(1),c.Q6J("ngIf",!t.isLastPage()),c.xp6(1),c.Q6J("ngIf",t.isLastPage())}}function C3(n,e){if(1&n&&(c.TgZ(0,"ul",4),c.YNc(1,m3,3,4,"li",5),c.TgZ(2,"li",6),c._uU(3),c.qZA(),c.YNc(4,v3,3,6,"li",7),c.YNc(5,I3,3,4,"li",8),c.qZA()),2&n){const t=c.oxw(),r=c.MAs(1);c.ekj("responsive",t.responsive),c.xp6(1),c.Q6J("ngIf",t.directionLinks),c.xp6(2),c.AsE(" ",r.getCurrent()," / ",r.getLastPage()," "),c.xp6(1),c.Q6J("ngForOf",r.pages)("ngForTrackBy",t.trackByIndex),c.xp6(1),c.Q6J("ngIf",t.directionLinks)}}class ON{constructor(){this.change=new c.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(e){return null==e.id&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)}updateInstance(e){let t=!1;for(let r in this.instances[e.id])e[r]!==this.instances[e.id][r]&&(this.instances[e.id][r]=e[r],t=!0);return t}getCurrentPage(e){return this.instances[e]?this.instances[e].currentPage:1}setCurrentPage(e,t){if(this.instances[e]){let r=this.instances[e];t<=Math.ceil(r.totalItems/r.itemsPerPage)&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}}setTotalItems(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))}setItemsPerPage(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))}getInstance(e=this.DEFAULT_ID){return this.instances[e]?this.clone(this.instances[e]):{}}clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}}const b3=Number.MAX_SAFE_INTEGER;let T3=(()=>{class n{constructor(t){this.service=t,this.state={}}transform(t,r){if(!(t instanceof Array)){let S=r.id||this.service.defaultId();return this.state[S]?this.state[S].slice:t}let h,g,i=r.totalItems&&r.totalItems!==t.length,s=this.createInstance(t,r),l=s.id,y=s.itemsPerPage,C=this.service.register(s);if(!i&&t instanceof Array){if(y=+y||b3,h=(s.currentPage-1)*y,g=h+y,this.stateIsIdentical(l,t,h,g))return this.state[l].slice;{let N=t.slice(h,g);return this.saveState(l,t,N,h,g),this.service.change.emit(l),N}}return C&&this.service.change.emit(l),this.saveState(l,t,t,h,g),t}createInstance(t,r){return this.checkConfig(r),{id:null!=r.id?r.id:this.service.defaultId(),itemsPerPage:+r.itemsPerPage||0,currentPage:+r.currentPage||1,totalItems:+r.totalItems||t.length}}checkConfig(t){const i=["itemsPerPage","currentPage"].filter(s=>!(s in t));if(0<i.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${i.join(", ")}`)}saveState(t,r,i,s,l){this.state[t]={collection:r,size:r.length,slice:i,start:s,end:l}}stateIsIdentical(t,r,i,s){let l=this.state[t];return!(!l||l.size!==r.length||l.start!==i||l.end!==s)&&l.slice.every((g,y)=>g===r[i+y])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ON,16))},n.\u0275pipe=c.Yjl({name:"paginate",type:n,pure:!1}),n})(),D3=(()=>{class n{constructor(t,r){this.service=t,this.changeDetectorRef=r,this.maxSize=7,this.pageChange=new c.vpe,this.pageBoundsCorrection=new c.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(i=>{this.id===i&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(t){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(t){this.pageChange.emit(t)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let t=this.service.getInstance(this.id);const r=this.outOfBoundCorrection(t);r!==t.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(r),this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}outOfBoundCorrection(t){const r=Math.ceil(t.totalItems/t.itemsPerPage);return r<t.currentPage&&0<r?r:t.currentPage<1?1:t.currentPage}createPageArray(t,r,i,s){s=+s;let l=[];const h=Math.max(Math.ceil(i/r),1),g=Math.ceil(s/2),y=t<=g,C=h-g<t,S=!y&&!C;let N=s<h,k=1;for(;k<=h&&k<=s;){let B,Z=this.calculatePageNumber(k,t,s,h);B=N&&(2===k&&(S||C)||k===s-1&&(S||y))?"...":Z,l.push({label:B,value:Z}),k++}return l}calculatePageNumber(t,r,i,s){let l=Math.ceil(i/2);return t===i?s:1===t?t:i<s?s-l<r?s-i+t:l<r?r-l+t:t:t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ON),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[c.TTD]}),n})();function FN(n){return!!n&&"false"!==n}let S3=(()=>{class n{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new c.vpe,this.pageBoundsCorrection=new c.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(t){this._directionLinks=FN(t)}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=FN(t)}get responsive(){return this._responsive}set responsive(t){this._responsive=FN(t)}trackByIndex(t){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(t,r){if(1&t&&(c.TgZ(0,"pagination-template",0,1),c.NdJ("pageChange",function(s){return r.pageChange.emit(s)})("pageBoundsCorrection",function(s){return r.pageBoundsCorrection.emit(s)}),c.TgZ(2,"nav",2),c.YNc(3,C3,6,8,"ul",3),c.qZA()()),2&t){const i=c.MAs(1);c.Q6J("id",r.id)("maxSize",r.maxSize),c.xp6(2),c.uIk("aria-label",r.screenReaderPaginationLabel),c.xp6(1),c.Q6J("ngIf",!(r.autoHide&&i.pages.length<=1))}},dependencies:[D3,oi,go,Up],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),n})(),A3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[ON],imports:[[Kr]]}),n})();function x3(n,e){1&n&&(c.TgZ(0,"a",7),c._uU(1," Add Student "),c.qZA())}function R3(n,e){1&n&&(c.TgZ(0,"div",8),c._UZ(1,"img",9),c.qZA())}function N3(n,e){1&n&&(c.TgZ(0,"div",8),c._UZ(1,"img",10),c.TgZ(2,"p",11),c._uU(3,"No student added yet!"),c.qZA(),c.TgZ(4,"a",7),c._uU(5," Add Student "),c.qZA()())}function M3(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"th",17),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td",18)(10,"span",19),c._uU(11,"Edit"),c.qZA(),c.TgZ(12,"span",20),c.NdJ("click",function(){const s=c.CHM(t).$implicit,l=c.oxw(2);return c.KtG(l.deleteStudent(s))}),c._uU(13,"Delete"),c.qZA()()()}if(2&n){const t=e.$implicit;c.xp6(2),c.Oqu(t.$key),c.xp6(2),c.AsE("",t.firstName," ",t.lastName,""),c.xp6(2),c.Oqu(t.email),c.xp6(2),c.Oqu(t.mobileNumber),c.xp6(2),c.MGl("routerLink","/edit-student/",t.$key,"")}}const P3=function(n){return{itemsPerPage:8,currentPage:n}};function k3(n,e){if(1&n&&(c.TgZ(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th",14),c._uU(5,"Student Id"),c.qZA(),c.TgZ(6,"th",14),c._uU(7,"Student name"),c.qZA(),c.TgZ(8,"th",14),c._uU(9,"Email"),c.qZA(),c.TgZ(10,"th",14),c._uU(11,"Mobile number"),c.qZA(),c.TgZ(12,"th",15),c._uU(13,"Edit"),c.qZA()()(),c.TgZ(14,"tbody"),c.YNc(15,M3,14,6,"tr",16),c.ALo(16,"paginate"),c.qZA()()()),2&n){const t=c.oxw();c.xp6(15),c.Q6J("ngForOf",c.xi3(16,1,t.Student,c.VKq(4,P3,t.p)))}}let O3=(()=>{class n{constructor(t,r){this.crudApi=t,this.toastr=r,this.p=1,this.hideWhenNoStudent=!1,this.noData=!1,this.preLoader=!0}ngOnInit(){this.dataState(),this.crudApi.GetStudentsList().snapshotChanges().subscribe(r=>{this.Student=[],r.forEach(i=>{let s=i.payload.toJSON();s.$key=i.key,this.Student.push(s)})})}dataState(){this.crudApi.GetStudentsList().valueChanges().subscribe(t=>{this.preLoader=!1,t.length<=0?(this.hideWhenNoStudent=!1,this.noData=!0):(this.hideWhenNoStudent=!0,this.noData=!1)})}deleteStudent(t){window.confirm("Are sure you want to delete this student ?")&&(this.crudApi.DeleteStudent(t.$key),this.toastr.success(t.firstName+" successfully deleted!"))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(MN),c.Y36(bE))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-student-list"]],decls:9,vars:4,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["routerLink","/register-student","class","btn btn-success",4,"ngIf"],[1,"pricing-header","mx-auto"],["class","no-data text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"pageChange"],["routerLink","/register-student",1,"btn","btn-success"],[1,"no-data","text-center"],["src","assets/preloader.gif","alt","No student",1,"preloader-icon"],["src","assets/no-student.svg","alt","No student",1,"nodata-msg"],[1,"nodata-msg"],[1,"table-responsive"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"text-center","action-block"],[1,"mr-2","btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"h2",1),c._uU(2,"Students List"),c.qZA(),c.YNc(3,x3,2,0,"a",2),c.qZA(),c.TgZ(4,"div",3),c.YNc(5,R3,2,0,"div",4),c.YNc(6,N3,6,0,"div",4),c.YNc(7,k3,17,6,"div",5),c.TgZ(8,"pagination-controls",6),c.NdJ("pageChange",function(s){return r.p=s}),c.qZA()()),2&t&&(c.xp6(3),c.Q6J("ngIf",r.hideWhenNoStudent),c.xp6(2),c.Q6J("ngIf",r.preLoader),c.xp6(1),c.Q6J("ngIf",r.noData),c.xp6(1),c.Q6J("ngIf",r.hideWhenNoStudent))},dependencies:[go,oi,Tg,S3,T3]}),n})();function F3(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please enter firstname "),c.qZA())}function L3(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Name shouldn't be less than 2 words "),c.qZA())}function U3(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please provide email "),c.qZA())}function V3(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please enter correct email "),c.qZA())}function B3(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Please provide contact number "),c.qZA())}function j3(n,e){1&n&&(c.TgZ(0,"p",18)(1,"sup"),c._uU(2,"*"),c.qZA(),c._uU(3,"Use numbers only number "),c.qZA())}let $3=(()=>{class n{constructor(t,r,i,s,l,h){this.crudApi=t,this.fb=r,this.location=i,this.actRoute=s,this.router=l,this.toastr=h}ngOnInit(){this.updateStudentData();const t=this.actRoute.snapshot.paramMap.get("id");this.crudApi.GetStudent(t).valueChanges().subscribe(r=>{this.editForm.setValue(r)})}get firstName(){return this.editForm.get("firstName")}get lastName(){return this.editForm.get("lastName")}get email(){return this.editForm.get("email")}get mobileNumber(){return this.editForm.get("mobileNumber")}updateStudentData(){this.editForm=this.fb.group({firstName:["",[No.required,No.minLength(2)]],lastName:[""],email:["",[No.required,No.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[No.required,No.pattern("^[0-9]+$")]]})}goBack(){this.location.back()}updateForm(){this.crudApi.UpdateStudent(this.editForm.value),this.toastr.success(this.editForm.controls.firstName.value+" updated successfully"),this.router.navigate(["view-students"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(MN),c.Y36(fb),c.Y36(Ge),c.Y36(Cr),c.Y36(os),c.Y36(bE))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-edit-student"]],decls:40,vars:8,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],[1,"btn-toolbar","mb-2","mb-md-0"],[1,"btn-group"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"row"],[1,"col-lg-12"],[1,"pricing-header","form-block","mx-auto"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","submit",1,"btn","btn-success","btn-block",3,"disabled"],[1,"error"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"h1",1),c._uU(2,"Edit Student Details"),c.qZA(),c.TgZ(3,"div",2)(4,"div",3)(5,"button",4),c.NdJ("click",function(){return r.goBack()}),c._uU(6," Go Back "),c.qZA()()()(),c.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8),c.NdJ("ngSubmit",function(){return r.updateForm()}),c.TgZ(11,"div",5)(12,"div",9)(13,"div",5)(14,"div",10)(15,"label"),c._uU(16,"First name"),c.qZA(),c._UZ(17,"input",11),c.YNc(18,F3,4,0,"p",12),c.YNc(19,L3,4,0,"p",12),c.qZA(),c.TgZ(20,"div",10)(21,"label"),c._uU(22,"Last name"),c.qZA(),c._UZ(23,"input",13),c.qZA()(),c.TgZ(24,"div",5)(25,"div",10)(26,"label"),c._uU(27,"Email"),c.qZA(),c._UZ(28,"input",14),c.YNc(29,U3,4,0,"p",12),c.YNc(30,V3,4,0,"p",12),c.qZA(),c.TgZ(31,"div",10)(32,"label"),c._uU(33,"Mobile number"),c.qZA(),c._UZ(34,"input",15),c.YNc(35,B3,4,0,"p",12),c.YNc(36,j3,4,0,"p",12),c.qZA()(),c.TgZ(37,"div",16)(38,"button",17),c._uU(39," Update Student "),c.qZA()()()()()()()()),2&t&&(c.xp6(10),c.Q6J("formGroup",r.editForm),c.xp6(8),c.Q6J("ngIf",r.firstName.touched&&r.firstName.invalid),c.xp6(1),c.Q6J("ngIf",null==r.firstName.errors?null:r.firstName.errors.minlength),c.xp6(10),c.Q6J("ngIf",r.email.touched&&r.email.invalid),c.xp6(1),c.Q6J("ngIf",null==r.email.errors?null:r.email.errors.pattern),c.xp6(5),c.Q6J("ngIf",r.mobileNumber.touched&&r.mobileNumber.invalid),c.xp6(1),c.Q6J("ngIf",null==r.mobileNumber.errors?null:r.mobileNumber.errors.pattern),c.xp6(2),c.Q6J("disabled",!r.editForm.valid))},dependencies:[oi,Bg,Fd,Rf,HC,oy,Vf,X_]}),n})();const gF="firebasestorage.googleapis.com",mF="storageBucket";class Pr extends O.ZR{constructor(e,t,r=0){super(LN(e),`Firebase Storage: ${t} (${LN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return LN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var rr=(()=>{return(n=rr||(rr={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",rr;var n})();function LN(n){return"storage/"+n}function UN(){return new Pr(rr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function _F(){return new Pr(rr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yF(){return new Pr(rr.CANCELED,"User canceled the upload/download.")}function vF(){return new Pr(rr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Zy(n){return new Pr(rr.INVALID_ARGUMENT,n)}function wF(){return new Pr(rr.APP_DELETED,"The Firebase app was deleted.")}function EF(n){return new Pr(rr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function TE(n,e){return new Pr(rr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function DE(n){throw new Pr(rr.INTERNAL_ERROR,"Internal error: "+n)}class xs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=xs.makeFromUrl(e,t)}catch{return new xs(e,"")}if(""===r.path)return r;throw function X3(n){return new Pr(rr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Ye){Ye.path_=decodeURIComponent(Ye.path)}const S=t.replace(/[.]/g,"\\."),je=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===gF?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ye=0;Ye<je.length;Ye++){const St=je[Ye],kt=St.regex.exec(e);if(kt){let kr=kt[St.indices.path];kr||(kr=""),r=new xs(kt[St.indices.bucket],kr),St.postModify(r);break}}if(null==r)throw function J3(n){return new Pr(rr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class iG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ID(n){return"string"==typeof n||n instanceof String}function IF(n){return VN()&&n instanceof Blob}function VN(){return typeof Blob<"u"&&!(0,O.UG)()}function BN(n,e,t,r){if(r<e)throw Zy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Zy(`Invalid value for '${n}'. Expected ${t} or less.`)}function ph(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function CF(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var cp=(()=>{return(n=cp||(cp={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",cp;var n})();function bF(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class cG{constructor(e,t,r,i,s,l,h,g,y,C,S,N=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=C,this.connectionFactory_=S,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,B)=>{this.resolve_=k,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function aG(n){return void 0!==n}(g)?s():s(g)}catch(g){l(g)}else if(null!==h){const g=UN();g.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,g):g)}else l(i.canceled?this.appDelete_?wF():yF():_F())};this.canceled_?t(0,new CD(!1,null,!0)):this.backoffId_=function sG(n,e,t){let r=1,i=null,s=null,l=!1,h=0;function g(){return 2===h}let y=!1;function C(...J){y||(y=!0,e.apply(null,J))}function S(J){i=setTimeout(()=>{i=null,n(k,g())},J)}function N(){s&&clearTimeout(s)}function k(J,...Me){if(y)return void N();if(J)return N(),void C.call(null,J,...Me);if(g()||l)return N(),void C.call(null,J,...Me);let je;r<64&&(r*=2),1===h?(h=2,je=0):je=1e3*(r+Math.random()),S(je)}let B=!1;function Z(J){B||(B=!0,N(),!y&&(null!==i?(J||(h=2),clearTimeout(i),S(0)):J||(h=1)))}return S(0),s=setTimeout(()=>{l=!0,Z(!0)},t),Z}((r,i)=>{if(i)return void r(!1,new CD(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const h=s.getErrorCode()===cp.NO_ERROR,g=s.getStatus();if(!h||bF(g,this.additionalRetryCodes_)&&this.retry){const C=s.getErrorCode()===cp.ABORT;return void r(!1,new CD(!1,null,C))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new CD(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function oG(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class CD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function _G(...n){const e=function mG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(VN())return new Blob(n);throw new Pr(rr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Aa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jN{constructor(e,t){this.data=e,this.contentType=t||null}}function $N(n,e){switch(n){case Aa.RAW:return new jN(TF(e));case Aa.BASE64:case Aa.BASE64URL:return new jN(DF(n,e));case Aa.DATA_URL:return new jN(function EG(n){const e=new SF(n);return e.base64?DF(Aa.BASE64,e.rest):function wG(n){let e;try{e=decodeURIComponent(n)}catch{throw TE(Aa.DATA_URL,"Malformed data URL.")}return TF(e)}(e.rest)}(e),function IG(n){return new SF(n).contentType}(e))}throw UN()}function TF(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function DF(n,e){switch(n){case Aa.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw TE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Aa.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw TE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function vG(n){if(typeof atob>"u")throw function rG(n){return new Pr(rr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:TE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class SF{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw TE(Aa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function CG(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ac{constructor(e,t){let r=0,i="";IF(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(IF(this.data_)){const i=function yG(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ac(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ac(r,!0)}}static getBlob(...e){if(VN()){const t=e.map(r=>r instanceof Ac?r.data_:r);return new Ac(_G.apply(null,t))}{const t=e.map(l=>ID(l)?$N(Aa.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[s++]=l[h]}),new Ac(i,!0)}}uploadData(){return this.data_}}function HN(n){let e;try{e=JSON.parse(n)}catch{return null}return function uG(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function AF(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function DG(n,e){return e}class oo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||DG}}let bD=null;function SE(){if(bD)return bD;const n=[];n.push(new oo("bucket")),n.push(new oo("generation")),n.push(new oo("metageneration")),n.push(new oo("name","fullPath",!0));const t=new oo("name");t.xform=function e(s,l){return function SG(n){return!ID(n)||n.length<2?n:AF(n)}(l)},n.push(t);const i=new oo("size");return i.xform=function r(s,l){return void 0!==l?Number(l):l},n.push(i),n.push(new oo("timeCreated")),n.push(new oo("updated")),n.push(new oo("md5Hash",null,!0)),n.push(new oo("cacheControl",null,!0)),n.push(new oo("contentDisposition",null,!0)),n.push(new oo("contentEncoding",null,!0)),n.push(new oo("contentLanguage",null,!0)),n.push(new oo("contentType",null,!0)),n.push(new oo("metadata","customMetadata",!0)),bD=n,bD}function xF(n,e,t){const r=HN(e);return null===r?null:function xG(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const l=t[s];r[l.local]=l.xform(r,e[l.server])}return function AG(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new xs(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function GN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const RF="prefixes",NF="items";class xc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Rc(n){if(!n)throw UN()}function TD(n,e){return function t(r,i){const s=xF(n,i,e);return Rc(null!==s),s}}function Yy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Y3(){return new Pr(rr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Z3(){return new Pr(rr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function K3(n){return new Pr(rr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Q3(n){return new Pr(rr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function AE(n){const e=Yy(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function W3(n){return new Pr(rr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function MF(n,e,t){const i=ph(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new xc(i,"GET",TD(n,t),l);return h.errorHandler=AE(e),h}function OG(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const h=ph(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,C=new xc(h,"GET",function PG(n,e){return function t(r,i){const s=function MG(n,e,t){const r=HN(t);return null===r?null:function NG(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[RF])for(const i of t[RF]){const s=i.replace(/\/$/,""),l=n._makeStorageReference(new xs(e,s));r.prefixes.push(l)}if(t[NF])for(const i of t[NF]){const s=n._makeStorageReference(new xs(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Rc(null!==s),s}}(n,e.bucket),y);return C.urlParams=s,C.errorHandler=Yy(e),C}function kF(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function VG(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class DD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function zN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Rc(!1)}return Rc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const HG={STATE_CHANGED:"state_changed"},ao={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qN(n){switch(n){case"running":case"pausing":case"canceling":return ao.RUNNING;case"paused":return ao.PAUSED;case"success":return ao.SUCCESS;case"canceled":return ao.CANCELED;default:return ao.ERROR}}class GG{constructor(e,t,r){if(function lG(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Qy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let LF=null;class zG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=cp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=cp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=cp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw DE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw DE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw DE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw DE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw DE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class qG extends zG{initXhr(){this.xhr_.responseType="text"}}function pu(){return LF?LF():new qG}class UF{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=SE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(rr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(bF(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=_F()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(rr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function BG(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l=kF(e,r,i),h={name:l.fullPath},g=ph(s,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=GN(l,t),B=new xc(g,"POST",function k(Z){let J;zN(Z);try{J=Z.getResponseHeader("X-Goog-Upload-URL")}catch{Rc(!1)}return Rc(ID(J)),J},n.maxUploadRetryTime);return B.urlParams=h,B.headers=C,B.body=S,B.errorHandler=Yy(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,pu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function jG(n,e,t,r){const g=new xc(t,"POST",function s(y){const C=zN(y,["active","final"]);let S=null;try{S=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Rc(!1)}S||Rc(!1);const N=Number(S);return Rc(!isNaN(N)),new DD(N,r.size(),"final"===C)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Yy(e),g}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,pu,t,r);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new DD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let l;try{l=function $G(n,e,t,r,i,s,l,h){const g=new DD(0,0);if(l?(g.current=l.current,g.total=l.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function tG(){return new Pr(rr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const y=g.total-g.current;let C=y;i>0&&(C=Math.min(C,i));const S=g.current;let k="";k=0===C?"finalize":y===C?"upload, finalize":"upload";const B={"X-Goog-Upload-Command":k,"X-Goog-Upload-Offset":`${g.current}`},Z=r.slice(S,S+C);if(null===Z)throw vF();const je=new xc(t,"POST",function J(Ye,St){const kt=zN(Ye,["active","final"]),pn=g.current+C,kr=r.size();let Os;return Os="final"===kt?TD(e,s)(Ye,St):null,new DD(pn,kr,"final"===kt,Os)},e.maxUploadRetryTime);return je.headers=B,je.body=Z.uploadData(),je.progressCallback=h||null,je.errorHandler=Yy(n),je}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(l,pu,i,s,!1);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=MF(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,pu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function OF(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let je="";for(let Ye=0;Ye<2;Ye++)je+=Math.random().toString().slice(2);return je}();l["Content-Type"]="multipart/related; boundary="+g;const y=kF(e,r,i),C=GN(y,t),k=Ac.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+g+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===k)throw vF();const B={name:y.fullPath},Z=ph(s,n.host,n._protocol),Me=n.maxUploadRetryTime,He=new xc(Z,"POST",TD(n,t),Me);return He.urlParams=B,He.headers=l,He.body=k.uploadData(),He.errorHandler=Yy(e),He}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,pu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=yF(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=qN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new GG(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(qN(this._state)){case ao.SUCCESS:Qy(this._resolve.bind(null,this.snapshot))();break;case ao.CANCELED:case ao.ERROR:Qy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(qN(this._state)){case ao.RUNNING:case ao.PAUSED:e.next&&Qy(e.next.bind(e,this.snapshot))();break;case ao.SUCCESS:e.complete&&Qy(e.complete.bind(e))();break;default:e.error&&Qy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class xm{constructor(e,t){this._service=e,this._location=t instanceof xs?t:xs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xm(e,t)}get root(){const e=new xs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AF(this._location.path)}get storage(){return this._service}get parent(){const e=function bG(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new xs(this._location.bucket,e);return new xm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw EF(e)}}function BF(n,e,t){return WN.apply(this,arguments)}function WN(){return(WN=(0,ve.Z)(function*(n,e,t){const i=yield jF(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield BF(n,e,i.nextPageToken))})).apply(this,arguments)}function jF(n,e){null!=e&&"number"==typeof e.maxResults&&BN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=OG(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,pu)}function i4(n){n._throwIfRoot("getDownloadURL");const e=function FG(n,e,t){const i=ph(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new xc(i,"GET",function kG(n,e){return function t(r,i){const s=xF(n,i,e);return Rc(null!==s),function RG(n,e,t,r){const i=HN(e);if(null===i||!ID(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(y=>{const S=n.fullPath;return ph("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+CF({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=AE(e),h}(n.storage,n._location,SE());return n.storage.makeRequestWithTokens(e,pu).then(t=>{if(null===t)throw function nG(){return new Pr(rr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function $F(n,e){const t=function TG(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new xs(n._location.bucket,t);return new xm(n.storage,r)}function HF(n,e){if(n instanceof KN){const t=n;if(null==t._bucket)throw function eG(){return new Pr(rr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mF+"' property when initializing the app?")}();const r=new xm(t,t._bucket);return null!=e?HF(r,e):r}return void 0!==e?$F(n,e):n}function l4(n,e){if(e&&function o4(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof KN)return function a4(n,e){return new xm(n,e)}(n,e);throw Zy("To use ref(service, url), the first argument must be a Storage instance.")}return HF(n,e)}function GF(n,e){const t=e?.[mF];return null==t?null:xs.makeFromBucketSpec(t,n)}class KN{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=gF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?xs.makeFromBucketSpec(i,this._host):GF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?xs.makeFromBucketSpec(this._url,e):GF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ve.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ve.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xm(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new iG(wF());{const l=function gG(n,e,t,r,i,s,l=!0){const h=CF(n.urlParams),g=n.url+h,y=Object.assign({},n.headers);return function fG(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function dG(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function hG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,s),function pG(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new cG(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,ve.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const zF="@firebase/storage";function KF(n,e){return l4(n=(0,O.m9)(n),e)}function y4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new KN(t,r,i,e,Vi.SDK_VERSION)}!function v4(){(0,Vi._registerComponent)(new ls.wA("storage",y4,"PUBLIC").setMultipleInstances(!0)),(0,Vi.registerVersion)(zF,"0.11.2",""),(0,Vi.registerVersion)(zF,"0.11.2","esm2017")}();class SD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class YF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new SD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new SD(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?l=>t(new SD(l,this,this._ref)):{next:t.next?l=>t.next(new SD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class QF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new gh(e,this._service))}get items(){return this._delegate.items.map(e=>new gh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class gh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function _4(n,e){return $F(n,e)}(this._delegate,e);return new gh(t,this.storage)}get root(){return new gh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new gh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new YF(function c4(n,e,t){return function XG(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new UF(n,new Ac(e),t)}(n=(0,O.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Aa.RAW,r){this._throwIfRoot("putString");const i=$N(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new YF(new UF(this._delegate,new Ac(i.data,!0),s),this)}listAll(){return function p4(n){return function t4(n){const e={prefixes:[],items:[]};return BF(n,e).then(()=>e)}(n=(0,O.m9)(n))}(this._delegate).then(e=>new QF(e,this.storage))}list(e){return function f4(n,e){return jF(n=(0,O.m9)(n),e)}(this._delegate,e||void 0).then(t=>new QF(t,this.storage))}getMetadata(){return function d4(n){return function n4(n){n._throwIfRoot("getMetadata");const e=MF(n.storage,n._location,SE());return n.storage.makeRequestWithTokens(e,pu)}(n=(0,O.m9)(n))}(this._delegate)}updateMetadata(e){return function h4(n,e){return function r4(n,e){n._throwIfRoot("updateMetadata");const t=function LG(n,e,t,r){const s=ph(e.fullServerUrl(),n.host,n._protocol),h=GN(t,r),y=n.maxOperationRetryTime,C=new xc(s,"PATCH",TD(n,r),y);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=h,C.errorHandler=AE(e),C}(n.storage,n._location,e,SE());return n.storage.makeRequestWithTokens(t,pu)}(n=(0,O.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function g4(n){return i4(n=(0,O.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function m4(n){return function s4(n){n._throwIfRoot("deleteObject");const e=function UG(n,e){const r=ph(e.fullServerUrl(),n.host,n._protocol),h=new xc(r,"DELETE",function l(g,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=AE(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,pu)}(n=(0,O.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw EF(e)}}class JF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(XF(e))throw Zy("ref() expected a child path but got a URL, use refFromURL instead.");return new gh(KF(this._delegate,e),this)}refFromURL(e){if(!XF(e))throw Zy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xs.makeFromUrl(e,this._delegate.host)}catch{throw Zy("refFromUrl() expected a valid full URL but got an invalid one.")}return new gh(KF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function ZF(n,e,t,r={}){!function u4(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,O.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function XF(n){return/^[A-Za-z]+:\/\//.test(n)}function C4(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new JF(t,r)}function eL(n){const e=function T4(n){return new di.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(function H3(n,e=n0.z){return(0,Ir.e)((t,r)=>{let i=null,s=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function g(){const y=l+n,C=e.now();if(C<y)return i=this.schedule(void 0,y-C),void r.add(i);h()}t.subscribe((0,Xn.x)(r,y=>{s=y,l=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,yt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function AD(n){return{getDownloadURL:()=>lt(void 0).pipe(yn.fc,Hn(()=>n.getDownloadURL()),yn.iC),getMetadata:()=>lt(void 0).pipe(yn.fc,Hn(()=>n.getMetadata()),yn.iC),delete:()=>(0,ln.D)(n.delete()),child:e=>AD(n.child(e)),updateMetadata:e=>(0,ln.D)(n.updateMetadata(e)),put:(e,t)=>eL(n.put(e,t)),putString:(e,t,r)=>eL(n.putString(e,t,r)),list:e=>(0,ln.D)(n.list(e)),listAll:()=>(0,ln.D)(n.listAll())}}!function b4(n){const e={TaskState:ao,TaskEvent:HG,StringFormat:Aa,Storage:JF,Reference:gh};n.INTERNAL.registerComponent(new ls.wA("storage-compat",C4,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(zg.Z);const D4=new c.OlP("angularfire2.storageBucket"),S4=new c.OlP("angularfire2.storage.maxUploadRetryTime"),A4=new c.OlP("angularfire2.storage.maxOperationRetryTime"),x4=new c.OlP("angularfire2.storage.use-emulator");let tL=(()=>{class n{constructor(t,r,i,s,l,h,g,y,C,S){const N=(0,Xr.on)(t,l,r);this.storage=(0,Xr.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const k=l.runOutsideAngular(()=>N.storage(i||void 0)),B=C;return B&&k.useEmulator(...B),g&&k.setMaxUploadRetryTime(g),y&&k.setMaxOperationRetryTime(y),k},[g,y])}ref(t){return AD(this.storage.ref(t))}refFromURL(t){return AD(this.storage.refFromURL(t))}upload(t,r,i){return AD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xr.Dh),c.LFG(Xr.xv,8),c.LFG(D4,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(yn.HU),c.LFG(S4,8),c.LFG(A4,8),c.LFG(x4,8),c.LFG(wE,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),R4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),N4=(()=>{class n{constructor(){vD.Z.registerVersion("angularfire",yn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[tL],imports:[R4]}),n})(),ZN=(()=>{class n{constructor(t,r){this.db=t,this.storage=r,this.basePath="/uploads"}pushFileToStorage(t){const r=`${this.basePath}/${t.file.name}`,i=this.storage.ref(r),s=this.storage.upload(r,t.file);return s.snapshotChanges().pipe(Wl(()=>{i.getDownloadURL().subscribe(l=>{t.url=l,t.name=t.file.name,this.saveFileData(t)})})).subscribe(),s.percentageChanges()}saveFileData(t){this.db.list(this.basePath).push(t)}getFiles(t){return this.db.list(this.basePath,r=>r.limitToLast(t))}deleteFile(t){this.deleteFileDatabase(t.key).then(()=>{this.deleteFileStorage(t.name)}).catch(r=>console.log(r))}deleteFileDatabase(t){return this.db.list(this.basePath).remove(t)}deleteFileStorage(t){this.storage.ref(this.basePath).child(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(NN),c.LFG(tL))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nL=(()=>{class n{constructor(t){this.uploadService=t}ngOnInit(){}deleteFileUpload(t){this.uploadService.deleteFile(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ZN))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-upload-details"]],inputs:{fileUpload:"fileUpload"},decls:4,vars:2,consts:[[3,"href"],[1,"btn","btn-danger","btn-sm",2,"float","right",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"a",0),c._uU(1),c.qZA(),c.TgZ(2,"button",1),c.NdJ("click",function(){return r.deleteFileUpload(r.fileUpload)}),c._uU(3," Delete\n"),c.qZA()),2&t&&(c.s9C("href",r.fileUpload.url,c.LSH),c.xp6(1),c.Oqu(r.fileUpload.name))}}),n})();function M4(n,e){if(1&n&&(c.TgZ(0,"ul",3)(1,"li",4),c._UZ(2,"app-upload-details",5),c.qZA()()),2&n){const t=e.$implicit;c.xp6(2),c.Q6J("fileUpload",t)}}let P4=(()=>{class n{constructor(t){this.uploadService=t}ngOnInit(){this.uploadService.getFiles(6).snapshotChanges().pipe((0,yt.U)(t=>t.map(r=>({key:r.payload.key,...r.payload.val()})))).subscribe(t=>{this.fileUploads=t})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ZN))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-upload-list"]],decls:4,vars:1,consts:[[1,"card"],[1,"card-header"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[3,"fileUpload"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c._uU(2,"List of Files"),c.qZA(),c.YNc(3,M4,3,1,"ul",2),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngForOf",r.fileUploads))},dependencies:[go,nL],styles:[".btn[_ngcontent-%COMP%]{height:30px}"]}),n})();class k4{constructor(e){this.file=e}}const O4=function(n){return{width:n}};function F4(n,e){if(1&n&&(c.TgZ(0,"div",3)(1,"div",4),c._uU(2),c.qZA()()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngStyle",c.VKq(3,O4,t.percentage+"%")),c.uIk("aria-valuenow",t.percentage),c.xp6(1),c.hij(" ",t.percentage,"% ")}}const L4=[{path:"",redirectTo:"/register-student",pathMatch:"full"},{path:"register-student",component:f3},{path:"view-students",component:O3},{path:"edit-student/:id",component:$3},{path:"file-list",component:P4},{path:"file-form",component:(()=>{class n{constructor(t){this.uploadService=t,this.percentage=0}ngOnInit(){}selectFile(t){this.selectedFiles=t.target.files}upload(){if(this.selectedFiles){const t=this.selectedFiles.item(0);this.selectedFiles=void 0,t&&(this.currentFileUpload=new k4(t),this.uploadService.pushFileToStorage(this.currentFileUpload).subscribe(r=>{this.percentage=Math.round(r||0)},r=>{console.log(r)}))}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ZN))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-upload-form"]],decls:9,vars:2,consts:[["type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],["class","progress mt-2",4,"ngIf"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"]],template:function(t,r){1&t&&(c._UZ(0,"br")(1,"br"),c.TgZ(2,"h1"),c._uU(3,"Add file"),c.qZA(),c.TgZ(4,"label")(5,"input",0),c.NdJ("change",function(s){return r.selectFile(s)}),c.qZA()(),c.TgZ(6,"button",1),c.NdJ("click",function(){return r.upload()}),c._uU(7," Upload\n"),c.qZA(),c.YNc(8,F4,3,5,"div",2)),2&t&&(c.xp6(6),c.Q6J("disabled",!r.selectedFiles),c.xp6(2),c.Q6J("ngIf",r.currentFileUpload))},dependencies:[oi,mo]}),n})()},{path:"file-list/:id",component:nL}];let U4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Kr,ex.forRoot(L4),ex]}),n})(),V4=(()=>{class n{constructor(){this.title="angularfirebase-student-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:29,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],["routerLink","/register-student",1,"navbar-brand","col-sm-3","col-md-2","mr-0"],[1,"dasboard-text"],[1,"navbar-nav","px-3"],[1,"nav-item","text-nowrap"],["routerLink","/register-student",1,"nav-link"],[1,"user-image",2,"background-image","url('assets/user.jpg')"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/register-student","routerLinkActive","active",1,"nav-link"],["routerLink","/view-students","routerLinkActive","active",1,"nav-link"],["routerLink","/file-list","routerLinkActive","active",1,"nav-link"],["routerLink","/file-form","routerLinkActive","active",1,"nav-link"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"]],template:function(t,r){1&t&&(c.TgZ(0,"nav",0)(1,"a",1)(2,"span",2),c._uU(3,"Dashboard"),c.qZA()(),c.TgZ(4,"ul",3)(5,"li",4)(6,"a",5),c._UZ(7,"span",6),c._uU(8," Hello Admin "),c.qZA()()()(),c.TgZ(9,"div",7)(10,"div",8)(11,"nav",9)(12,"div",10)(13,"ul",11)(14,"li",12)(15,"a",13),c._uU(16," Add Student "),c.qZA()(),c.TgZ(17,"li",12)(18,"a",14),c._uU(19," Students List "),c.qZA()(),c.TgZ(20,"li",12)(21,"a",15),c._uU(22," File liste "),c.qZA()(),c.TgZ(23,"li",12)(24,"a",16),c._uU(25," Add file "),c.qZA()()()()(),c.TgZ(26,"main",17)(27,"div",18),c._UZ(28,"router-outlet"),c.qZA()()()())},dependencies:[X,Tg,GA]}),n})();function YN(){return(0,Ir.e)((n,e)=>{let t,r=!1;n.subscribe((0,Xn.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var it,B4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gu={},QN=QN||{},Zt=B4||self;function xD(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function xE(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var JN="closure_uid_"+(1e9*Math.random()>>>0),$4=0;function H4(n,e,t){return n.call.apply(n.bind,arguments)}function G4(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Rs(n,e,t){return(Rs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?H4:G4).apply(null,arguments)}function RD(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function $i(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function dp(){this.s=this.s,this.o=this.o}dp.prototype.s=!1,dp.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function j4(n){Object.prototype.hasOwnProperty.call(n,JN)&&n[JN]||(n[JN]=++$4)}(this)},dp.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rL=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function XN(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function iL(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(xD(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let l=0;l<s;l++)n[i+l]=r[l]}else n.push(r)}}function Ns(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ns.prototype.h=function(){this.defaultPrevented=!0};var q4=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Zt.addEventListener("test",()=>{},e),Zt.removeEventListener("test",()=>{},e)}catch{}return n}();function RE(n){return/^[\s\xa0]*$/.test(n)}function ND(){var n=Zt.navigator;return n&&(n=n.userAgent)?n:""}function Nc(n){return-1!=ND().indexOf(n)}function eM(n){return eM[" "](n),n}eM[" "]=function(){};var nM,n,K4=Nc("Opera"),Jy=Nc("Trident")||Nc("MSIE"),sL=Nc("Edge"),tM=sL||Jy,oL=Nc("Gecko")&&!(-1!=ND().toLowerCase().indexOf("webkit")&&!Nc("Edge"))&&!(Nc("Trident")||Nc("MSIE"))&&!Nc("Edge"),Z4=-1!=ND().toLowerCase().indexOf("webkit")&&!Nc("Edge");function aL(){var n=Zt.document;return n?n.documentMode:void 0}e:{var rM="",iM=(n=ND(),oL?/rv:([^\);]+)(\)|;)/.exec(n):sL?/Edge\/([\d\.]+)/.exec(n):Jy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Z4?/WebKit\/(\S+)/.exec(n):K4?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(iM&&(rM=iM?iM[1]:""),Jy){var sM=aL();if(null!=sM&&sM>parseFloat(rM)){nM=String(sM);break e}}nM=rM}var Y4=Zt.document&&Jy&&(aL()||parseInt(nM,10))||void 0;function NE(n,e){if(Ns.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(oL){e:{try{eM(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Q4[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&NE.$.h.call(this)}}$i(NE,Ns);var Q4={2:"touch",3:"pen",4:"mouse"};NE.prototype.h=function(){NE.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ME="closure_listenable_"+(1e6*Math.random()|0),J4=0;function X4(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++J4,this.fa=this.ia=!1}function MD(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function aM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function uL(n){const e={};for(const t in n)e[t]=n[t];return e}const cL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dL(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<cL.length;s++)t=cL[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function PD(n){this.src=n,this.g={},this.h=0}function lM(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=rL(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(MD(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function uM(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}PD.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=uM(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new X4(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var cM="closure_lm_"+(1e6*Math.random()|0),dM={};function hL(n,e,t,r,i){if(r&&r.once)return pL(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)hL(n,e[s],t,r,i);return null}return t=gM(t),n&&n[ME]?n.O(e,t,xE(r)?!!r.capture:!!r,i):fL(n,e,t,!1,r,i)}function fL(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var l=xE(i)?!!i.capture:!!i,h=fM(n);if(h||(n[cM]=h=new PD(n)),(t=h.add(e,t,r,l,s)).proxy)return t;if(r=function t6(){const e=n6;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)q4||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(mL(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function pL(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)pL(n,e[s],t,r,i);return null}return t=gM(t),n&&n[ME]?n.P(e,t,xE(r)?!!r.capture:!!r,i):fL(n,e,t,!0,r,i)}function gL(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)gL(n,e[s],t,r,i);else r=xE(r)?!!r.capture:!!r,t=gM(t),n&&n[ME]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=uM(s=n.g[e],t,r,i))&&(MD(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=fM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=uM(e,t,r,i)),(t=-1<n?e[n]:null)&&hM(t))}function hM(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[ME])lM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(mL(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=fM(e))?(lM(t,n),0==t.h&&(t.src=null,e[cM]=null)):MD(n)}}}function mL(n){return n in dM?dM[n]:dM[n]="on"+n}function n6(n,e){if(n.fa)n=!0;else{e=new NE(e,this);var t=n.listener,r=n.la||n.src;n.ia&&hM(n),n=t.call(r,e)}return n}function fM(n){return(n=n[cM])instanceof PD?n:null}var pM="__closure_events_fn_"+(1e9*Math.random()>>>0);function gM(n){return"function"==typeof n?n:(n[pM]||(n[pM]=function(e){return n.handleEvent(e)}),n[pM])}function Hi(){dp.call(this),this.i=new PD(this),this.S=this,this.J=null}function hs(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ns(e,n);else if(e instanceof Ns)e.target=e.target||n;else{var i=e;dL(e=new Ns(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];i=kD(l,r,!0,e)&&i}if(i=kD(l=e.g=n,r,!0,e)&&i,i=kD(l,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=kD(l=e.g=t[s],r,!1,e)&&i}function kD(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.fa&&l.capture==t){var h=l.listener,g=l.la||l.src;l.ia&&lM(n.i,l),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}$i(Hi,dp),Hi.prototype[ME]=!0,Hi.prototype.removeEventListener=function(n,e,t,r){gL(this,n,e,t,r)},Hi.prototype.N=function(){if(Hi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)MD(t[r]);delete n.g[e],n.h--}}this.J=null},Hi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Hi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var mM=Zt.JSON.stringify;function i6(){var n=_M;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var _L=new class r6{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new o6,n=>n.reset());class o6{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function a6(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function l6(n){Zt.setTimeout(()=>{throw n},0)}let PE,kE=!1,_M=new class s6{constructor(){this.h=this.g=null}add(e,t){const r=_L.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},yL=()=>{const n=Zt.Promise.resolve(void 0);PE=()=>{n.then(u6)}};var u6=()=>{for(var n;n=i6();){try{n.h.call(n.g)}catch(t){l6(t)}var e=_L;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}kE=!1};function OD(n,e){Hi.call(this),this.h=n||1,this.g=e||Zt,this.j=Rs(this.qb,this),this.l=Date.now()}function yM(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function vM(n,e,t){if("function"==typeof n)t&&(n=Rs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Rs(n.handleEvent,n)}return 2147483647<Number(e)?-1:Zt.setTimeout(n,e||0)}function vL(n){n.g=vM(()=>{n.g=null,n.i&&(n.i=!1,vL(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}$i(OD,Hi),(it=OD.prototype).ga=!1,it.T=null,it.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hs(this,"tick"),this.ga&&(yM(this),this.start()))}},it.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.N=function(){OD.$.N.call(this),yM(this),delete this.g};class c6 extends dp{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vL(this)}N(){super.N(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function OE(n){dp.call(this),this.h=n,this.g={}}$i(OE,dp);var wL=[];function EL(n,e,t,r){Array.isArray(t)||(t&&(wL[0]=t.toString()),t=wL);for(var i=0;i<t.length;i++){var s=hL(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function IL(n){aM(n.g,function(e,t){this.g.hasOwnProperty(t)&&hM(e)},n),n.g={}}function FD(){this.g=!0}function Xy(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function p6(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<i.length;l++)i[l]=""}}}return mM(t)}catch{return e}}(n,t)+(r?" "+r:"")})}OE.prototype.N=function(){OE.$.N.call(this),IL(this)},OE.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},FD.prototype.Ea=function(){this.g=!1},FD.prototype.info=function(){};var Rm={},CL=null;function LD(){return CL=CL||new Hi}function bL(n){Ns.call(this,Rm.Ta,n)}function FE(n){const e=LD();hs(e,new bL(e))}function TL(n,e){Ns.call(this,Rm.STAT_EVENT,n),this.stat=e}function lo(n){const e=LD();hs(e,new TL(e,n))}function DL(n,e){Ns.call(this,Rm.Ua,n),this.size=e}function LE(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){n()},e)}Rm.Ta="serverreachability",$i(bL,Ns),Rm.STAT_EVENT="statevent",$i(TL,Ns),Rm.Ua="timingevent",$i(DL,Ns);var UD={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},SL={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wM(){}function xL(){}wM.prototype.h=null;var CM,UE={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function EM(){Ns.call(this,"d")}function IM(){Ns.call(this,"c")}function VD(){}function VE(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new OE(this),this.P=g6,this.V=new OD(n=tM?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new RL}function RL(){this.i=null,this.g="",this.h=!1}$i(EM,Ns),$i(IM,Ns),$i(VD,wM),VD.prototype.g=function(){return new XMLHttpRequest},VD.prototype.i=function(){return{}},CM=new VD;var g6=45e3,bM={},BD={};function TM(n,e,t){n.L=1,n.v=GD(mh(e)),n.s=t,n.S=!0,NL(n,null)}function NL(n,e){n.G=Date.now(),BE(n),n.A=mh(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),jL(t.i,"t",r),n.C=0,t=n.l.J,n.h=new RL,n.g=d2(n.l,t?e:null,!n.s),0<n.O&&(n.M=new c6(Rs(n.Pa,n,n.g),n.O)),EL(n.U,n.g,"readystatechange",n.nb),e=n.I?uL(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),FE(),function d6(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var l="",h=s.split("&"),g=0;g<h.length;g++){var y=h[g].split("=");if(1<y.length){var C=y[0];y=y[1];var S=C.split("_");l=2<=S.length&&"type"==S[1]?l+(C+"=")+y+"&":l+(C+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function ML(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function PL(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=m6(n,t),i==BD){4==e&&(n.o=4,lo(14),r=!1),Xy(n.j,n.m,null,"[Incomplete Response]");break}if(i==bM){n.o=4,lo(15),Xy(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Xy(n.j,n.m,i,null),DM(n,i)}ML(n)&&i!=BD&&i!=bM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,lo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),PM(e),e.M=!0,lo(11))):(Xy(n.j,n.m,t,"[Invalid Chunked Response]"),Nm(n),jE(n))}function m6(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?BD:(t=Number(e.substring(t,r)),isNaN(t)?bM:(r+=1)+t>e.length?BD:(e=e.slice(r,r+t),n.C=r+t,e))}function BE(n){n.Y=Date.now()+n.P,kL(n,n.P)}function kL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=LE(Rs(n.lb,n),e)}function jD(n){n.B&&(Zt.clearTimeout(n.B),n.B=null)}function jE(n){0==n.l.H||n.J||a2(n.l,n)}function Nm(n){jD(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,yM(n.V),IL(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function DM(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||SM(t.i,n)))if(!n.K&&SM(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;YD(t),KD(t)}MM(t),lo(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=LE(Rs(t.ib,t),6e3));if(1>=GL(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Pm(t,11)}else if((n.K||t.g==n)&&YD(t),!RE(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const C=y[3];null!=C&&(t.ra=C,t.l.info("VER="+t.ra));const S=y[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const N=y[5];null!=N&&"number"==typeof N&&0<N&&(t.L=r=1.5*N,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const k=n.g;if(k){const B=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=r.i;s.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(AM(s,s.h),s.h=null))}if(r.F){const Z=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;Z&&(r.Da=Z,dr(r.I,r.F,Z))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=c2(r,r.J?r.pa:null,r.Y),l.K){zL(r.i,l);var h=l,g=r.L;g&&h.setTimeout(g),h.B&&(jD(h),BE(h)),r.g=l}else s2(r);0<t.j.length&&ZD(t)}else"stop"!=y[0]&&"close"!=y[0]||Pm(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Pm(t,7):NM(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}FE()}catch{}}function OL(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(xD(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function y6(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(xD(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function _6(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(xD(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(it=VE.prototype).setTimeout=function(n){this.P=n},it.nb=function(n){n=n.target;const e=this.M;e&&3==Mc(n)?e.l():this.Pa(n)},it.Pa=function(n){try{if(n==this.g)e:{const C=Mc(this.g);var e=this.g.Ia();if(this.g.da(),!(3>C)&&(3!=C||tM||this.g&&(this.h.h||this.g.ja()||XL(this.g)))){this.J||4!=C||7==e||FE(),jD(this);var t=this.g.da();this.ca=t;t:if(ML(this)){var r=XL(this.g);n="";var i=r.length,s=4==Mc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Nm(this),jE(this);var l="";break t}this.h.i=new Zt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function h6(n,e,t,r,i,s,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.W,C,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!RE(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,lo(12),Nm(this),jE(this);break e}Xy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,DM(this,t)}this.S?(PL(this,C,l),tM&&this.i&&3==C&&(EL(this.U,this.V,"tick",this.mb),this.V.start())):(Xy(this.j,this.m,l,null),DM(this,l)),4==C&&Nm(this),this.i&&!this.J&&(4==C?a2(this.l,this):(this.i=!1,BE(this)))}else(function F6(n){const e={};n=(n.g&&2<=Mc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(RE(n[r]))continue;var t=a6(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function e6(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,lo(12)):(this.o=0,lo(13)),Nm(this),jE(this)}}}catch{}},it.mb=function(){if(this.g){var n=Mc(this.g),e=this.g.ja();this.C<e.length&&(jD(this),PL(this,n,e),this.i&&4!=n&&BE(this))}},it.cancel=function(){this.J=!0,Nm(this)},it.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function f6(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(FE(),lo(17)),Nm(this),this.o=2,jE(this)):kL(this,this.Y-n)};var FL=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mm(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Mm){this.h=n.h,$D(this,n.j),this.s=n.s,this.g=n.g,HD(this,n.m),this.l=n.l;var e=n.i,t=new GE;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),LL(this,t),this.o=n.o}else n&&(e=String(n).match(FL))?(this.h=!1,$D(this,e[1]||"",!0),this.s=$E(e[2]||""),this.g=$E(e[3]||"",!0),HD(this,e[4]),this.l=$E(e[5]||"",!0),LL(this,e[6]||"",!0),this.o=$E(e[7]||"")):(this.h=!1,this.i=new GE(null,this.h))}function mh(n){return new Mm(n)}function $D(n,e,t){n.j=t?$E(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function HD(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function LL(n,e,t){e instanceof GE?(n.i=e,function T6(n,e){e&&!n.j&&(hp(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(VL(this,r),jL(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=HE(e,C6)),n.i=new GE(e,n.h))}function dr(n,e,t){n.i.set(e,t)}function GD(n){return dr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function $E(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function HE(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,w6),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function w6(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Mm.prototype.toString=function(){var n=[],e=this.j;e&&n.push(HE(e,UL,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(HE(e,UL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(HE(t,"/"==t.charAt(0)?I6:E6,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",HE(t,b6)),n.join("")};var UL=/[#\/\?@]/g,E6=/[#\?:]/g,I6=/[#\?]/g,C6=/[#\?@]/g,b6=/#/g;function GE(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function hp(n){n.g||(n.g=new Map,n.h=0,n.i&&function v6(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function VL(n,e){hp(n),e=ev(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function BL(n,e){return hp(n),e=ev(n,e),n.g.has(e)}function jL(n,e,t){VL(n,e),0<t.length&&(n.i=null,n.g.set(ev(n,e),XN(t)),n.h+=t.length)}function ev(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function $L(n){this.l=n||S6,n=Zt.PerformanceNavigationTiming?0<(n=Zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Zt.g&&Zt.g.Ka&&Zt.g.Ka()&&Zt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=GE.prototype).add=function(n,e){hp(this),this.i=null,n=ev(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){hp(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},it.ta=function(){hp(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},it.Z=function(n){hp(this);let e=[];if("string"==typeof n)BL(this,n)&&(e=e.concat(this.g.get(ev(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},it.set=function(n,e){return hp(this),this.i=null,BL(this,n=ev(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=s;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var S6=10;function HL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function GL(n){return n.h?1:n.g?n.g.size:0}function SM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function AM(n,e){n.g?n.g.add(e):n.h=e}function zL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function qL(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return XN(n.i)}$L.prototype.cancel=function(){if(this.i=qL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var A6=class{stringify(n){return Zt.JSON.stringify(n,void 0)}parse(n){return Zt.JSON.parse(n,void 0)}};function x6(){this.g=new A6}function R6(n,e,t){const r=t||"";try{OL(n,function(i,s){let l=i;xE(i)&&(l=mM(i)),e.push(r+s+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function zD(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function zE(n){this.l=n.fc||null,this.j=n.ob||!1}function qD(n,e){Hi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=xM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$i(zE,wM),zE.prototype.g=function(){return new qD(this.l,this.j)},zE.prototype.i=function(n){return function(){return n}}({}),$i(qD,Hi);var xM=0;function WL(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function qE(n){n.readyState=4,n.l=null,n.j=null,n.A=null,WE(n)}function WE(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=qD.prototype).open=function(n,e){if(this.readyState!=xM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,WE(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Zt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qE(this)),this.readyState=xM},it.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,WE(this)),this.g&&(this.readyState=3,WE(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;WL(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},it.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?qE(this):WE(this),3==this.readyState&&WL(this)}},it.Za=function(n){this.g&&(this.response=this.responseText=n,qE(this))},it.Ya=function(n){this.g&&(this.response=n,qE(this))},it.ka=function(){this.g&&qE(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(qD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var M6=Zt.JSON.parse;function $r(n){Hi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=KL,this.L=this.M=!1}$i($r,Hi);var KL="",P6=/^https?$/i,k6=["POST","PUT"];function ZL(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,YL(n),WD(n)}function YL(n){n.F||(n.F=!0,hs(n,"complete"),hs(n,"error"))}function QL(n){if(n.h&&typeof QN<"u"&&(!n.C[1]||4!=Mc(n)||2!=n.da()))if(n.v&&4==Mc(n))vM(n.La,0,n);else if(hs(n,"readystatechange"),4==Mc(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(FL)[1]||null;!i&&Zt.self&&Zt.self.location&&(i=Zt.self.location.protocol.slice(0,-1)),r=!P6.test(i?i.toLowerCase():"")}t=r}if(t)hs(n,"complete"),hs(n,"success");else{n.m=6;try{var s=2<Mc(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",YL(n)}}finally{WD(n)}}}function WD(n,e){if(n.g){JL(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||hs(n,"ready");try{t.onreadystatechange=r}catch{}}}function JL(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Zt.clearTimeout(n.A),n.A=null)}function Mc(n){return n.g?n.g.readyState:0}function XL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case KL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function e2(n){let e="";return aM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function RM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=e2(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dr(n,e,t))}function KE(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function t2(n){this.Ga=0,this.j=[],this.l=new FD,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=KE("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=KE("baseRetryDelayMs",5e3,n),this.hb=KE("retryDelaySeedMs",1e4,n),this.eb=KE("forwardChannelMaxRetries",2,n),this.xa=KE("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new $L(n&&n.concurrentRequestLimit),this.Ja=new x6,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function NM(n){if(n2(n),3==n.H){var e=n.W++,t=mh(n.I);if(dr(t,"SID",n.K),dr(t,"RID",e),dr(t,"TYPE","terminate"),ZE(n,t),(e=new VE(n,n.l,e)).L=2,e.v=GD(mh(t)),t=!1,Zt.navigator&&Zt.navigator.sendBeacon)try{t=Zt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=d2(e.l,null),e.g.ha(e.v)),e.G=Date.now(),BE(e)}u2(n)}function KD(n){n.g&&(PM(n),n.g.cancel(),n.g=null)}function n2(n){KD(n),n.u&&(Zt.clearTimeout(n.u),n.u=null),YD(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Zt.clearTimeout(n.m),n.m=null)}function ZD(n){if(!HL(n.i)&&!n.m){n.m=!0;var e=n.Na;PE||yL(),kE||(PE(),kE=!0),_M.add(e,n),n.C=0}}function r2(n,e){var t;t=e?e.m:n.W++;const r=mh(n.I);dr(r,"SID",n.K),dr(r,"RID",t),dr(r,"AID",n.V),ZE(n,r),n.o&&n.s&&RM(r,n.o,n.s),t=new VE(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=i2(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),AM(n.i,t),TM(t,r,e)}function ZE(n,e){n.na&&aM(n.na,function(t,r){dr(e,r,t)}),n.h&&OL({},function(t,r){dr(e,r,t)})}function i2(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Rs(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=i[0].g,l.push("ofs="+s)):s=0:l.push("ofs="+s);let h=!0;for(let g=0;g<t;g++){let y=i[g].g;const C=i[g].map;if(y-=s,0>y)s=Math.max(0,i[g].g-100),h=!1;else try{R6(C,l,"req"+y+"_")}catch{r&&r(C)}}if(h){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function s2(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;PE||yL(),kE||(PE(),kE=!0),_M.add(e,n),n.A=0}}function MM(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=LE(Rs(n.Ma,n),l2(n,n.A)),n.A++,0))}function PM(n){null!=n.B&&(Zt.clearTimeout(n.B),n.B=null)}function o2(n){n.g=new VE(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=mh(n.wa);dr(e,"RID","rpc"),dr(e,"SID",n.K),dr(e,"AID",n.V),dr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&dr(e,"TO",n.qa),dr(e,"TYPE","xmlhttp"),ZE(n,e),n.o&&n.s&&RM(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=GD(mh(e)),t.s=null,t.S=!0,NL(t,n)}function YD(n){null!=n.v&&(Zt.clearTimeout(n.v),n.v=null)}function a2(n,e){var t=null;if(n.g==e){YD(n),PM(n),n.g=null;var r=2}else{if(!SM(n.i,e))return;t=e.F,zL(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;hs(r=LD(),new DL(r,t)),ZD(n)}else s2(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function L6(n,e){return!(GL(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=LE(Rs(n.Na,n,e),l2(n,n.C)),n.C++,0)))}(n,e)||2==r&&MM(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Pm(n,5);break;case 4:Pm(n,10);break;case 3:Pm(n,6);break;default:Pm(n,2)}}function l2(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Pm(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Rs(n.pb,n);t||(t=new Mm("//www.google.com/images/cleardot.gif"),Zt.location&&"http"==Zt.location.protocol||$D(t,"https"),GD(t)),function N6(n,e){const t=new FD;if(Zt.Image){const r=new Image;r.onload=RD(zD,t,r,"TestLoadImage: loaded",!0,e),r.onerror=RD(zD,t,r,"TestLoadImage: error",!1,e),r.onabort=RD(zD,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=RD(zD,t,r,"TestLoadImage: timeout",!1,e),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else lo(2);n.H=0,n.h&&n.h.za(e),u2(n),n2(n)}function u2(n){if(n.H=0,n.ma=[],n.h){const e=qL(n.i);(0!=e.length||0!=n.j.length)&&(iL(n.ma,e),iL(n.ma,n.j),n.i.i.length=0,XN(n.j),n.j.length=0),n.h.ya()}}function c2(n,e,t){var r=t instanceof Mm?mh(t):new Mm(t);if(""!=r.g)e&&(r.g=e+"."+r.g),HD(r,r.m);else{var i=Zt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Mm(null);r&&$D(s,r),e&&(s.g=e),i&&HD(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&dr(r,t,e),dr(r,"VER",n.ra),ZE(n,r),r}function d2(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new $r(t&&n.Ha&&!n.va?new zE({ob:!0}):n.va)).Oa(n.J),e}function h2(){}function QD(){if(Jy&&!(10<=Number(Y4)))throw Error("Environmental error: no available transport.")}function xa(n,e){Hi.call(this),this.g=new t2(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!RE(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!RE(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new tv(this)}function f2(n){EM.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function p2(){IM.call(this),this.status=1}function tv(n){this.g=n}function mu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function kM(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],l=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;l=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(l<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((s=(e=t+((l=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=s+((l=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Un(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(it=$r.prototype).Oa=function(n){this.M=n},it.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():CM.g(),this.C=function AL(n){return n.h||(n.h=n.i())}(this.u?this.u:CM),this.g.onreadystatechange=Rs(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void ZL(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Zt.FormData&&n instanceof Zt.FormData,!(0<=rL(k6,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{JL(this),0<this.B&&((this.L=function O6(n){return Jy&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rs(this.ua,this)):this.A=vM(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){ZL(this,s)}},it.ua=function(){typeof QN<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hs(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,hs(this,"complete"),hs(this,"abort"),WD(this))},it.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),WD(this,!0)),$r.$.N.call(this)},it.La=function(){this.s||(this.G||this.v||this.l?QL(this):this.kb())},it.kb=function(){QL(this)},it.isActive=function(){return!!this.g},it.da=function(){try{return 2<Mc(this)?this.g.status:-1}catch{return-1}},it.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},it.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),M6(e)}},it.Ia=function(){return this.m},it.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=t2.prototype).ra=8,it.H=1,it.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new VE(this,this.l,n);let s=this.s;if(this.U&&(s?(s=uL(s),dL(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=i2(this,i,e),dr(t=mh(this.I),"RID",n),dr(t,"CVER",22),this.F&&dr(t,"X-HTTP-Session-Id",this.F),ZE(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(e2(s)))+"&"+e:this.o&&RM(t,this.o,s)),AM(this.i,i),this.bb&&dr(t,"TYPE","init"),this.P?(dr(t,"$req",e),dr(t,"SID","null"),i.aa=!0,TM(i,t,null)):TM(i,t,e),this.H=2}}else 3==this.H&&(n?r2(this,n):0==this.j.length||HL(this.i)||r2(this))},it.Ma=function(){if(this.u=null,o2(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=LE(Rs(this.jb,this),n)}},it.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,lo(10),KD(this),o2(this))},it.ib=function(){null!=this.v&&(this.v=null,KD(this),MM(this),lo(19))},it.pb=function(n){n?(this.l.info("Successfully pinged google.com"),lo(2)):(this.l.info("Failed to ping google.com"),lo(1))},it.isActive=function(){return!!this.h&&this.h.isActive(this)},(it=h2.prototype).Ba=function(){},it.Aa=function(){},it.za=function(){},it.ya=function(){},it.isActive=function(){return!0},it.Va=function(){},QD.prototype.g=function(n,e){return new xa(n,e)},$i(xa,Hi),xa.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;lo(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=c2(n,null,n.Y),ZD(n)},xa.prototype.close=function(){NM(this.g)},xa.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=mM(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&ZD(e)},xa.prototype.N=function(){this.g.h=null,delete this.j,NM(this.g),delete this.g,xa.$.N.call(this)},$i(f2,EM),$i(p2,IM),$i(tv,h2),tv.prototype.Ba=function(){hs(this.g,"a")},tv.prototype.Aa=function(n){hs(this.g,new f2(n))},tv.prototype.za=function(n){hs(this.g,new p2)},tv.prototype.ya=function(){hs(this.g,"b")},$i(mu,function U6(){this.blockSize=-1}),mu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},mu.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)kM(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){kM(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){kM(this,r),i=0;break}}this.h=i,this.i+=e},mu.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var V6={};function OM(n){return-128<=n&&128>n?function W4(n,e){var t=V6;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Un([0|e],0>e?-1:0)}):new Un([0|n],0>n?-1:0)}function Pc(n){if(isNaN(n)||!isFinite(n))return nv;if(0>n)return fs(Pc(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=FM;return new Un(e,0)}var FM=4294967296,nv=OM(0),LM=OM(1),m2=OM(16777216);function _h(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function dl(n){return-1==n.h}function fs(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Un(t,~n.h).add(LM)}function JD(n,e){return n.add(fs(e))}function XD(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function YE(n,e){this.g=n,this.h=e}function eS(n,e){if(_h(e))throw Error("division by zero");if(_h(n))return new YE(nv,nv);if(dl(n))return e=eS(fs(n),e),new YE(fs(e.g),fs(e.h));if(dl(e))return e=eS(n,fs(e)),new YE(fs(e.g),e.h);if(30<n.g.length){if(dl(n)||dl(e))throw Error("slowDivide_ only works with positive integers.");for(var t=LM,r=e;0>=r.X(n);)t=_2(t),r=_2(r);var i=rv(t,1),s=rv(r,1);for(r=rv(r,2),t=rv(t,2);!_h(r);){var l=s.add(r);0>=l.X(n)&&(i=i.add(t),s=l),r=rv(r,1),t=rv(t,1)}return e=JD(n,i.R(e)),new YE(i,e)}for(i=nv;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(s=Pc(t)).R(e);dl(l)||0<l.X(n);)l=(s=Pc(t-=r)).R(e);_h(s)&&(s=LM),i=i.add(s),n=JD(n,l)}return new YE(i,n)}function _2(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Un(t,n.h)}function rv(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Un(i,n.h)}(it=Un.prototype).ea=function(){if(dl(this))return-fs(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:FM+r)*e,e*=FM}return n},it.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(_h(this))return"0";if(dl(this))return"-"+fs(this).toString(n);for(var e=Pc(Math.pow(n,6)),t=this,r="";;){var i=eS(t,e).g,s=((0<(t=JD(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(_h(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},it.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},it.X=function(n){return dl(n=JD(this,n))?-1:_h(n)?0:1},it.abs=function(){return dl(this)?fs(this):this},it.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),l=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(s&=65535)}return new Un(t,-2147483648&t[t.length-1]?-1:0)},it.R=function(n){if(_h(this)||_h(n))return nv;if(dl(this))return dl(n)?fs(this).R(fs(n)):fs(fs(this).R(n));if(dl(n))return fs(this.R(fs(n)));if(0>this.X(m2)&&0>n.X(m2))return Pc(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,l=65535&this.D(r),h=n.D(i)>>>16,g=65535&n.D(i);t[2*r+2*i]+=l*g,XD(t,2*r+2*i),t[2*r+2*i+1]+=s*g,XD(t,2*r+2*i+1),t[2*r+2*i+1]+=l*h,XD(t,2*r+2*i+1),t[2*r+2*i+2]+=s*h,XD(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Un(t,0)},it.gb=function(n){return eS(this,n).h},it.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Un(t,this.h&n.h)},it.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Un(t,this.h|n.h)},it.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Un(t,this.h^n.h)},QD.prototype.createWebChannel=QD.prototype.g,xa.prototype.send=xa.prototype.u,xa.prototype.open=xa.prototype.m,xa.prototype.close=xa.prototype.close,UD.NO_ERROR=0,UD.TIMEOUT=8,UD.HTTP_ERROR=6,SL.COMPLETE="complete",xL.EventType=UE,UE.OPEN="a",UE.CLOSE="b",UE.ERROR="c",UE.MESSAGE="d",Hi.prototype.listen=Hi.prototype.O,$r.prototype.listenOnce=$r.prototype.P,$r.prototype.getLastError=$r.prototype.Sa,$r.prototype.getLastErrorCode=$r.prototype.Ia,$r.prototype.getStatus=$r.prototype.da,$r.prototype.getResponseJson=$r.prototype.Wa,$r.prototype.getResponseText=$r.prototype.ja,$r.prototype.send=$r.prototype.ha,$r.prototype.setWithCredentials=$r.prototype.Oa,mu.prototype.digest=mu.prototype.l,mu.prototype.reset=mu.prototype.reset,mu.prototype.update=mu.prototype.j,Un.prototype.add=Un.prototype.add,Un.prototype.multiply=Un.prototype.R,Un.prototype.modulo=Un.prototype.gb,Un.prototype.compare=Un.prototype.X,Un.prototype.toNumber=Un.prototype.ea,Un.prototype.toString=Un.prototype.toString,Un.prototype.getBits=Un.prototype.D,Un.fromNumber=Pc,Un.fromString=function g2(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return fs(g2(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Pc(Math.pow(e,8)),r=nv,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+s),e);8>s?(s=Pc(Math.pow(e,s)),r=r.R(s).add(Pc(l))):r=(r=r.R(t)).add(Pc(l))}return r};var B6=gu.createWebChannelTransport=function(){return new QD},j6=gu.getStatEventTarget=function(){return LD()},UM=gu.ErrorCode=UD,$6=gu.EventType=SL,H6=gu.Event=Rm,y2=gu.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},G6=gu.FetchXmlHttpFactory=zE,tS=gu.WebChannel=xL,z6=gu.XhrIo=$r,q6=gu.Md5=mu,iv=gu.Integer=Un;const v2="@firebase/firestore";class Gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gi.UNAUTHENTICATED=new Gi(null),Gi.GOOGLE_CREDENTIALS=new Gi("google-credentials-uid"),Gi.FIRST_PARTY=new Gi("first-party-uid"),Gi.MOCK_USER=new Gi("mock-user");let sv="9.23.0";const fp=new Ia.Yd("@firebase/firestore");function VM(){return fp.logLevel}function Be(n,...e){if(fp.logLevel<=Ia.in.DEBUG){const t=e.map(BM);fp.debug(`Firestore (${sv}): ${n}`,...t)}}function ei(n,...e){if(fp.logLevel<=Ia.in.ERROR){const t=e.map(BM);fp.error(`Firestore (${sv}): ${n}`,...t)}}function hl(n,...e){if(fp.logLevel<=Ia.in.WARN){const t=e.map(BM);fp.warn(`Firestore (${sv}): ${n}`,...t)}}function BM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${sv}) INTERNAL ASSERTION FAILED: `+n;throw ei(e),new Error(e)}function Ct(n,e){n||ht()}function tt(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class w2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gi.UNAUTHENTICATED))}shutdown(){}}class Y6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Q6{constructor(e){this.t=e,this.currentUser=Gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ti,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=l;e.enqueueRetryable((0,ve.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},g=y=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ti)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new w2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Gi(e)}}class J6{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Gi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class X6{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new J6(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class E2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ez{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.T;return this.T=s.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.T=t.token,new E2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function tz(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class I2{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=tz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function ov(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function C2(n){return n+"\0"}class br{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return br.fromMillis(Date.now())}static fromDate(e){return br.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new br(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new br(0,0))}static max(){return new Tt(new br(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class QE{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===QE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof QE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),l=t.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wn extends QE{construct(e,t,r){return new wn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new wn(t)}static emptyPath(){return new wn([])}}const nz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hr extends QE{construct(e,t,r){return new Hr(e,t,r)}static isValidIdentifier(e){return nz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Re(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Re(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Re(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(s(),i++)}if(s(),l)throw new Re(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hr(t)}static emptyPath(){return new Hr([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(wn.fromString(e))}static fromName(e){return new et(wn.fromString(e).popFirst(5))}static empty(){return new et(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new wn(e.slice()))}}class nS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function jM(n){return n.fields.find(e=>2===e.kind)}function km(n){return n.fields.filter(e=>2!==e.kind)}nS.UNKNOWN_ID=-1;class rS{constructor(e,t){this.fieldPath=e,this.kind=t}}class JE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new JE(0,Ra.min())}}function b2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new br(t+1,0):new br(t,r));return new Ra(i,et.empty(),e)}function T2(n){return new Ra(n.readTime,n.key,-1)}class Ra{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ra(Tt.min(),et.empty(),-1)}static max(){return new Ra(Tt.max(),et.empty(),-1)}}function $M(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}const D2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class S2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function pp(n){return HM.apply(this,arguments)}function HM(){return HM=(0,ve.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==D2)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),HM.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,s=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++s,l&&s===i&&t()},g=>r(g))}),l=!0,s===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const s=e.length,l=new Array(s);let h=0;for(let g=0;g<s;g++){const y=g;t(e[y]).next(C=>{l[y]=C,++h,h===s&&r(l)},C=>i(C))}})}static doWhile(e,t){return new oe((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class iS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Ti,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new XE(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=GM(r.target.error);this.v.reject(new XE(e,i))}}static open(e,t,r,i){try{return new iS(t,e.transaction(i,r))}catch(s){throw new XE(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new oz(t)}}class _u{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===_u.S((0,O.z$)())&&ei("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Om(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,O.hl)())return!1;if(_u.C())return!0;const e=(0,O.z$)(),t=_u.S(e),r=0<t&&t<10,i=_u.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{r(l.target.result)},s.onblocked=()=>{i(new XE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Re(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Re(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new XE(e,h))},s.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ve.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.$(e);const g=iS.open(s.db,e,l?"readonly":"readwrite",r),y=i(g).next(C=>(g.P(),C)).catch(C=>(g.abort(C),oe.reject(C))).toPromise();return y.catch(()=>{}),yield g.R,y}catch(g){const y=g,C="FirebaseError"!==y.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),s.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class sz{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Om(this.L.delete())}}class XE extends Re{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gp(n){return"IndexedDbTransactionError"===n.name}class oz{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Om(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Om(this.store.add(e))}get(e){return Om(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Om(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Om(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(l,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new oe((s,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,l,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=s=>{const l=GM(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}W(e,t){const r=[];return new oe((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const g=new sz(h),y=t(h.primaryKey,h.value,g);if(y instanceof oe){const C=y.catch(S=>(g.done(),oe.reject(S)));r.push(C)}g.isDone?i():null===g.K?h.continue():h.continue(g.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Om(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=GM(r.target.error);t(i)}})}let A2=!1;function GM(n){const e=_u.S((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A2||(A2=!0,setTimeout(()=>{throw r},0)),r}}return n}class az{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){gp(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield pp(r)}yield t.et(6e4)}))}}class lz{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return oe.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Be("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(h=>{i-=h,r.add(l)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,s)).next(h=>(Be("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const l=T2(s);$M(l,r)>0&&(r=l)}),new Ra(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Na=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function eI(n){return null==n}function tI(n){return 0===n&&1/n==-1/0}function x2(n){return"number"==typeof n&&Number.isInteger(n)&&!tI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ms(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=R2(e)),e=uz(n.get(t),e);return R2(e)}function uz(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function R2(n){return n+"\x01\x01"}function kc(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),wn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&ht(),n.charAt(l+1)){case"\x01":const h=n.substring(s,l);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(s,l),i+="\0";break;case"\x11":i+=n.substring(s,l+1);break;default:ht()}s=l+2}return new wn(r)}const N2=["userId","batchId"];function sS(n,e){return[n,Ms(e)]}function M2(n,e,t){return[n,Ms(e),t]}const cz={},dz=["prefixPath","collectionGroup","readTime","documentId"],hz=["prefixPath","collectionGroup","documentId"],fz=["collectionGroup","readTime","prefixPath","documentId"],pz=["canonicalId","targetId"],gz=["targetId","path"],mz=["path","targetId"],_z=["collectionId","parent"],yz=["indexId","uid"],vz=["uid","sequenceNumber"],wz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ez=["indexId","uid","orderedDocumentKey"],Iz=["userId","collectionPath","documentId"],Cz=["userId","collectionPath","largestBatchId"],bz=["userId","collectionGroup","largestBatchId"],P2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Tz=[...P2,"documentOverlays"],k2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],O2=k2,Dz=[...O2,"indexConfiguration","indexState","indexEntries"];class zM extends S2{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function zi(n,e){const t=tt(n);return _u.M(t.ht,e)}function F2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function L2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ir{constructor(e,t){this.comparator=e,this.root=t||ps.EMPTY}insert(e,t){return new ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ps.BLACK,null,null))}remove(e){return new ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ps.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oS(this.root,e,this.comparator,!1)}getReverseIterator(){return new oS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oS(this.root,e,this.comparator,!0)}}class oS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ps{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ps.RED,this.left=i??ps.EMPTY,this.right=s??ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ps(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ps.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}ps.EMPTY=null,ps.RED=!0,ps.BLACK=!1,ps.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ps(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hr{constructor(e){this.comparator=e,this.data=new ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new U2(this.data.getIterator())}getIteratorFrom(e){return new U2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof hr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hr(this.comparator);return t.data=e,t}}class U2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function av(n){return n.hasNext()?n.getNext():void 0}class Lo{constructor(e){this.fields=e,e.sort(Hr.comparator)}static empty(){return new Lo([])}unionWith(e){let t=new hr(Hr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Lo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ov(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class V2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Di{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new V2("Invalid base64 string: "+i):i}}(e);return new Di(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Di(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Di.EMPTY_BYTE_STRING=new Di("");const Az=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _p(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=Az.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gr(n.seconds),nanos:Gr(n.nanos)}}function Gr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function yh(n){return"string"==typeof n?Di.fromBase64String(n):Di.fromUint8Array(n)}function aS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function lS(n){const e=n.mapValue.fields.__previous_value__;return aS(e)?lS(e):e}function nI(n){const e=_p(n.mapValue.fields.__local_write_time__.timestampValue);return new br(e.seconds,e.nanos)}class xz{constructor(e,t,r,i,s,l,h,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=y}}class yp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yp&&e.projectId===this.projectId&&e.database===this.database}}const vp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uS={nullValue:"NULL_VALUE"};function wp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?aS(n)?4:H2(n)?9007199254740991:10:ht()}function Oc(n,e){if(n===e)return!0;const t=wp(n);if(t!==wp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nI(n).isEqual(nI(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=_p(r.timestampValue),l=_p(i.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,yh(n.bytesValue).isEqual(yh(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Gr(r.geoPointValue.latitude)===Gr(i.geoPointValue.latitude)&&Gr(r.geoPointValue.longitude)===Gr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Gr(r.integerValue)===Gr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Gr(r.doubleValue),l=Gr(i.doubleValue);return s===l?tI(s)===tI(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return ov(n.arrayValue.values||[],e.arrayValue.values||[],Oc);case 10:return function(r,i){const s=r.mapValue.fields||{},l=i.mapValue.fields||{};if(F2(s)!==F2(l))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===l[h]||!Oc(s[h],l[h])))return!1;return!0}(n,e);default:return ht()}var i}function rI(n,e){return void 0!==(n.values||[]).find(t=>Oc(t,e))}function Ep(n,e){if(n===e)return 0;const t=wp(n),r=wp(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const l=Gr(i.integerValue||i.doubleValue),h=Gr(s.integerValue||s.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return B2(n.timestampValue,e.timestampValue);case 4:return B2(nI(n),nI(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,s){const l=yh(i),h=yh(s);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const l=i.split("/"),h=s.split("/");for(let g=0;g<l.length&&g<h.length;g++){const y=Wt(l[g],h[g]);if(0!==y)return y}return Wt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const l=Wt(Gr(i.latitude),Gr(s.latitude));return 0!==l?l:Wt(Gr(i.longitude),Gr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const l=i.values||[],h=s.values||[];for(let g=0;g<l.length&&g<h.length;++g){const y=Ep(l[g],h[g]);if(y)return y}return Wt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===vp.mapValue&&s===vp.mapValue)return 0;if(i===vp.mapValue)return 1;if(s===vp.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),g=s.fields||{},y=Object.keys(g);h.sort(),y.sort();for(let C=0;C<h.length&&C<y.length;++C){const S=Wt(h[C],y[C]);if(0!==S)return S;const N=Ep(l[h[C]],g[y[C]]);if(0!==N)return N}return Wt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ht()}}function B2(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=_p(n),r=_p(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function lv(n){return qM(n)}function qM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=_p(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?yh(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const l of r.values||[])s?s=!1:i+=",",i+=qM(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",l=!0;for(const h of i)l?l=!1:s+=",",s+=`${h}:${qM(r.fields[h])}`;return s+"}"}(n.mapValue):ht();var e}function Fm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function WM(n){return!!n&&"integerValue"in n}function iI(n){return!!n&&"arrayValue"in n}function j2(n){return!!n&&"nullValue"in n}function $2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dS(n){return!!n&&"mapValue"in n}function sI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return mp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function H2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Rz(n){return"nullValue"in n?uS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fm(yp.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function Nz(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fm(yp.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?vp:ht()}function G2(n,e){const t=Ep(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function z2(n,e){const t=Ep(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class gs{constructor(e){this.value=e}static empty(){return new gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sI(t)}setAll(e){let t=Hr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=sI(l):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());dS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];dS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mp(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new gs(sI(this.value))}}function q2(n){const e=[];return mp(n.fields,(t,r)=>{const i=new Hr([t]);if(dS(r)){const s=q2(r.mapValue).fields;if(0===s.length)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new Lo(e)}class fr{constructor(e,t,r,i,s,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=l,this.documentState=h}static newInvalidDocument(e){return new fr(e,0,Tt.min(),Tt.min(),Tt.min(),gs.empty(),0)}static newFoundDocument(e,t,r,i){return new fr(e,1,t,Tt.min(),r,i,0)}static newNoDocument(e,t){return new fr(e,2,t,Tt.min(),Tt.min(),gs.empty(),0)}static newUnknownDocument(e,t){return new fr(e,3,t,Tt.min(),Tt.min(),gs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ip{constructor(e,t){this.position=e,this.inclusive=t}}function W2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(r=s.field.isKeyField()?et.comparator(et.fromName(l.referenceValue),t.key):Ep(l,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function K2(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oc(n.position[t],e.position[t]))return!1;return!0}class uv{constructor(e,t="asc"){this.field=e,this.dir=t}}function Mz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Z2{}class hn extends Z2{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Pz(e,t,r):"array-contains"===t?new Fz(e,r):"in"===t?new tU(e,r):"not-in"===t?new Lz(e,r):"array-contains-any"===t?new Uz(e,r):new hn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new kz(e,r):new Oz(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ep(t,this.value)):null!==t&&wp(this.value)===wp(t)&&this.matchesComparison(Ep(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Vn extends Z2{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Vn(e,t)}matches(e){return cv(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function cv(n){return"and"===n.op}function KM(n){return"or"===n.op}function ZM(n){return Y2(n)&&cv(n)}function Y2(n){for(const e of n.filters)if(e instanceof Vn)return!1;return!0}function YM(n){if(n instanceof hn)return n.field.canonicalString()+n.op.toString()+lv(n.value);if(ZM(n))return n.filters.map(e=>YM(e)).join(",");{const e=n.filters.map(t=>YM(t)).join(",");return`${n.op}(${e})`}}function Q2(n,e){return n instanceof hn?(t=n,(r=e)instanceof hn&&t.op===r.op&&t.field.isEqual(r.field)&&Oc(t.value,r.value)):n instanceof Vn?function(t,r){return r instanceof Vn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,l)=>i&&Q2(s,r.filters[l]),!0)}(n,e):void ht();var t,r}function J2(n,e){const t=n.filters.concat(e);return Vn.create(t,n.op)}function X2(n){return n instanceof hn?`${(e=n).field.canonicalString()} ${e.op} ${lv(e.value)}`:n instanceof Vn?function(e){return e.op.toString()+" {"+e.getFilters().map(X2).join(" ,")+"}"}(n):"Filter";var e}class Pz extends hn{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.matchesComparison(t)}}class kz extends hn{constructor(e,t){super(e,"in",t),this.keys=eU(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Oz extends hn{constructor(e,t){super(e,"not-in",t),this.keys=eU(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eU(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class Fz extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return iI(t)&&rI(t.arrayValue,this.value)}}class tU extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rI(this.value.arrayValue,t)}}class Lz extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(rI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rI(this.value.arrayValue,t)}}class Uz extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!iI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rI(this.value.arrayValue,r))}}class Vz{constructor(e,t=null,r=[],i=[],s=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=h,this.dt=null}}function QM(n,e=null,t=[],r=[],i=null,s=null,l=null){return new Vz(n,e,t,r,i,s,l)}function Lm(n){const e=tt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>YM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),eI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lv(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lv(r)).join(",")),e.dt=t}return e.dt}function oI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Mz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Q2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!K2(n.startAt,e.startAt)&&K2(n.endAt,e.endAt)}function hS(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function fS(n,e){return n.filters.filter(t=>t instanceof hn&&t.field.isEqual(e))}function nU(n,e,t){let r=uS,i=!0;for(const s of fS(n,e)){let l=uS,h=!0;switch(s.op){case"<":case"<=":l=Rz(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,h=!1;break;case"!=":case"not-in":l=uS}G2({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];G2({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function rU(n,e,t){let r=vp,i=!0;for(const s of fS(n,e)){let l=vp,h=!0;switch(s.op){case">=":case">":l=Nz(s.value),h=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,h=!1;break;case"!=":case"not-in":l=vp}z2({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];z2({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class vh{constructor(e,t=null,r=[],i=[],s=null,l="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=h,this.endAt=g,this.wt=null,this._t=null}}function iU(n,e,t,r,i,s,l,h){return new vh(n,e,t,r,i,s,l,h)}function dv(n){return new vh(n)}function sU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function JM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function pS(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function XM(n){return null!==n.collectionGroup}function Um(n){const e=tt(n);if(null===e.wt){e.wt=[];const t=pS(e),r=JM(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new uv(t)),e.wt.push(new uv(Hr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new uv(Hr.keyField(),s))}}}return e.wt}function uo(n){const e=tt(n);if(!e._t)if("F"===e.limitType)e._t=QM(e.path,e.collectionGroup,Um(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Um(e))t.push(new uv(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Ip(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ip(e.startAt.position,e.startAt.inclusive):null;e._t=QM(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function eP(n,e){e.getFirstInequalityField(),pS(n);const t=n.filters.concat([e]);return new vh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gS(n,e,t){return new vh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function aI(n,e){return oI(uo(n),uo(e))&&n.limitType===e.limitType}function oU(n){return`${Lm(uo(n))}|lt:${n.limitType}`}function tP(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>X2(r)).join(", ")}]`),eI(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lv(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lv(r)).join(",")),`Target(${t})`}(uo(n))}; limitType=${n.limitType})`}function lI(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):et.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Um(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,l){const h=W2(i,s,l);return i.inclusive?h<=0:h<0}(t.startAt,Um(t),r)||t.endAt&&!function(i,s,l){const h=W2(i,s,l);return i.inclusive?h>=0:h>0}(t.endAt,Um(t),r)));var t,r}function aU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lU(n){return(e,t)=>{let r=!1;for(const i of Um(n)){const s=Bz(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Bz(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(i,s,l){const h=s.data.field(i),g=l.data.field(i);return null!==h&&null!==g?Ep(h,g):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}class wh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mp(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return L2(this.inner)}size(){return this.innerSize}}const jz=new ir(et.comparator);function Uo(){return jz}const uU=new ir(et.comparator);function uI(...n){let e=uU;for(const t of n)e=e.insert(t.key,t);return e}function cU(n){let e=uU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fc(){return cI()}function dU(){return cI()}function cI(){return new wh(n=>n.toString(),(n,e)=>n.isEqual(e))}const $z=new ir(et.comparator),Hz=new hr(et.comparator);function en(...n){let e=Hz;for(const t of n)e=e.add(t);return e}const Gz=new hr(Wt);function nP(){return Gz}function hU(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tI(e)?"-0":e}}function fU(n){return{integerValue:""+n}}function pU(n,e){return x2(e)?fU(e):hU(n,e)}class mS{constructor(){this._=void 0}}function zz(n,e,t){return n instanceof hv?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&aS(i)&&(i=lS(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Vm?mU(n,e):n instanceof Bm?_U(n,e):function(r,i){const s=gU(r,i),l=yU(s)+yU(r.gt);return WM(s)&&WM(r.gt)?fU(l):hU(r.serializer,l)}(n,e)}function qz(n,e,t){return n instanceof Vm?mU(n,e):n instanceof Bm?_U(n,e):t}function gU(n,e){return n instanceof fv?WM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class hv extends mS{}class Vm extends mS{constructor(e){super(),this.elements=e}}function mU(n,e){const t=vU(e);for(const r of n.elements)t.some(i=>Oc(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bm extends mS{constructor(e){super(),this.elements=e}}function _U(n,e){let t=vU(e);for(const r of n.elements)t=t.filter(i=>!Oc(i,r));return{arrayValue:{values:t}}}class fv extends mS{constructor(e,t){super(),this.serializer=e,this.gt=t}}function yU(n){return Gr(n.integerValue||n.doubleValue)}function vU(n){return iI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class dI{constructor(e,t){this.field=e,this.transform=t}}class Kz{constructor(e,t){this.version=e,this.transformResults=t}}class Tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _S(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class yS{}function wU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new gv(n.key,Tr.none()):new pv(n.key,n.data,Tr.none());{const t=n.data,r=gs.empty();let i=new hr(Hr.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?r.delete(s):r.set(s,l),i=i.add(s)}return new Eh(n.key,r,new Lo(i.toArray()),Tr.none())}}function Zz(n,e,t){n instanceof pv?function(r,i,s){const l=r.value.clone(),h=CU(r.fieldTransforms,i,s.transformResults);l.setAll(h),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Eh?function(r,i,s){if(!_S(r.precondition,i))return void i.convertToUnknownDocument(s.version);const l=CU(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(IU(r)),h.setAll(l),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function hI(n,e,t,r){return n instanceof pv?function(i,s,l,h){if(!_S(i.precondition,s))return l;const g=i.value.clone(),y=bU(i.fieldTransforms,h,s);return g.setAll(y),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Eh?function(i,s,l,h){if(!_S(i.precondition,s))return l;const g=bU(i.fieldTransforms,h,s),y=s.data;return y.setAll(IU(i)),y.setAll(g),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(l=t,_S(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function Yz(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=gU(r.transform,i||null);null!=s&&(null===t&&(t=gs.empty()),t.set(r.field,s))}return t||null}function EU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ov(t,r,(i,s)=>function Wz(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Vm&&r instanceof Vm||t instanceof Bm&&r instanceof Bm?ov(t.elements,r.elements,Oc):t instanceof fv&&r instanceof fv?Oc(t.gt,r.gt):t instanceof hv&&r instanceof hv);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class pv extends yS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Eh extends yS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function IU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function CU(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,h=e.data.field(s.field);r.set(s.field,qz(l,h,t[i]))}return r}function bU(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,zz(s,l,e))}return r}class gv extends yS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rP extends yS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Zz(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=hI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=hI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=dU();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let h=this.applyToLocalView(l,s.mutatedFields);h=t.has(i.key)?null:h;const g=wU(l,h);null!==g&&r.set(i.key,g),l.isValidDocument()||l.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),en())}isEqual(e){return this.batchId===e.batchId&&ov(this.mutations,e.mutations,(t,r)=>EU(t,r))&&ov(this.baseMutations,e.baseMutations,(t,r)=>EU(t,r))}}class sP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=$z;const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new sP(e,t,r,i)}}class oP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jz{constructor(e,t){this.count=e,this.unchangedNames=t}}var pi,En;function TU(n){switch(n){default:return ht();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function DU(n){if(void 0===n)return ei("GRPC error has no .code"),he.UNKNOWN;switch(n){case pi.OK:return he.OK;case pi.CANCELLED:return he.CANCELLED;case pi.UNKNOWN:return he.UNKNOWN;case pi.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case pi.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case pi.INTERNAL:return he.INTERNAL;case pi.UNAVAILABLE:return he.UNAVAILABLE;case pi.UNAUTHENTICATED:return he.UNAUTHENTICATED;case pi.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case pi.NOT_FOUND:return he.NOT_FOUND;case pi.ALREADY_EXISTS:return he.ALREADY_EXISTS;case pi.PERMISSION_DENIED:return he.PERMISSION_DENIED;case pi.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case pi.ABORTED:return he.ABORTED;case pi.OUT_OF_RANGE:return he.OUT_OF_RANGE;case pi.UNIMPLEMENTED:return he.UNIMPLEMENTED;case pi.DATA_LOSS:return he.DATA_LOSS;default:return ht()}}(En=pi||(pi={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";class aP{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return vS}static getOrCreateInstance(){return null===vS&&(vS=new aP),vS}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let vS=null;function SU(){return new TextEncoder}const Xz=new iv([4294967295,4294967295],0);function AU(n){const e=SU().encode(n),t=new q6;return t.update(e),new Uint8Array(t.digest())}function xU(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new iv([t,r],0),new iv([i,s],0)]}class lP{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fI(`Invalid padding: ${t}`);if(r<0)throw new fI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new fI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new fI(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=iv.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(iv.fromNumber(r)));return 1===i.compare(Xz)&&(i=new iv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=AU(e),[r,i]=xU(t);for(let s=0;s<this.hashCount;s++){const l=this.Et(r,i,s);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),l=new lP(s,i,t);return r.forEach(h=>l.insert(h)),l}insert(e){if(0===this.It)return;const t=AU(e),[r,i]=xU(t);for(let s=0;s<this.hashCount;s++){const l=this.Et(r,i,s);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class fI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class pI{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,gI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new pI(Tt.min(),i,new ir(Wt),Uo(),en())}}class gI{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new gI(r,t,en(),en(),en())}}class wS{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class RU{constructor(e,t){this.targetId=e,this.Vt=t}}class NU{constructor(e,t,r=Di.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class MU{constructor(){this.St=0,this.Dt=kU(),this.Ct=Di.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=en(),t=en(),r=en();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new gI(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=kU()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class eq{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Uo(),this.zt=PU(),this.Wt=new ir(Wt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const l=s.target;if(hS(l))if(0===i){const h=new et(l.path);this.Yt(r,h,fr.newNoDocument(h,Tt.min()))}else Ct(1===i);else{const h=this.ie(r);if(h!==i){const g=this.re(e,h);0!==g&&(this.ee(r),this.Wt=this.Wt.insert(r,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=aP.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,C,S){var N,k,B,Z,J,Me;const He={localCacheCount:C,existenceFilterCount:S.count},je=S.unchangedNames;return je&&(He.bloomFilter={applied:0===y,hashCount:null!==(N=je?.hashCount)&&void 0!==N?N:0,bitmapLength:null!==(Z=null===(B=null===(k=je?.bits)||void 0===k?void 0:k.bitmap)||void 0===B?void 0:B.length)&&void 0!==Z?Z:0,padding:null!==(Me=null===(J=je?.bits)||void 0===J?void 0:J.padding)&&void 0!==Me?Me:0}),He}(g,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:l=0},hashCount:h=0}=r;let g,y;try{g=yh(s).toUint8Array()}catch(C){if(C instanceof V2)return hl("Decoding the base64 bloom filter in existence filter failed ("+C.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw C}try{y=new lP(g,l,h)}catch(C){return hl(C instanceof fI?"BloomFilter error: ":"Applying bloom filter failed: ",C),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const l=this.Gt.ue(),h=`projects/${l.projectId}/databases/${l.database}/documents/${s.path.canonicalString()}`;t.vt(h)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,l)=>{const h=this.se(l);if(h){if(s.current&&hS(h.target)){const g=new et(h.target.path);null!==this.jt.get(g)||this.ae(l,g)||this.Yt(l,g,fr.newNoDocument(g,e))}s.Mt&&(t.set(l,s.Ot()),s.Ft())}});let r=en();this.zt.forEach((s,l)=>{let h=!0;l.forEachWhile(g=>{const y=this.se(g);return!y||"TargetPurposeLimboResolution"===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.jt.forEach((s,l)=>l.setReadTime(e));const i=new pI(e,t,this.Wt,this.jt,r);return this.jt=Uo(),this.zt=PU(),this.Wt=new ir(Wt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new MU,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new hr(Wt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new MU),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function PU(){return new ir(et.comparator)}function kU(){return new ir(et.comparator)}const tq={asc:"ASCENDING",desc:"DESCENDING"},nq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rq={and:"AND",or:"OR"};class iq{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function uP(n,e){return n.useProto3Json||eI(e)?e:{value:e}}function mv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sq(n,e){return mv(n,e.toTimestamp())}function ti(n){return Ct(!!n),Tt.fromTimestamp(function(e){const t=_p(e);return new br(t.seconds,t.nanos)}(n))}function cP(n,e){return(t=n,new wn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function FU(n){const e=wn.fromString(n);return Ct(zU(e)),e}function mI(n,e){return cP(n.databaseId,e.path)}function Lc(n,e){const t=FU(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(UU(t))}function dP(n,e){return cP(n.databaseId,e)}function LU(n){const e=FU(n);return 4===e.length?wn.emptyPath():UU(e)}function _I(n){return new wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UU(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function VU(n,e,t){return{name:mI(n,e),fields:t.value.mapValue.fields}}function BU(n,e,t){const r=Lc(n,e.name),i=ti(e.updateTime),s=e.createTime?ti(e.createTime):Tt.min(),l=new gs({mapValue:{fields:e.fields}}),h=fr.newFoundDocument(r,i,s,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function yI(n,e){let t;if(e instanceof pv)t={update:VU(n,e.key,e.value)};else if(e instanceof gv)t={delete:mI(n,e.key)};else if(e instanceof Eh)t={update:VU(n,e.key,e.data),updateMask:fq(e.fieldMask)};else{if(!(e instanceof rP))return ht();t={verify:mI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const l=s.transform;if(l instanceof hv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Vm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fv)return{fieldPath:s.field.canonicalString(),increment:l.gt};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:sq(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function hP(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Tr.updateTime(ti(i.updateTime)):void 0!==i.exists?Tr.exists(i.exists):Tr.none():Tr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,l){let h=null;"setToServerValue"in l?(Ct("REQUEST_TIME"===l.setToServerValue),h=new hv):"appendMissingElements"in l?h=new Vm(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Bm(l.removeAllFromArray.values||[]):"increment"in l?h=new fv(s,l.increment):ht();const g=Hr.fromServerFormat(l.fieldPath);return new dI(g,h)}(n,i)):[];var i;if(e.update){const i=Lc(n,e.update.name),s=new gs({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Lo((e.updateMask.fieldPaths||[]).map(y=>Hr.fromServerFormat(y)));return new Eh(i,s,l,t,r)}return new pv(i,s,t,r)}if(e.delete){const i=Lc(n,e.delete);return new gv(i,t)}if(e.verify){const i=Lc(n,e.verify);return new rP(i,t)}return ht()}function jU(n,e){return{documents:[dP(n,e.path)]}}function fP(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=dP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return GU(Vn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(g){if(0!==g.length)return g.map(y=>{return{field:Cp((C=y).field),direction:cq(C.dir)};var C})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=uP(n,e.limit);var h,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function $U(n){let e=LU(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let s=[];t.where&&(s=function(C){const S=HU(C);return S instanceof Vn&&ZM(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new uv(_v((S=C).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(C){let S;return S="object"==typeof C?C.value:C,eI(S)?null:S}(t.limit));let g=null;var C;t.startAt&&(g=new Ip((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new Ip(C.values||[],!C.before)}(t.endAt)),iU(e,i,l,s,h,"F",g,y)}function HU(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=_v(e.unaryFilter.field);return hn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=_v(e.unaryFilter.field);return hn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_v(e.unaryFilter.field);return hn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=_v(e.unaryFilter.field);return hn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}(n):void 0!==n.fieldFilter?hn.create(_v((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Vn.create(e.compositeFilter.filters.map(t=>HU(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ht()}}(e.compositeFilter.op))}(n):ht();var e}function cq(n){return tq[n]}function dq(n){return nq[n]}function hq(n){return rq[n]}function Cp(n){return{fieldPath:n.canonicalString()}}function _v(n){return Hr.fromServerFormat(n.fieldPath)}function GU(n){return n instanceof hn?function(e){if("=="===e.op){if($2(e.value))return{unaryFilter:{field:Cp(e.field),op:"IS_NAN"}};if(j2(e.value))return{unaryFilter:{field:Cp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($2(e.value))return{unaryFilter:{field:Cp(e.field),op:"IS_NOT_NAN"}};if(j2(e.value))return{unaryFilter:{field:Cp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cp(e.field),op:dq(e.op),value:e.value}}}(n):n instanceof Vn?function(e){const t=e.getFilters().map(r=>GU(r));return 1===t.length?t[0]:{compositeFilter:{op:hq(e.op),filters:t}}}(n):ht()}function fq(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ih{constructor(e,t,r,i,s=Tt.min(),l=Tt.min(),h=Di.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new Ih(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qU{constructor(e){this.fe=e}}function WU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ES(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:mI(i=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:mv(i,s.version.toTimestamp()),createTime:mv(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:jm(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:jm(e.version)}}var i,s;return r}function ES(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $m(n){const e=new br(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Hm(n,e){const t=(e.baseMutations||[]).map(s=>hP(n.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>hP(n.fe,s)),i=br.fromMillis(e.localWriteTimeMs);return new iP(e.batchId,i,t,r)}function vI(n){const e=$m(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$m(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=uo(dv(LU(i.documents[0])))):r=uo($U(n.query)),new Ih(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Di.fromBase64String(n.resumeToken))}function KU(n,e){const t=jm(e.snapshotVersion),r=jm(e.lastLimboFreeSnapshotVersion);let i;i=hS(e.target)?jU(n.fe,e.target):fP(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lm(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function pP(n){const e=$U({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?gS(e,e.limit,"L"):e}function gP(n,e){return new oP(e.largestBatchId,hP(n.fe,e.overlayMutation))}function ZU(n,e){const t=e.path.lastSegment();return[n,Ms(e.path.popLast()),t]}function YU(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:jm(r.readTime),documentKey:Ms(r.documentKey.path),largestBatchId:r.largestBatchId}}class gq{getBundleMetadata(e,t){return QU(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:$m(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return QU(e).put({bundleId:(r=t).id,createTime:jm(ti(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return JU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:pP(i.bundledQuery),readTime:$m(i.readTime)};var i})}saveNamedQuery(e,t){return JU(e).put({name:(r=t).name,readTime:jm(ti(r.readTime)),bundledQuery:r.bundledQuery});var r}}function QU(n){return zi(n,"bundles")}function JU(n){return zi(n,"namedQueries")}class IS{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new IS(e,t.uid||"")}getOverlay(e,t){return wI(e).get(ZU(this.userId,t)).next(r=>r?gP(this.serializer,r):null)}getOverlays(e,t){const r=Fc();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const h=new oP(t,l);i.push(this.we(e,h))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ms(l.getCollectionPath())));const s=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(wI(e).J("collectionPathOverlayIndex",h))}),oe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Fc(),s=Ms(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return wI(e).j("collectionPathOverlayIndex",l).next(h=>{for(const g of h){const y=gP(this.serializer,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Fc();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wI(e).X({index:"collectionGroupOverlayIndex",range:h},(g,y,C)=>{const S=gP(this.serializer,y);s.size()<i||S.largestBatchId===l?(s.set(S.getKey(),S),l=S.largestBatchId):C.done()}).next(()=>s)}we(e,t){return wI(e).put(function(r,i,s){const[l,h,g]=ZU(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:g,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:yI(r.fe,s.mutation)}}(this.serializer,this.userId,t))}}function wI(n){return zi(n,"documentOverlays")}class Gm{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Gr(e.integerValue));else if("doubleValue"in e){const r=Gr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),tI(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(yh(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?H2(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ht()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),et.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function mq(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function XU(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=mq(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Gm.Ve=new Gm;class _q{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=XU(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=XU(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class yq{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class vq{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class EI{constructor(){this.je=new _q,this.ze=new yq(this.je),this.We=new vq(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class zm{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new zm(this.indexId,this.documentKey,this.arrayValue,r)}}function bp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=eV(n.arrayValue,e.arrayValue),0!==t?t:(t=eV(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function eV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class wq{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Ct(e.collectionGroup===this.collectionId);const t=jM(e);if(void 0!==t&&!this.en(t))return!1;const r=km(e);let i=new Set,s=0,l=0;for(;s<r.length&&this.en(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const h=r[s];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[l++],h))return!1}++s}for(;s<r.length;++s)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function tV(n){var e,t;if(Ct(n instanceof hn||n instanceof Vn),n instanceof hn){if(n instanceof tU){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>hn.create(n.field,"==",s)))||[];return Vn.create(i,"or")}return n}const r=n.filters.map(i=>tV(i));return Vn.create(r,n.op)}function Eq(n){if(0===n.getFilters().length)return[];const e=yP(tV(n));return Ct(nV(e)),mP(e)||_P(e)?[e]:e.getFilters()}function mP(n){return n instanceof hn}function _P(n){return n instanceof Vn&&ZM(n)}function nV(n){return mP(n)||_P(n)||function(e){if(e instanceof Vn&&KM(e)){for(const t of e.getFilters())if(!mP(t)&&!_P(t))return!1;return!0}return!1}(n)}function yP(n){if(Ct(n instanceof hn||n instanceof Vn),n instanceof hn)return n;if(1===n.filters.length)return yP(n.filters[0]);const e=n.filters.map(r=>yP(r));let t=Vn.create(e,n.op);return t=CS(t),nV(t)?t:(Ct(t instanceof Vn),Ct(cv(t)),Ct(t.filters.length>1),t.filters.reduce((r,i)=>vP(r,i)))}function vP(n,e){let t;return Ct(n instanceof hn||n instanceof Vn),Ct(e instanceof hn||e instanceof Vn),t=n instanceof hn?e instanceof hn?Vn.create([n,e],"and"):rV(n,e):e instanceof hn?rV(e,n):function(r,i){if(Ct(r.filters.length>0&&i.filters.length>0),cv(r)&&cv(i))return J2(r,i.getFilters());const s=KM(r)?r:i,l=KM(r)?i:r,h=s.filters.map(g=>vP(g,l));return Vn.create(h,"or")}(n,e),CS(t)}function rV(n,e){if(cv(e))return J2(e,n.getFilters());{const t=e.filters.map(r=>vP(n,r));return Vn.create(t,"or")}}function CS(n){if(Ct(n instanceof hn||n instanceof Vn),n instanceof hn)return n;const e=n.getFilters();if(1===e.length)return CS(e[0]);if(Y2(n))return n;const t=e.map(i=>CS(i)),r=[];return t.forEach(i=>{i instanceof hn?r.push(i):i instanceof Vn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Vn.create(r,n.op)}class Iq{constructor(){this.rn=new wP}addToCollectionParentIndex(e,t){return this.rn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Ra.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Ra.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class wP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new hr(wn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hr(wn.comparator)).toArray()}}const bS=new Uint8Array(0);class Cq{constructor(e,t){this.user=e,this.databaseId=t,this.on=new wP,this.un=new wh(r=>Lm(r),(r,i)=>oI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:r,parent:Ms(i)};return iV(e).put(s)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[C2(t),""],!1,!0);return iV(e).j(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(kc(l.parent))}return r})}addFieldIndex(e,t){const r=TS(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const s=r.add(i);if(t.indexState){const l=CI(e);return s.next(h=>{l.put(YU(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=TS(e),i=CI(e),s=II(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=II(e);let i=!0;const s=new Map;return oe.forEach(this.cn(t),l=>this.an(e,l).next(h=>{i&&(i=!!h),s.set(l,h)})).next(()=>{if(i){let l=en();const h=[];return oe.forEach(s,(g,y)=>{var C;Be("IndexedDbIndexManager",`Using index ${C=g,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(je=>`${je.fieldPath}:${je.kind}`).join(",")}`} to execute ${Lm(t)}`);const S=function(je,Ye){const St=jM(Ye);if(void 0===St)return null;for(const kt of fS(je,St.fieldPath))switch(kt.op){case"array-contains-any":return kt.value.arrayValue.values||[];case"array-contains":return[kt.value]}return null}(y,g),N=function(je,Ye){const St=new Map;for(const kt of km(Ye))for(const pn of fS(je,kt.fieldPath))switch(pn.op){case"==":case"in":St.set(kt.fieldPath.canonicalString(),pn.value);break;case"not-in":case"!=":return St.set(kt.fieldPath.canonicalString(),pn.value),Array.from(St.values())}return null}(y,g),k=function(je,Ye){const St=[];let kt=!0;for(const pn of km(Ye)){const kr=0===pn.kind?nU(je,pn.fieldPath,je.startAt):rU(je,pn.fieldPath,je.startAt);St.push(kr.value),kt&&(kt=kr.inclusive)}return new Ip(St,kt)}(y,g),B=function(je,Ye){const St=[];let kt=!0;for(const pn of km(Ye)){const kr=0===pn.kind?rU(je,pn.fieldPath,je.endAt):nU(je,pn.fieldPath,je.endAt);St.push(kr.value),kt&&(kt=kr.inclusive)}return new Ip(St,kt)}(y,g),Z=this.hn(g,y,k),J=this.hn(g,y,B),Me=this.ln(g,y,N),He=this.fn(g.indexId,S,Z,k.inclusive,J,B.inclusive,Me);return oe.forEach(He,je=>r.H(je,t.limit).next(Ye=>{Ye.forEach(St=>{const kt=et.fromSegments(St.documentKey);l.has(kt)||(l=l.add(kt),h.push(kt))})}))}).next(()=>h)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Eq(Vn.create(e.filters,"and")).map(r=>QM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,s,l,h){const g=(null!=t?t.length:1)*Math.max(r.length,s.length),y=g/(null!=t?t.length:1),C=[];for(let S=0;S<g;++S){const N=t?this.dn(t[S/y]):bS,k=this.wn(e,N,r[S%y],i),B=this._n(e,N,s[S%y],l),Z=h.map(J=>this.wn(e,N,J,!0));C.push(...this.createRange(k,B,Z))}return C}wn(e,t,r,i){const s=new zm(e,et.empty(),t,r);return i?s:s.Je()}_n(e,t,r,i){const s=new zm(e,et.empty(),t,r);return i?s.Je():s}an(e,t){const r=new wq(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let l=null;for(const h of s)r.tn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return oe.forEach(i,s=>this.an(e,s).next(l=>{l?0!==r&&l.fields.length<function(h){let g=new hr(Hr.comparator),y=!1;for(const C of h.filters)for(const S of C.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?y=!0:g=g.add(S.field));for(const C of h.orderBy)C.field.isKeyField()||(g=g.add(C.field));return g.size+(y?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new EI;for(const i of km(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const l=r.He(i.kind);Gm.Ve._e(s,l)}return r.Qe()}dn(e){const t=new EI;return Gm.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new EI;return Gm.Ve._e(Fm(this.databaseId,t),r.He(function(i){const s=km(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new EI);let s=0;for(const l of km(e)){const h=r[s++];for(const g of i)if(this.yn(t,l.fieldPath)&&iI(h))i=this.pn(i,l,h);else{const y=g.He(l.kind);Gm.Ve._e(h,y)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const h of i){const g=new EI;g.seed(h.Qe()),Gm.Ve._e(l,g.He(t.kind)),s.push(g)}return s}yn(e,t){return!!e.filters.find(r=>r instanceof hn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=TS(e),i=CI(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const l=[];return oe.forEach(s,h=>i.get([h.indexId,this.uid]).next(g=>{l.push(function(y,C){const S=C?new JE(C.sequenceNumber,new Ra($m(C.readTime),new et(kc(C.documentKey)),C.largestBatchId)):JE.empty(),N=y.fields.map(([k,B])=>new rS(Hr.fromServerFormat(k),B));return new nS(y.indexId,y.collectionGroup,N,S)}(h,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Wt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=TS(e),s=CI(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>oe.forEach(h,g=>s.put(YU(g.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),oe.forEach(h,g=>this.En(e,i,g).next(y=>{const C=this.An(s,g);return y.isEqual(C)?oe.resolve():this.vn(e,s,g,y,C)}))))})}Rn(e,t,r,i){return II(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return II(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=II(e);let s=new hr(bp);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,h)=>{s=s.add(new zm(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}An(e,t){let r=new hr(bp);const i=this.mn(t,e);if(null==i)return r;const s=jM(t);if(null!=s){const l=e.data.field(s.fieldPath);if(iI(l))for(const h of l.arrayValue.values||[])r=r.add(new zm(t.indexId,e.key,this.dn(h),i))}else r=r.add(new zm(t.indexId,e.key,bS,i));return r}vn(e,t,r,i,s){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,g,y,C,S){const N=h.getIterator(),k=g.getIterator();let B=av(N),Z=av(k);for(;B||Z;){let J=!1,Me=!1;if(B&&Z){const He=y(B,Z);He<0?Me=!0:He>0&&(J=!0)}else null!=B?Me=!0:J=!0;J?(C(Z),Z=av(k)):Me?(S(B),B=av(N)):(B=av(N),Z=av(k))}}(i,s,bp,h=>{l.push(this.Rn(e,t,r,h))},h=>{l.push(this.Pn(e,t,r,h))}),oe.waitFor(l)}Tn(e){let t=1;return CI(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>bp(l,h)).filter((l,h,g)=>!h||0!==bp(l,g[h-1]));const i=[];i.push(e);for(const l of r){const h=bp(l,e),g=bp(l,t);if(0===h)i[0]=e.Je();else if(h>0&&g<0)i.push(l),i.push(l.Je());else if(g>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];s.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,bS,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,bS,[]]))}return s}bn(e,t){return bp(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(sV)}getMinOffset(e,t){return oe.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ht())).next(sV)}}function iV(n){return zi(n,"collectionParents")}function II(n){return zi(n,"indexEntries")}function TS(n){return zi(n,"indexConfiguration")}function CI(n){return zi(n,"indexState")}function sV(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;$M(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ra(e.readTime,e.documentKey,t)}const oV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ps{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ps(e,Ps.DEFAULT_COLLECTION_PERCENTILE,Ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function aV(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let h=0;const g=r.X({range:l},(C,S,N)=>(h++,N.delete()));s.push(g.next(()=>{Ct(1===h)}));const y=[];for(const C of t.mutations){const S=M2(e,C.key.path,t.batchId);s.push(i.delete(S)),y.push(C.key)}return oe.waitFor(s).next(()=>y)}function DS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}Ps.DEFAULT_COLLECTION_PERCENTILE=10,Ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ps.DEFAULT=new Ps(41943040,Ps.DEFAULT_COLLECTION_PERCENTILE,Ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ps.DISABLED=new Ps(-1,0,0);class SS{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Ct(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new SS(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tp(e).X({index:"userMutationsIndex",range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=yv(e),l=Tp(e);return l.add({}).next(h=>{Ct("number"==typeof h);const g=new iP(h,t,r,i),y=function(N,k,B){const Z=B.baseMutations.map(Me=>yI(N.fe,Me)),J=B.mutations.map(Me=>yI(N.fe,Me));return{userId:k,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:Z,mutations:J}}(this.serializer,this.userId,g),C=[];let S=new hr((N,k)=>Wt(N.canonicalString(),k.canonicalString()));for(const N of i){const k=M2(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),C.push(l.put(y)),C.push(s.put(k,cz))}return S.forEach(N=>{C.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.Vn[h]=g.keys()}),oe.waitFor(C).next(()=>g)})}lookupMutationBatch(e,t){return Tp(e).get(t).next(r=>r?(Ct(r.userId===this.userId),Hm(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?oe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Tp(e).X({index:"userMutationsIndex",range:i},(l,h,g)=>{h.userId===this.userId&&(Ct(h.batchId>=r),s=Hm(this.serializer,h)),g.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Tp(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tp(e).j("userMutationsIndex",t).next(r=>r.map(i=>Hm(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=sS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return yv(e).X({range:i},(l,h,g)=>{const[y,C,S]=l,N=kc(C);if(y===this.userId&&t.path.isEqual(N))return Tp(e).get(S).next(k=>{if(!k)throw ht();Ct(k.userId===this.userId),s.push(Hm(this.serializer,k))});g.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hr(Wt);const i=[];return t.forEach(s=>{const l=sS(this.userId,s.path),h=IDBKeyRange.lowerBound(l),g=yv(e).X({range:h},(y,C,S)=>{const[N,k,B]=y,Z=kc(k);N===this.userId&&s.path.isEqual(Z)?r=r.add(B):S.done()});i.push(g)}),oe.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=sS(this.userId,r),l=IDBKeyRange.lowerBound(s);let h=new hr(Wt);return yv(e).X({range:l},(g,y,C)=>{const[S,N,k]=g,B=kc(N);S===this.userId&&r.isPrefixOf(B)?B.length===i&&(h=h.add(k)):C.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Tp(e).get(s).next(l=>{if(null===l)throw ht();Ct(l.userId===this.userId),r.push(Hm(this.serializer,l))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return aV(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return yv(e).X({range:r},(s,l,h)=>{if(s[0]===this.userId){const g=kc(s[1]);i.push(g)}else h.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return lV(e,this.userId,t)}xn(e){return uV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lV(n,e,t){const r=sS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return yv(n).X({range:s,Y:!0},(h,g,y)=>{const[C,S,N]=h;C===e&&S===i&&(l=!0),y.done()}).next(()=>l)}function Tp(n){return zi(n,"mutations")}function yv(n){return zi(n,"documentMutations")}function uV(n){return zi(n,"mutationQueues")}class qm{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new qm(0)}static Mn(){return new qm(-1)}}class bq{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new qm(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Tt.fromTimestamp(new br(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vv(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return vv(e).X((l,h)=>{const g=vI(h);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,s.push(this.removeTargetData(e,g)))}).next(()=>oe.waitFor(s)).next(()=>i)}forEachTarget(e,t){return vv(e).X((r,i)=>{const s=vI(i);t(s)})}$n(e){return cV(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}On(e,t){return cV(e).put("targetGlobalKey",t)}Fn(e,t){return vv(e).put(KU(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Lm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return vv(e).X({range:i,index:"queryTargetsIndex"},(l,h,g)=>{const y=vI(h);oI(t,y.target)&&(s=y,g.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Dp(e);return t.forEach(l=>{const h=Ms(l.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Dp(e);return oe.forEach(t,s=>{const l=Ms(s.path);return oe.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Dp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Dp(e);let s=en();return i.X({range:r,Y:!0},(l,h,g)=>{const y=kc(l[1]),C=new et(y);s=s.add(C)}).next(()=>s)}containsKey(e,t){const r=Ms(t.path),i=IDBKeyRange.bound([r],[C2(r)],!1,!0);let s=0;return Dp(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,h],g,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}le(e,t){return vv(e).get(t).next(r=>r?vI(r):null)}}function vv(n){return zi(n,"targets")}function cV(n){return zi(n,"targetGlobal")}function Dp(n){return zi(n,"targetDocuments")}function dV([n,e],[t,r]){const i=Wt(n,t);return 0===i?Wt(e,r):i}class Tq{constructor(e){this.Ln=e,this.buffer=new hr(dV),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();dV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){gp(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield pp(r)}yield t.Qn(3e5)}))}}class Dq{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Na.ct);const r=new Tq(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(oV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oV):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,s,l,h,g,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(s=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),VM()<=Ia.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${s} targets in `+(g-h)+`ms\n\tRemoved ${S} documents in `+(y-g)+`ms\nTotal Duration: ${y-C}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:S})))}}class Sq{constructor(e,t){this.db=e,this.garbageCollector=function fV(n,e){return new Dq(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return AS(e,r)}removeReference(e,t,r){return AS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return AS(e,t)}Xn(e,t){return function(r,i){let s=!1;return uV(r).Z(l=>lV(r,l,i).next(h=>(h&&(s=!0),oe.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(l,h)=>{if(h<=t){const g=this.Xn(e,l).next(y=>{if(!y)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Tt.min()),Dp(e).delete([0,Ms(l.path)])))});i.push(g)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return AS(e,t)}Yn(e,t){const r=Dp(e);let i,s=Na.ct;return r.X({index:"documentTargetsIndex"},([l,h],{path:g,sequenceNumber:y})=>{0===l?(s!==Na.ct&&t(new et(kc(i)),s),s=y,i=g):s=Na.ct}).next(()=>{s!==Na.ct&&t(new et(kc(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function AS(n,e){return Dp(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ms(e.path),sequenceNumber:r}));var r}class pV{constructor(){this.changes=new wh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Aq{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wm(e).put(r)}removeEntry(e,t,r){return Wm(e).delete(function(i,s){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],ES(s),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=fr.newInvalidDocument(t);return Wm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(bI(t))},(i,s)=>{r=this.ts(t,s)}).next(()=>r)}es(e,t){let r={size:0,document:fr.newInvalidDocument(t)};return Wm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(bI(t))},(i,s)=>{r={document:this.ts(t,s),size:DS(s)}}).next(()=>r)}getEntries(e,t){let r=Uo();return this.ns(e,t,(i,s)=>{const l=this.ts(i,s);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=Uo(),i=new ir(et.comparator);return this.ns(e,t,(s,l)=>{const h=this.ts(s,l);r=r.insert(s,h),i=i.insert(s,DS(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return oe.resolve();let i=new hr(yV);t.forEach(g=>i=i.add(g));const s=IDBKeyRange.bound(bI(i.first()),bI(i.last())),l=i.getIterator();let h=l.getNext();return Wm(e).X({index:"documentKeyIndex",range:s},(g,y,C)=>{const S=et.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&yV(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,y),h=l.hasNext()?l.getNext():null),h?C.G(bI(h)):C.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,l=[s.popLast().toArray(),s.lastSegment(),ES(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wm(e).j(IDBKeyRange.bound(l,h,!0)).next(g=>{let y=Uo();for(const C of g){const S=this.ts(et.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);S.isFoundDocument()&&(lI(t,S)||i.has(S.key))&&(y=y.insert(S.key,S))}return y})}getAllFromCollectionGroup(e,t,r,i){let s=Uo();const l=_V(t,r),h=_V(t,Ra.max());return Wm(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(g,y,C)=>{const S=this.ts(et.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(S.key,S),s.size===i&&C.done()}).next(()=>s)}newChangeBuffer(e){return new xq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mV(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Zn(e,t){return mV(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function pq(n,e){let t;if(e.document)t=BU(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=et.fromSegments(e.noDocument.path),i=$m(e.noDocument.readTime);t=fr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=et.fromSegments(e.unknownDocument.path),i=$m(e.unknownDocument.version);t=fr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new br(r[0],r[1]);return Tt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return fr.newInvalidDocument(e)}}function gV(n){return new Aq(n)}class xq extends pV{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new wh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new hr((s,l)=>Wt(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const h=this.us.get(s);if(t.push(this.os.removeEntry(e,s,h.readTime)),l.isValidDocument()){const g=WU(this.os.serializer,l);i=i.add(s.path.popLast());const y=DS(g);r+=y-h.size,t.push(this.os.addEntry(e,s,g))}else if(r-=h.size,this.trackRemovals){const g=WU(this.os.serializer,l.convertToNoDocument(Tt.min()));t.push(this.os.addEntry(e,s,g))}}),i.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((s,l)=>{this.us.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function mV(n){return zi(n,"remoteDocumentGlobal")}function Wm(n){return zi(n,"remoteDocumentsV14")}function bI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _V(n,e){const t=e.documentKey.path.toArray();return[n,ES(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Wt(t[s],r[s]),i)return i;return i=Wt(t.length,r.length),i||(i=Wt(t[t.length-2],r[r.length-2]),i||Wt(t[t.length-1],r[r.length-1]))}class Rq{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class vV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&hI(r.mutation,i,Lo.empty(),br.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,en()).next(()=>r))}getLocalViewOfDocuments(e,t,r=en()){const i=Fc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let l=uI();return s.forEach((h,g)=>{l=l.insert(h,g.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Fc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,en()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let s=Uo();const l=cI(),h=cI();return t.forEach((g,y)=>{const C=r.get(y.key);i.has(y.key)&&(void 0===C||C.mutation instanceof Eh)?s=s.insert(y.key,y):void 0!==C?(l.set(y.key,C.mutation.getFieldMask()),hI(C.mutation,y,C.mutation.getFieldMask(),br.now())):l.set(y.key,Lo.empty())}),this.recalculateAndSaveOverlays(e,s).next(g=>(g.forEach((y,C)=>l.set(y,C)),t.forEach((y,C)=>{var S;return h.set(y,new Rq(C,null!==(S=l.get(y))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=cI();let i=new ir((l,h)=>l-h),s=en();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(g=>{const y=t.get(g);if(null===y)return;let C=r.get(g)||Lo.empty();C=h.applyToLocalView(y,C),r.set(g,C);const S=(i.get(h.batchId)||en()).add(g);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),y=g.key,C=g.value,S=dU();C.forEach(N=>{if(!s.has(N)){const k=wU(t.get(N),r.get(N));null!==k&&S.set(N,k),s=s.add(N)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,S))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):XM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):oe.resolve(Fc());let h=-1,g=s;return l.next(y=>oe.forEach(y,(C,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),s.get(C)?oe.resolve():this.remoteDocumentCache.getEntry(e,C).next(N=>{g=g.insert(C,N)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,g,y,en())).next(C=>({batchId:h,changes:cU(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let i=uI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=uI();return this.indexManager.getCollectionParents(e,i).next(l=>oe.forEach(l,h=>{const g=(y=t,C=h.child(i),new vh(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(y=>{y.forEach((C,S)=>{s=s.insert(C,S)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((h,g)=>{const y=g.getKey();null===s.get(y)&&(s=s.insert(y,fr.newInvalidDocument(y)))});let l=uI();return s.forEach((h,g)=>{const y=i.get(h);void 0!==y&&hI(y.mutation,g,Lo.empty(),br.now()),lI(t,g)&&(l=l.insert(h,g))}),l})}}class Nq{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return oe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:ti(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:pP(r.bundledQuery),readTime:ti(r.readTime)}),oe.resolve();var r}}class Mq{constructor(){this.overlays=new ir(et.comparator),this.ls=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Fc();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Fc(),s=t.length+1,l=new et(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const g=h.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&g.largestBatchId>r&&i.set(g.getKey(),g)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ir((y,C)=>y-C);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=s.get(y.largestBatchId);null===C&&(C=Fc(),s=s.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const h=Fc(),g=s.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,C)=>h.set(y,C)),!(h.size()>=i)););return oe.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new oP(t,r));let s=this.ls.get(t);void 0===s&&(s=en(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class EP{constructor(){this.fs=new hr(qi.ds),this.ws=new hr(qi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new qi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new qi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new et(new wn([])),r=new qi(t,e),i=new qi(t,e+1),s=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),s.push(l.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new et(new wn([])),r=new qi(t,e),i=new qi(t,e+1);let s=en();return this.ws.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new qi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class qi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return et.comparator(e.key,t.key)||Wt(e.As,t.As)}static _s(e,t){return Wt(e.As,t.As)||et.comparator(e.key,t.key)}}class Pq{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new hr(qi.ds)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const l=new iP(s,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Rs=this.Rs.add(new qi(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qi(t,0),i=new qi(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],l=>{const h=this.Ps(l.As);s.push(h)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hr(Wt);return t.forEach(i=>{const s=new qi(i,0),l=new qi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,l],h=>{r=r.add(h.As)})}),oe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;et.isDocumentKey(s)||(s=s.child(""));const l=new qi(new et(s),0);let h=new hr(Wt);return this.Rs.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(g.As)),!0)},l),oe.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return oe.forEach(t.mutations,i=>{const s=new qi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new qi(t,0),i=this.Rs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kq{constructor(e){this.Ds=e,this.docs=new ir(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let r=Uo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fr.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Uo();const l=t.path,h=new et(l.child("")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:y,value:{document:C}}=g.getNext();if(!l.isPrefixOf(y.path))break;y.path.length>l.length+1||$M(T2(C),r)<=0||(i.has(C.key)||lI(t,C))&&(s=s.insert(C.key,C.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ht()}Cs(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Oq(this)}getSize(e){return oe.resolve(this.size)}}class Oq extends pV{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Fq{constructor(e){this.persistence=e,this.xs=new wh(t=>Lm(t),oI),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new EP,this.targetCount=0,this.Ms=qm.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),oe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new qm(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Fn(t),oe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(l),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.ks.containsKey(t))}}class IP{constructor(e,t){this.$s={},this.overlays={},this.Os=new Na(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Fq(this),this.indexManager=new Iq,this.remoteDocumentCache=new kq(r=>this.referenceDelegate.Ls(r)),this.serializer=new qU(t),this.qs=new Nq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mq,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new Pq(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new Lq(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return oe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Lq extends S2{constructor(e){super(),this.currentSequenceNumber=e}}class xS{constructor(e){this.persistence=e,this.Qs=new EP,this.js=null}static zs(e){return new xS(e)}get Ws(){if(this.js)return this.js;throw ht()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ws,r=>{const i=et.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,Tt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return oe.or([()=>oe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Uq{constructor(e){this.serializer=e}O(e,t,r,i){const s=new iS("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",N2,{unique:!0}),h.createObjectStore("documentMutations"),wV(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),wV(e)),l=l.next(()=>function(h){const g=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,g){return g.store("mutations").j().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",N2,{unique:!0});const C=g.store("mutations"),S=y.map(N=>C.put(N));return oe.waitFor(S)})}(e,s))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(s))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(s))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,s))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(s))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:Iz});g.createIndex("collectionPathOverlayIndex",Cz,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",bz,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:dz});g.createIndex("documentKeyIndex",hz),g.createIndex("collectionGroupIndex",fz)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,s))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:yz}).createIndex("sequenceNumberIndex",vz,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:wz}).createIndex("documentKeyIndex",Ez,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=DS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>oe.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(h=>oe.forEach(h,g=>{Ct(g.userId===s.userId);const y=Hm(this.serializer,g);return aV(e,s.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((l,h)=>{const g=new wn(l),y=[0,Ms(g)];s.push(t.get(y).next(C=>C?oe.resolve():t.put({targetId:0,path:Ms(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:_z});const r=t.store("collectionParents"),i=new wP,s=l=>{if(i.add(l)){const h=l.lastSegment(),g=l.popLast();return r.put({collectionId:h,parent:Ms(g)})}};return t.store("remoteDocuments").X({Y:!0},(l,h)=>{const g=new wn(l);return s(g.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,h,g],y)=>{const C=kc(h);return s(C.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const s=vI(i),l=KU(this.serializer,s);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((s,l)=>{const h=t.store("remoteDocumentsV14"),g=(y=l,y.document?new et(wn.fromString(y.document.name).popFirst(5)):y.noDocument?et.fromSegments(y.noDocument.path):y.unknownDocument?et.fromSegments(y.unknownDocument.path):ht()).path.toArray();var y;const C={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(C))}).next(()=>oe.waitFor(i))}si(e,t){const r=t.store("mutations"),i=gV(this.serializer),s=new IP(xS.zs,this.serializer.fe);return r.j().next(l=>{const h=new Map;return l.forEach(g=>{var y;let C=null!==(y=h.get(g.userId))&&void 0!==y?y:en();Hm(this.serializer,g).keys().forEach(S=>C=C.add(S)),h.set(g.userId,C)}),oe.forEach(h,(g,y)=>{const C=new Gi(y),S=IS.de(this.serializer,C),N=s.getIndexManager(C),k=SS.de(C,this.serializer,N,s.referenceDelegate);return new vV(i,k,S,N).recalculateAndSaveOverlaysForDocumentKeys(new zM(t,Na.ct),g).next()})})}}function wV(n){n.createObjectStore("targetDocuments",{keyPath:gz}).createIndex("documentTargetsIndex",mz,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pz,{unique:!0}),n.createObjectStore("targetGlobal")}const CP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class bP{constructor(e,t,r,i,s,l,h,g,y,C,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=s,this.window=l,this.document=h,this.ri=y,this.oi=C,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=N=>Promise.resolve(),!bP.D())throw new Re(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sq(this,i),this.di=t+"main",this.serializer=new qU(g),this.wi=new _u(this.di,this.ui,new Uq(this.serializer)),this.Bs=new bq(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gV(this.serializer),this.qs=new gq,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===C&&ei("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,CP);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Na(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>NS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(gp(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return TI(e).get("owner").next(t=>oe.resolve(this.Ri(t)))}Pi(e){return NS(e).delete(this.clientId)}bi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=zi(r,"clientMetadata");return i.j().next(s=>{const l=e.Si(s,18e5),h=s.filter(g=>-1===l.indexOf(g));return oe.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?oe.resolve(!0):TI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,CP);return!1}}return!(!this.networkEnabled||!this.inForeground)||NS(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new zM(t,Na.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>NS(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return SS.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cq(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return IS.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.ui)?Dz:14===l?O2:13===l?k2:12===l?Tz:11===l?P2:void ht();var l;let h;return this.wi.runTransaction(e,i,s,g=>(h=new zM(g,this.Os?this.Os.next():Na.ct),"readwrite-primary"===t?this.Ti(h).next(y=>!!y||this.Ei(h)).next(y=>{if(!y)throw ei(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Re(he.FAILED_PRECONDITION,D2);return r(h)}).next(y=>this.vi(h).next(()=>y)):this.Oi(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}Oi(e){return TI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(he.FAILED_PRECONDITION,CP)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return TI(e).put("owner",t)}static D(){return _u.D()}Ai(e){const t=TI(e);return t.get("owner").next(r=>this.Ri(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ei(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,O.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ei("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){ei("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function TI(n){return zi(n,"owner")}function NS(n){return zi(n,"clientMetadata")}function TP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class DP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=en(),i=en();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new DP(e,t.fromCache,r,i)}}class EV{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(sU(t))return oe.resolve(null);let r=uo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=gS(t,null,"F"),r=uo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const l=en(...s);return this.Ui.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.ji(t,h);return this.zi(t,y,l,g.readTime)?this.Ki(e,gS(t,null,"F")):this.Wi(e,y,t,g)}))})))}Gi(e,t,r,i){return sU(t)||i.isEqual(Tt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const l=this.ji(t,s);return this.zi(t,l,r,i)?this.Qi(e,t):(VM()<=Ia.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tP(t)),this.Wi(e,l,t,b2(i,-1)))})}ji(e,t){let r=new hr(lU(e));return t.forEach((i,s)=>{lI(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return VM()<=Ia.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",tP(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ra.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class Vq{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new ir(Wt),this.Yi=new wh(s=>Lm(s),oI),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vV(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function IV(n,e,t,r){return new Vq(n,e,t,r)}function CV(n,e){return SP.apply(this,arguments)}function SP(){return SP=(0,ve.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],h=[];let g=en();for(const y of i){l.push(y.batchId);for(const C of y.mutations)g=g.add(C.key)}for(const y of s){h.push(y.batchId);for(const C of y.mutations)g=g.add(C.key)}return t.localDocuments.getDocuments(r,g).next(y=>({er:y,removedBatchIds:l,addedBatchIds:h}))})})}),SP.apply(this,arguments)}function bV(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function TV(n,e,t){let r=en(),i=en();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let l=Uo();return t.forEach((h,g)=>{const y=s.get(h);g.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),g.isNoDocument()&&g.version.isEqual(Tt.min())?(e.removeEntry(h,g.readTime),l=l.insert(h,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),l=l.insert(h,g)):Be("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",g.version)}),{nr:l,sr:i}})}function $q(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wv(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Ih(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Ev(n,e,t){return AP.apply(this,arguments)}function AP(){return AP=(0,ve.Z)(function*(n,e,t){const r=tt(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!gp(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),AP.apply(this,arguments)}function MS(n,e,t){const r=tt(n);let i=Tt.min(),s=en();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,g,y){const C=tt(h),S=C.Yi.get(y);return void 0!==S?oe.resolve(C.Ji.get(S)):C.Bs.getTargetData(g,y)}(r,l,uo(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,h.targetId).next(g=>{s=g})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:Tt.min(),t?s:en())).next(h=>(AV(r,aU(e),h),{documents:h,ir:s})))}function DV(n,e){const t=tt(n),r=tt(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(l=>l?l.target:null))}function SV(n,e){const t=tt(n),r=t.Xi.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,b2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(AV(t,e,i),i))}function AV(n,e,t){let r=n.Xi.get(e)||Tt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}function xP(){return xP=(0,ve.Z)(function*(n,e,t,r){const i=tt(n);let s=en(),l=Uo();for(const y of t){const C=e.rr(y.metadata.name);y.document&&(s=s.add(C));const S=e.ur(y);S.setReadTime(e.cr(y.metadata.readTime)),l=l.insert(C,S)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),g=yield wv(i,(y=r,uo(dv(wn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>TV(y,h,l).next(C=>(h.apply(y),C)).next(C=>i.Bs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.Bs.addMatchingKeys(y,s,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,C.nr,C.sr)).next(()=>C.nr)))}),xP.apply(this,arguments)}function Gq(n,e){return RP.apply(this,arguments)}function RP(){return RP=(0,ve.Z)(function*(n,e,t=en()){const r=yield wv(n,uo(pP(e.bundledQuery))),i=tt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=ti(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(s,e);const h=r.withResumeToken(Di.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(s,h).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,t,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}),RP.apply(this,arguments)}function xV(n,e){return`firestore_clients_${n}_${e}`}function RV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function NP(n,e){return`firestore_targets_${n}_${e}`}class PS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let s,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(s=new Re(i.error.code,i.error.message))),l?new PS(e,t,i.state,s):(ei("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class DI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Re(r.error.code,r.error.message))),s?new DI(e,r.state,i):(ei("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=nP();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=x2(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new kS(e,s):(ei("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class MP{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new MP(t.clientId,t.onlineState):(ei("SharedClientState",`Failed to parse online state: ${e}`),null)}}class PP{constructor(){this.activeTargetIds=nP()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kP{constructor(e,t,r,i,s){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new ir(Wt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=xV(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new PP),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const s=e.getItem(xV(e.persistenceKey,i));if(s){const l=kS.ar(i,s);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(NP(this.persistenceKey,e));if(r){const i=DI.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(NP(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void ei("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(s){let l=Na.ct;if(null!=s)try{const h=JSON.parse(s);Ct("number"==typeof h),l=h}catch(h){ei("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Na.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new PS(this.currentUser,e,t,r),s=RV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const t=RV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=NP(this.persistenceKey,e),s=new DI(e,t,r);this.setItem(i,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return kS.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return PS.ar(new Gi(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return DI.ar(i,t)}br(e){return MP.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),l=[],h=[];return s.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{s.has(g)||h.push(g)}),this.syncEngine.Wr(l,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=nP();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class NV{constructor(){this.Hr=new PP,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new PP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zq{Yr(e){}shutdown(){}}class MV{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let OS=null;function OP(){return null===OS?OS=268435456+Math.round(2147483648*Math.random()):OS++,"0x"+OS.toString(16)}const qq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Wq{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ks="WebChannelConnection";class Kq extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const l=OP(),h=this.To(e,t);Be("RestConnection",`Sending RPC '${e}' ${l}:`,h,r);const g={};return this.Eo(g,i,s),this.Ao(e,h,g,r).then(y=>(Be("RestConnection",`Received RPC '${e}' ${l}: `,y),y),y=>{throw hl("RestConnection",`RPC '${e}' ${l} failed with error: `,y,"url: ",h,"request:",r),y})}vo(e,t,r,i,s,l){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+sv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${qq[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=OP();return new Promise((l,h)=>{const g=new z6;g.setWithCredentials(!0),g.listenOnce($6.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case UM.NO_ERROR:const C=g.getResponseJson();Be(ks,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(C)),l(C);break;case UM.TIMEOUT:Be(ks,`RPC '${e}' ${s} timed out`),h(new Re(he.DEADLINE_EXCEEDED,"Request time out"));break;case UM.HTTP_ERROR:const S=g.getStatus();if(Be(ks,`RPC '${e}' ${s} failed with status:`,S,"response text:",g.getResponseText()),S>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const k=N?.error;if(k&&k.status&&k.message){const B=function(Z){const J=Z.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(J)>=0?J:he.UNKNOWN}(k.status);h(new Re(B,k.message))}else h(new Re(he.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new Re(he.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{Be(ks,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(i);Be(ks,`RPC '${e}' ${s} sending request:`,i),g.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=OP(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=B6(),h=j6(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.xmlHttpFactory=new G6({})),this.Eo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const C=s.join("");Be(ks,`Creating RPC '${e}' stream ${i}: ${C}`,g);const S=l.createWebChannel(C,g);let N=!1,k=!1;const B=new Wq({ro:J=>{k?Be(ks,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(N||(Be(ks,`Opening RPC '${e}' stream ${i} transport.`),S.open(),N=!0),Be(ks,`RPC '${e}' stream ${i} sending:`,J),S.send(J))},oo:()=>S.close()}),Z=(J,Me,He)=>{J.listen(Me,je=>{try{He(je)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return Z(S,tS.EventType.OPEN,()=>{k||Be(ks,`RPC '${e}' stream ${i} transport opened.`)}),Z(S,tS.EventType.CLOSE,()=>{k||(k=!0,Be(ks,`RPC '${e}' stream ${i} transport closed`),B.wo())}),Z(S,tS.EventType.ERROR,J=>{k||(k=!0,hl(ks,`RPC '${e}' stream ${i} transport errored:`,J),B.wo(new Re(he.UNAVAILABLE,"The operation could not be completed")))}),Z(S,tS.EventType.MESSAGE,J=>{var Me;if(!k){const He=J.data[0];Ct(!!He);const Ye=He.error||(null===(Me=He[0])||void 0===Me?void 0:Me.error);if(Ye){Be(ks,`RPC '${e}' stream ${i} received error:`,Ye);const St=Ye.status;let kt=function(kr){const Os=pi[kr];if(void 0!==Os)return DU(Os)}(St),pn=Ye.message;void 0===kt&&(kt=he.INTERNAL,pn="Unknown error status: "+St+" with message "+Ye.message),k=!0,B.wo(new Re(kt,pn)),S.close()}else Be(ks,`RPC '${e}' stream ${i} received:`,He),B._o(He)}}),Z(h,H6.STAT_EVENT,J=>{J.stat===y2.PROXY?Be(ks,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===y2.NOPROXY&&Be(ks,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{B.fo()},0),B}}function PV(){return typeof window<"u"?window:null}function FS(){return typeof document<"u"?document:null}function SI(n){return new iq(n,!0)}class FP{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class kV{constructor(e,t,r,i,s,l,h,g){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new FP(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ve.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ve.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(ei(t.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Re(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ve.Z)(function*(){e.state=0,e.start()}))}tu(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zq extends kV{constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function aq(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:ht(),i=e.targetChange.targetIds||[],s=function(g,y){return g.useProto3Json?(Ct(void 0===y||"string"==typeof y),Di.fromBase64String(y||"")):(Ct(void 0===y||y instanceof Uint8Array),Di.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(g){const y=void 0===g.code?he.UNKNOWN:DU(g.code);return new Re(y,g.message||"")}(l);t=new NU(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Lc(n,r.document.name),s=ti(r.document.updateTime),l=r.document.createTime?ti(r.document.createTime):Tt.min(),h=new gs({mapValue:{fields:r.document.fields}}),g=fr.newFoundDocument(i,s,l,h);t=new wS(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=Lc(n,r.document),s=r.readTime?ti(r.readTime):Tt.min(),l=fr.newNoDocument(i,s);t=new wS([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Lc(n,r.document);t=new wS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,{count:i=0,unchangedNames:s}=r,l=new Jz(i,s);t=new RU(r.targetId,l)}}var g;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Tt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Tt.min():s.readTime?ti(s.readTime):Tt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=_I(this.serializer),t.addTarget=function(i,s){let l;const h=s.target;if(l=hS(h)?{documents:jU(i,h)}:{query:fP(i,h)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=OU(i,s.resumeToken);const g=uP(i,s.expectedCount);null!==g&&(l.expectedCount=g)}else if(s.snapshotVersion.compareTo(Tt.min())>0){l.readTime=mv(i,s.snapshotVersion.toTimestamp());const g=uP(i,s.expectedCount);null!==g&&(l.expectedCount=g)}return l}(this.serializer,e);const r=function uq(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=_I(this.serializer),t.removeTarget=e,this.Wo(t)}}class Yq extends kV{constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function lq(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let s=ti(r.updateTime?r.updateTime:i);return s.isEqual(Tt.min())&&(s=ti(i)),new Kz(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ti(e.commitTime);return this.listener.cu(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=_I(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yI(this.serializer,r))};this.Wo(t)}}class Qq extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(he.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.vo(e,t,r,s,l,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(he.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class Xq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ei(t),this.mu=!1):Be("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class eW{constructor(e,t,r,i,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(h=>{r.enqueueAndForget((0,ve.Z)(function*(){var g;Sp(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,ve.Z)(function*(y){const C=tt(y);C.vu.add(4),yield Iv(C),C.bu.set("Unknown"),C.vu.delete(4),yield AI(C)}),function(y){return g.apply(this,arguments)})(l))}))}),this.bu=new Xq(r,i)}}function AI(n){return UP.apply(this,arguments)}function UP(){return UP=(0,ve.Z)(function*(n){if(Sp(n))for(const e of n.Ru)yield e(!0)}),UP.apply(this,arguments)}function Iv(n){return VP.apply(this,arguments)}function VP(){return VP=(0,ve.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),VP.apply(this,arguments)}function LS(n,e){const t=tt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),$P(t)?jP(t):bv(t).Ko()&&BP(t,e))}function xI(n,e){const t=tt(n),r=bv(t);t.Au.delete(e),r.Ko()&&OV(t,e),0===t.Au.size&&(r.Ko()?r.jo():Sp(t)&&t.bu.set("Unknown"))}function BP(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bv(n).su(e)}function OV(n,e){n.Vu.qt(e),bv(n).iu(e)}function jP(n){n.Vu=new eq({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),bv(n).start(),n.bu.gu()}function $P(n){return Sp(n)&&!bv(n).Uo()&&n.Au.size>0}function Sp(n){return 0===tt(n).vu.size}function FV(n){n.Vu=void 0}function tW(n){return HP.apply(this,arguments)}function HP(){return HP=(0,ve.Z)(function*(n){n.Au.forEach((e,t)=>{BP(n,e)})}),HP.apply(this,arguments)}function nW(n,e){return GP.apply(this,arguments)}function GP(){return GP=(0,ve.Z)(function*(n,e){FV(n),$P(n)?(n.bu.Iu(e),jP(n)):n.bu.set("Unknown")}),GP.apply(this,arguments)}function rW(n,e,t){return zP.apply(this,arguments)}function zP(){return zP=(0,ve.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof NU&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,s){const l=s.cause;for(const h of s.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield US(n,r)}else if(e instanceof wS?n.Vu.Ht(e):e instanceof RU?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Tt.min()))try{const r=yield bV(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const l=i.Vu.ce(s);return l.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.Au.get(g);y&&i.Au.set(g,y.withResumeToken(h.resumeToken,s))}}),l.targetMismatches.forEach((h,g)=>{const y=i.Au.get(h);if(!y)return;i.Au.set(h,y.withResumeToken(Di.EMPTY_BYTE_STRING,y.snapshotVersion)),OV(i,h);const C=new Ih(y.target,h,g,y.sequenceNumber);BP(i,C)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield US(n,r)}var r}),zP.apply(this,arguments)}function US(n,e,t){return qP.apply(this,arguments)}function qP(){return qP=(0,ve.Z)(function*(n,e,t){if(!gp(e))throw e;n.vu.add(1),yield Iv(n),n.bu.set("Offline"),t||(t=()=>bV(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield AI(n)}))}),qP.apply(this,arguments)}function LV(n,e){return e().catch(t=>US(n,t,e))}function Cv(n){return WP.apply(this,arguments)}function WP(){return WP=(0,ve.Z)(function*(n){const e=tt(n),t=Ap(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;iW(e);)try{const i=yield $q(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,sW(e,i)}catch(i){yield US(e,i)}UV(e)&&VV(e)}),WP.apply(this,arguments)}function iW(n){return Sp(n)&&n.Eu.length<10}function sW(n,e){n.Eu.push(e);const t=Ap(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function UV(n){return Sp(n)&&!Ap(n).Uo()&&n.Eu.length>0}function VV(n){Ap(n).start()}function oW(n){return KP.apply(this,arguments)}function KP(){return KP=(0,ve.Z)(function*(n){Ap(n).hu()}),KP.apply(this,arguments)}function aW(n){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,ve.Z)(function*(n){const e=Ap(n);for(const t of n.Eu)e.uu(t.mutations)}),ZP.apply(this,arguments)}function lW(n,e,t){return YP.apply(this,arguments)}function YP(){return YP=(0,ve.Z)(function*(n,e,t){const r=n.Eu.shift(),i=sP.from(r,e,t);yield LV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Cv(n)}),YP.apply(this,arguments)}function uW(n,e){return QP.apply(this,arguments)}function QP(){return QP=(0,ve.Z)(function*(n,e){var t;e&&Ap(n).ou&&(yield(t=(0,ve.Z)(function*(r,i){if(TU(s=i.code)&&s!==he.ABORTED){const l=r.Eu.shift();Ap(r).Qo(),yield LV(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Cv(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),UV(n)&&VV(n)}),QP.apply(this,arguments)}function BV(n,e){return JP.apply(this,arguments)}function JP(){return JP=(0,ve.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Sp(t);t.vu.add(3),yield Iv(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield AI(t)}),JP.apply(this,arguments)}function XP(n,e){return ek.apply(this,arguments)}function ek(){return ek=(0,ve.Z)(function*(n,e){const t=tt(n);e?(t.vu.delete(2),yield AI(t)):e||(t.vu.add(2),yield Iv(t),t.bu.set("Unknown"))}),ek.apply(this,arguments)}function bv(n){return n.Su||(n.Su=function(e,t,r){const i=tt(e);return i.fu(),new Zq(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:tW.bind(null,n),ao:nW.bind(null,n),nu:rW.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Su.Qo(),$P(n)?jP(n):n.bu.set("Unknown")):(yield n.Su.stop(),FV(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Ap(n){return n.Du||(n.Du=function(e,t,r){const i=tt(e);return i.fu(),new Yq(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:oW.bind(null,n),ao:uW.bind(null,n),au:aW.bind(null,n),cu:lW.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Du.Qo(),yield Cv(n)):(yield n.Du.stop(),n.Eu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class tk{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,h=new tk(e,t,l,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tv(n,e){if(ei("AsyncQueue",`${e}: ${n}`),gp(n))return new Re(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Dv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=uI(),this.sortedSet=new ir(this.comparator)}static emptySet(e){return new Dv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Dv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jV{constructor(){this.Cu=new ir(et.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ht():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Sv{constructor(e,t,r,i,s,l,h,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new Sv(e,t,Dv.emptySet(t),l,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&aI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class cW{constructor(){this.Nu=void 0,this.listeners=[]}}class dW{constructor(){this.queries=new wh(e=>oU(e),aI),this.onlineState="Unknown",this.ku=new Set}}function nk(n,e){return rk.apply(this,arguments)}function rk(){return rk=(0,ve.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new cW),i)try{s.Nu=yield t.onListen(r)}catch(l){const h=Tv(l,`Initialization of query '${tP(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&ok(t)}),rk.apply(this,arguments)}function ik(n,e){return sk.apply(this,arguments)}function sk(){return sk=(0,ve.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),sk.apply(this,arguments)}function hW(n,e){const t=tt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.$u(i)&&(r=!0);l.Nu=i}}r&&ok(t)}function fW(n,e,t){const r=tt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function ok(n){n.ku.forEach(e=>{e.next()})}class ak{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Sv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Sv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class pW{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class $V{constructor(e){this.serializer=e}rr(e){return Lc(this.serializer,e)}ur(e){return e.metadata.exists?BU(this.serializer,e.document,!1):fr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return ti(e)}}class gW{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HV(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=wn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new $V(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||en()).add(s);t.set(l,h)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function Hq(n,e,t,r){return xP.apply(this,arguments)}(e.localStore,new $V(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield Gq(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function HV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class GV{constructor(e){this.key=e}}class zV{constructor(e){this.key=e}}class qV{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=en(),this.mutatedKeys=en(),this.tc=lU(e),this.ec=new Dv(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new jV,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,S)=>{const N=i.get(C),k=lI(this.query,S)?S:null,B=!!N&&this.mutatedKeys.has(N.key),Z=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let J=!1;N&&k?N.data.isEqual(k.data)?B!==Z&&(r.track({type:3,doc:k}),J=!0):this.rc(N,k)||(r.track({type:2,doc:k}),J=!0,(g&&this.tc(k,g)>0||y&&this.tc(k,y)<0)&&(h=!0)):!N&&k?(r.track({type:0,doc:k}),J=!0):N&&!k&&(r.track({type:1,doc:N}),J=!0,(g||y)&&(h=!0)),J&&(k?(l=l.add(k),s=Z?s.add(C):s.delete(C)):(l=l.delete(C),s=s.delete(C)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const C="F"===this.query.limitType?l.last():l.first();l=l.delete(C.key),s=s.delete(C.key),r.track({type:1,doc:C})}return{ec:l,ic:r,zi:h,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((y,C)=>function(S,N){const k=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return k(S)-k(N)}(y.type,C.type)||this.tc(y.doc,C.doc)),this.oc(r);const l=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,g=h!==this.Xu;return this.Xu=h,0!==s.length||g?{snapshot:new Sv(this.query,e.ec,i,s,e.mutatedKeys,0===h,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new jV,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=en(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new zV(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new GV(r))}),t}hc(e){this.Yu=e.ir,this.Zu=en();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Sv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class mW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _W{constructor(e){this.key=e,this.fc=!1}}class yW{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new wh(h=>oU(h),aI),this._c=new Map,this.mc=new Set,this.gc=new ir(et.comparator),this.yc=new Map,this.Ic=new EP,this.Tc={},this.Ec=new Map,this.Ac=qm.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function vW(n,e){return lk.apply(this,arguments)}function lk(){return lk=(0,ve.Z)(function*(n,e){const t=Nk(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const l=yield wv(t.localStore,uo(e)),h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield uk(t,e,r,"current"===h,l.resumeToken),t.isPrimaryClient&&LS(t.remoteStore,l)}return i}),lk.apply(this,arguments)}function uk(n,e,t,r,i){return ck.apply(this,arguments)}function ck(){return ck=(0,ve.Z)(function*(n,e,t,r,i){n.Rc=(S,N,k)=>{return(B=(0,ve.Z)(function*(Z,J,Me,He){let je=J.view.sc(Me);je.zi&&(je=yield MS(Z.localStore,J.query,!1).then(({documents:kt})=>J.view.sc(kt,je)));const Ye=He&&He.targetChanges.get(J.targetId),St=J.view.applyChanges(je,Z.isPrimaryClient,Ye);return wk(Z,J.targetId,St.cc),St.snapshot}),function(Z,J,Me,He){return B.apply(this,arguments)})(n,S,N,k);var B};const s=yield MS(n.localStore,e,!0),l=new qV(e,s.ir),h=l.sc(s.documents),g=gI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=l.applyChanges(h,n.isPrimaryClient,g);wk(n,t,y.cc);const C=new mW(e,t,l);return n.wc.set(e,C),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),ck.apply(this,arguments)}function wW(n,e){return dk.apply(this,arguments)}function dk(){return dk=(0,ve.Z)(function*(n,e){const t=tt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!aI(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ev(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),xI(t.remoteStore,r.targetId),Av(t,r.targetId)}).catch(pp))):(Av(t,r.targetId),yield Ev(t.localStore,r.targetId,!0))}),dk.apply(this,arguments)}function hk(){return hk=(0,ve.Z)(function*(n,e,t){const r=Mk(n);try{const i=yield function(s,l){const h=tt(s),g=br.now(),y=l.reduce((N,k)=>N.add(k.key),en());let C,S;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let k=Uo(),B=en();return h.Zi.getEntries(N,y).next(Z=>{k=Z,k.forEach((J,Me)=>{Me.isValidDocument()||(B=B.add(J))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,k)).next(Z=>{C=Z;const J=[];for(const Me of l){const He=Yz(Me,C.get(Me.key).overlayedDocument);null!=He&&J.push(new Eh(Me.key,He,q2(He.value.mapValue),Tr.exists(!0)))}return h.mutationQueue.addMutationBatch(N,g,J,l)}).next(Z=>{S=Z;const J=Z.applyToLocalDocumentSet(C,B);return h.documentOverlayCache.saveOverlays(N,Z.batchId,J)})}).then(()=>({batchId:S.batchId,changes:cU(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,h){let g=s.Tc[s.currentUser.toKey()];g||(g=new ir(Wt)),g=g.insert(l,h),s.Tc[s.currentUser.toKey()]=g}(r,i.batchId,t),yield Ch(r,i.changes),yield Cv(r.remoteStore)}catch(i){const s=Tv(i,"Failed to persist write");t.reject(s)}}),hk.apply(this,arguments)}function WV(n,e){return fk.apply(this,arguments)}function fk(){return fk=(0,ve.Z)(function*(n,e){const t=tt(n);try{const r=yield function jq(n,e){const t=tt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((C,S)=>{const N=i.get(S);if(!N)return;h.push(t.Bs.removeMatchingKeys(s,C.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(s,C.addedDocuments,S)));let k=N.withSequenceNumber(s.currentSequenceNumber);var B,Z,J;null!==e.targetMismatches.get(S)?k=k.withResumeToken(Di.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):C.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(C.resumeToken,r)),i=i.insert(S,k),Z=k,J=C,(0===(B=N).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(s,k))});let g=Uo(),y=en();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,C))}),h.push(TV(s,l,e.documentUpdates).next(C=>{g=C.nr,y=C.sr})),!r.isEqual(Tt.min())){const C=t.Bs.getLastRemoteSnapshotVersion(s).next(S=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(C)}return oe.waitFor(h).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,g,y)).next(()=>g)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.yc.get(s);l&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?Ct(l.fc):i.removedDocuments.size>0&&(Ct(l.fc),l.fc=!1))}),yield Ch(t,r,e)}catch(r){yield pp(r)}}),fk.apply(this,arguments)}function KV(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,l)=>{const h=l.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(s,l){const h=tt(s);h.onlineState=l;let g=!1;h.queries.forEach((y,C)=>{for(const S of C.listeners)S.Mu(l)&&(g=!0)}),g&&ok(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function IW(n,e,t){return pk.apply(this,arguments)}function pk(){return pk=(0,ve.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let l=new ir(et.comparator);l=l.insert(s,fr.newNoDocument(s,Tt.min()));const h=en().add(s),g=new pI(Tt.min(),new Map,new ir(Wt),l,h);yield WV(r,g),r.gc=r.gc.remove(s),r.yc.delete(e),Ek(r)}else yield Ev(r.localStore,e,!1).then(()=>Av(r,e,t)).catch(pp)}),pk.apply(this,arguments)}function CW(n,e){return gk.apply(this,arguments)}function gk(){return gk=(0,ve.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const i=yield function Bq(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,h,g,y){const C=g.batch,S=C.keys();let N=oe.resolve();return S.forEach(k=>{N=N.next(()=>y.getEntry(h,k)).next(B=>{const Z=g.docVersions.get(k);Ct(null!==Z),B.version.compareTo(Z)<0&&(C.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),y.addEntry(B)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(h,C))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=en();for(let g=0;g<l.mutationResults.length;++g)l.mutationResults[g].transformResults.length>0&&(h=h.add(l.batch.mutations[g].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);vk(t,r,null),yk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ch(t,i)}catch(i){yield pp(i)}}),gk.apply(this,arguments)}function bW(n,e,t){return mk.apply(this,arguments)}function mk(){return mk=(0,ve.Z)(function*(n,e,t){const r=tt(n);try{const i=yield function(s,l){const h=tt(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return h.mutationQueue.lookupMutationBatch(g,l).next(C=>(Ct(null!==C),y=C.keys(),h.mutationQueue.removeMutationBatch(g,C))).next(()=>h.mutationQueue.performConsistencyCheck(g)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(g,y,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>h.localDocuments.getDocuments(g,y))})}(r.localStore,e);vk(r,e,t),yk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ch(r,i)}catch(i){yield pp(i)}}),mk.apply(this,arguments)}function _k(){return _k=(0,ve.Z)(function*(n,e){const t=tt(n);Sp(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const l=tt(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Tv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),_k.apply(this,arguments)}function yk(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function vk(n,e,t){const r=tt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Av(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||ZV(n,r)})}function ZV(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(xI(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Ek(n))}function wk(n,e,t){for(const r of t)r instanceof GV?(n.Ic.addReference(r.key,e),DW(n,r)):r instanceof zV?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||ZV(n,r.key)):ht()}function DW(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.mc.add(r),Ek(n))}function Ek(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new et(wn.fromString(e)),r=n.Ac.next();n.yc.set(r,new _W(t)),n.gc=n.gc.insert(t,r),LS(n.remoteStore,new Ih(uo(dv(t.path)),r,"TargetPurposeLimboResolution",Na.ct))}}function Ch(n,e,t){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,ve.Z)(function*(n,e,t){const r=tt(n),i=[],s=[],l=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,g)=>{l.push(r.Rc(g,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const C=DP.Li(g.targetId,y);s.push(C)}}))}),yield Promise.all(l),r.dc.nu(i),yield(h=(0,ve.Z)(function*(g,y){const C=tt(g);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>oe.forEach(y,N=>oe.forEach(N.Fi,k=>C.persistence.referenceDelegate.addReference(S,N.targetId,k)).next(()=>oe.forEach(N.Bi,k=>C.persistence.referenceDelegate.removeReference(S,N.targetId,k)))))}catch(S){if(!gp(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of y){const N=S.targetId;if(!S.fromCache){const k=C.Ji.get(N),Z=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);C.Ji=C.Ji.insert(N,Z)}}}),function(g,y){return h.apply(this,arguments)})(r.localStore,s))}),Ik.apply(this,arguments)}function SW(n,e){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,ve.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield CV(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(h=>{h.reject(new Re(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ch(t,r.er)}var i}),Ck.apply(this,arguments)}function AW(n,e){const t=tt(n),r=t.yc.get(e);if(r&&r.fc)return en().add(r.key);{let i=en();const s=t._c.get(e);if(!s)return i;for(const l of s){const h=t.wc.get(l);i=i.unionWith(h.view.nc)}return i}}function xW(n,e){return bk.apply(this,arguments)}function bk(){return bk=(0,ve.Z)(function*(n,e){const t=tt(n),r=yield MS(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&wk(t,e.targetId,i.cc),i}),bk.apply(this,arguments)}function RW(n,e){return Tk.apply(this,arguments)}function Tk(){return Tk=(0,ve.Z)(function*(n,e){const t=tt(n);return SV(t.localStore,e).then(r=>Ch(t,r))}),Tk.apply(this,arguments)}function NW(n,e,t,r){return Dk.apply(this,arguments)}function Dk(){return Dk=(0,ve.Z)(function*(n,e,t,r){const i=tt(n),s=yield function(l,h){const g=tt(l),y=tt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.Sn(C,h).next(S=>S?g.localDocuments.getDocuments(C,S):oe.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield Cv(i.remoteStore):"acknowledged"===t||"rejected"===t?(vk(i,e,r||null),yk(i,e),h=e,tt(tt(i.localStore).mutationQueue).Cn(h)):ht(),yield Ch(i,s)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),Dk.apply(this,arguments)}function Sk(){return Sk=(0,ve.Z)(function*(n,e){const t=tt(n);if(Nk(t),Mk(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield YV(t,r.toArray());t.vc=!0,yield XP(t.remoteStore,!0);for(const s of i)LS(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Av(t,l),Ev(t.localStore,l,!0))),xI(t.remoteStore,l)}),yield i,yield YV(t,r),function(s){const l=tt(s);l.yc.forEach((h,g)=>{xI(l.remoteStore,g)}),l.Ic.Ts(),l.yc=new Map,l.gc=new ir(et.comparator)}(t),t.vc=!1,yield XP(t.remoteStore,!1)}}),Sk.apply(this,arguments)}function YV(n,e,t){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,ve.Z)(function*(n,e,t){const r=tt(n),i=[],s=[];for(const l of e){let h;const g=r._c.get(l);if(g&&0!==g.length){h=yield wv(r.localStore,uo(g[0]));for(const y of g){const C=r.wc.get(y),S=yield xW(r,C);S.snapshot&&s.push(S.snapshot)}}else{const y=yield DV(r.localStore,l);h=yield wv(r.localStore,y),yield uk(r,QV(y),l,!1,h.resumeToken)}i.push(h)}return r.dc.nu(s),i}),Ak.apply(this,arguments)}function QV(n){return iU(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function PW(n){const e=tt(n);return tt(tt(e.localStore).persistence).$i()}function kW(n,e,t,r){return xk.apply(this,arguments)}function xk(){return xk=(0,ve.Z)(function*(n,e,t,r){const i=tt(n);if(i.vc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield SV(i.localStore,aU(s[0])),h=pI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Di.EMPTY_BYTE_STRING);yield Ch(i,l,h);break}case"rejected":yield Ev(i.localStore,e,!0),Av(i,e,r);break;default:ht()}}),xk.apply(this,arguments)}function OW(n,e,t){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,ve.Z)(function*(n,e,t){const r=Nk(n);if(r.vc){for(const i of e){if(r._c.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const s=yield DV(r.localStore,i),l=yield wv(r.localStore,s);yield uk(r,QV(s),l.targetId,!1,l.resumeToken),LS(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield Ev(r.localStore,i,!1).then(()=>{xI(r.remoteStore,i),Av(r,i)}).catch(pp))}}),Rk.apply(this,arguments)}function Nk(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IW.bind(null,e),e.dc.nu=hW.bind(null,e.eventManager),e.dc.Pc=fW.bind(null,e.eventManager),e}function Mk(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bW.bind(null,e),e}class RI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.serializer=SI(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return IV(this.persistence,new EV,e.initialUser,this.serializer)}createPersistence(e){return new IP(xS.zs,this.serializer)}createSharedClientState(e){return new NV}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Pk extends RI{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Mk(r.Vc.syncEngine),yield Cv(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return IV(this.persistence,new EV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new hV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new lz(t,this.persistence);return new az(e.asyncQueue,r)}createPersistence(e){const t=TP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ps.withCacheSize(this.cacheSizeBytes):Ps.DEFAULT;return new bP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,PV(),FS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new NV}}class JV extends Pk{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof kP&&(r.sharedClientState.syncEngine={jr:NW.bind(null,i),zr:kW.bind(null,i),Wr:OW.bind(null,i),$i:PW.bind(null,i),Qr:RW.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,ve.Z)(function*(l){yield function MW(n,e){return Sk.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=PV();if(!kP.D(t))throw new Re(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=TP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class xv{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>KV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=SW.bind(null,r.syncEngine),yield XP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new dW}createDatastore(e){const t=SI(e.databaseInfo.databaseId),r=new Kq(e.databaseInfo);return new Qq(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>KV(this.syncEngine,h,0),l=MV.D()?new MV:new zq,new eW(t,r,i,s,l);var t,r,i,s,l}createSyncEngine(e,t){return function(r,i,s,l,h,g,y){const C=new yW(r,i,s,l,h,g);return y&&(C.vc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=tt(t);Be("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Iv(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function XV(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class VS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ei("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class UW{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Ti,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const s=yield e.$c(i);return new pW(JSON.parse(s),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ve.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class VW{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(s,l){const h=tt(s),g=_I(h.serializer)+"/documents",y={documents:l.map(k=>mI(h.serializer,k))},C=yield h.vo("BatchGetDocuments",g,y,l.length),S=new Map;C.forEach(k=>{const B=function oq(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=Lc(t,r.found.name),s=ti(r.found.updateTime),l=r.found.createTime?ti(r.found.createTime):Tt.min(),h=new gs({mapValue:{fields:r.found.fields}});return fr.newFoundDocument(i,s,l,h)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=Lc(t,r.missing),s=ti(r.readTime);return fr.newNoDocument(i,s)}(n,e):ht()}(h.serializer,k);S.set(B.key.toString(),B)});const N=[];return l.forEach(k=>{const B=S.get(k.toString());Ct(!!B),N.push(B)}),N}),function(s,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=et.fromPath(i);e.mutations.push(new rP(s,e.precondition(s)))}),yield(r=(0,ve.Z)(function*(i,s){const l=tt(i),h=_I(l.serializer)+"/documents",g={writes:s.map(y=>yI(l.serializer,y))};yield l.Io("Commit",h,g)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tt.min())?Tr.exists(!1):Tr.updateTime(t):Tr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Re(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tr.updateTime(t)}return Tr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class BW{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new FP(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ve.Z)(function*(){const t=new VW(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Uc(s)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!eI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!TU(t)}return!1}}class jW{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Gi.UNAUTHENTICATED,this.clientId=I2.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ve.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Tv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function BS(n,e){return kk.apply(this,arguments)}function kk(){return kk=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(s){r.isEqual(s)||(yield CV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),kk.apply(this,arguments)}function Ok(n,e){return Fk.apply(this,arguments)}function Fk(){return Fk=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Lk(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>BV(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>BV(e.remoteStore,s)),n._onlineComponents=e}),Fk.apply(this,arguments)}function eB(n){return"FirebaseError"===n.name?n.code===he.FAILED_PRECONDITION||n.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Lk(n){return Uk.apply(this,arguments)}function Uk(){return Uk=(0,ve.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield BS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!eB(t))throw t;hl("Error using user provided cache. Falling back to memory cache: "+t),yield BS(n,new RI)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),yield BS(n,new RI);return n._offlineComponents}),Uk.apply(this,arguments)}function jS(n){return Vk.apply(this,arguments)}function Vk(){return Vk=(0,ve.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ok(n,n._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),yield Ok(n,new xv))),n._onlineComponents}),Vk.apply(this,arguments)}function tB(n){return Lk(n).then(e=>e.persistence)}function $S(n){return Lk(n).then(e=>e.localStore)}function nB(n){return jS(n).then(e=>e.remoteStore)}function Bk(n){return jS(n).then(e=>e.syncEngine)}function Rv(n){return jk.apply(this,arguments)}function jk(){return jk=(0,ve.Z)(function*(n){const e=yield jS(n),t=e.eventManager;return t.onListen=vW.bind(null,e.syncEngine),t.onUnlisten=wW.bind(null,e.syncEngine),t}),jk.apply(this,arguments)}function iB(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,s,l,h,g){const y=new VS({next:S=>{s.enqueueAndForget(()=>ik(i,C));const N=S.docs.has(l);!N&&S.fromCache?g.reject(new Re(he.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?g.reject(new Re(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),C=new ak(dv(l.path),y,{includeMetadataChanges:!0,Ku:!0});return nk(i,C)}(yield Rv(n),n.asyncQueue,e,t,r)})),r.promise}function sB(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,s,l,h,g){const y=new VS({next:S=>{s.enqueueAndForget(()=>ik(i,C)),S.fromCache&&"server"===h.source?g.reject(new Re(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),C=new ak(l,y,{includeMetadataChanges:!0,Ku:!0});return nk(i,C)}(yield Rv(n),n.asyncQueue,e,t,r)})),r.promise}function oB(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const aB=new Map;function $k(n,e,t){if(!t)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lB(n,e,t,r){if(!0===e&&!0===r)throw new Re(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uB(n){if(!et.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cB(n){if(et.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function HS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=HS(n);throw new Re(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dB(n,e){if(e<=0)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class hB{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=oB(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class NI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Z6;switch(t.type){case"firstParty":return new X6(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aB.get(e);t&&(Be("ComponentProvider","Removing Datastore"),aB.delete(e),t.terminate())}(this),Promise.resolve()}}class pr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pr(this.firestore,e,this._key)}}class ms{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ms(this.firestore,e,this._query)}}class Uc extends ms{constructor(e,t,r){super(e,t,dv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pr(this.firestore,null,new et(e))}withConverter(e){return new Uc(this.firestore,e,this._path)}}function pB(n,e,...t){if(n=(0,O.m9)(n),$k("collection","path",e),n instanceof NI){const r=wn.fromString(e,...t);return cB(r),new Uc(n,null,r)}{if(!(n instanceof pr||n instanceof Uc))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return cB(r),new Uc(n.firestore,null,r)}}function GS(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=I2.A()),$k("doc","path",e),n instanceof NI){const r=wn.fromString(e,...t);return uB(r),new pr(n,null,new et(r))}{if(!(n instanceof pr||n instanceof Uc))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return uB(r),new pr(n.firestore,n instanceof Uc?n.converter:null,new et(r))}}function gB(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof pr||n instanceof Uc)&&(e instanceof pr||e instanceof Uc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Hk(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof ms&&e instanceof ms&&n.firestore===e.firestore&&aI(n._query,e._query)&&n.converter===e.converter}class QW{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new FP(this,"async_queue_retry"),this.Xc=()=>{const t=FS();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=FS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=FS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ti;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!gp(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,ei("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=tk.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&ht()}verifyOperationInProgress(){}sa(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Gk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class JW{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gr extends NI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new QW,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||mB(this),this._firestoreClient.terminate()}}function ni(n){return n._firestoreClient||mB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mB(n){var e,t,r;const i=n._freezeSettings(),s=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new xz(n._databaseId,h,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,oB(y.experimentalLongPollingOptions),y.useFetchStreams));var h,y;n._firestoreClient=new jW(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function _B(n,e,t){const r=new Ti;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield BS(n,t),yield Ok(n,e),r.resolve()}catch(i){const s=i;if(!eB(s))throw s;hl("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function yB(n){if(n._initialized||n._terminated)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vc(Di.fromBase64String(e))}catch(t){throw new Re(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vc(Di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Km{constructor(e){this._methodName=e}}class zS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const u9=/^__.*__$/;class c9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Eh(e,this.data,this.fieldMask,t,this.fieldTransforms):new pv(e,this.data,t,this.fieldTransforms)}}class vB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Eh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class qS{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new qS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return ZS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(wB(this.ca)&&u9.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class d9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||SI(e)}ya(e,t,r,i=!1){return new qS({ca:e,methodName:t,ga:r,path:Hr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zm(n){const e=n._freezeSettings(),t=SI(n._databaseId);return new d9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function WS(n,e,t,r,i,s={}){const l=n.ya(s.merge||s.mergeFields?2:0,e,t,i);Kk("Data must be an object, but it was:",l,r);const h=CB(r,l);let g,y;if(s.merge)g=new Lo(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const C=[];for(const S of s.mergeFields){const N=kI(e,S,t);if(!l.contains(N))throw new Re(he.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);TB(C,N)||C.push(N)}g=new Lo(C),y=l.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,y=l.fieldTransforms;return new c9(new gs(h),g,y)}class PI extends Km{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof PI}}function EB(n,e,t){return new qS({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zk extends Km{_toFieldTransform(e){return new dI(e.path,new hv)}isEqual(e){return e instanceof zk}}class h9 extends Km{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=EB(this,e,!0),r=this.pa.map(s=>Ym(s,t)),i=new Vm(r);return new dI(e.path,i)}isEqual(e){return this===e}}class f9 extends Km{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=EB(this,e,!0),r=this.pa.map(s=>Ym(s,t)),i=new Bm(r);return new dI(e.path,i)}isEqual(e){return this===e}}class p9 extends Km{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new fv(e.serializer,pU(e.serializer,this.Ia));return new dI(e.path,t)}isEqual(e){return this===e}}function qk(n,e,t,r){const i=n.ya(1,e,t);Kk("Data must be an object, but it was:",i,r);const s=[],l=gs.empty();mp(r,(g,y)=>{const C=KS(e,g,t);y=(0,O.m9)(y);const S=i.da(C);if(y instanceof PI)s.push(C);else{const N=Ym(y,S);null!=N&&(s.push(C),l.set(C,N))}});const h=new Lo(s);return new vB(l,h,i.fieldTransforms)}function Wk(n,e,t,r,i,s){const l=n.ya(1,e,t),h=[kI(e,r,t)],g=[i];if(s.length%2!=0)throw new Re(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<s.length;N+=2)h.push(kI(e,s[N])),g.push(s[N+1]);const y=[],C=gs.empty();for(let N=h.length-1;N>=0;--N)if(!TB(y,h[N])){const k=h[N];let B=g[N];B=(0,O.m9)(B);const Z=l.da(k);if(B instanceof PI)y.push(k);else{const J=Ym(B,Z);null!=J&&(y.push(k),C.set(k,J))}}const S=new Lo(y);return new vB(C,S,l.fieldTransforms)}function IB(n,e,t,r=!1){return Ym(t,n.ya(r?4:3,e))}function Ym(n,e){if(bB(n=(0,O.m9)(n)))return Kk("Unsupported field value:",e,n),CB(n,e);if(n instanceof Km)return function(t,r){if(!wB(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const l of t){let h=Ym(l,r.wa(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return pU(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=br.fromDate(t);return{timestampValue:mv(r.serializer,i)}}if(t instanceof br){const i=new br(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:mv(r.serializer,i)}}if(t instanceof zS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vc)return{bytesValue:OU(r.serializer,t._byteString)};if(t instanceof pr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${HS(t)}`)}(n,e)}function CB(n,e){const t={};return L2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mp(n,(r,i)=>{const s=Ym(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function bB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof br||n instanceof zS||n instanceof Vc||n instanceof pr||n instanceof Km)}function Kk(n,e,t){if(!bB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=HS(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function kI(n,e,t){if((e=(0,O.m9)(e))instanceof bh)return e._internalPath;if("string"==typeof e)return KS(n,e);throw ZS("Field path arguments must be of type string or ",n,!1,void 0,t)}const g9=new RegExp("[~\\*/\\[\\]]");function KS(n,e,t){if(e.search(g9)>=0)throw ZS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bh(...e.split("."))._internalPath}catch{throw ZS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ZS(n,e,t,r,i){const s=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(s||l)&&(g+=" (found",s&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new Re(he.INVALID_ARGUMENT,h+n+g)}function TB(n,e){return n.some(t=>t.isEqual(e))}class OI{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new m9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(YS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class m9 extends OI{data(){return super.data()}}function YS(n,e){return"string"==typeof e?KS(n,e):e instanceof bh?e._internalPath:e._delegate._internalPath}function DB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zk{}class FI extends Zk{}function xp(n,e,...t){let r=[];e instanceof Zk&&r.push(e),r=r.concat(t),function(i){const s=i.filter(h=>h instanceof Nv).length,l=i.filter(h=>h instanceof LI).length;if(s>1||s>0&&l>0)throw new Re(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class LI extends FI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new LI(e,t,r)}_apply(e){const t=this._parse(e);return RB(e._query,t),new ms(e.firestore,e.converter,eP(e._query,t))}_parse(e){const t=Zm(e.firestore);return function(i,s,l,h,g,y,C){let S;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){xB(C,y);const N=[];for(const k of C)N.push(AB(h,i,k));S={arrayValue:{values:N}}}else S=AB(h,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||xB(C,y),S=IB(l,"where",C,"in"===y||"not-in"===y);return hn.create(g,y,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Nv extends Zk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Nv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const l=i.getFlattenedFilters();for(const h of l)RB(s,h),s=eP(s,h)}(e._query,t),new ms(e.firestore,e.converter,eP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Yk extends FI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Yk(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new uv(i,s);return function(h,g){if(null===JM(h)){const y=pS(h);null!==y&&NB(0,y,g.field)}}(r,l),l}(e._query,this._field,this._direction);return new ms(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new vh(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class QS extends FI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new QS(e,t,r)}_apply(e){return new ms(e.firestore,e.converter,gS(e._query,this._limit,this._limitType))}}class JS extends FI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new JS(e,t,r)}_apply(e){const t=SB(e,this.type,this._docOrFields,this._inclusive);return new ms(e.firestore,e.converter,(i=t,new vh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class XS extends FI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new XS(e,t,r)}_apply(e){const t=SB(e,this.type,this._docOrFields,this._inclusive);return new ms(e.firestore,e.converter,(i=t,new vh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function SB(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof OI)return function(i,s,l,h,g){if(!h)throw new Re(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const C of Um(i))if(C.field.isKeyField())y.push(Fm(s,h.key));else{const S=h.data.field(C.field);if(aS(S))throw new Re(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=C.field.canonicalString();throw new Re(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}y.push(S)}return new Ip(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Zm(n.firestore);return function(s,l,h,g,y,C){const S=s.explicitOrderBy;if(y.length>S.length)throw new Re(he.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let k=0;k<y.length;k++){const B=y[k];if(S[k].field.isKeyField()){if("string"!=typeof B)throw new Re(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof B}`);if(!XM(s)&&-1!==B.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${B}' contains a slash.`);const Z=s.path.child(wn.fromString(B));if(!et.isDocumentKey(Z))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Z}' is not because it contains an odd number of segments.`);const J=new et(Z);N.push(Fm(l,J))}else{const Z=IB(h,g,B);N.push(Z)}}return new Ip(N,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function AB(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Re(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XM(e)&&-1!==t.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(wn.fromString(t));if(!et.isDocumentKey(r))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fm(n,new et(r))}if(t instanceof pr)return Fm(n,t._key);throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${HS(t)}.`)}function xB(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RB(n,e){if(e.isInequality()){const r=pS(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Re(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=JM(n);null!==s&&NB(0,i,s)}const t=function(r,i){for(const s of r)for(const l of s.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Re(he.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function NB(n,e,t){if(!t.isEqual(e))throw new Re(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Qk{convertValue(e,t="none"){switch(wp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return mp(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new zS(Gr(e.latitude),Gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=lS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nI(e));default:return null}}convertTimestamp(e){const t=_p(e);return new br(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=wn.fromString(e);Ct(zU(r));const i=new yp(r.get(1),r.get(3)),s=new et(r.popFirst(5));return i.isEqual(t)||ei(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function eA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class T9 extends Qk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}class Qm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Th extends OI{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new UI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(YS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class UI extends Th{data(e={}){return super.data(e)}}class Rp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new UI(this._firestore,this._userDataWriter,r.key,r,new Qm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new UI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Qm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new UI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Qm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==l.type&&(g=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:S9(l.type),doc:h,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function S9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function PB(n,e){return n instanceof Th&&e instanceof Th?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Rp&&e instanceof Rp&&n._firestore===e._firestore&&Hk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Np extends Qk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}function kB(n,e,t){n=fn(n,pr);const r=fn(n.firestore,gr),i=eA(n.converter,e,t);return Mv(r,[WS(Zm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Tr.none())])}function OB(n,e,t,...r){n=fn(n,pr);const i=fn(n.firestore,gr),s=Zm(i);let l;return l="string"==typeof(e=(0,O.m9)(e))||e instanceof bh?Wk(s,"updateDoc",n._key,e,t,r):qk(s,"updateDoc",n._key,e),Mv(i,[l.toMutation(n._key,Tr.exists(!0))])}function FB(n,...e){var t,r,i;n=(0,O.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||Gk(e[l])||(s=e[l],l++);const h={includeMetadataChanges:s.includeMetadataChanges};if(Gk(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let g,y,C;if(n instanceof pr)y=fn(n.firestore,gr),C=dv(n._key.path),g={next:S=>{e[l]&&e[l](Jk(y,n,S))},error:e[l+1],complete:e[l+2]};else{const S=fn(n,ms);y=fn(S.firestore,gr),C=S._query;const N=new Np(y);g={next:k=>{e[l]&&e[l](new Rp(y,N,S,k))},error:e[l+1],complete:e[l+2]},DB(n._query)}return function(S,N,k,B){const Z=new VS(B),J=new ak(N,Z,k);return S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return nk(yield Rv(S),J)})),()=>{Z.Dc(),S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return ik(yield Rv(S),J)}))}}(ni(y),C,h,g)}function Mv(n,e){return function(t,r){const i=new Ti;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function EW(n,e,t){return hk.apply(this,arguments)}(yield Bk(t),r,i)})),i.promise}(ni(n),e)}function Jk(n,e,t){const r=t.docs.get(e._key),i=new Np(n);return new Th(n,i,e._key,r,new Qm(t.hasPendingWrites,t.fromCache),e.converter)}const z9={maxAttempts:5};class LB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zm(e)}set(e,t,r){this._verifyNotCommitted();const i=Mp(e,this._firestore),s=eA(i.converter,t,r),l=WS(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Tr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Mp(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof bh?Wk(this._dataReader,"WriteBatch.update",s._key,t,r,i):qk(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,Tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Mp(e,this._firestore);return this._mutations=this._mutations.concat(new gv(t._key,Tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mp(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Re(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class q9 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Zm(e)}get(e){const t=Mp(e,this._firestore),r=new T9(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const s=i[0];if(s.isFoundDocument())return new OI(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new OI(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=Mp(e,this._firestore),s=eA(i.converter,t,r),l=WS(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const s=Mp(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof bh?Wk(this._dataReader,"Transaction.update",s._key,t,r,i):qk(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=Mp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Mp(e,this._firestore),r=new Np(this._firestore);return super.get(e).then(i=>new Th(this._firestore,r,t._key,i._document,new Qm(!1,!1),t.converter))}}!function(n,e=!0){sv=Vi.SDK_VERSION,(0,Vi._registerComponent)(new ls.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),l=new gr(new Q6(t.getProvider("auth-internal")),new ez(t.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Re(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yp(h.options.projectId,g)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Vi.registerVersion)(v2,"3.13.0",n),(0,Vi.registerVersion)(v2,"3.13.0","esm2017")}();function Xk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function VB(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function BB(){if(!function Sz(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}class VI{constructor(e){this._delegate=e}static fromBase64String(e){return BB(),new VI(Vc.fromBase64String(e))}static fromUint8Array(e){return VB(),new VI(Vc.fromUint8Array(e))}toBase64(){return BB(),this._delegate.toBase64()}toUint8Array(){return VB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function e1(n){return function t5(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class n5{enableIndexedDbPersistence(e,t){return function e9(n,e){yB(n=fn(n,gr));const t=ni(n);if(t._uninitializedComponentsProvider)throw new Re(he.FAILED_PRECONDITION,"SDK cache is already specified.");hl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new xv;return _B(t,i,new Pk(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function t9(n){yB(n=fn(n,gr));const e=ni(n);if(e._uninitializedComponentsProvider)throw new Re(he.FAILED_PRECONDITION,"SDK cache is already specified.");hl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new xv;return _B(e,r,new JV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function n9(n){if(n._initialized&&!n._terminated)throw new Re(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ti;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!_u.D())return Promise.resolve();const i=r+"main";yield _u.delete(i)}),function(r){return t.apply(this,arguments)})(TP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class jB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof yp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&hl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function fB(n,e,t,r={}){var i;const s=(n=fn(n,NI))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==l&&hl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:l,ssl:!1})),r.mockUserToken){let h,g;if("string"==typeof r.mockUserToken)h=r.mockUserToken,g=Gi.MOCK_USER;else{h=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Gi(y)}n._authCredentials=new Y6(new w2(h,g))}}(this._delegate,e,t,r)}enableNetwork(){return function i9(n){return function $W(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield tB(n),t=yield nB(n);return e.setNetworkEnabled(!0),function(r){const i=tt(r);return i.vu.delete(0),AI(i)}(t)}))}(ni(n=fn(n,gr)))}(this._delegate)}disableNetwork(){return function s9(n){return function HW(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield tB(n),t=yield nB(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const s=tt(i);s.vu.add(0),yield Iv(s),s.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ni(n=fn(n,gr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function r9(n){return function(e){const t=new Ti;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function TW(n,e){return _k.apply(this,arguments)}(yield Bk(e),t)})),t.promise}(ni(n=fn(n,gr)))}(this._delegate)}onSnapshotsInSync(e){return function F9(n,e){return function qW(n,e){const t=new VS(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Rv(n),i=t,tt(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Rv(n),i=t,void tt(r).ku.delete(i);var r,i}))}}(ni(n=fn(n,gr)),Gk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Pv(this,pB(this._delegate,e))}catch(t){throw co(t,"collection()","Firestore.collection()")}}doc(e){try{return new fl(this,GS(this._delegate,e))}catch(t){throw co(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ho(this,function YW(n,e){if(n=fn(n,NI),$k("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ms(n,null,(t=e,new vh(wn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw co(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function W9(n,e,t){n=fn(n,gr);const r=Object.assign(Object.assign({},z9),t);return function(i){if(i.maxAttempts<1)throw new Re(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,l){const h=new Ti;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const g=yield function rB(n){return jS(n).then(e=>e.datastore)}(i);new BW(i.asyncQueue,g,l,s,h).run()})),h.promise}(ni(n),i=>e(new q9(n,i)),r)}(this._delegate,t=>e(new $B(this,t)))}batch(){return ni(this._delegate),new HB(new LB(this._delegate,e=>Mv(this._delegate,e)))}loadBundle(e){return function o9(n,e){const t=ni(n=fn(n,gr)),r=new JW;return function WW(n,e,t,r){const i=function(s,l){let h;return h="string"==typeof s?SU().encode(s):s,g=function(g,y){if(g instanceof Uint8Array)return XV(g,y);if(g instanceof ArrayBuffer)return XV(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new UW(g,l);var g}(t,SI(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function FW(n,e,t){const r=tt(n);var i;(i=(0,ve.Z)(function*(s,l,h){try{const g=yield l.getMetadata();if(yield function(N,k){const B=tt(N),Z=ti(k.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",J=>B.qs.getBundleMetadata(J,k.id)).then(J=>!!J&&J.createTime.compareTo(Z)>=0)}(s.localStore,g))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=g).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(HV(g));const y=new gW(g,s.localStore,l.serializer);let C=yield l.bc();for(;C;){const N=yield y.zu(C);N&&h._updateProgress(N),C=yield l.bc()}const S=yield y.complete();return yield Ch(s,S.Ju,void 0),yield function(N,k){const B=tt(N);return B.persistence.runTransaction("Save bundle","readwrite",Z=>B.qs.saveBundleMetadata(Z,k))}(s.localStore,g),h._completeWith(S.progress),Promise.resolve(S.Hu)}catch(g){return hl("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var N}),function(s,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Bk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function a9(n,e){return function KW(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=tt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(yield $S(n),e)}))}(ni(n=fn(n,gr)),e).then(t=>t?new ms(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ho(this,t):null)}}class tA extends Qk{constructor(e){super(),this.firestore=e}convertBytes(e){return new VI(new Vc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fl.forKey(t,this.firestore,null)}}class $B{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tA(e)}get(e){const t=Xm(e);return this._delegate.get(t).then(r=>new BI(this._firestore,new Th(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Xm(e);return r?(Xk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Xm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Xm(e);return this._delegate.delete(t),this}}class HB{constructor(e){this._delegate=e}set(e,t,r){const i=Xm(e);return r?(Xk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Xm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Xm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Jm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new UI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Jm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Jm(e,new tA(e),t),i.set(t,s)),s}}Jm.INSTANCES=new WeakMap;class fl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fl(t,new pr(t._delegate,r,new et(e)))}static forKey(e,t,r){return new fl(t,new pr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Pv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Pv(this.firestore,pB(this._delegate,e))}catch(t){throw co(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof pr&&gB(this._delegate,e)}set(e,t){t=Xk("DocumentReference.set",t);try{return t?kB(this._delegate,e,t):kB(this._delegate,e)}catch(r){throw co(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?OB(this._delegate,e):OB(this._delegate,e,t,...r)}catch(i){throw co(i,"updateDoc()","DocumentReference.update()")}}delete(){return function k9(n){return Mv(fn(n.firestore,gr),[new gv(n._key,Tr.none())])}(this._delegate)}onSnapshot(...e){const t=GB(e),r=zB(e,i=>new BI(this.firestore,new Th(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return FB(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function x9(n){n=fn(n,pr);const e=fn(n.firestore,gr),t=ni(e),r=new Np(e);return function GW(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,s,l){try{const h=yield function(g,y){const C=tt(g);return C.persistence.runTransaction("read document","readonly",S=>C.localDocuments.getDocument(S,y))}(i,s);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Re(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=Tv(h,`Failed to get document '${s} from cache`);l.reject(g)}}),function(i,s,l){return r.apply(this,arguments)})(yield $S(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Th(e,r,n._key,i,new Qm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function R9(n){n=fn(n,pr);const e=fn(n.firestore,gr);return iB(ni(e),n._key,{source:"server"}).then(t=>Jk(e,n,t))}(this._delegate):function A9(n){n=fn(n,pr);const e=fn(n.firestore,gr);return iB(ni(e),n._key).then(t=>Jk(e,n,t))}(this._delegate),t.then(r=>new BI(this.firestore,new Th(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new fl(this.firestore,this._delegate.withConverter(e?Jm.getInstance(this.firestore,e):null))}}function co(n,e,t){return n.message=n.message.replace(e,t),n}function GB(n){for(const e of n)if("object"==typeof e&&!e1(e))return e;return{}}function zB(n,e){var t,r;let i;return i=e1(n[0])?n[0]:e1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class BI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return PB(this._delegate,e._delegate)}}class jI extends BI{data(e){const t=this._delegate.data(e);return function K6(n,e){n||ht()}(void 0!==t),t}}class ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tA(e)}where(e,t,r){try{return new ho(this.firestore,xp(this._delegate,function _9(n,e,t){const r=e,i=YS("where",n);return LI._create(i,r,t)}(e,t,r)))}catch(i){throw co(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ho(this.firestore,xp(this._delegate,function y9(n,e="asc"){const t=e,r=YS("orderBy",n);return Yk._create(r,t)}(e,t)))}catch(r){throw co(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ho(this.firestore,xp(this._delegate,function v9(n){return dB("limit",n),QS._create("limit",n,"F")}(e)))}catch(t){throw co(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ho(this.firestore,xp(this._delegate,function w9(n){return dB("limitToLast",n),QS._create("limitToLast",n,"L")}(e)))}catch(t){throw co(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ho(this.firestore,xp(this._delegate,function E9(...n){return JS._create("startAt",n,!0)}(...e)))}catch(t){throw co(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ho(this.firestore,xp(this._delegate,function I9(...n){return JS._create("startAfter",n,!1)}(...e)))}catch(t){throw co(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ho(this.firestore,xp(this._delegate,function C9(...n){return XS._create("endBefore",n,!1)}(...e)))}catch(t){throw co(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ho(this.firestore,xp(this._delegate,function b9(...n){return XS._create("endAt",n,!0)}(...e)))}catch(t){throw co(t,"endAt()","Query.endAt()")}}isEqual(e){return Hk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function M9(n){n=fn(n,ms);const e=fn(n.firestore,gr),t=ni(e),r=new Np(e);return function zW(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,s,l){try{const h=yield MS(i,s,!0),g=new qV(s,h.ir),y=g.sc(h.documents),C=g.applyChanges(y,!1);l.resolve(C.snapshot)}catch(h){const g=Tv(h,`Failed to execute query '${s} against cache`);l.reject(g)}}),function(i,s,l){return r.apply(this,arguments)})(yield $S(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Rp(e,r,n,i))}(this._delegate):"server"===e?.source?function P9(n){n=fn(n,ms);const e=fn(n.firestore,gr),t=ni(e),r=new Np(e);return sB(t,n._query,{source:"server"}).then(i=>new Rp(e,r,n,i))}(this._delegate):function N9(n){n=fn(n,ms);const e=fn(n.firestore,gr),t=ni(e),r=new Np(e);return DB(n._query),sB(t,n._query).then(i=>new Rp(e,r,n,i))}(this._delegate),t.then(r=>new t1(this.firestore,new Rp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=GB(e),r=zB(e,i=>new t1(this.firestore,new Rp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return FB(this._delegate,t,r)}withConverter(e){return new ho(this.firestore,this._delegate.withConverter(e?Jm.getInstance(this.firestore,e):null))}}class i5{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class t1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ho(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new i5(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new jI(this._firestore,r))})}isEqual(e){return PB(this._delegate,e._delegate)}}class Pv extends ho{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fl(this.firestore,e):null}doc(e){try{return new fl(this.firestore,void 0===e?GS(this._delegate):GS(this._delegate,e))}catch(t){throw co(t,"doc()","CollectionReference.doc()")}}add(e){return function O9(n,e){const t=fn(n.firestore,gr),r=GS(n),i=eA(n.converter,e);return Mv(t,[WS(Zm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Tr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new fl(this.firestore,t))}isEqual(e){return gB(this._delegate,e._delegate)}withConverter(e){return new Pv(this.firestore,this._delegate.withConverter(e?Jm.getInstance(this.firestore,e):null))}}function Xm(n){return fn(n,pr)}class n1{constructor(...e){this._delegate=new bh(...e)}static documentId(){return new n1(Hr.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof bh&&this._delegate._internalPath.isEqual(e._internalPath)}}class e_{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Z9(){return new zk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new e_(e)}static delete(){const e=function K9(){return new PI("deleteField")}();return e._methodName="FieldValue.delete",new e_(e)}static arrayUnion(...e){const t=function Y9(...n){return new h9("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new e_(t)}static arrayRemove(...e){const t=function Q9(...n){return new f9("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new e_(t)}static increment(e){const t=function J9(n){return new p9("increment",n)}(e);return t._methodName="FieldValue.increment",new e_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const s5={Firestore:jB,GeoPoint:zS,Timestamp:br,Blob:VI,Transaction:$B,WriteBatch:HB,DocumentReference:fl,DocumentSnapshot:BI,Query:ho,QueryDocumentSnapshot:jI,QuerySnapshot:t1,CollectionReference:Pv,FieldPath:n1,FieldValue:e_,setLogLevel:function r5(n){!function W6(n){fp.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function qB(n,e){return function l5(n,e=n0.z){return new di.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function r1(n,e){return qB(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function nA(n,e){return r1(n,e).pipe(ua(void 0),YN(),(0,yt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const g=i.find(C=>C.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(C=>C.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),s}))}function WB(n,e,t){return nA(n,t).pipe(Qa((r,i)=>function c5(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function d5(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return i1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return i1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return i1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Mo(),(0,yt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function i1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function KB(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function a5(n){(function o5(n,e){n.INTERNAL.registerComponent(new ls.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},s5)))})(n,(e,t)=>new jB(e,t,new n5)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(zg.Z);class ZB{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=nA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ua(void 0),YN(),Ii(([r,i])=>i.length>0||!r),(0,yt.U)(([r,i])=>i),yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Qa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KB(e);return WB(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return r1(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),yn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(yn.iC)}add(e){return this.ref.add(e)}doc(e){return new YB(this.ref.doc(e),this.afs)}}class YB{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=XB(r,t);return new ZB(i,s,this.afs)}snapshotChanges(){return function u5(n,e){return qB(n,e).pipe(ua(void 0),YN(),(0,yt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(yn.iC)}}class h5{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?nA(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ii(t=>t.length>0),yn.iC):nA(this.query,this.afs.schedulers.outsideAngular).pipe(yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Qa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KB(e);return WB(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return r1(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),yn.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(yn.iC)}}const QB=new c.OlP("angularfire2.enableFirestorePersistence"),JB=new c.OlP("angularfire2.firestore.persistenceSettings"),f5=new c.OlP("angularfire2.firestore.settings"),p5=new c.OlP("angularfire2.firestore.use-emulator");function XB(n,e=(t=>t)){return{query:e(n),ref:n}}let g5=(()=>{class n{constructor(t,r,i,s,l,h,g,y,C,S,N,k,B,Z,J,Me,He){this.schedulers=g;const je=(0,Xr.on)(t,h,r),Ye=C;S&&RN(je,h,N,B,Z,J,k,Me),[this.firestore,this.persistenceEnabled$]=(0,Xr.cc)(`${je.name}.firestore`,"AngularFirestore",je.name,()=>{const St=h.runOutsideAngular(()=>je.firestore());if(s&&St.settings(s),Ye&&St.useEmulator(...Ye),i&&!js(l)){const kt=()=>{try{return(0,ln.D)(St.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(pn){return typeof console<"u"&&console.warn(pn),lt(!1)}};return[St,h.runOutsideAngular(kt)]}return[St,lt(!1)]},[s,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=XB(i,r),h=this.schedulers.ngZone.run(()=>s);return new ZB(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),s=this.firestore.collectionGroup(t);return new h5(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new YB(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xr.Dh),c.LFG(Xr.xv,8),c.LFG(QB,8),c.LFG(f5,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(yn.HU),c.LFG(JB,8),c.LFG(p5,8),c.LFG(wD,8),c.LFG(bN,8),c.LFG(TN,8),c.LFG(DN,8),c.LFG(SN,8),c.LFG(AN,8),c.LFG(xN,8),c.LFG(wE,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),m5=(()=>{class n{constructor(){vD.Z.registerVersion("angularfire",yn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:QB,useValue:!0},{provide:JB,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[g5]}),n})();const _5_firebaseConfig={apiKey:"AIzaSyBZ_2peiV0j05_bd4fZnezeUoe1RDbsR5M",authDomain:"crud-students-ea6df.firebaseapp.com",projectId:"crud-students-ea6df",storageBucket:"crud-students-ea6df.appspot.com",messagingSenderId:"462416042904",appId:"1:462416042904:web:cfc244d41bae9d1266a9ed",measurementId:"G-DYZX5SMDCF"};function ej(n){return new c.vHH(3e3,!1)}function J5(){return typeof window<"u"&&typeof window.document<"u"}function s1(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Pp(n){switch(n.length){case 0:return new CE;case 1:return n[0];default:return new dF(n)}}function tj(n,e,t,r,i=new Map,s=new Map){const l=[],h=[];let g=-1,y=null;if(r.forEach(C=>{const S=C.get("offset"),N=S==g,k=N&&y||new Map;C.forEach((B,Z)=>{let J=Z,Me=B;if("offset"!==Z)switch(J=e.normalizePropertyName(J,l),Me){case kN:Me=i.get(Z);break;case fh:Me=s.get(Z);break;default:Me=e.normalizeStyleValue(Z,J,Me,l)}k.set(J,Me)}),N||h.push(k),y=k,g=S}),l.length)throw function B5(n){return new c.vHH(3502,!1)}();return h}function o1(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&a1(t,"start",n)));break;case"done":n.onDone(()=>r(t&&a1(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&a1(t,"destroy",n)))}}function a1(n,e,t){const s=l1(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function l1(n,e,t,r,i="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!l}}function Ma(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function nj(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let u1=(n,e)=>!1,rj=(n,e,t)=>[],ij=null;function c1(n){const e=n.parentNode||n.host;return e===ij?null:e}(s1()||typeof Element<"u")&&(J5()?(ij=(()=>document.documentElement)(),u1=(n,e)=>{for(;e;){if(e===n)return!0;e=c1(e)}return!1}):u1=(n,e)=>n.contains(e),rj=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let t_=null,sj=!1;const oj=u1,aj=rj;let lj=(()=>{class n{validateStyleProperty(t){return function e8(n){t_||(t_=function t8(){return typeof document<"u"?document.body:null}()||{},sj=!!t_.style&&"WebkitAppearance"in t_.style);let e=!0;return t_.style&&!function X5(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in t_.style,!e&&sj&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in t_.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return oj(t,r)}getParentElement(t){return c1(t)}query(t,r,i){return aj(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,l,h=[],g){return new CE(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),d1=(()=>{class n{}return n.NOOP=new lj,n})();const n8=1e3,h1="ng-enter",rA="ng-leave",iA="ng-trigger",sA=".ng-trigger",cj="ng-animating",f1=".ng-animating";function Dh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:p1(parseFloat(e[1]),e[2])}function p1(n,e){return"s"===e?n*n8:n}function oA(n,e,t){return n.hasOwnProperty("duration")?n:function i8(n,e,t){let i,s=0,l="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(ej()),{duration:0,delay:0,easing:""};i=p1(parseFloat(h[1]),h[2]);const g=h[3];null!=g&&(s=p1(parseFloat(g),h[4]));const y=h[5];y&&(l=y)}else i=n;if(!t){let h=!1,g=e.length;i<0&&(e.push(function y5(){return new c.vHH(3100,!1)}()),h=!0),s<0&&(e.push(function v5(){return new c.vHH(3101,!1)}()),h=!0),h&&e.splice(g,0,ej())}return{duration:i,delay:s,easing:l}}(n,e,t)}function $I(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function dj(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function kp(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function fj(n,e,t){return t?e+":"+t+";":""}function pj(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=fj(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=fj(0,l8(t),n.style[t]));n.setAttribute("style",e)}function Bc(n,e,t){n.style&&(e.forEach((r,i)=>{const s=m1(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),s1()&&pj(n))}function n_(n,e){n.style&&(e.forEach((t,r)=>{const i=m1(r);n.style[i]=""}),s1()&&pj(n))}function HI(n){return Array.isArray(n)?1==n.length?n[0]:lF(n):n}const g1=new RegExp("{{\\s*(.+?)\\s*}}","g");function gj(n){let e=[];if("string"==typeof n){let t;for(;t=g1.exec(n);)e.push(t[1]);g1.lastIndex=0}return e}function GI(n,e,t){const r=n.toString(),i=r.replace(g1,(s,l)=>{let h=e[l];return null==h&&(t.push(function E5(n){return new c.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function aA(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const a8=/-+([a-z0-9])/g;function m1(n){return n.replace(a8,(...e)=>e[1].toUpperCase())}function l8(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Pa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function I5(n){return new c.vHH(3004,!1)}()}}function mj(n,e){return window.getComputedStyle(n)[e]}const cA="*";function p8(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function g8(n,e,t){if(":"==n[0]){const g=function m8(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function F5(n){return new c.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function O5(n){return new c.vHH(3015,!1)}()),e;const i=r[1],s=r[2],l=r[3];e.push(_j(i,l));"<"==s[0]&&!(i==cA&&l==cA)&&e.push(_j(l,i))}(r,t,e)):t.push(n),t}const dA=new Set(["true","1"]),hA=new Set(["false","0"]);function _j(n,e){const t=dA.has(n)||hA.has(n),r=dA.has(e)||hA.has(e);return(i,s)=>{let l=n==cA||n==i,h=e==cA||e==s;return!l&&t&&"boolean"==typeof i&&(l=i?dA.has(n):hA.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?dA.has(e):hA.has(e)),l&&h}}const _8=new RegExp("s*:selfs*,?","g");function _1(n,e,t,r){return new y8(n).build(e,t,r)}class y8{constructor(e){this._driver=e}build(e,t,r){const i=new E8(t);return this._resetContextStyleTimingState(i),Pa(this,HI(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function b5(){return new c.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const g=h,y=g.name;y.toString().split(/\s*,\s*/).forEach(C=>{g.name=C,s.push(this.visitState(g,t))}),g.name=y}else if(1==h.type){const g=this.visitTransition(h,t);r+=g.queryCount,i+=g.depCount,l.push(g)}else t.errors.push(function T5(){return new c.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,l=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(g=>{gj(g).forEach(y=>{l.hasOwnProperty(y)||s.add(y)})})}),s.size&&(aA(s.values()),t.errors.push(function D5(n,e){return new c.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Pa(this,HI(e.animation),t);return{type:1,matchers:p8(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:r_(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Pa(this,r,t)),options:r_(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(l=>{t.currentTime=r;const h=Pa(this,l,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:r_(e.options)}}visitAnimate(e,t){const r=function C8(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return y1(oA(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=y1(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=oA(t,e);return y1(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:IE({});if(5==s.type)i=this.visitKeyframes(s,t);else{let l=e.styles,h=!1;if(!l){h=!0;const y={};r.easing&&(y.easing=r.easing),l=IE(y)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(l,t);g.isEmptyStep=h,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===fh?r.push(h):t.errors.push(new c.vHH(3002,!1)):r.push(dj(h));let s=!1,l=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!s))for(let g of h.values())if(g.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((h,g)=>{const y=t.collectedStyles.get(t.currentQuerySelector),C=y.get(g);let S=!0;C&&(s!=i&&s>=C.startTime&&i<=C.endTime&&(t.errors.push(function A5(n,e,t,r,i){return new c.vHH(3010,!1)}()),S=!1),s=C.startTime),S&&y.set(g,{startTime:s,endTime:i}),t.options&&function o8(n,e,t){const r=e.params||{},i=gj(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function w5(n){return new c.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function x5(){return new c.vHH(3011,!1)}()),r;let s=0;const l=[];let h=!1,g=!1,y=0;const C=e.steps.map(Me=>{const He=this._makeStyleAst(Me,t);let je=null!=He.offset?He.offset:function I8(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(He.styles),Ye=0;return null!=je&&(s++,Ye=He.offset=je),g=g||Ye<0||Ye>1,h=h||Ye<y,y=Ye,l.push(Ye),He});g&&t.errors.push(function R5(){return new c.vHH(3012,!1)}()),h&&t.errors.push(function N5(){return new c.vHH(3200,!1)}());const S=e.steps.length;let N=0;s>0&&s<S?t.errors.push(function M5(){return new c.vHH(3202,!1)}()):0==s&&(N=1/(S-1));const k=S-1,B=t.currentTime,Z=t.currentAnimateTimings,J=Z.duration;return C.forEach((Me,He)=>{const je=N>0?He==k?1:N*He:l[He],Ye=je*J;t.currentTime=B+Z.delay+Ye,Z.duration=Ye,this._validateStyleAst(Me,t),Me.offset=je,r.styles.push(Me)}),r}visitReference(e,t){return{type:8,animation:Pa(this,HI(e.animation),t),options:r_(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:r_(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:r_(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function v8(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(_8,"")),n=n.replace(/@\*/g,sA).replace(/@\w+/g,t=>sA+"-"+t.slice(1)).replace(/:animating/g,f1),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Ma(t.collectedStyles,t.currentQuerySelector,new Map);const h=Pa(this,HI(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:h,originalSelector:e.selector,options:r_(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function P5(){return new c.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:oA(e.timings,t.errors,!0);return{type:12,animation:Pa(this,HI(e.animation),t),timings:r,options:null}}}class E8{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function r_(n){return n?(n=$I(n)).params&&(n.params=function w8(n){return n?$I(n):null}(n.params)):n={},n}function y1(n,e,t){return{duration:n,delay:e,easing:t}}function v1(n,e,t,r,i,s,l=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:l,subTimeline:h}}class fA{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const D8=new RegExp(":enter","g"),A8=new RegExp(":leave","g");function w1(n,e,t,r,i,s=new Map,l=new Map,h,g,y=[]){return(new x8).buildKeyframes(n,e,t,r,i,s,l,h,g,y)}class x8{buildKeyframes(e,t,r,i,s,l,h,g,y,C=[]){y=y||new fA;const S=new E1(e,t,y,i,s,C,[]);S.options=g;const N=g.delay?Dh(g.delay):0;S.currentTimeline.delayNextStep(N),S.currentTimeline.setStyles([l],null,S.errors,g),Pa(this,r,S);const k=S.timelines.filter(B=>B.containsAnimation());if(k.length&&h.size){let B;for(let Z=k.length-1;Z>=0;Z--){const J=k[Z];if(J.element===t){B=J;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([h],null,S.errors,g)}return k.length?k.map(B=>B.buildKeyframes()):[v1(t,[],[],[],0,N,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const l="number"==typeof s?s:Dh(GI(s,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const l=null!=r.duration?Dh(r.duration):null,h=null!=r.delay?Dh(r.delay):null;return 0!==l&&e.forEach(g=>{const y=t.appendInstructionToTimeline(g,l,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Pa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=pA);const l=Dh(s.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Pa(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Dh(e.options.delay):0;e.steps.forEach(l=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),Pa(this,l,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return oA(t.params?GI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(g=>{h.forwardTime((g.offset||0)*s),h.setStyles(g.styles,g.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Dh(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=pA);let l=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let g=null;h.forEach((y,C)=>{t.currentQueryIndex=C;const S=t.createSubContext(e.options,y);s&&S.delayNextStep(s),y===t.element&&(g=S.currentTimeline),Pa(this,e.animation,S),S.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),h=l*(t.currentQueryTotal-1);let g=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":g=h-g;break;case"full":g=r.currentStaggerTime}const C=t.currentTimeline;g&&C.delayNextStep(g);const S=C.currentTime;Pa(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const pA={};class E1{constructor(e,t,r,i,s,l,h,g){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pA,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new gA(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Dh(r.duration)),null!=r.delay&&(i.delay=Dh(r.delay));const s=r.params;if(s){let l=i.params;l||(l=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!l.hasOwnProperty(h))&&(l[h]=GI(s[h],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new E1(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=pA,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new R8(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,l){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(D8,"."+this._enterClassName)).replace(A8,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!s&&0==h.length&&l.push(function k5(n){return new c.vHH(3014,!1)}()),h}}class gA{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new gA(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||fh),this._currentKeyframe.set(t,fh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},l=function N8(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,fh)}else kp(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,g]of l){const y=GI(g,s,r);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??fh),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,g)=>{const y=kp(h,new Map,this._backFill);y.forEach((C,S)=>{C===kN?e.add(S):C===fh&&t.add(S)}),r||y.set("offset",g/this.duration),i.push(y)});const s=e.size?aA(e.values()):[],l=t.size?aA(t.values()):[];if(r){const h=i[0],g=new Map(h);h.set("offset",0),g.set("offset",1),i=[h,g]}return v1(this.element,i,s,l,this.duration,this.startTime,this.easing,!1)}}class R8 extends gA{constructor(e,t,r,i,s,l,h=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=r+t,h=t/l,g=kp(e[0]);g.set("offset",0),s.push(g);const y=kp(e[0]);y.set("offset",wj(h)),s.push(y);const C=e.length-1;for(let S=1;S<=C;S++){let N=kp(e[S]);const k=N.get("offset");N.set("offset",wj((t+k*r)/l)),s.push(N)}r=l,t=0,i="",e=s}return v1(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function wj(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class I1{}const M8=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class P8 extends I1{normalizePropertyName(e,t){return m1(e)}normalizeStyleValue(e,t,r,i){let s="";const l=r.toString().trim();if(M8.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function C5(n,e){return new c.vHH(3005,!1)}())}return l+s}}function Ej(n,e,t,r,i,s,l,h,g,y,C,S,N){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:l,timelines:h,queriedElements:g,preStyleProps:y,postStyleProps:C,totalTime:S,errors:N}}const C1={};class Ij{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function k8(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,l,h,g,y,C){const S=[],N=this.ast.options&&this.ast.options.params||C1,B=this.buildStyles(r,h&&h.params||C1,S),Z=g&&g.params||C1,J=this.buildStyles(i,Z,S),Me=new Set,He=new Map,je=new Map,Ye="void"===i,St={params:O8(Z,N),delay:this.ast.options?.delay},kt=C?[]:w1(e,t,this.ast.animation,s,l,B,J,St,y,S);let pn=0;if(kt.forEach(Os=>{pn=Math.max(Os.duration+Os.delay,pn)}),S.length)return Ej(t,this._triggerName,r,i,Ye,B,J,[],[],He,je,pn,S);kt.forEach(Os=>{const Sh=Os.element,Lj=Ma(He,Sh,new Set);Os.preStyleProps.forEach(i_=>Lj.add(i_));const qI=Ma(je,Sh,new Set);Os.postStyleProps.forEach(i_=>qI.add(i_)),Sh!==t&&Me.add(Sh)});const kr=aA(Me.values());return Ej(t,this._triggerName,r,i,Ye,B,J,kt,kr,He,je,pn)}}function O8(n,e){const t=$I(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class F8{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=$I(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!==l&&(i[s]=l)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((l,h)=>{l&&(l=GI(l,i,t));const g=this.normalizer.normalizePropertyName(h,t);l=this.normalizer.normalizeStyleValue(h,g,l,t),r.set(h,l)})}),r}}class U8{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new F8(i.style,i.options&&i.options.params||{},r))}),Cj(this.states,"true","1"),Cj(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Ij(e,i,this.states))}),this.fallbackTransition=function V8(n,e,t){return new Ij(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Cj(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const B8=new fA;class j8{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],s=_1(this._driver,t,r,i);if(r.length)throw function j5(n){return new c.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=tj(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let l;const h=new Map;if(s?(l=w1(this._driver,t,s,h1,rA,new Map,new Map,r,B8,i),l.forEach(C=>{const S=Ma(h,C.element,new Map);C.postStyleProps.forEach(N=>S.set(N,null))})):(i.push(function $5(){return new c.vHH(3300,!1)}()),l=[]),i.length)throw function H5(n){return new c.vHH(3504,!1)}();h.forEach((C,S)=>{C.forEach((N,k)=>{C.set(k,this._driver.computeStyle(S,k,fh))})});const y=Pp(l.map(C=>{const S=h.get(C.element);return this._buildPlayer(C,new Map,S)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function G5(n){return new c.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=l1(t,"","","");return o1(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const bj="ng-animate-queued",b1="ng-animate-disabled",q8=[],Tj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},W8={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},pl="__ng_removed";class T1{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Q8(n){return n??null}(r?e.value:e),r){const s=$I(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const zI="void",D1=new T1(zI);class K8{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,gl(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function z5(n,e){return new c.vHH(3302,!1)}();if(null==r||0==r.length)throw function q5(n){return new c.vHH(3303,!1)}();if(!function J8(n){return"start"==n||"done"==n}(r))throw function W5(n,e){return new c.vHH(3400,!1)}();const s=Ma(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};s.push(l);const h=Ma(this._engine.statesByElement,e,new Map);return h.has(t)||(gl(e,iA),gl(e,iA+"-"+t),h.set(t,D1)),()=>{this._engine.afterFlush(()=>{const g=s.indexOf(l);g>=0&&s.splice(g,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function K5(n){return new c.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),l=new S1(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(gl(e,iA),gl(e,iA+"-"+t),this._engine.statesByElement.set(e,h=new Map));let g=h.get(t);const y=new T1(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&y.absorbOptions(g.options),h.set(t,y),g||(g=D1),y.value!==zI&&g.value===y.value){if(!function tK(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(g.params,y.params)){const Z=[],J=s.matchStyles(g.value,g.params,Z),Me=s.matchStyles(y.value,y.params,Z);Z.length?this._engine.reportError(Z):this._engine.afterFlush(()=>{n_(e,J),Bc(e,Me)})}return}const N=Ma(this._engine.playersByElement,e,[]);N.forEach(Z=>{Z.namespaceId==this.id&&Z.triggerName==t&&Z.queued&&Z.destroy()});let k=s.matchTransition(g.value,y.value,e,y.params),B=!1;if(!k){if(!i)return;k=s.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:k,fromState:g,toState:y,player:l,isFallbackTransition:B}),B||(gl(e,bj),l.onStart(()=>{kv(e,bj)})),l.onDone(()=>{let Z=this.players.indexOf(l);Z>=0&&this.players.splice(Z,1);const J=this._engine.playersByElement.get(e);if(J){let Me=J.indexOf(l);Me>=0&&J.splice(Me,1)}}),this.players.push(l),N.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,sA,!0);r.forEach(i=>{if(i[pl])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const h=[];if(s.forEach((g,y)=>{if(l.set(y,g.value),this._triggers.has(y)){const C=this.trigger(e,y,zI,i);C&&h.push(C)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&Pp(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const l=s.name;if(i.has(l))return;i.add(l);const g=this._triggers.get(l).fallbackTransition,y=r.get(l)||D1,C=new T1(zI),S=new S1(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:g,fromState:y,toState:C,player:S,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[pl];(!s||s===Tj)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){gl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,l=this._elementListeners.get(s);l&&l.forEach(h=>{if(h.name==r.triggerName){const g=l1(s,r.triggerName,r.fromState.value,r.toState.value);g._data=e,o1(r.player,h.phase,g,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Z8{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new K8(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,h=this.driver.getParentElement(t);for(;h;){const g=i.get(h);if(g){const y=r.indexOf(g);r.splice(y+1,0,e),l=!0;break}h=this.driver.getParentElement(h)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(mA(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!mA(t))return;const s=t[pl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),gl(e,b1)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),kv(e,b1))}removeNode(e,t,r,i){if(mA(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[pl]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return mA(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,sA,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,f1,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Pp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[pl];if(t&&t.setForRemoval){if(e[pl]=Tj,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(b1)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)gl(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Pp(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Z5(n){return new c.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new fA,i=[],s=new Map,l=[],h=new Map,g=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(It=>{C.add(It);const Ot=this.driver.query(It,".ng-animate-queued",!0);for(let $t=0;$t<Ot.length;$t++)C.add(Ot[$t])});const S=this.bodyNode,N=Array.from(this.statesByElement.keys()),k=Aj(N,this.collectedEnterElements),B=new Map;let Z=0;k.forEach((It,Ot)=>{const $t=h1+Z++;B.set(Ot,$t),It.forEach(bn=>gl(bn,$t))});const J=[],Me=new Set,He=new Set;for(let It=0;It<this.collectedLeaveElements.length;It++){const Ot=this.collectedLeaveElements[It],$t=Ot[pl];$t&&$t.setForRemoval&&(J.push(Ot),Me.add(Ot),$t.hasAnimation?this.driver.query(Ot,".ng-star-inserted",!0).forEach(bn=>Me.add(bn)):He.add(Ot))}const je=new Map,Ye=Aj(N,Array.from(Me));Ye.forEach((It,Ot)=>{const $t=rA+Z++;je.set(Ot,$t),It.forEach(bn=>gl(bn,$t))}),e.push(()=>{k.forEach((It,Ot)=>{const $t=B.get(Ot);It.forEach(bn=>kv(bn,$t))}),Ye.forEach((It,Ot)=>{const $t=je.get(Ot);It.forEach(bn=>kv(bn,$t))}),J.forEach(It=>{this.processLeaveNode(It)})});const St=[],kt=[];for(let It=this._namespaceList.length-1;It>=0;It--)this._namespaceList[It].drainQueuedTransitions(t).forEach($t=>{const bn=$t.player,Wi=$t.element;if(St.push(bn),this.collectedEnterElements.length){const Fs=Wi[pl];if(Fs&&Fs.setForMove){if(Fs.previousTriggersValues&&Fs.previousTriggersValues.has($t.triggerName)){const s_=Fs.previousTriggersValues.get($t.triggerName),ml=this.statesByElement.get($t.element);if(ml&&ml.has($t.triggerName)){const vA=ml.get($t.triggerName);vA.value=s_,ml.set($t.triggerName,vA)}}return void bn.destroy()}}const jc=!S||!this.driver.containsElement(S,Wi),ka=je.get(Wi),Op=B.get(Wi),Or=this._buildInstruction($t,r,Op,ka,jc);if(Or.errors&&Or.errors.length)return void kt.push(Or);if(jc)return bn.onStart(()=>n_(Wi,Or.fromStyles)),bn.onDestroy(()=>Bc(Wi,Or.toStyles)),void i.push(bn);if($t.isFallbackTransition)return bn.onStart(()=>n_(Wi,Or.fromStyles)),bn.onDestroy(()=>Bc(Wi,Or.toStyles)),void i.push(bn);const Bj=[];Or.timelines.forEach(Fs=>{Fs.stretchStartingKeyframe=!0,this.disabledNodes.has(Fs.element)||Bj.push(Fs)}),Or.timelines=Bj,r.append(Wi,Or.timelines),l.push({instruction:Or,player:bn,element:Wi}),Or.queriedElements.forEach(Fs=>Ma(h,Fs,[]).push(bn)),Or.preStyleProps.forEach((Fs,s_)=>{if(Fs.size){let ml=g.get(s_);ml||g.set(s_,ml=new Set),Fs.forEach((vA,R1)=>ml.add(R1))}}),Or.postStyleProps.forEach((Fs,s_)=>{let ml=y.get(s_);ml||y.set(s_,ml=new Set),Fs.forEach((vA,R1)=>ml.add(R1))})});if(kt.length){const It=[];kt.forEach(Ot=>{It.push(function Y5(n,e){return new c.vHH(3505,!1)}())}),St.forEach(Ot=>Ot.destroy()),this.reportError(It)}const pn=new Map,kr=new Map;l.forEach(It=>{const Ot=It.element;r.has(Ot)&&(kr.set(Ot,Ot),this._beforeAnimationBuild(It.player.namespaceId,It.instruction,pn))}),i.forEach(It=>{const Ot=It.element;this._getPreviousPlayers(Ot,!1,It.namespaceId,It.triggerName,null).forEach(bn=>{Ma(pn,Ot,[]).push(bn),bn.destroy()})});const Os=J.filter(It=>Rj(It,g,y)),Sh=new Map;Sj(Sh,this.driver,He,y,fh).forEach(It=>{Rj(It,g,y)&&Os.push(It)});const qI=new Map;k.forEach((It,Ot)=>{Sj(qI,this.driver,new Set(It),g,kN)}),Os.forEach(It=>{const Ot=Sh.get(It),$t=qI.get(It);Sh.set(It,new Map([...Array.from(Ot?.entries()??[]),...Array.from($t?.entries()??[])]))});const i_=[],Uj=[],Vj={};l.forEach(It=>{const{element:Ot,player:$t,instruction:bn}=It;if(r.has(Ot)){if(C.has(Ot))return $t.onDestroy(()=>Bc(Ot,bn.toStyles)),$t.disabled=!0,$t.overrideTotalTime(bn.totalTime),void i.push($t);let Wi=Vj;if(kr.size>1){let ka=Ot;const Op=[];for(;ka=ka.parentNode;){const Or=kr.get(ka);if(Or){Wi=Or;break}Op.push(ka)}Op.forEach(Or=>kr.set(Or,Wi))}const jc=this._buildAnimation($t.namespaceId,bn,pn,s,qI,Sh);if($t.setRealPlayer(jc),Wi===Vj)i_.push($t);else{const ka=this.playersByElement.get(Wi);ka&&ka.length&&($t.parentPlayer=Pp(ka)),i.push($t)}}else n_(Ot,bn.fromStyles),$t.onDestroy(()=>Bc(Ot,bn.toStyles)),Uj.push($t),C.has(Ot)&&i.push($t)}),Uj.forEach(It=>{const Ot=s.get(It.element);if(Ot&&Ot.length){const $t=Pp(Ot);It.setRealPlayer($t)}}),i.forEach(It=>{It.parentPlayer?It.syncPlayerEvents(It.parentPlayer):It.destroy()});for(let It=0;It<J.length;It++){const Ot=J[It],$t=Ot[pl];if(kv(Ot,rA),$t&&$t.hasAnimation)continue;let bn=[];if(h.size){let jc=h.get(Ot);jc&&jc.length&&bn.push(...jc);let ka=this.driver.query(Ot,f1,!0);for(let Op=0;Op<ka.length;Op++){let Or=h.get(ka[Op]);Or&&Or.length&&bn.push(...Or)}}const Wi=bn.filter(jc=>!jc.destroyed);Wi.length?X8(this,Ot,Wi):this.processLeaveNode(Ot)}return J.length=0,i_.forEach(It=>{this.players.push(It),It.onDone(()=>{It.destroy();const Ot=this.players.indexOf(It);this.players.splice(Ot,1)}),It.play()}),i_}elementContainsData(e,t){let r=!1;const i=t[pl];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let l=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(l=h)}else{const h=this.playersByElement.get(e);if(h){const g=!s||s==zI;h.forEach(y=>{y.queued||!g&&y.triggerName!=i||l.push(y)})}}return(r||i)&&(l=l.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),l}_beforeAnimationBuild(e,t,r){const s=t.element,l=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const y=g.element,C=y!==s,S=Ma(r,y,[]);this._getPreviousPlayers(y,C,l,h,t.toState).forEach(k=>{const B=k.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),k.destroy(),S.push(k)})}n_(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,l){const h=t.triggerName,g=t.element,y=[],C=new Set,S=new Set,N=t.timelines.map(B=>{const Z=B.element;C.add(Z);const J=Z[pl];if(J&&J.removedBeforeQueried)return new CE(B.duration,B.delay);const Me=Z!==g,He=function eK(n){const e=[];return xj(n,e),e}((r.get(Z)||q8).map(pn=>pn.getRealPlayer())).filter(pn=>!!pn.element&&pn.element===Z),je=s.get(Z),Ye=l.get(Z),St=tj(0,this._normalizer,0,B.keyframes,je,Ye),kt=this._buildPlayer(B,St,He);if(B.subTimeline&&i&&S.add(Z),Me){const pn=new S1(e,h,Z);pn.setRealPlayer(kt),y.push(pn)}return kt});y.forEach(B=>{Ma(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function Y8(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,B.element,B))}),C.forEach(B=>gl(B,cj));const k=Pp(N);return k.onDestroy(()=>{C.forEach(B=>kv(B,cj)),Bc(g,t.toStyles)}),S.forEach(B=>{Ma(i,B,[]).push(k)}),k}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new CE(e.duration,e.delay)}}class S1{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new CE,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>o1(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ma(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function mA(n){return n&&1===n.nodeType}function Dj(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Sj(n,e,t,r,i){const s=[];t.forEach(g=>s.push(Dj(g)));const l=[];r.forEach((g,y)=>{const C=new Map;g.forEach(S=>{const N=e.computeStyle(y,S,i);C.set(S,N),(!N||0==N.length)&&(y[pl]=W8,l.push(y))}),n.set(y,C)});let h=0;return t.forEach(g=>Dj(g,s[h++])),l}function Aj(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const r=1,i=new Set(e),s=new Map;function l(h){if(!h)return r;let g=s.get(h);if(g)return g;const y=h.parentNode;return g=t.has(y)?y:i.has(y)?r:l(y),s.set(h,g),g}return e.forEach(h=>{const g=l(h);g!==r&&t.get(g).push(h)}),t}function gl(n,e){n.classList?.add(e)}function kv(n,e){n.classList?.remove(e)}function X8(n,e,t){Pp(t).onDone(()=>n.processLeaveNode(e))}function xj(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof dF?xj(r.players,e):e.push(r)}}function Rj(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class _A{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Z8(e,t,r),this._timelineEngine=new j8(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const l=e+"-"+i;let h=this._triggerCache[l];if(!h){const g=[],y=[],C=_1(this._driver,s,g,y);if(g.length)throw function V5(n,e){return new c.vHH(3404,!1)}();h=function L8(n,e,t){return new U8(n,e,t)}(i,C,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,l]=nj(r);this._timelineEngine.command(s,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[l,h]=nj(r);return this._timelineEngine.listen(l,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let rK=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Bc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bc(this._element,this._initialStyles),this._endStyles&&(Bc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(n_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(n_(this._element,this._endStyles),this._endStyles=null),Bc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function A1(n){let e=null;return n.forEach((t,r)=>{(function iK(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Nj{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:mj(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class sK{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return oj(e,t)}getParentElement(e){return c1(e)}query(e,t,r){return aj(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,l=[]){const g={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(g.easing=s);const y=new Map,C=l.filter(k=>k instanceof Nj);(function u8(n,e){return 0===n||0===e})(r,i)&&C.forEach(k=>{k.currentSnapshot.forEach((B,Z)=>y.set(Z,B))});let S=function s8(n){return n.length?n[0]instanceof Map?n:n.map(e=>dj(e)):[]}(t).map(k=>kp(k));S=function c8(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,l)=>{r.has(l)||i.push(l),r.set(l,s)}),i.length)for(let s=1;s<e.length;s++){let l=e[s];i.forEach(h=>l.set(h,mj(n,h)))}}return e}(e,S,y);const N=function nK(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=A1(e[0]),e.length>1&&(r=A1(e[e.length-1]))):e instanceof Map&&(t=A1(e)),t||r?new rK(n,t,r):null}(e,S);return new Nj(e,S,g,N)}}let oK=(()=>{class n extends oF{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?lF(t):t;return Mj(this._renderer,null,r,"register",[i]),new aK(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class aK extends UH{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new lK(this._id,e,t||{},this._renderer)}}class lK{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Mj(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Mj(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Pj="@.disabled";let uK=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,l)=>{const h=l?.parentNode(s);h&&l.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(s);return C||(C=new kj("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,C)),C}const l=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const g=C=>{Array.isArray(C)?C.forEach(g):this.engine.registerTrigger(l,h,t,C.name,C)};return r.data.animation.forEach(g),new cK(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,h]=s;l(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(_A),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class kj{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Pj?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class cK extends kj{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Pj?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function dK(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),l="";return"@"!=s.charAt(0)&&([s,l]=function hK(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,l,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let fK=(()=>{class n extends _A{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie),c.LFG(d1),c.LFG(I1),c.LFG(c.z2F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Oj=[{provide:oF,useClass:oK},{provide:I1,useFactory:function pK(){return new P8}},{provide:_A,useClass:fK},{provide:c.FYo,useFactory:function gK(n,e,t){return new uK(n,e,t)},deps:[ki,_A,c.R0b]}],x1=[{provide:d1,useFactory:()=>new sK},{provide:c.QbO,useValue:"BrowserAnimations"},...Oj],Fj=[{provide:d1,useClass:lj},{provide:c.QbO,useValue:"NoopAnimations"},...Oj];let mK=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Fj:x1}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:x1,imports:[ta]}),n})(),_K=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[V4]}),n.\u0275inj=c.cJS({imports:[ta,U4,Xr.hO.initializeApp(_5_firebaseConfig),CH,m5,N4,LH,mK,o3.forRoot(),A3,t0,rl]}),n})();id().bootstrapModule(_K).catch(n=>console.error(n))},9751:(Et,xe,U)=>{U.d(xe,{y:()=>Ce});var c=U(930),ee=U(727),L=U(8822),ue=U(9635),le=U(2416),ie=U(576),we=U(2806);let Ce=(()=>{class Y{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const Qe=new Y;return Qe.source=this,Qe.operator=Se,Qe}subscribe(Se,Qe,ut){const _e=function G(Y){return Y&&Y instanceof c.Lv||function z(Y){return Y&&(0,ie.m)(Y.next)&&(0,ie.m)(Y.error)&&(0,ie.m)(Y.complete)}(Y)&&(0,ee.Nn)(Y)}(Se)?Se:new c.Hp(Se,Qe,ut);return(0,we.x)(()=>{const{operator:ke,source:Oe}=this;_e.add(ke?ke.call(_e,Oe):Oe?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Se){try{return this._subscribe(Se)}catch(Qe){Se.error(Qe)}}forEach(Se,Qe){return new(Qe=me(Qe))((ut,_e)=>{const ke=new c.Hp({next:Oe=>{try{Se(Oe)}catch(Ge){_e(Ge),ke.unsubscribe()}},error:_e,complete:ut});this.subscribe(ke)})}_subscribe(Se){var Qe;return null===(Qe=this.source)||void 0===Qe?void 0:Qe.subscribe(Se)}[L.L](){return this}pipe(...Se){return(0,ue.U)(Se)(this)}toPromise(Se){return new(Se=me(Se))((Qe,ut)=>{let _e;this.subscribe(ke=>_e=ke,ke=>ut(ke),()=>Qe(_e))})}}return Y.create=ze=>new Y(ze),Y})();function me(Y){var ze;return null!==(ze=Y??le.v.Promise)&&void 0!==ze?ze:Promise}},7579:(Et,xe,U)=>{U.d(xe,{x:()=>we});var c=U(9751),ee=U(727);const ue=(0,U(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=U(8737),ie=U(2806);let we=(()=>{class me extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Y=new Ce(this,this);return Y.operator=G,Y}_throwIfClosed(){if(this.closed)throw new ue}next(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(G)}})}error(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Y}=this;for(;Y.length;)Y.shift().error(G)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Y,isStopped:ze,observers:Se}=this;return Y||ze?ee.Lc:(this.currentObservers=null,Se.push(G),new ee.w0(()=>{this.currentObservers=null,(0,le.P)(Se,G)}))}_checkFinalizedStatuses(G){const{hasError:Y,thrownError:ze,isStopped:Se}=this;Y?G.error(ze):Se&&G.complete()}asObservable(){const G=new c.y;return G.source=this,G}}return me.create=(z,G)=>new Ce(z,G),me})();class Ce extends we{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,Y;null===(Y=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Y||Y.call(G,z)}error(z){var G,Y;null===(Y=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Y||Y.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,Y;return null!==(Y=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==Y?Y:ee.Lc}}},930:(Et,xe,U)=>{U.d(xe,{Hp:()=>ut,Lv:()=>Y});var c=U(576),ee=U(727),L=U(2416),ue=U(7849),le=U(5032);const ie=me("C",void 0,void 0);function me(Fe,be,Te){return{kind:Fe,value:be,error:Te}}var z=U(3410),G=U(2806);class Y extends ee.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,ee.Nn)(be)&&be.add(this)):this.destination=Ge}static create(be,Te,Ke){return new ut(be,Te,Ke)}next(be){this.isStopped?Oe(function Ce(Fe){return me("N",Fe,void 0)}(be),this):this._next(be)}error(be){this.isStopped?Oe(function we(Fe){return me("E",void 0,Fe)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?Oe(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Se(Fe,be){return ze.call(Fe,be)}class Qe{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Te}=this;if(Te.next)try{Te.next(be)}catch(Ke){_e(Ke)}}error(be){const{partialObserver:Te}=this;if(Te.error)try{Te.error(be)}catch(Ke){_e(Ke)}else _e(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Te){_e(Te)}}}class ut extends Y{constructor(be,Te,Ke){let Ue;if(super(),(0,c.m)(be)||!be)Ue={next:be??void 0,error:Te??void 0,complete:Ke??void 0};else{let ot;this&&L.v.useDeprecatedNextContext?(ot=Object.create(be),ot.unsubscribe=()=>this.unsubscribe(),Ue={next:be.next&&Se(be.next,ot),error:be.error&&Se(be.error,ot),complete:be.complete&&Se(be.complete,ot)}):Ue=be}this.destination=new Qe(Ue)}}function _e(Fe){L.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Fe):(0,ue.h)(Fe)}function Oe(Fe,be){const{onStoppedNotification:Te}=L.v;Te&&z.z.setTimeout(()=>Te(Fe,be))}const Ge={closed:!0,next:le.Z,error:function ke(Fe){throw Fe},complete:le.Z}},727:(Et,xe,U)=>{U.d(xe,{Lc:()=>ie,w0:()=>le,Nn:()=>we});var c=U(576);const L=(0,U(3888).d)(me=>function(G){me(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Y,ze)=>`${ze+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ue=U(8737);class le{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Se of G)Se.remove(this);else G.remove(this);const{initialTeardown:Y}=this;if((0,c.m)(Y))try{Y()}catch(Se){z=Se instanceof L?Se.errors:[Se]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Se of ze)try{Ce(Se)}catch(Qe){z=z??[],Qe instanceof L?z=[...z,...Qe.errors]:z.push(Qe)}}if(z)throw new L(z)}}add(z){var G;if(z&&z!==this)if(this.closed)Ce(z);else{if(z instanceof le){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,ue.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,ue.P)(G,z),z instanceof le&&z._removeParent(this)}}le.EMPTY=(()=>{const me=new le;return me.closed=!0,me})();const ie=le.EMPTY;function we(me){return me instanceof le||me&&"closed"in me&&(0,c.m)(me.remove)&&(0,c.m)(me.add)&&(0,c.m)(me.unsubscribe)}function Ce(me){(0,c.m)(me)?me():me.unsubscribe()}},2416:(Et,xe,U)=>{U.d(xe,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Et,xe,U)=>{U.d(xe,{E:()=>ee});const ee=new(U(9751).y)(le=>le.complete())},8996:(Et,xe,U)=>{U.d(xe,{D:()=>be});var c=U(8421),ee=U(5363),L=U(9468),ie=U(9751),Ce=U(2202),me=U(576),z=U(9672);function Y(Te,Ke){if(!Te)throw new Error("Iterable cannot be null");return new ie.y(Ue=>{(0,z.f)(Ue,Ke,()=>{const ot=Te[Symbol.asyncIterator]();(0,z.f)(Ue,Ke,()=>{ot.next().then(ae=>{ae.done?Ue.complete():Ue.next(ae.value)})},0,!0)})})}var ze=U(3670),Se=U(8239),Qe=U(1144),ut=U(6495),_e=U(2206),ke=U(4532),Oe=U(3260);function be(Te,Ke){return Ke?function Fe(Te,Ke){if(null!=Te){if((0,ze.c)(Te))return function ue(Te,Ke){return(0,c.Xf)(Te).pipe((0,L.R)(Ke),(0,ee.Q)(Ke))}(Te,Ke);if((0,Qe.z)(Te))return function we(Te,Ke){return new ie.y(Ue=>{let ot=0;return Ke.schedule(function(){ot===Te.length?Ue.complete():(Ue.next(Te[ot++]),Ue.closed||this.schedule())})})}(Te,Ke);if((0,Se.t)(Te))return function le(Te,Ke){return(0,c.Xf)(Te).pipe((0,L.R)(Ke),(0,ee.Q)(Ke))}(Te,Ke);if((0,_e.D)(Te))return Y(Te,Ke);if((0,ut.T)(Te))return function G(Te,Ke){return new ie.y(Ue=>{let ot;return(0,z.f)(Ue,Ke,()=>{ot=Te[Ce.h](),(0,z.f)(Ue,Ke,()=>{let ae,At;try{({value:ae,done:At}=ot.next())}catch(nt){return void Ue.error(nt)}At?Ue.complete():Ue.next(ae)},0,!0)}),()=>(0,me.m)(ot?.return)&&ot.return()})}(Te,Ke);if((0,Oe.L)(Te))return function Ge(Te,Ke){return Y((0,Oe.Q)(Te),Ke)}(Te,Ke)}throw(0,ke.z)(Te)}(Te,Ke):(0,c.Xf)(Te)}},8421:(Et,xe,U)=>{U.d(xe,{Xf:()=>ze});var c=U(7582),ee=U(1144),L=U(8239),ue=U(9751),le=U(3670),ie=U(2206),we=U(4532),Ce=U(6495),me=U(3260),z=U(576),G=U(7849),Y=U(8822);function ze(Fe){if(Fe instanceof ue.y)return Fe;if(null!=Fe){if((0,le.c)(Fe))return function Se(Fe){return new ue.y(be=>{const Te=Fe[Y.L]();if((0,z.m)(Te.subscribe))return Te.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,ee.z)(Fe))return function Qe(Fe){return new ue.y(be=>{for(let Te=0;Te<Fe.length&&!be.closed;Te++)be.next(Fe[Te]);be.complete()})}(Fe);if((0,L.t)(Fe))return function ut(Fe){return new ue.y(be=>{Fe.then(Te=>{be.closed||(be.next(Te),be.complete())},Te=>be.error(Te)).then(null,G.h)})}(Fe);if((0,ie.D)(Fe))return ke(Fe);if((0,Ce.T)(Fe))return function _e(Fe){return new ue.y(be=>{for(const Te of Fe)if(be.next(Te),be.closed)return;be.complete()})}(Fe);if((0,me.L)(Fe))return function Oe(Fe){return ke((0,me.Q)(Fe))}(Fe)}throw(0,we.z)(Fe)}function ke(Fe){return new ue.y(be=>{(function Ge(Fe,be){var Te,Ke,Ue,ot;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Te=(0,c.KL)(Fe);!(Ke=yield Te.next()).done;)if(be.next(Ke.value),be.closed)return}catch(ae){Ue={error:ae}}finally{try{Ke&&!Ke.done&&(ot=Te.return)&&(yield ot.call(Te))}finally{if(Ue)throw Ue.error}}be.complete()})})(Fe,be).catch(Te=>be.error(Te))})}},6451:(Et,xe,U)=>{U.d(xe,{T:()=>ie});var c=U(8189),ee=U(8421),L=U(515),ue=U(7669),le=U(8996);function ie(...we){const Ce=(0,ue.yG)(we),me=(0,ue._6)(we,1/0),z=we;return z.length?1===z.length?(0,ee.Xf)(z[0]):(0,c.J)(me)((0,le.D)(z,Ce)):L.E}},5403:(Et,xe,U)=>{U.d(xe,{x:()=>ee});var c=U(930);function ee(ue,le,ie,we,Ce){return new L(ue,le,ie,we,Ce)}class L extends c.Lv{constructor(le,ie,we,Ce,me,z){super(le),this.onFinalize=me,this.shouldUnsubscribe=z,this._next=ie?function(G){try{ie(G)}catch(Y){le.error(Y)}}:super._next,this._error=Ce?function(G){try{Ce(G)}catch(Y){le.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(G){le.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(Et,xe,U)=>{U.d(xe,{U:()=>L});var c=U(4482),ee=U(5403);function L(ue,le){return(0,c.e)((ie,we)=>{let Ce=0;ie.subscribe((0,ee.x)(we,me=>{we.next(ue.call(le,me,Ce++))}))})}},8189:(Et,xe,U)=>{U.d(xe,{J:()=>L});var c=U(5577),ee=U(4671);function L(ue=1/0){return(0,c.z)(ee.y,ue)}},5577:(Et,xe,U)=>{U.d(xe,{z:()=>Ce});var c=U(4004),ee=U(8421),L=U(4482),ue=U(9672),le=U(5403),we=U(576);function Ce(me,z,G=1/0){return(0,we.m)(z)?Ce((Y,ze)=>(0,c.U)((Se,Qe)=>z(Y,Se,ze,Qe))((0,ee.Xf)(me(Y,ze))),G):("number"==typeof z&&(G=z),(0,L.e)((Y,ze)=>function ie(me,z,G,Y,ze,Se,Qe,ut){const _e=[];let ke=0,Oe=0,Ge=!1;const Fe=()=>{Ge&&!_e.length&&!ke&&z.complete()},be=Ke=>ke<Y?Te(Ke):_e.push(Ke),Te=Ke=>{Se&&z.next(Ke),ke++;let Ue=!1;(0,ee.Xf)(G(Ke,Oe++)).subscribe((0,le.x)(z,ot=>{ze?.(ot),Se?be(ot):z.next(ot)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(ke--;_e.length&&ke<Y;){const ot=_e.shift();Qe?(0,ue.f)(z,Qe,()=>Te(ot)):Te(ot)}Fe()}catch(ot){z.error(ot)}}))};return me.subscribe((0,le.x)(z,be,()=>{Ge=!0,Fe()})),()=>{ut?.()}}(Y,ze,me,G)))}},5363:(Et,xe,U)=>{U.d(xe,{Q:()=>ue});var c=U(9672),ee=U(4482),L=U(5403);function ue(le,ie=0){return(0,ee.e)((we,Ce)=>{we.subscribe((0,L.x)(Ce,me=>(0,c.f)(Ce,le,()=>Ce.next(me),ie),()=>(0,c.f)(Ce,le,()=>Ce.complete(),ie),me=>(0,c.f)(Ce,le,()=>Ce.error(me),ie)))})}},3099:(Et,xe,U)=>{U.d(xe,{B:()=>le});var c=U(8421),ee=U(7579),L=U(930),ue=U(4482);function le(we={}){const{connector:Ce=(()=>new ee.x),resetOnError:me=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=we;return Y=>{let ze,Se,Qe,ut=0,_e=!1,ke=!1;const Oe=()=>{Se?.unsubscribe(),Se=void 0},Ge=()=>{Oe(),ze=Qe=void 0,_e=ke=!1},Fe=()=>{const be=ze;Ge(),be?.unsubscribe()};return(0,ue.e)((be,Te)=>{ut++,!ke&&!_e&&Oe();const Ke=Qe=Qe??Ce();Te.add(()=>{ut--,0===ut&&!ke&&!_e&&(Se=ie(Fe,G))}),Ke.subscribe(Te),!ze&&ut>0&&(ze=new L.Hp({next:Ue=>Ke.next(Ue),error:Ue=>{ke=!0,Oe(),Se=ie(Ge,me,Ue),Ke.error(Ue)},complete:()=>{_e=!0,Oe(),Se=ie(Ge,z),Ke.complete()}}),(0,c.Xf)(be).subscribe(ze))})(Y)}}function ie(we,Ce,...me){if(!0===Ce)return void we();if(!1===Ce)return;const z=new L.Hp({next:()=>{z.unsubscribe(),we()}});return(0,c.Xf)(Ce(...me)).subscribe(z)}},9468:(Et,xe,U)=>{U.d(xe,{R:()=>ee});var c=U(4482);function ee(L,ue=0){return(0,c.e)((le,ie)=>{ie.add(L.schedule(()=>le.subscribe(ie),ue))})}},8505:(Et,xe,U)=>{U.d(xe,{b:()=>le});var c=U(576),ee=U(4482),L=U(5403),ue=U(4671);function le(ie,we,Ce){const me=(0,c.m)(ie)||we||Ce?{next:ie,error:we,complete:Ce}:ie;return me?(0,ee.e)((z,G)=>{var Y;null===(Y=me.subscribe)||void 0===Y||Y.call(me);let ze=!0;z.subscribe((0,L.x)(G,Se=>{var Qe;null===(Qe=me.next)||void 0===Qe||Qe.call(me,Se),G.next(Se)},()=>{var Se;ze=!1,null===(Se=me.complete)||void 0===Se||Se.call(me),G.complete()},Se=>{var Qe;ze=!1,null===(Qe=me.error)||void 0===Qe||Qe.call(me,Se),G.error(Se)},()=>{var Se,Qe;ze&&(null===(Se=me.unsubscribe)||void 0===Se||Se.call(me)),null===(Qe=me.finalize)||void 0===Qe||Qe.call(me)}))}):ue.y}},4408:(Et,xe,U)=>{U.d(xe,{o:()=>le});var c=U(727);class ee extends c.w0{constructor(we,Ce){super()}schedule(we,Ce=0){return this}}const L={setInterval(ie,we,...Ce){const{delegate:me}=L;return me?.setInterval?me.setInterval(ie,we,...Ce):setInterval(ie,we,...Ce)},clearInterval(ie){const{delegate:we}=L;return(we?.clearInterval||clearInterval)(ie)},delegate:void 0};var ue=U(8737);class le extends ee{constructor(we,Ce){super(we,Ce),this.scheduler=we,this.work=Ce,this.pending=!1}schedule(we,Ce=0){var me;if(this.closed)return this;this.state=we;const z=this.id,G=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(G,z,Ce)),this.pending=!0,this.delay=Ce,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(G,this.id,Ce),this}requestAsyncId(we,Ce,me=0){return L.setInterval(we.flush.bind(we,this),me)}recycleAsyncId(we,Ce,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return Ce;null!=Ce&&L.clearInterval(Ce)}execute(we,Ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(we,Ce);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,Ce){let z,me=!1;try{this.work(we)}catch(G){me=!0,z=G||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:we,scheduler:Ce}=this,{actions:me}=Ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(me,this),null!=we&&(this.id=this.recycleAsyncId(Ce,we,null)),this.delay=null,super.unsubscribe()}}}},7565:(Et,xe,U)=>{U.d(xe,{v:()=>L});var c=U(6063);class ee{constructor(le,ie=ee.now){this.schedulerActionCtor=le,this.now=ie}schedule(le,ie=0,we){return new this.schedulerActionCtor(this,le).schedule(we,ie)}}ee.now=c.l.now;class L extends ee{constructor(le,ie=ee.now){super(le,ie),this.actions=[],this._active=!1}flush(le){const{actions:ie}=this;if(this._active)return void ie.push(le);let we;this._active=!0;do{if(we=le.execute(le.state,le.delay))break}while(le=ie.shift());if(this._active=!1,we){for(;le=ie.shift();)le.unsubscribe();throw we}}}},4986:(Et,xe,U)=>{U.d(xe,{z:()=>L});var c=U(4408);const L=new(U(7565).v)(c.o)},6063:(Et,xe,U)=>{U.d(xe,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(Et,xe,U)=>{U.d(xe,{z:()=>c});const c={setTimeout(ee,L,...ue){const{delegate:le}=c;return le?.setTimeout?le.setTimeout(ee,L,...ue):setTimeout(ee,L,...ue)},clearTimeout(ee){const{delegate:L}=c;return(L?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(Et,xe,U)=>{U.d(xe,{h:()=>ee});const ee=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Et,xe,U)=>{U.d(xe,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Et,xe,U)=>{U.d(xe,{_6:()=>ie,jO:()=>ue,yG:()=>le});var c=U(576);function L(we){return we[we.length-1]}function ue(we){return(0,c.m)(L(we))?we.pop():void 0}function le(we){return function ee(we){return we&&(0,c.m)(we.schedule)}(L(we))?we.pop():void 0}function ie(we,Ce){return"number"==typeof L(we)?we.pop():Ce}},8737:(Et,xe,U)=>{function c(ee,L){if(ee){const ue=ee.indexOf(L);0<=ue&&ee.splice(ue,1)}}U.d(xe,{P:()=>c})},3888:(Et,xe,U)=>{function c(ee){const ue=ee(le=>{Error.call(le),le.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}U.d(xe,{d:()=>c})},2806:(Et,xe,U)=>{U.d(xe,{O:()=>ue,x:()=>L});var c=U(2416);let ee=null;function L(le){if(c.v.useDeprecatedSynchronousErrorHandling){const ie=!ee;if(ie&&(ee={errorThrown:!1,error:null}),le(),ie){const{errorThrown:we,error:Ce}=ee;if(ee=null,we)throw Ce}}else le()}function ue(le){c.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=le)}},9672:(Et,xe,U)=>{function c(ee,L,ue,le=0,ie=!1){const we=L.schedule(function(){ue(),ie?ee.add(this.schedule(null,le)):this.unsubscribe()},le);if(ee.add(we),!ie)return we}U.d(xe,{f:()=>c})},4671:(Et,xe,U)=>{function c(ee){return ee}U.d(xe,{y:()=>c})},1144:(Et,xe,U)=>{U.d(xe,{z:()=>c});const c=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Et,xe,U)=>{U.d(xe,{D:()=>ee});var c=U(576);function ee(L){return Symbol.asyncIterator&&(0,c.m)(L?.[Symbol.asyncIterator])}},576:(Et,xe,U)=>{function c(ee){return"function"==typeof ee}U.d(xe,{m:()=>c})},3670:(Et,xe,U)=>{U.d(xe,{c:()=>L});var c=U(8822),ee=U(576);function L(ue){return(0,ee.m)(ue[c.L])}},6495:(Et,xe,U)=>{U.d(xe,{T:()=>L});var c=U(2202),ee=U(576);function L(ue){return(0,ee.m)(ue?.[c.h])}},8239:(Et,xe,U)=>{U.d(xe,{t:()=>ee});var c=U(576);function ee(L){return(0,c.m)(L?.then)}},3260:(Et,xe,U)=>{U.d(xe,{L:()=>ue,Q:()=>L});var c=U(7582),ee=U(576);function L(le){return(0,c.FC)(this,arguments,function*(){const we=le.getReader();try{for(;;){const{value:Ce,done:me}=yield(0,c.qq)(we.read());if(me)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(Ce)}}finally{we.releaseLock()}})}function ue(le){return(0,ee.m)(le?.getReader)}},4482:(Et,xe,U)=>{U.d(xe,{A:()=>ee,e:()=>L});var c=U(576);function ee(ue){return(0,c.m)(ue?.lift)}function L(ue){return le=>{if(ee(le))return le.lift(function(ie){try{return ue(ie,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Et,xe,U)=>{function c(){}U.d(xe,{Z:()=>c})},9635:(Et,xe,U)=>{U.d(xe,{U:()=>L,z:()=>ee});var c=U(4671);function ee(...ue){return L(ue)}function L(ue){return 0===ue.length?c.y:1===ue.length?ue[0]:function(ie){return ue.reduce((we,Ce)=>Ce(we),ie)}}},7849:(Et,xe,U)=>{U.d(xe,{h:()=>L});var c=U(2416),ee=U(3410);function L(ue){ee.z.setTimeout(()=>{const{onUnhandledError:le}=c.v;if(!le)throw ue;le(ue)})}},4532:(Et,xe,U)=>{function c(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(xe,{z:()=>c})},4650:(Et,xe,U)=>{U.d(xe,{$8M:()=>Ka,$WT:()=>Dr,$Z:()=>IC,AFp:()=>W0,ALo:()=>Ey,AaK:()=>Ce,AsE:()=>qg,BQk:()=>$g,CHM:()=>Dl,CRH:()=>pm,CZH:()=>Ry,CqO:()=>Ww,D6c:()=>Sc,EJc:()=>K0,EiD:()=>eo,EpF:()=>qw,F4k:()=>rb,FYo:()=>uw,FiY:()=>Hl,GfV:()=>nC,Gpc:()=>G,JOm:()=>bt,JVY:()=>E_,JZr:()=>ut,KtG:()=>Sl,L6k:()=>I_,LAX:()=>Cr,LFG:()=>dn,LSH:()=>Nd,Lbi:()=>FR,Lck:()=>sR,MAs:()=>zw,MGl:()=>ty,MMx:()=>sm,NdJ:()=>Kw,OlP:()=>tn,Oqu:()=>ly,P3R:()=>_f,PXZ:()=>rE,Q6J:()=>K_,QGY:()=>Hg,QbO:()=>LR,Qsj:()=>SA,R0b:()=>Ss,RDi:()=>v_,Rgc:()=>ll,SBq:()=>Cf,Sil:()=>UT,Suo:()=>U0,TTD:()=>qc,TgZ:()=>jg,Tol:()=>ay,Udp:()=>pb,VKq:()=>cT,X6Q:()=>KT,XFs:()=>vt,Xpm:()=>Yi,Xts:()=>Xv,Y36:()=>Af,YKP:()=>sT,YNc:()=>Gw,Yjl:()=>zt,Yz7:()=>pt,Z0I:()=>Nn,ZZ4:()=>Am,_Bn:()=>T0,_UZ:()=>eb,_Vd:()=>If,_c5:()=>As,_uU:()=>vb,aQg:()=>gE,c2e:()=>My,cJS:()=>mt,cg1:()=>dy,d8E:()=>f0,dDg:()=>uh,dqk:()=>an,eBb:()=>C_,eFA:()=>Ta,eJc:()=>V0,ekj:()=>t0,eoX:()=>By,f3M:()=>qn,g9A:()=>np,h0i:()=>Kf,hGG:()=>Wy,hij:()=>il,iGM:()=>by,ifc:()=>Ee,ip1:()=>OT,jDz:()=>al,kL8:()=>p0,lG2:()=>Dt,lqb:()=>kd,lri:()=>Vy,mCW:()=>nu,n5z:()=>qu,oAB:()=>re,oJD:()=>yg,oxw:()=>Zw,pB0:()=>ff,q3G:()=>On,q4F:()=>rC,qLn:()=>Ig,qOj:()=>z_,qZA:()=>Z_,qzn:()=>Ci,rWj:()=>Cm,s9C:()=>ey,sBO:()=>GR,s_b:()=>Iy,soG:()=>Py,tb:()=>jy,tp0:()=>yt,uIk:()=>JC,vHH:()=>_e,vpe:()=>no,wAp:()=>Rt,xi3:()=>pT,xp6:()=>pC,ynx:()=>Y_,z2F:()=>Gy,z3N:()=>Br,zSh:()=>dc,zs3:()=>Tf});var c=U(7579),ee=U(727),L=U(9751),ue=U(6451),le=U(3099);function ie(o){for(let a in o)if(o[a]===ie)return a;throw Error("Could not find renamed property on target object.")}function we(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function Ce(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(Ce).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function me(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const z=ie({__forward_ref__:ie});function G(o){return o.__forward_ref__=G,o.toString=function(){return Ce(this())},o}function Y(o){return ze(o)?o():o}function ze(o){return"function"==typeof o&&o.hasOwnProperty(z)&&o.__forward_ref__===G}function Se(o){return o&&!!o.\u0275providers}const ut="https://g.co/ng/security#xss";class _e extends Error{constructor(a,u){super(ke(a,u)),this.code=a}}function ke(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}function Oe(o){return"string"==typeof o?o:null==o?"":String(o)}function Ke(o,a){throw new _e(-201,!1)}function ye(o,a){null==o&&function ce(o,a,u,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${u} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function pt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function mt(o){return{providers:o.providers||[],imports:o.imports||[]}}function Qt(o){return Tn(o,zn)||Tn(o,mi)}function Nn(o){return null!==Qt(o)}function Tn(o,a){return o.hasOwnProperty(a)?o[a]:null}function mr(o){return o&&(o.hasOwnProperty(zr)||o.hasOwnProperty(Fr))?o[zr]:null}const zn=ie({\u0275prov:ie}),zr=ie({\u0275inj:ie}),mi=ie({ngInjectableDef:ie}),Fr=ie({ngInjectorDef:ie});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let _i;function Lr(o){const a=_i;return _i=o,a}function ri(o,a,u){const d=Qt(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&vt.Optional?null:void 0!==a?a:void Ke(Ce(o))}const an=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Si={},yi="__NG_DI_FLAG__",_r="ngTempTokenPath",qr="ngTokenPath",Bn=/\n/gm,ii="\u0275",mn="__source";let Ls;function Jt(o){const a=Ls;return Ls=o,a}function vs(o,a=vt.Default){if(void 0===Ls)throw new _e(-203,!1);return null===Ls?ri(o,void 0,a):Ls.get(o,a&vt.Optional?null:void 0,a)}function dn(o,a=vt.Default){return(function $c(){return _i}()||vs)(Y(o),a)}function qn(o,a=vt.Default){return dn(o,sr(a))}function sr(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function Ki(o){const a=[];for(let u=0;u<o.length;u++){const d=Y(o[u]);if(Array.isArray(d)){if(0===d.length)throw new _e(900,!1);let f,_=vt.Default;for(let w=0;w<d.length;w++){const b=d[w],D=Zi(b);"number"==typeof D?-1===D?f=b.token:_|=D:f=b}a.push(dn(f,_))}else a.push(dn(d))}return a}function xn(o,a){return o[yi]=a,o.prototype[yi]=a,o}function Zi(o){return o[yi]}function j(o){return{toString:o}.toString()}var K=(()=>((K=K||{})[K.OnPush=0]="OnPush",K[K.Default=1]="Default",K))(),Ee=(()=>{return(o=Ee||(Ee={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Ee;var o})();const ne={},Ve=[],xt=ie({\u0275cmp:ie}),rn=ie({\u0275dir:ie}),Yn=ie({\u0275pipe:ie}),Mn=ie({\u0275mod:ie}),gn=ie({\u0275fac:ie}),Yt=ie({__NG_ELEMENT_ID__:ie});let Wr=0;function Yi(o){return j(()=>{const a=yu(o),u={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===K.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,data:o.data||{},encapsulation:o.encapsulation||Ee.Emulated,id:"c"+Wr++,styles:o.styles||Ve,_:null,schemas:o.schemas||null,tView:null};Fp(u);const d=o.dependencies;return u.directiveDefs=Oa(d,!1),u.pipeDefs=Oa(d,!0),u})}function _l(o){return wt(o)||un(o)}function pe(o){return null!==o}function re(o){return j(()=>({type:o.type,bootstrap:o.bootstrap||Ve,declarations:o.declarations||Ve,imports:o.imports||Ve,exports:o.exports||Ve,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function _t(o,a){if(null==o)return ne;const u={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),u[f]=d,a&&(a[f]=_)}return u}function Dt(o){return j(()=>{const a=yu(o);return Fp(a),a})}function zt(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function wt(o){return o[xt]||null}function un(o){return o[rn]||null}function sn(o){return o[Yn]||null}function Dr(o){const a=wt(o)||un(o)||sn(o);return null!==a&&a.standalone}function or(o,a){const u=o[Mn]||null;if(!u&&!0===a)throw new Error(`Type ${Ce(o)} does not have '\u0275mod' property.`);return u}function yu(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,exportAs:o.exportAs||null,standalone:!0===o.standalone,selectors:o.selectors||Ve,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_t(o.inputs,a),outputs:_t(o.outputs)}}function Fp(o){o.features?.forEach(a=>a(o))}function Oa(o,a){if(!o)return null;const u=a?sn:_l;return()=>("function"==typeof o?o():o).map(d=>u(d)).filter(pe)}const xi=0,Je=1,Vt=2,Rn=3,Ri=4,_n=5,ar=6,go=7,Wn=8,yl=9,oi=10,Ht=11,vl=12,Vo=13,Us=14,Bo=15,Qn=16,Fa=17,Vs=18,Qi=19,mo=20,Ur=21,Dn=22,wl=1,Hc=2,La=7,_o=8,jo=9,Sr=10;function wi(o){return Array.isArray(o)&&"object"==typeof o[wl]}function Ei(o){return Array.isArray(o)&&!0===o[wl]}function El(o){return 0!=(4&o.flags)}function Ua(o){return o.componentOffset>-1}function Gc(o){return 1==(1&o.flags)}function Ni(o){return!!o.template}function wu(o){return 0!=(256&o[Vt])}function Es(o,a){return o.hasOwnProperty(gn)?o[gn]:null}class $o{constructor(a,u,d){this.previousValue=a,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function qc(){return Il}function Il(o){return o.type.prototype.ngOnChanges&&(o.setInput=Wc),Mh}function Mh(){const o=jp(this),a=o?.current;if(a){const u=o.previous;if(u===ne)o.previous=a;else for(let d in a)u[d]=a[d];o.current=null,this.ngOnChanges(a)}}function Wc(o,a,u,d){const f=this.declaredInputs[u],_=jp(o)||function Cu(o,a){return o[yo]=a}(o,{previous:ne,current:null}),w=_.current||(_.current={}),b=_.previous,D=b[f];w[f]=new $o(D&&D.currentValue,a,b===ne),o[d]=a}qc.ngInherit=!0;const yo="__ngSimpleChanges__";function jp(o){return o[yo]||null}const ai=function(o,a,u){};function Ar(o){for(;Array.isArray(o);)o=o[xi];return o}function $s(o,a){return Ar(a[o])}function xr(o,a){return Ar(a[o.index])}function kh(o,a){return o.data[a]}function Yr(o,a){return o[a]}function yr(o,a){const u=a[o];return wi(u)?u:u[xi]}function Hs(o){return 64==(64&o[Vt])}function wo(o,a){return null==a?null:o[a]}function ja(o){o[Vs]=0}function bl(o,a){o[_n]+=a;let u=o,d=o[Rn];for(;null!==d&&(1===a&&1===u[_n]||-1===a&&0===u[_n]);)d[_n]+=a,u=d,d=d[Rn]}const Lt={lFrame:Yc(null),bindingsEnabled:!0};function Su(){return Lt.bindingsEnabled}function ge(){return Lt.lFrame.lView}function Bt(){return Lt.lFrame.tView}function Dl(o){return Lt.lFrame.contextLView=o,o[Wn]}function Sl(o){return Lt.lFrame.contextLView=null,o}function vr(){let o=Ho();for(;null!==o&&64===o.type;)o=o.parent;return o}function Ho(){return Lt.lFrame.currentTNode}function li(o,a){const u=Lt.lFrame;u.currentTNode=o,u.isParent=a}function Vh(){return Lt.lFrame.isParent}function xu(){Lt.lFrame.isParent=!1}function lr(){const o=Lt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Go(){return Lt.lFrame.bindingIndex++}function Pi(o){const a=Lt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function Ru(o,a){const u=Lt.lFrame;u.bindingIndex=u.bindingRootIndex=o,ur(a)}function ur(o){Lt.lFrame.currentDirectiveIndex=o}function $a(o){const a=Lt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Zc(){return Lt.lFrame.currentQueryIndex}function Nu(o){Lt.lFrame.currentQueryIndex=o}function jh(o){const a=o[Je];return 2===a.type?a.declTNode:1===a.type?o[ar]:null}function Mu(o,a,u){if(u&vt.SkipSelf){let f=a,_=o;for(;!(f=f.parent,null!==f||u&vt.Host||(f=jh(_),null===f||(_=_[Bo],10&f.type))););if(null===f)return!1;a=f,o=_}const d=Lt.lFrame=Rl();return d.currentTNode=a,d.lView=o,!0}function Pu(o){const a=Rl(),u=o[Je];Lt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function Rl(){const o=Lt.lFrame,a=null===o?null:o.child;return null===a?Yc(o):a}function Yc(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Nl(){const o=Lt.lFrame;return Lt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const $h=Nl;function ku(){const o=Nl();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Vr(){return Lt.lFrame.selectedIndex}function zs(o){Lt.lFrame.selectedIndex=o}function Pn(){const o=Lt.lFrame;return kh(o.tView,o.selectedIndex)}function Lu(o,a){for(let u=a.directiveStart,d=a.directiveEnd;u<d;u++){const _=o.data[u].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:b,ngAfterViewInit:D,ngAfterViewChecked:R,ngOnDestroy:P}=_;w&&(o.contentHooks??(o.contentHooks=[])).push(-u,w),b&&((o.contentHooks??(o.contentHooks=[])).push(u,b),(o.contentCheckHooks??(o.contentCheckHooks=[])).push(u,b)),D&&(o.viewHooks??(o.viewHooks=[])).push(-u,D),R&&((o.viewHooks??(o.viewHooks=[])).push(u,R),(o.viewCheckHooks??(o.viewCheckHooks=[])).push(u,R)),null!=P&&(o.destroyHooks??(o.destroyHooks=[])).push(u,P)}}function Qc(o,a,u){Xc(o,a,3,u)}function Jc(o,a,u,d){(3&o[Vt])===u&&Xc(o,a,u,d)}function Gh(o,a){let u=o[Vt];(3&u)===a&&(u&=2047,u+=1,o[Vt]=u)}function Xc(o,a,u,d){const _=d??-1,w=a.length-1;let b=0;for(let D=void 0!==d?65535&o[Vs]:0;D<w;D++)if("number"==typeof a[D+1]){if(b=a[D],null!=d&&b>=d)break}else a[D]<0&&(o[Vs]+=65536),(b<_||-1==_)&&(Ha(o,u,a,D),o[Vs]=(4294901760&o[Vs])+D+2),D++}function Ha(o,a,u,d){const f=u[d]<0,_=u[d+1],b=o[f?-u[d]:u[d]];if(f){if(o[Vt]>>11<o[Vs]>>16&&(3&o[Vt])===a){o[Vt]+=2048,ai(4,b,_);try{_.call(b)}finally{ai(5,b,_)}}}else{ai(4,b,_);try{_.call(b)}finally{ai(5,b,_)}}}const Ga=-1;class qs{constructor(a,u,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function za(o,a,u){let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const _=u[d++],w=u[d++],b=u[d++];o.setAttribute(a,w,b,_)}else{const _=f,w=u[++d];Ko(_)?o.setProperty(a,_,w):o.setAttribute(a,_,w),d++}}return d}function ed(o){return 3===o||4===o||6===o}function Ko(o){return 64===o.charCodeAt(0)}function Zo(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?u=f:0===u||Bu(o,u,f,null,-1===u||2===u?a[++d]:null)}}return o}function Bu(o,a,u,d,f){let _=0,w=o.length;if(-1===a)w=-1;else for(;_<o.length;){const b=o[_++];if("number"==typeof b){if(b===a){w=-1;break}if(b>a){w=_-1;break}}}for(;_<o.length;){const b=o[_];if("number"==typeof b)break;if(b===u){if(null===d)return void(null!==f&&(o[_+1]=f));if(d===o[_+1])return void(o[_+2]=f)}_++,null!==d&&_++,null!==f&&_++}-1!==w&&(o.splice(w,0,a),_=w+1),o.splice(_++,0,u),null!==d&&o.splice(_++,0,d),null!==f&&o.splice(_++,0,f)}function Yo(o){return o!==Ga}function Eo(o){return 32767&o}function Qo(o,a){let u=function zh(o){return o>>16}(o),d=a;for(;u>0;)d=d[Bo],u--;return d}let ju=!0;function Pl(o){const a=ju;return ju=o,a}const $u=255,qh=5;let Jo=0;const ki={};function td(o,a){const u=Wa(o,a);if(-1!==u)return u;const d=a[Je];d.firstCreatePass&&(o.injectorIndex=a.length,qa(d.data,o),qa(a,null),qa(d.blueprint,null));const f=Wh(o,a),_=o.injectorIndex;if(Yo(f)){const w=Eo(f),b=Qo(f,a),D=b[Je].data;for(let R=0;R<8;R++)a[_+R]=b[w+R]|D[w+R]}return a[_+8]=f,_}function qa(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Wa(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Wh(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,d=null,f=a;for(;null!==f;){if(d=Fl(f),null===d)return Ga;if(u++,f=f[Bo],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return Ga}function In(o,a,u){!function Ws(o,a,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(Yt)&&(d=u[Yt]),null==d&&(d=u[Yt]=Jo++);const f=d&$u;a.data[o+(f>>qh)]|=1<<f}(o,a,u)}function Hu(o,a,u){if(u&vt.Optional||void 0!==o)return o;Ke()}function nd(o,a,u,d){if(u&vt.Optional&&void 0===d&&(d=null),!(u&(vt.Self|vt.Host))){const f=o[yl],_=Lr(void 0);try{return f?f.get(a,d,u&vt.Optional):ri(a,d,u&vt.Optional)}finally{Lr(_)}}return Hu(d,0,u)}function Gu(o,a,u,d=vt.Default,f){if(null!==o){if(1024&a[Vt]){const w=function id(o,a,u,d,f){let _=o,w=a;for(;null!==_&&null!==w&&1024&w[Vt]&&!(256&w[Vt]);){const b=zu(_,w,u,d|vt.Self,ki);if(b!==ki)return b;let D=_.parent;if(!D){const R=w[Ur];if(R){const P=R.get(u,ki,d);if(P!==ki)return P}D=Fl(w),w=w[Bo]}_=D}return f}(o,a,u,d,ki);if(w!==ki)return w}const _=zu(o,a,u,d,ki);if(_!==ki)return _}return nd(a,u,d,f)}function zu(o,a,u,d,f){const _=function rd(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Yt)?o[Yt]:void 0;return"number"==typeof a?a>=0?a&$u:Wp:a}(u);if("function"==typeof _){if(!Mu(a,o,d))return d&vt.Host?Hu(f,0,d):nd(a,u,d,f);try{const w=_(d);if(null!=w||d&vt.Optional)return w;Ke()}finally{$h()}}else if("number"==typeof _){let w=null,b=Wa(o,a),D=Ga,R=d&vt.Host?a[Qn][ar]:null;for((-1===b||d&vt.SkipSelf)&&(D=-1===b?Wh(o,a):a[b+8],D!==Ga&&Ol(d,!1)?(w=a[Je],b=Eo(D),a=Qo(D,a)):b=-1);-1!==b;){const P=a[Je];if(kl(_,b,P.data)){const V=wr(b,a,u,w,d,R);if(V!==ki)return V}D=a[b+8],D!==Ga&&Ol(d,a[Je].data[b+8]===R)&&kl(_,b,a)?(w=P,b=Eo(D),a=Qo(D,a)):b=-1}}return f}function wr(o,a,u,d,f,_){const w=a[Je],b=w.data[o+8],P=Xo(b,w,u,null==d?Ua(b)&&ju:d!=w&&0!=(3&b.type),f&vt.Host&&_===b);return null!==P?Jn(a,w,P,b):ki}function Xo(o,a,u,d,f){const _=o.providerIndexes,w=a.data,b=1048575&_,D=o.directiveStart,P=_>>20,W=f?b+P:o.directiveEnd;for(let te=d?b:b+P;te<W;te++){const Ie=w[te];if(te<D&&u===Ie||te>=D&&Ie.type===u)return te}if(f){const te=w[D];if(te&&Ni(te)&&te.type===u)return D}return null}function Jn(o,a,u,d){let f=o[u];const _=a.data;if(function h_(o){return o instanceof qs}(f)){const w=f;w.resolving&&function Fe(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new _e(-200,`Circular dependency in DI detected for ${o}${u}`)}(function Ge(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Oe(o)}(_[u]));const b=Pl(w.canSeeViewProviders);w.resolving=!0;const D=w.injectImpl?Lr(w.injectImpl):null;Mu(o,d,vt.Default);try{f=o[u]=w.factory(void 0,_,o,d),a.firstCreatePass&&u>=d.directiveStart&&function d_(o,a,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:_}=a.type.prototype;if(d){const w=Il(a);(u.preOrderHooks??(u.preOrderHooks=[])).push(o,w),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(o,w)}f&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-o,f),_&&((u.preOrderHooks??(u.preOrderHooks=[])).push(o,_),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(o,_))}(u,_[u],a)}finally{null!==D&&Lr(D),Pl(b),w.resolving=!1,$h()}}return f}function kl(o,a,u){return!!(u[a+(o>>qh)]&1<<o)}function Ol(o,a){return!(o&vt.Self||o&vt.Host&&a)}class Ks{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,d){return Gu(this._tNode,this._lView,a,sr(d),u)}}function Wp(){return new Ks(vr(),ge())}function qu(o){return j(()=>{const a=o.prototype.constructor,u=a[gn]||ea(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const _=f[gn]||ea(f);if(_&&_!==u)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function ea(o){return ze(o)?()=>{const a=ea(Y(o));return a&&a()}:Es(o)}function Fl(o){const a=o[Je],u=a.type;return 2===u?a.declTNode:1===u?o[ar]:null}function Ka(o){return function Kh(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const _=u[f];if(ed(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(_===a)return u[f+1];f+=2}}}return null}(vr(),o)}const ta="__parameters__";function ra(o,a,u){return j(()=>{const d=function na(o){return function(...u){if(o){const d=o(...u);for(const f in d)this[f]=d[f]}}}(a);function f(..._){if(this instanceof f)return d.apply(this,_),this;const w=new f(..._);return b.annotation=w,b;function b(D,R,P){const V=D.hasOwnProperty(ta)?D[ta]:Object.defineProperty(D,ta,{value:[]})[ta];for(;V.length<=P;)V.push(null);return(V[P]=V[P]||[]).push(w),D}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class tn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=pt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cs(o,a){o.forEach(u=>Array.isArray(u)?Cs(u,a):a(u))}function Jp(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function sa(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function ui(o,a,u){let d=ci(o,a);return d>=0?o[1|d]=u:(d=~d,function Yu(o,a,u,d){let f=o.length;if(f==a)o.push(u,d);else if(1===f)o.push(d,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=d}}(o,d,a,u)),d}function ln(o,a){const u=ci(o,a);if(u>=0)return o[1|u]}function ci(o,a){return function jn(o,a,u){let d=0,f=o.length>>u;for(;f!==d;){const _=d+(f-d>>1),w=o[_<<u];if(a===w)return _<<u;w>a?f=_:d=_+1}return~(f<<u)}(o,a,1)}const Hl=xn(ra("Optional"),8),yt=xn(ra("SkipSelf"),4);var bt=(()=>((bt=bt||{})[bt.Important=1]="Important",bt[bt.DashCase=2]="DashCase",bt))();const ef=new Map;let rs=0;const Q="__ngContext__";function se(o,a){wi(a)?(o[Q]=a[mo],function nf(o){ef.set(o[mo],o)}(a)):o[Q]=a}let is;function So(o,a){return is(o,a)}function yd(o){const a=o[Rn];return Ei(a)?a[Rn]:a}function vd(o){return ng(o[Vo])}function fa(o){return ng(o[Ri])}function ng(o){for(;null!==o&&!Ei(o);)o=o[Ri];return o}function pa(o,a,u,d,f){if(null!=d){let _,w=!1;Ei(d)?_=d:wi(d)&&(w=!0,d=d[xi]);const b=Ar(d);0===o&&null!==u?null==f?Ed(a,u,b):Xa(a,u,b,f||null,!0):1===o&&null!==u?Xa(a,u,b,f||null,!0):2===o?function og(o,a,u){const d=ga(o,a);d&&function Id(o,a,u,d){o.removeChild(a,u,d)}(o,d,a,u)}(a,b,w):3===o&&a.destroyNode(b),null!=_&&function Dd(o,a,u,d,f){const _=u[La];_!==Ar(u)&&pa(a,o,d,_,f);for(let b=Sr;b<u.length;b++){const D=u[b];Td(D[Je],D,o,a,d,_)}}(a,o,_,u,f)}}function ig(o,a,u){return o.createElement(a,u)}function m_(o,a){const u=o[jo],d=u.indexOf(a),f=a[Rn];512&a[Vt]&&(a[Vt]&=-513,bl(f,-1)),u.splice(d,1)}function wd(o,a){if(o.length<=Sr)return;const u=Sr+a,d=o[u];if(d){const f=d[Fa];null!==f&&f!==o&&m_(f,d),a>0&&(o[u-1][Ri]=d[Ri]);const _=sa(o,Sr+a);!function jv(o,a){Td(o,a,a[Ht],2,null,null),a[xi]=null,a[ar]=null}(d[Je],d);const w=_[Qi];null!==w&&w.detachView(_[Je]),d[Rn]=null,d[Ri]=null,d[Vt]&=-65}return d}function af(o,a){if(!(128&a[Vt])){const u=a[Ht];u.destroyNode&&Td(o,a,u,3,null,null),function WI(o){let a=o[Vo];if(!a)return Ja(o[Je],o);for(;a;){let u=null;if(wi(a))u=a[Vo];else{const d=a[Sr];d&&(u=d)}if(!u){for(;a&&!a[Ri]&&a!==o;)wi(a)&&Ja(a[Je],a),a=a[Rn];null===a&&(a=o),wi(a)&&Ja(a[Je],a),u=a&&a[Ri]}a=u}}(a)}}function Ja(o,a){if(!(128&a[Vt])){a[Vt]&=-65,a[Vt]|=128,function Yl(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let d=0;d<u.length;d+=2){const f=a[u[d]];if(!(f instanceof qs)){const _=u[d+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const b=f[_[w]],D=_[w+1];ai(4,b,D);try{D.call(b)}finally{ai(5,b,D)}}else{ai(4,f,_);try{_.call(f)}finally{ai(5,f,_)}}}}}(o,a),function Hv(o,a){const u=o.cleanup,d=a[go];let f=-1;if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const w=u[_+3];w>=0?d[f=w]():d[f=-w].unsubscribe(),_+=2}else{const w=d[f=u[_+1]];u[_].call(w)}if(null!==d){for(let _=f+1;_<d.length;_++)(0,d[_])();a[go]=null}}(o,a),1===a[Je].type&&a[Ht].destroy();const u=a[Fa];if(null!==u&&Ei(a[Rn])){u!==a[Rn]&&m_(u,a);const d=a[Qi];null!==d&&d.detachView(o)}!function I(o){ef.delete(o[mo])}(a)}}function sc(o,a,u){return function Gv(o,a,u){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return u[xi];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:_}=o.data[d.directiveStart+f];if(_===Ee.None||_===Ee.Emulated)return null}return xr(d,u)}}(o,a.parent,u)}function Xa(o,a,u,d,f){o.insertBefore(a,u,d,f)}function Ed(o,a,u){o.appendChild(a,u)}function __(o,a,u,d,f){null!==d?Xa(o,a,u,d,f):Ed(o,a,u)}function ga(o,a){return o.parentNode(a)}let sg,el,xd,ac,Ql=function Cd(o,a,u){return 40&o.type?xr(o,u):null};function Jl(o,a,u,d){const f=sc(o,d,a),_=a[Ht],b=function uf(o,a,u){return Ql(o,a,u)}(d.parent||a[ar],d,a);if(null!=f)if(Array.isArray(u))for(let D=0;D<u.length;D++)__(_,f,u[D],b,!1);else __(_,f,u,b,!1);void 0!==sg&&sg(_,d,a,u,f)}function df(o,a){if(null!==a){const u=a.type;if(3&u)return xr(a,o);if(4&u)return Js(-1,o[a.index]);if(8&u){const d=a.child;if(null!==d)return df(o,d);{const f=o[a.index];return Ei(f)?Js(-1,f):Ar(f)}}if(32&u)return So(a,o)()||Ar(o[a.index]);{const d=hf(o,a);return null!==d?Array.isArray(d)?d[0]:df(yd(o[Qn]),d):df(o,a.next)}}return null}function hf(o,a){return null!==a?o[Qn][ar].projection[a.projection]:null}function Js(o,a){const u=Sr+o+1;if(u<a.length){const d=a[u],f=d[Je].firstChild;if(null!==f)return df(d,f)}return a[La]}function bd(o,a,u,d,f,_,w){for(;null!=u;){const b=d[u.index],D=u.type;if(w&&0===a&&(b&&se(Ar(b),d),u.flags|=2),32!=(32&u.flags))if(8&D)bd(o,a,u.child,d,f,_,!1),pa(a,o,f,b,_);else if(32&D){const R=So(u,d);let P;for(;P=R();)pa(a,o,f,P,_);pa(a,o,f,b,_)}else 16&D?lg(o,a,d,u,f,_):pa(a,o,f,b,_);u=w?u.projectionNext:u.next}}function Td(o,a,u,d,f,_){bd(u,d,o.firstChild,a,f,_,!1)}function lg(o,a,u,d,f,_){const w=u[Qn],D=w[ar].projection[d.projection];if(Array.isArray(D))for(let R=0;R<D.length;R++)pa(a,o,f,D[R],_);else bd(o,a,D,w[Rn],f,_,!0)}function bs(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function Sd(o,a,u){const{mergedAttrs:d,classes:f,styles:_}=u;null!==d&&za(o,a,d),null!==f&&bs(o,a,f),null!==_&&function ug(o,a,u){o.setAttribute(a,"style",u)}(o,a,_)}function oc(o){return function Ad(){if(void 0===el&&(el=null,an.trustedTypes))try{el=an.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return el}()?.createHTML(o)||o}function v_(o){xd=o}function dg(){if(void 0===ac&&(ac=null,an.trustedTypes))try{ac=an.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return ac}function Li(o){return dg()?.createHTML(o)||o}function hg(o){return dg()?.createScriptURL(o)||o}class eu{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}class fg extends eu{getTypeName(){return"HTML"}}class pg extends eu{getTypeName(){return"Style"}}class Kv extends eu{getTypeName(){return"Script"}}class gg extends eu{getTypeName(){return"URL"}}class mg extends eu{getTypeName(){return"ResourceURL"}}function Br(o){return o instanceof eu?o.changingThisBreaksApplicationSecurity:o}function Ci(o,a){const u=function lc(o){return o instanceof eu&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see ${ut})`)}return u===a}function E_(o){return new fg(o)}function I_(o){return new pg(o)}function C_(o){return new Kv(o)}function Cr(o){return new gg(o)}function ff(o){return new mg(o)}class gf{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(oc(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class xo{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const u=this.inertDocument.createElement("template");return u.innerHTML=oc(a),u}}const _g=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nu(o){return(o=String(o)).match(_g)?o:"unsafe:"+o}function Xs(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function ru(...o){const a={};for(const u of o)for(const d in u)u.hasOwnProperty(d)&&(a[d]=!0);return a}const uc=Xs("area,br,col,hr,img,wbr"),b_=Xs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),T_=Xs("rp,rt"),m=ru(uc,ru(b_,Xs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ru(T_,Xs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ru(T_,b_)),E=Xs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$=ru(E,Xs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),X=Xs("script,style,template");class Ne{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!m.hasOwnProperty(u))return this.sanitizedSomething=!0,!X.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=a.attributes;for(let f=0;f<d.length;f++){const _=d.item(f),w=_.name,b=w.toLowerCase();if(!$.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let D=_.value;E[b]&&(D=nu(D)),this.buf.push(" ",w,'="',st(D),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();m.hasOwnProperty(u)&&!uc.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(st(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const We=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rt=/([^\#-~ |!])/g;function st(o){return o.replace(/&/g,"&amp;").replace(We,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(rt,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let kn;function eo(o,a){let u=null;try{kn=kn||function pf(o){const a=new xo(o);return function tu(){try{return!!(new window.DOMParser).parseFromString(oc(""),"text/html")}catch{return!1}}()?new gf(a):a}(o);let d=a?String(a):"";u=kn.getInertBodyElement(d);let f=5,_=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=_,_=u.innerHTML,u=kn.getInertBodyElement(d)}while(d!==_);return oc((new Ne).sanitizeChildren(Rd(u)||u))}finally{if(u){const d=Rd(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Rd(o){return"content"in o&&function Zv(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var On=(()=>((On=On||{})[On.NONE=0]="NONE",On[On.HTML=1]="HTML",On[On.STYLE=2]="STYLE",On[On.SCRIPT=3]="SCRIPT",On[On.URL=4]="URL",On[On.RESOURCE_URL=5]="RESOURCE_URL",On))();function yg(o){const a=vg();return a?Li(a.sanitize(On.HTML,o)||""):Ci(o,"HTML")?Li(Br(o)):eo(function w_(){return void 0!==xd?xd:typeof document<"u"?document:void 0}(),Oe(o))}function Nd(o){const a=vg();return a?a.sanitize(On.URL,o)||"":Ci(o,"URL")?Br(o):nu(Oe(o))}function Md(o){const a=vg();if(a)return hg(a.sanitize(On.RESOURCE_URL,o)||"");if(Ci(o,"ResourceURL"))return hg(Br(o));throw new _e(904,!1)}function _f(o,a,u){return function Yv(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?Md:Nd}(a,u)(o)}function vg(){const o=ge();return o&&o[vl]}const Xv=new tn("ENVIRONMENT_INITIALIZER"),Pd=new tn("INJECTOR",-1),yf=new tn("INJECTOR_DEF_TYPES");class KI{get(a,u=Si){if(u===Si){const d=new Error(`NullInjectorError: No provider for ${Ce(a)}!`);throw d.name="NullInjectorError",d}return u}}function wg(...o){return{\u0275providers:vf(0,o),\u0275fromNgModule:!0}}function vf(o,...a){const u=[],d=new Set;let f;return Cs(a,_=>{const w=_;ew(w,u,[],d)&&(f||(f=[]),f.push(w))}),void 0!==f&&ZI(f,u),u}function ZI(o,a){for(let u=0;u<o.length;u++){const{providers:f}=o[u];tw(f,_=>{a.push(_)})}}function ew(o,a,u,d){if(!(o=Y(o)))return!1;let f=null,_=mr(o);const w=!_&&wt(o);if(_||w){if(w&&!w.standalone)return!1;f=o}else{const D=o.ngModule;if(_=mr(D),!_)return!1;f=D}const b=d.has(f);if(w){if(b)return!1;if(d.add(f),w.dependencies){const D="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const R of D)ew(R,a,u,d)}}else{if(!_)return!1;{if(null!=_.imports&&!b){let R;d.add(f);try{Cs(_.imports,P=>{ew(P,a,u,d)&&(R||(R=[]),R.push(P))})}finally{}void 0!==R&&ZI(R,a)}if(!b){const R=Es(f)||(()=>new f);a.push({provide:f,useFactory:R,deps:Ve},{provide:yf,useValue:f,multi:!0},{provide:Xv,useValue:()=>dn(f),multi:!0})}const D=_.providers;null==D||b||tw(D,P=>{a.push(P)})}}return f!==o&&void 0!==o.providers}function tw(o,a){for(let u of o)Se(u)&&(u=u.\u0275providers),Array.isArray(u)?tw(u,a):a(u)}const wA=ie({provide:String,useValue:ie});function nw(o){return null!==o&&"object"==typeof o&&wA in o}function iu(o){return"function"==typeof o}const dc=new tn("Set Injector scope."),x_={},IA={};let rw;function R_(){return void 0===rw&&(rw=new KI),rw}class kd{}class QI extends kd{get destroyed(){return this._destroyed}constructor(a,u,d,f){super(),this.parent=u,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ef(a,w=>this.processProvider(w)),this.records.set(Pd,wf(void 0,this)),f.has("environment")&&this.records.set(kd,wf(void 0,this));const _=this.records.get(dc);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(yf.multi,Ve,vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=Jt(this),d=Lr(void 0);try{return a()}finally{Jt(u),Lr(d)}}get(a,u=Si,d=vt.Default){this.assertNotDestroyed(),d=sr(d);const f=Jt(this),_=Lr(void 0);try{if(!(d&vt.SkipSelf)){let b=this.records.get(a);if(void 0===b){const D=function aw(o){return"function"==typeof o||"object"==typeof o&&o instanceof tn}(a)&&Qt(a);b=D&&this.injectableDefInScope(D)?wf(iw(a),x_):null,this.records.set(a,b)}if(null!=b)return this.hydrate(a,b)}return(d&vt.Self?R_():this.parent).get(a,u=d&vt.Optional&&u===Si?null:u)}catch(w){if("NullInjectorError"===w.name){if((w[_r]=w[_r]||[]).unshift(Ce(a)),f)throw w;return function si(o,a,u,d){const f=o[_r];throw a[mn]&&f.unshift(a[mn]),o.message=function H(o,a,u,d=null){o=o&&"\n"===o.charAt(0)&&o.charAt(1)==ii?o.slice(2):o;let f=Ce(a);if(Array.isArray(a))f=a.map(Ce).join(" -> ");else if("object"==typeof a){let _=[];for(let w in a)if(a.hasOwnProperty(w)){let b=a[w];_.push(w+":"+("string"==typeof b?JSON.stringify(b):Ce(b)))}f=`{${_.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${o.replace(Bn,"\n  ")}`}("\n"+o.message,f,u,d),o[qr]=f,o[_r]=null,o}(w,a,"R3InjectorError",this.source)}throw w}finally{Lr(_),Jt(f)}}resolveInjectorInitializers(){const a=Jt(this),u=Lr(void 0);try{const d=this.get(Xv.multi,Ve,vt.Self);for(const f of d)f()}finally{Jt(a),Lr(u)}}toString(){const a=[],u=this.records;for(const d of u.keys())a.push(Ce(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(a){let u=iu(a=Y(a))?a:Y(a&&a.provide);const d=function bA(o){return nw(o)?wf(void 0,o.useValue):wf(sw(o),x_)}(a);if(iu(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=wf(void 0,x_,!0),f.factory=()=>Ki(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,d)}hydrate(a,u){return u.value===x_&&(u.value=IA,u.value=u.factory()),"object"==typeof u.value&&u.value&&function JI(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=Y(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function iw(o){const a=Qt(o),u=null!==a?a.factory:Es(o);if(null!==u)return u;if(o instanceof tn)throw new _e(204,!1);if(o instanceof Function)return function CA(o){const a=o.length;if(a>0)throw function Ku(o,a){const u=[];for(let d=0;d<o;d++)u.push(a);return u}(a,"?"),new _e(204,!1);const u=function Gn(o){return o&&(o[zn]||o[mi])||null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new _e(204,!1)}function sw(o,a,u){let d;if(iu(o)){const f=Y(o);return Es(f)||iw(f)}if(nw(o))d=()=>Y(o.useValue);else if(function YI(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...Ki(o.deps||[]));else if(function EA(o){return!(!o||!o.useExisting)}(o))d=()=>dn(Y(o.useExisting));else{const f=Y(o&&(o.useClass||o.provide));if(!function ow(o){return!!o.deps}(o))return Es(f)||iw(f);d=()=>new f(...Ki(o.deps))}return d}function wf(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function Ef(o,a){for(const u of o)Array.isArray(u)?Ef(u,a):u&&Se(u)?Ef(u.\u0275providers,a):a(u)}class TA{}class XI{}class tC{resolveComponentFactory(a){throw function DA(o){const a=Error(`No component factory found for ${Ce(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let If=(()=>{class o{}return o.NULL=new tC,o})();function N_(){return su(vr(),ge())}function su(o,a){return new Cf(xr(o,a))}let Cf=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=N_,o})();function Eg(o){return o instanceof Cf?o.nativeElement:o}class uw{}let SA=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function AA(){const o=ge(),u=yr(vr().index,o);return(wi(u)?u:o)[Ht]}(),o})(),xA=(()=>{class o{}return o.\u0275prov=pt({token:o,providedIn:"root",factory:()=>null}),o})();class nC{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const rC=new nC("15.2.9"),M_={},cw="ngOriginalError";function dw(o){return o[cw]}class Ig{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&dw(a);for(;u&&dw(u);)u=dw(u);return u||null}}function tl(o){return o instanceof Function?o():o}function uC(o,a,u){let d=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const _=a.length;if(f+_===d||o.charCodeAt(f+_)<=32)return f}u=f+1}}const hw="ng-template";function fw(o,a,u){let d=0,f=!0;for(;d<o.length;){let _=o[d++];if("string"==typeof _&&f){const w=o[d++];if(u&&"class"===_&&-1!==uC(w.toLowerCase(),a,0))return!0}else{if(1===_){for(;d<o.length&&"string"==typeof(_=o[d++]);)if(_.toLowerCase()===a)return!0;return!1}"number"==typeof _&&(f=!1)}}return!1}function pw(o){return 4===o.type&&o.value!==hw}function bf(o,a,u){return a===(4!==o.type||u?o.value:hw)}function gw(o,a,u){let d=4;const f=o.attrs||[],_=function dC(o){for(let a=0;a<o.length;a++)if(ed(o[a]))return a;return o.length}(f);let w=!1;for(let b=0;b<a.length;b++){const D=a[b];if("number"!=typeof D){if(!w)if(4&d){if(d=2|1&d,""!==D&&!bf(o,D,u)||""===D&&1===a.length){if(ma(d))return!1;w=!0}}else{const R=8&d?D:a[++b];if(8&d&&null!==o.attrs){if(!fw(o.attrs,R,u)){if(ma(d))return!1;w=!0}continue}const V=cC(8&d?"class":D,f,pw(o),u);if(-1===V){if(ma(d))return!1;w=!0;continue}if(""!==R){let W;W=V>_?"":f[V+1].toLowerCase();const te=8&d?W:null;if(te&&-1!==uC(te,R,0)||2&d&&R!==W){if(ma(d))return!1;w=!0}}}}else{if(!w&&!ma(d)&&!ma(D))return!1;if(w&&ma(D))continue;w=!1,d=D|1&d}}return ma(d)||w}function ma(o){return 0==(1&o)}function cC(o,a,u,d){if(null===a)return-1;let f=0;if(d||!u){let _=!1;for(;f<a.length;){const w=a[f];if(w===o)return f;if(3===w||6===w)_=!0;else{if(1===w||2===w){let b=a[++f];for(;"string"==typeof b;)b=a[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=_?1:2}return-1}return function hC(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const d=o[u];if("number"==typeof d)return-1;if(d===a)return u;u++}return-1}(a,o)}function bg(o,a,u=!1){for(let d=0;d<a.length;d++)if(gw(o,a[d],u))return!0;return!1}function fC(o,a){return o?":not("+a.trim()+")":a}function LA(o){let a=o[0],u=1,d=2,f="",_=!1;for(;u<o.length;){let w=o[u];if("string"==typeof w)if(2&d){const b=o[++u];f+="["+w+(b.length>0?'="'+b+'"':"")+"]"}else 8&d?f+="."+w:4&d&&(f+=" "+w);else""!==f&&!ma(w)&&(a+=fC(_,f),f=""),d=w,_=_||!ma(d);u++}return""!==f&&(a+=fC(_,f)),a}const jt={};function pC(o){gC(Bt(),ge(),Vr()+o,!1)}function gC(o,a,u,d){if(!d)if(3==(3&a[Vt])){const _=o.preOrderCheckHooks;null!==_&&Qc(a,_,u)}else{const _=o.preOrderHooks;null!==_&&Jc(a,_,0,u)}zs(u)}function _C(o,a=null,u=null,d){const f=mw(o,a,u,d);return f.resolveInjectorInitializers(),f}function mw(o,a=null,u=null,d,f=new Set){const _=[u||Ve,wg(o)];return d=d||("object"==typeof o?void 0:Ce(o)),new QI(_,a||R_(),d||null,f)}let Tf=(()=>{class o{static create(u,d){if(Array.isArray(u))return _C({name:""},d,u,"");{const f=u.name??"";return _C({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=Si,o.NULL=new KI,o.\u0275prov=pt({token:o,providedIn:"any",factory:()=>dn(Pd)}),o.__NG_ELEMENT_ID__=-1,o})();function Af(o,a=vt.Default){const u=ge();return null===u?dn(o,a):Gu(vr(),u,Y(o),a)}function IC(){throw new Error("invalid")}function CC(o,a){const u=o.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const _=u[d+1];if(-1!==_){const w=o.data[_];Nu(u[d]),w.contentQueries(2,a[_],_)}}}function F_(o,a,u,d,f,_,w,b,D,R,P){const V=a.blueprint.slice();return V[xi]=f,V[Vt]=76|d,(null!==P||o&&1024&o[Vt])&&(V[Vt]|=1024),ja(V),V[Rn]=V[Bo]=o,V[Wn]=u,V[oi]=w||o&&o[oi],V[Ht]=b||o&&o[Ht],V[vl]=D||o&&o[vl]||null,V[yl]=R||o&&o[yl]||null,V[ar]=_,V[mo]=function tf(){return rs++}(),V[Ur]=P,V[Qn]=2==a.type?o[Qn]:V,V}function xg(o,a,u,d,f){let _=o.data[a];if(null===_)_=function Ew(o,a,u,d,f){const _=Ho(),w=Vh(),D=o.data[a]=function Ui(o,a,u,d,f,_){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,u,a,d,f);return null===o.firstChild&&(o.firstChild=D),null!==_&&(w?null==_.child&&null!==D.parent&&(_.child=D):null===_.next&&(_.next=D,D.prev=_)),D}(o,a,u,d,f),function Bh(){return Lt.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=u,_.value=d,_.attrs=f;const w=function Au(){const o=Lt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();_.injectorIndex=null===w?-1:w.injectorIndex}return li(_,!0),_}function xf(o,a,u,d){if(0===u)return-1;const f=a.length;for(let _=0;_<u;_++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function ou(o,a,u){Pu(a);try{const d=o.viewQuery;null!==d&&Ng(1,d,u);const f=o.template;null!==f&&TC(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&CC(o,a),o.staticViewQueries&&Ng(2,o.viewQuery,u);const _=o.components;null!==_&&function bC(o,a){for(let u=0;u<a.length;u++)fc(o,a[u])}(a,_)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[Vt]&=-5,ku()}}function to(o,a,u,d){const f=a[Vt];if(128!=(128&f)){Pu(a);try{ja(a),function Is(o){return Lt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&TC(o,a,u,2,d);const w=3==(3&f);if(w){const R=o.preOrderCheckHooks;null!==R&&Qc(a,R,null)}else{const R=o.preOrderHooks;null!==R&&Jc(a,R,0,null),Gh(a,0)}if(function BC(o){for(let a=vd(o);null!==a;a=fa(a)){if(!a[Hc])continue;const u=a[jo];for(let d=0;d<u.length;d++){const f=u[d];512&f[Vt]||bl(f[Rn],1),f[Vt]|=512}}}(a),function VC(o){for(let a=vd(o);null!==a;a=fa(a))for(let u=Sr;u<a.length;u++){const d=a[u],f=d[Je];Hs(d)&&to(f,d,f.template,d[Wn])}}(a),null!==o.contentQueries&&CC(o,a),w){const R=o.contentCheckHooks;null!==R&&Qc(a,R)}else{const R=o.contentHooks;null!==R&&Jc(a,R,1),Gh(a,1)}!function tx(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)zs(~f);else{const _=f,w=u[++d],b=u[++d];Ru(w,_),b(2,a[_])}}}finally{zs(-1)}}(o,a);const b=o.components;null!==b&&function nx(o,a){for(let u=0;u<a.length;u++)jC(o,a[u])}(a,b);const D=o.viewQuery;if(null!==D&&Ng(2,D,d),w){const R=o.viewCheckHooks;null!==R&&Qc(a,R)}else{const R=o.viewHooks;null!==R&&Jc(a,R,2),Gh(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[Vt]&=-41,512&a[Vt]&&(a[Vt]&=-513,bl(a[Rn],-1))}finally{ku()}}}function TC(o,a,u,d,f){const _=Vr(),w=2&d;try{zs(-1),w&&a.length>Dn&&gC(o,a,Dn,!1),ai(w?2:0,f),u(d,f)}finally{zs(_),ai(w?3:1,f)}}function L_(o,a,u){if(El(a)){const f=a.directiveEnd;for(let _=a.directiveStart;_<f;_++){const w=o.data[_];w.contentQueries&&w.contentQueries(1,u[_],_)}}}function Iw(o,a,u){Su()&&(function MC(o,a,u,d){const f=u.directiveStart,_=u.directiveEnd;Ua(u)&&function xw(o,a,u){const d=xr(a,o),f=DC(u),_=o[oi],w=Nw(o,F_(o,f,null,u.onPush?32:16,d,a,_,_.createRenderer(d,u),null,null,null));o[a.index]=w}(a,u,o.data[f+u.componentOffset]),o.firstCreatePass||td(u,a),se(d,a);const w=u.initialInputs;for(let b=f;b<_;b++){const D=o.data[b],R=Jn(a,o,b,u);se(R,a),null!==w&&UC(0,b-f,R,D,0,w),Ni(D)&&(yr(u.index,a)[Wn]=Jn(a,o,b,u))}}(o,a,u,xr(u,a)),64==(64&u.flags)&&Dw(o,a,u))}function Cw(o,a,u=xr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let _=0;_<d.length;_+=2){const w=d[_+1],b=-1===w?u(a,o):o[w];o[f++]=b}}}function DC(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Fd(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Fd(o,a,u,d,f,_,w,b,D,R){const P=Dn+d,V=P+f,W=function rx(o,a){const u=[];for(let d=0;d<a;d++)u.push(d<o?null:jt);return u}(P,V),te="function"==typeof R?R():R;return W[Je]={type:o,blueprint:W,template:u,queries:null,viewQuery:b,declTNode:a,data:W.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:D,consts:te,incompleteFirstPass:!1}}function bw(o,a,u,d){const f=GC(a);null===u?f.push(d):(f.push(u),o.firstCreatePass&&j_(o).push(d,f.length-1))}function au(o,a,u,d){for(let f in o)if(o.hasOwnProperty(f)){u=null===u?{}:u;const _=o[f];null===d?SC(u,a,f,_):d.hasOwnProperty(f)&&SC(u,a,d[f],_)}return u}function SC(o,a,u,d){o.hasOwnProperty(u)?o[u].push(a,d):o[u]=[a,d]}function Ts(o,a,u,d,f,_,w,b){const D=xr(a,u);let P,R=a.inputs;!b&&null!=R&&(P=R[d])?(qC(o,u,P,d,f),Ua(a)&&function xC(o,a){const u=yr(a,o);16&u[Vt]||(u[Vt]|=32)}(u,a.index)):3&a.type&&(d=function AC(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=w?w(f,a.value||"",d):f,_.setProperty(D,d,f))}function U_(o,a,u,d){if(Su()){const f=null===d?null:{"":-1},_=function kC(o,a){const u=o.directiveRegistry;let d=null,f=null;if(u)for(let _=0;_<u.length;_++){const w=u[_];if(bg(a,w.selectors,!1))if(d||(d=[]),Ni(w))if(null!==w.findHostDirectiveDefs){const b=[];f=f||new Map,w.findHostDirectiveDefs(w,b,f),d.unshift(...b,w),Sw(o,a,b.length)}else d.unshift(w),Sw(o,a,0);else f=f||new Map,w.findHostDirectiveDefs?.(w,d,f),d.push(w)}return null===d?null:[d,f]}(o,u);let w,b;null===_?w=b=null:[w,b]=_,null!==w&&Tw(o,a,u,w,f,b),f&&function OC(o,a,u){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const _=u[a[f+1]];if(null==_)throw new _e(-301,!1);d.push(a[f],_)}}}(u,d,f)}u.mergedAttrs=Zo(u.mergedAttrs,u.attrs)}function Tw(o,a,u,d,f,_){for(let R=0;R<d.length;R++)In(td(u,a),o,d[R].type);!function Aw(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}(u,o.data.length,d.length);for(let R=0;R<d.length;R++){const P=d[R];P.providersResolver&&P.providersResolver(P)}let w=!1,b=!1,D=xf(o,a,d.length,null);for(let R=0;R<d.length;R++){const P=d[R];u.mergedAttrs=Zo(u.mergedAttrs,P.hostAttrs),LC(o,u,a,D,P),FC(D,P,f),null!==P.contentQueries&&(u.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(u.flags|=64);const V=P.type.prototype;!w&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((o.preOrderHooks??(o.preOrderHooks=[])).push(u.index),w=!0),!b&&(V.ngOnChanges||V.ngDoCheck)&&((o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(u.index),b=!0),D++}!function No(o,a,u){const f=a.directiveEnd,_=o.data,w=a.attrs,b=[];let D=null,R=null;for(let P=a.directiveStart;P<f;P++){const V=_[P],W=u?u.get(V):null,Ie=W?W.outputs:null;D=au(V.inputs,P,D,W?W.inputs:null),R=au(V.outputs,P,R,Ie);const $e=null===D||null===w||pw(a)?null:Rw(D,P,w);b.push($e)}null!==D&&(D.hasOwnProperty("class")&&(a.flags|=8),D.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=b,a.inputs=D,a.outputs=R}(o,u,_)}function Dw(o,a,u){const d=u.directiveStart,f=u.directiveEnd,_=u.index,w=function c_(){return Lt.lFrame.currentDirectiveIndex}();try{zs(_);for(let b=d;b<f;b++){const D=o.data[b],R=a[b];ur(b),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&PC(D,R)}}finally{zs(-1),ur(w)}}function PC(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Sw(o,a,u){a.componentOffset=u,(o.components??(o.components=[])).push(a.index)}function FC(o,a,u){if(u){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)u[a.exportAs[d]]=o;Ni(a)&&(u[""]=o)}}function LC(o,a,u,d,f){o.data[d]=f;const _=f.factory||(f.factory=Es(f.type)),w=new qs(_,Ni(f),Af);o.blueprint[d]=w,u[d]=w,function NC(o,a,u,d,f){const _=f.hostBindings;if(_){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const b=~a.index;(function V_(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(w)!=b&&w.push(b),w.push(u,d,_)}}(o,a,d,xf(o,u,f.hostVars,jt),f)}function _a(o,a,u,d,f,_){const w=xr(o,a);!function B_(o,a,u,d,f,_,w){if(null==_)o.removeAttribute(a,f,u);else{const b=null==w?Oe(_):w(_,d||"",f);o.setAttribute(a,f,b,u)}}(a[Ht],w,_,o.value,u,d,f)}function UC(o,a,u,d,f,_){const w=_[a];if(null!==w){const b=d.setInput;for(let D=0;D<w.length;){const R=w[D++],P=w[D++],V=w[D++];null!==b?d.setInput(u,V,R,P):u[P]=V}}}function Rw(o,a,u){let d=null,f=0;for(;f<u.length;){const _=u[f];if(0!==_)if(5!==_){if("number"==typeof _)break;if(o.hasOwnProperty(_)){null===d&&(d=[]);const w=o[_];for(let b=0;b<w.length;b+=2)if(w[b]===a){d.push(_,w[b+1],u[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function Rg(o,a,u,d){return[o,!0,!1,a,null,0,d,u,null,null]}function jC(o,a){const u=yr(a,o);if(Hs(u)){const d=u[Je];48&u[Vt]?to(d,u,d.template,u[Wn]):u[_n]>0&&bi(u)}}function bi(o){for(let d=vd(o);null!==d;d=fa(d))for(let f=Sr;f<d.length;f++){const _=d[f];if(Hs(_))if(512&_[Vt]){const w=_[Je];to(w,_,w.template,_[Wn])}else _[_n]>0&&bi(_)}const u=o[Je].components;if(null!==u)for(let d=0;d<u.length;d++){const f=yr(u[d],o);Hs(f)&&f[_n]>0&&bi(f)}}function fc(o,a){const u=yr(a,o),d=u[Je];(function $C(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(d,u),ou(d,u,u[Wn])}function Nw(o,a){return o[Vo]?o[Us][Ri]=a:o[Vo]=a,o[Us]=a,a}function Mw(o){for(;o;){o[Vt]|=32;const a=yd(o);if(wu(o)&&!a)return o;o=a}return null}function Rf(o,a,u,d=!0){const f=a[oi];f.begin&&f.begin();try{to(o,a,o.template,u)}catch(w){throw d&&sx(a,w),w}finally{f.end&&f.end()}}function Ng(o,a,u){Nu(0),a(o,u)}function GC(o){return o[go]||(o[go]=[])}function j_(o){return o.cleanup||(o.cleanup=[])}function sx(o,a){const u=o[yl],d=u?u.get(Ig,null):null;d&&d.handleError(a)}function qC(o,a,u,d,f){for(let _=0;_<u.length;){const w=u[_++],b=u[_++],D=a[w],R=o.data[w];null!==R.setInput?R.setInput(D,f,d,b):D[b]=f}}function pc(o,a,u){const d=$s(a,o);!function rg(o,a,u){o.setValue(a,u)}(o[Ht],d,u)}function kw(o,a,u){let d=u?o.styles:null,f=u?o.classes:null,_=0;if(null!==a)for(let w=0;w<a.length;w++){const b=a[w];"number"==typeof b?_=b:1==_?f=me(f,b):2==_&&(d=me(d,b+": "+a[++w]+";"))}u?o.styles=d:o.stylesWithoutHost=d,u?o.classes=f:o.classesWithoutHost=f}function Ow(o,a,u,d,f=!1){for(;null!==u;){const _=a[u.index];if(null!==_&&d.push(Ar(_)),Ei(_))for(let b=Sr;b<_.length;b++){const D=_[b],R=D[Je].firstChild;null!==R&&Ow(D[Je],D,R,d)}const w=u.type;if(8&w)Ow(o,a,u.child,d);else if(32&w){const b=So(u,a);let D;for(;D=b();)d.push(D)}else if(16&w){const b=hf(a,u);if(Array.isArray(b))d.push(...b);else{const D=yd(a[Qn]);Ow(D[Je],D,b,d,!0)}}u=f?u.projectionNext:u.next}return d}class $_{get rootNodes(){const a=this._lView,u=a[Je];return Ow(u,a,u.firstChild,[])}constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(a){this._lView[Wn]=a}get destroyed(){return 128==(128&this._lView[Vt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Rn];if(Ei(a)){const u=a[_o],d=u?u.indexOf(this):-1;d>-1&&(wd(a,d),sa(u,d))}this._attachedToViewContainer=!1}af(this._lView[Je],this._lView)}onDestroy(a){bw(this._lView[Je],this._lView,null,a)}markForCheck(){Mw(this._cdRefInjectingView||this._lView)}detach(){this._lView[Vt]&=-65}reattach(){this._lView[Vt]|=64}detectChanges(){Rf(this._lView[Je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sf(o,a){Td(o,a,a[Ht],2,null,null)}(this._lView[Je],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=a}}class j1 extends $_{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Rf(a[Je],a,a[Wn],!1)}checkNoChanges(){}get context(){return null}}class WC extends If{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=wt(a);return new Mg(u,this.ngModule)}}function Fw(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class ax{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,d){d=sr(d);const f=this.injector.get(a,M_,d);return f!==M_||u===M_?f:this.parentInjector.get(a,u,d)}}class Mg extends XI{get inputs(){return Fw(this.componentDef.inputs)}get outputs(){return Fw(this.componentDef.outputs)}constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function UA(o){return o.map(LA).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}create(a,u,d,f){let _=(f=f||this.ngModule)instanceof kd?f:f?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const w=_?new ax(a,_):a,b=w.get(uw,null);if(null===b)throw new _e(407,!1);const D=w.get(xA,null),R=b.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",V=d?function hc(o,a,u){return o.selectRootElement(a,u===Ee.ShadowDom)}(R,d,this.componentDef.encapsulation):ig(R,P,function ox(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(P)),W=this.componentDef.onPush?288:272,te=Fd(0,null,null,1,0,null,null,null,null,null),Ie=F_(null,te,null,W,null,null,b,R,D,w,null);let $e,Xe;Pu(Ie);try{const gt=this.componentDef;let Pt,Pe=null;gt.findHostDirectiveDefs?(Pt=[],Pe=new Map,gt.findHostDirectiveDefs(gt,Pt,Pe),Pt.push(gt)):Pt=[gt];const Gt=function G_(o,a){const u=o[Je],d=Dn;return o[d]=a,xg(u,d,2,"#host",null)}(Ie,V),nr=function Nf(o,a,u,d,f,_,w,b){const D=f[Je];!function Pg(o,a,u,d){for(const f of o)a.mergedAttrs=Zo(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(kw(a,a.mergedAttrs,!0),null!==u&&Sd(d,u,a))}(d,o,a,w);const R=_.createRenderer(a,u),P=F_(f,DC(u),null,u.onPush?32:16,f[o.index],o,_,R,b||null,null,null);return D.firstCreatePass&&Sw(D,o,d.length-1),Nw(f,P),f[o.index]=P}(Gt,V,gt,Pt,Ie,b,R);Xe=kh(te,Dn),V&&function lx(o,a,u,d){if(d)za(o,u,["ng-version",rC.full]);else{const{attrs:f,classes:_}=function VA(o){const a=[],u=[];let d=1,f=2;for(;d<o.length;){let _=o[d];if("string"==typeof _)2===f?""!==_&&a.push(_,o[++d]):8===f&&u.push(_);else{if(!ma(f))break;f=_}d++}return{attrs:a,classes:u}}(a.selectors[0]);f&&za(o,u,f),_&&_.length>0&&bs(o,u,_.join(" "))}}(R,gt,V,d),void 0!==u&&function Vw(o,a,u){const d=o.projection=[];for(let f=0;f<a.length;f++){const _=u[f];d.push(null!=_?Array.from(_):null)}}(Xe,this.ngContentSelectors,u),$e=function Uw(o,a,u,d,f,_){const w=vr(),b=f[Je],D=xr(w,f);Tw(b,f,w,u,null,d);for(let P=0;P<u.length;P++)se(Jn(f,b,w.directiveStart+P,w),f);Dw(b,f,w),D&&se(D,f);const R=Jn(f,b,w.directiveStart+w.componentOffset,w);if(o[Wn]=f[Wn]=R,null!==_)for(const P of _)P(R,a);return L_(b,w,o),R}(nr,gt,Pt,Pe,Ie,[ux]),ou(te,Ie,null)}finally{ku()}return new Lw(this.componentType,$e,su(Xe,Ie),Ie,Xe)}}class Lw extends TA{constructor(a,u,d,f,_){super(),this.location=d,this._rootLView=f,this._tNode=_,this.instance=u,this.hostView=this.changeDetectorRef=new j1(f),this.componentType=a}setInput(a,u){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){const _=this._rootLView;qC(_[Je],_,f,a,u),Mw(yr(this._tNode.index,_))}}get injector(){return new Ks(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function ux(){const o=vr();Lu(ge()[Je],o)}function z_(o){let a=function kg(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const d=[o];for(;a;){let f;if(Ni(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new _e(903,!1);f=a.\u0275dir}if(f){if(u){d.push(f);const w=o;w.inputs=Mf(o.inputs),w.declaredInputs=Mf(o.declaredInputs),w.outputs=Mf(o.outputs);const b=f.hostBindings;b&&H1(o,b);const D=f.viewQuery,R=f.contentQueries;if(D&&Og(o,D),R&&$1(o,R),we(o.inputs,f.inputs),we(o.declaredInputs,f.declaredInputs),we(o.outputs,f.outputs),Ni(f)&&f.data.animation){const P=o.data;P.animation=(P.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let w=0;w<_.length;w++){const b=_[w];b&&b.ngInherit&&b(o),b===z_&&(u=!1)}}a=Object.getPrototypeOf(a)}!function KC(o){let a=0,u=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Zo(f.hostAttrs,u=Zo(u,f.hostAttrs))}}(d)}function Mf(o){return o===ne?{}:o===Ve?[]:o}function Og(o,a){const u=o.viewQuery;o.viewQuery=u?(d,f)=>{a(d,f),u(d,f)}:a}function $1(o,a){const u=o.contentQueries;o.contentQueries=u?(d,f,_)=>{a(d,f,_),u(d,f,_)}:a}function H1(o,a){const u=o.hostBindings;o.hostBindings=u?(d,f)=>{a(d,f),u(d,f)}:a}function Ud(o){return!!W_(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function W_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function ya(o,a,u){return o[a]=u}function as(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function Vd(o,a,u,d){const f=as(o,a,u);return as(o,a+1,d)||f}function JC(o,a,u,d){const f=ge();return as(f,Go(),a)&&(Bt(),_a(Pn(),f,o,a,u,d)),JC}function Of(o,a,u,d){return as(o,Go(),u)?a+Oe(u)+d:jt}function Bd(o,a,u,d,f,_){const b=Vd(o,function Mi(){return Lt.lFrame.bindingIndex}(),u,f);return Pi(2),b?a+Oe(u)+d+Oe(f)+_:jt}function Gw(o,a,u,d,f,_,w,b){const D=ge(),R=Bt(),P=o+Dn,V=R.firstCreatePass?function _x(o,a,u,d,f,_,w,b,D){const R=a.consts,P=xg(a,o,4,w||null,wo(R,b));U_(a,u,P,wo(R,D)),Lu(a,P);const V=P.tView=Fd(2,P,d,f,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,R);return null!==a.queries&&(a.queries.template(a,P),V.queries=a.queries.embeddedTView(P)),P}(P,R,D,a,u,d,f,_,w):R.data[P];li(V,!1);const W=D[Ht].createComment("");Jl(R,D,W,V),se(W,D),Nw(D,D[P]=Rg(W,D,W,V)),Gc(V)&&Iw(R,D,V),null!=w&&Cw(D,V,b)}function zw(o){return Yr(function u_(){return Lt.lFrame.contextLView}(),Dn+o)}function K_(o,a,u){const d=ge();return as(d,Go(),a)&&Ts(Bt(),Pn(),d,o,a,d[Ht],u,!1),K_}function Bg(o,a,u,d,f){const w=f?"class":"style";qC(o,u,a.inputs[w],w,d)}function jg(o,a,u,d){const f=ge(),_=Bt(),w=Dn+o,b=f[Ht],D=_.firstCreatePass?function vx(o,a,u,d,f,_){const w=a.consts,D=xg(a,o,2,d,wo(w,f));return U_(a,u,D,wo(w,_)),null!==D.attrs&&kw(D,D.attrs,!1),null!==D.mergedAttrs&&kw(D,D.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,D),D}(w,_,f,a,u,d):_.data[w],R=f[w]=ig(b,a,function Hh(){return Lt.lFrame.currentNamespace}()),P=Gc(D);return li(D,!0),Sd(b,R,D),32!=(32&D.flags)&&Jl(_,f,R,D),0===function Fh(){return Lt.lFrame.elementDepthCount}()&&se(R,f),function Du(){Lt.lFrame.elementDepthCount++}(),P&&(Iw(_,f,D),L_(_,D,f)),null!==d&&Cw(f,D),jg}function Z_(){let o=vr();Vh()?xu():(o=o.parent,li(o,!1));const a=o;!function Lh(){Lt.lFrame.elementDepthCount--}();const u=Bt();return u.firstCreatePass&&(Lu(u,o),El(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Ml(o){return 0!=(8&o.flags)}(a)&&Bg(u,a,ge(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function qo(o){return 0!=(16&o.flags)}(a)&&Bg(u,a,ge(),a.stylesWithoutHost,!1),Z_}function eb(o,a,u,d){return jg(o,a,u,d),Z_(),eb}function Y_(o,a,u){const d=ge(),f=Bt(),_=o+Dn,w=f.firstCreatePass?function tb(o,a,u,d,f){const _=a.consts,w=wo(_,d),b=xg(a,o,8,"ng-container",w);return null!==w&&kw(b,w,!0),U_(a,u,b,wo(_,f)),null!==a.queries&&a.queries.elementStart(a,b),b}(_,f,d,a,u):f.data[_];li(w,!0);const b=d[_]=d[Ht].createComment("");return Jl(f,d,b,w),se(b,d),Gc(w)&&(Iw(f,d,w),L_(f,w,d)),null!=u&&Cw(d,w),Y_}function $g(){let o=vr();const a=Bt();return Vh()?xu():(o=o.parent,li(o,!1)),a.firstCreatePass&&(Lu(a,o),El(o)&&a.queries.elementEnd(o)),$g}function qw(){return ge()}function Hg(o){return!!o&&"function"==typeof o.then}function rb(o){return!!o&&"function"==typeof o.subscribe}const Ww=rb;function Kw(o,a,u,d){const f=ge(),_=Bt(),w=vr();return function Q_(o,a,u,d,f,_,w){const b=Gc(d),R=o.firstCreatePass&&j_(o),P=a[Wn],V=GC(a);let W=!0;if(3&d.type||w){const $e=xr(d,a),Xe=w?w($e):$e,gt=V.length,Pt=w?Gt=>w(Ar(Gt[d.index])):d.index;let Pe=null;if(!w&&b&&(Pe=function wx(o,a,u,d){const f=o.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const w=f[_];if(w===u&&f[_+1]===d){const b=a[go],D=f[_+2];return b.length>D?b[D]:null}"string"==typeof w&&(_+=2)}return null}(o,a,f,d.index)),null!==Pe)(Pe.__ngLastListenerFn__||Pe).__ngNextListenerFn__=_,Pe.__ngLastListenerFn__=_,W=!1;else{_=J_(d,a,P,_,!1);const Gt=u.listen(Xe,f,_);V.push(_,Gt),R&&R.push(f,Pt,gt,gt+1)}}else _=J_(d,a,P,_,!1);const te=d.outputs;let Ie;if(W&&null!==te&&(Ie=te[f])){const $e=Ie.length;if($e)for(let Xe=0;Xe<$e;Xe+=2){const nr=a[Ie[Xe]][Ie[Xe+1]].subscribe(_),Mr=V.length;V.push(_,nr),R&&R.push(f,d.index,Mr,-(Mr+1))}}}(_,f,f[Ht],w,o,a,d),Kw}function ib(o,a,u,d){try{return ai(6,a,u),!1!==u(d)}catch(f){return sx(o,f),!1}finally{ai(7,a,u)}}function J_(o,a,u,d,f){return function _(w){if(w===Function)return d;Mw(o.componentOffset>-1?yr(o.index,a):a);let D=ib(a,u,d,w),R=_.__ngNextListenerFn__;for(;R;)D=ib(a,u,R,w)&&D,R=R.__ngNextListenerFn__;return f&&!1===D&&(w.preventDefault(),w.returnValue=!1),D}}function Zw(o=1){return function $p(o){return(Lt.lFrame.contextLView=function Ou(o,a){for(;o>0;)a=a[Bo],o--;return a}(o,Lt.lFrame.contextLView))[Wn]}(o)}function ey(o,a,u){return ty(o,"",a,"",u),ey}function ty(o,a,u,d,f){const _=ge(),w=Of(_,a,u,d);return w!==jt&&Ts(Bt(),Pn(),_,o,w,_[Ht],f,!1),ty}function Gg(o,a){return o<<17|a<<2}function lu(o){return o>>17&32767}function iy(o){return 2|o}function $d(o){return(131068&o)>>2}function sy(o,a){return-131069&o|a<<2}function Qw(o){return 1|o}function cb(o,a,u,d,f){const _=o[u+1],w=null===a;let b=d?lu(_):$d(_),D=!1;for(;0!==b&&(!1===D||w);){const P=o[b+1];db(o[b],a)&&(D=!0,o[b+1]=d?Qw(P):iy(P)),b=d?lu(P):$d(P)}D&&(o[u+1]=d?iy(_):Qw(_))}function db(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&ci(o,a)>=0}const Jr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Jw(o){return o.substring(Jr.key,Jr.keyEnd)}function xx(o,a){const u=Jr.textEnd;return u===a?-1:(a=Jr.keyEnd=function W1(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,Jr.key=a,u),Hd(o,a,u))}function Hd(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function pb(o,a,u){return Mo(o,a,u,!1),pb}function t0(o,a){return Mo(o,a,null,!0),t0}function ay(o){!function Ea(o,a,u,d){const f=Bt(),_=Pi(2);f.firstUpdatePass&&mb(f,null,_,d);const w=ge();if(u!==jt&&as(w,_,u)){const b=f.data[Vr()];if(yb(b,d)&&!gb(f,_)){let D=d?b.classesWithoutHost:b.stylesWithoutHost;null!==D&&(u=me(D,u||"")),Bg(f,b,w,u,d)}else!function Ia(o,a,u,d,f,_,w,b){f===jt&&(f=Ve);let D=0,R=0,P=0<f.length?f[0]:null,V=0<_.length?_[0]:null;for(;null!==P||null!==V;){const W=D<f.length?f[D+1]:void 0,te=R<_.length?_[R+1]:void 0;let $e,Ie=null;P===V?(D+=2,R+=2,W!==te&&(Ie=V,$e=te)):null===V||null!==P&&P<V?(D+=2,Ie=P):(R+=2,Ie=V,$e=te),null!==Ie&&r0(o,a,u,d,Ie,$e,w,b),P=D<f.length?f[D]:null,V=R<_.length?_[R]:null}}(f,b,w,w[Ht],w[_+1],w[_+1]=function ve(o,a,u){if(null==u||""===u)return Ve;const d=[],f=Br(u);if(Array.isArray(f))for(let _=0;_<f.length;_++)o(d,f[_],!0);else if("object"==typeof f)for(const _ in f)f.hasOwnProperty(_)&&o(d,_,f[_]);else"string"==typeof f&&a(d,f);return d}(o,a,u),d,_)}}(O,wa,o,!0)}function wa(o,a){for(let u=function hb(o){return function Xw(o){Jr.key=0,Jr.keyEnd=0,Jr.value=0,Jr.valueEnd=0,Jr.textEnd=o.length}(o),xx(o,Hd(o,0,Jr.textEnd))}(a);u>=0;u=xx(a,u))ui(o,Jw(a),!0)}function Mo(o,a,u,d){const f=ge(),_=Bt(),w=Pi(2);_.firstUpdatePass&&mb(_,o,w,d),a!==jt&&as(f,w,a)&&r0(_,_.data[Vr()],f,f[Ht],o,f[w+1]=function _b(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=Ce(Br(o)))),o}(a,u),d,w)}function gb(o,a){return a>=o.expandoStartIndex}function mb(o,a,u,d){const f=o.data;if(null===f[u+1]){const _=f[Vr()],w=gb(o,u);yb(_,d)&&null===a&&!w&&(a=!1),a=function Mx(o,a,u,d){const f=$a(o);let _=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(u=ls(u=zg(null,o,a,u,d),a.attrs,d),_=null);else{const w=a.directiveStylingLast;if(-1===w||o[w]!==f)if(u=zg(f,o,a,u,d),null===_){let D=function yn(o,a,u){const d=u?a.classBindings:a.styleBindings;if(0!==$d(d))return o[lu(d)]}(o,a,d);void 0!==D&&Array.isArray(D)&&(D=zg(null,o,a,D[1],d),D=ls(D,a.attrs,d),function Xr(o,a,u,d){o[lu(u?a.classBindings:a.styleBindings)]=d}(o,a,d,D))}else _=function Z1(o,a,u){let d;const f=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<f;_++)d=ls(d,o[_].hostAttrs,u);return ls(d,a.attrs,u)}(o,a,d)}return void 0!==_&&(d?a.residualClasses=_:a.residualStyles=_),u}(f,_,a,d),function Sx(o,a,u,d,f,_){let w=_?a.classBindings:a.styleBindings,b=lu(w),D=$d(w);o[d]=u;let P,R=!1;if(Array.isArray(u)?(P=u[1],(null===P||ci(u,P)>0)&&(R=!0)):P=u,f)if(0!==D){const W=lu(o[b+1]);o[d+1]=Gg(W,b),0!==W&&(o[W+1]=sy(o[W+1],d)),o[b+1]=function bx(o,a){return 131071&o|a<<17}(o[b+1],d)}else o[d+1]=Gg(b,0),0!==b&&(o[b+1]=sy(o[b+1],d)),b=d;else o[d+1]=Gg(D,0),0===b?b=d:o[D+1]=sy(o[D+1],d),D=d;R&&(o[d+1]=iy(o[d+1])),cb(o,P,d,!0),cb(o,P,d,!1),function ub(o,a,u,d,f){const _=f?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&ci(_,a)>=0&&(u[d+1]=Qw(u[d+1]))}(a,P,o,d,_),w=Gg(b,D),_?a.classBindings=w:a.styleBindings=w}(f,_,a,u,w,d)}}function zg(o,a,u,d,f){let _=null;const w=u.directiveEnd;let b=u.directiveStylingLast;for(-1===b?b=u.directiveStart:b++;b<w&&(_=a[b],d=ls(d,_.hostAttrs,f),_!==o);)b++;return null!==o&&(u.directiveStylingLast=b),d}function ls(o,a,u){const d=u?1:2;let f=-1;if(null!==a)for(let _=0;_<a.length;_++){const w=a[_];"number"==typeof w?f=w:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),ui(o,w,!!u||a[++_]))}return void 0===o?null:o}function O(o,a,u){const d=String(a);""!==d&&!d.includes(" ")&&ui(o,d,u)}function r0(o,a,u,d,f,_,w,b){if(!(3&a.type))return;const D=o.data,R=D[b+1],P=function Tx(o){return 1==(1&o)}(R)?s0(D,a,u,f,$d(R),w):void 0;Bf(P)||(Bf(_)||function jd(o){return 2==(2&o)}(R)&&(_=s0(D,null,u,f,b,w)),function Ao(o,a,u,d,f){if(a)f?o.addClass(u,d):o.removeClass(u,d);else{let _=-1===d.indexOf("-")?void 0:bt.DashCase;null==f?o.removeStyle(u,d,_):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),_|=bt.Important),o.setStyle(u,d,f,_))}}(d,w,$s(Vr(),u),f,_))}function s0(o,a,u,d,f,_){const w=null===a;let b;for(;f>0;){const D=o[f],R=Array.isArray(D),P=R?D[1]:D,V=null===P;let W=u[f+1];W===jt&&(W=V?Ve:void 0);let te=V?ln(W,d):P===d?W:void 0;if(R&&!Bf(te)&&(te=ln(D,d)),Bf(te)&&(b=te,w))return b;const Ie=o[f+1];f=w?lu(Ie):$d(Ie)}if(null!==a){let D=_?a.residualClasses:a.residualStyles;null!=D&&(b=ln(D,d))}return b}function Bf(o){return void 0!==o}function yb(o,a){return 0!=(o.flags&(a?8:16))}function vb(o,a=""){const u=ge(),d=Bt(),f=o+Dn,_=d.firstCreatePass?xg(d,f,1,a,null):d.data[f],w=u[f]=function ic(o,a){return o.createText(a)}(u[Ht],a);Jl(d,u,w,_),li(_,!1)}function ly(o){return il("",o,""),ly}function il(o,a,u){const d=ge(),f=Of(d,o,a,u);return f!==jt&&pc(d,Vr(),f),il}function qg(o,a,u,d,f){const _=ge(),w=Bd(_,o,a,u,d,f);return w!==jt&&pc(_,Vr(),w),qg}function f0(o,a,u){const d=ge();if(as(d,Go(),a)){const _=Bt(),w=Pn();Ts(_,w,d,o,a,function zC(o,a,u){return(null===o||Ni(o))&&(u=function Ba(o){for(;Array.isArray(o);){if("object"==typeof o[wl])return o;o=o[xi]}return null}(u[a.index])),u[Ht]}($a(_.data),w,d),u,!0)}return f0}const Ca=void 0;var xb=["en",[["a","p"],["AM","PM"],Ca],[["AM","PM"],Ca,Ca],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ca,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ca,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ca,"{1} 'at' {0}",Ca],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function cy(o){const u=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Wd={};function dy(o){const a=function Nb(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=g0(a);if(u)return u;const d=a.split("-")[0];if(u=g0(d),u)return u;if("en"===d)return xb;throw new _e(701,!1)}function p0(o){return dy(o)[Rt.PluralCase]}function g0(o){return o in Wd||(Wd[o]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[o]),Wd[o]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const Kd="en-US";let Mb=Kd;function rm(o,a,u,d,f){if(o=Y(o),Array.isArray(o))for(let _=0;_<o.length;_++)rm(o[_],a,u,d,f);else{const _=Bt(),w=ge();let b=iu(o)?o:Y(o.provide),D=sw(o);const R=vr(),P=1048575&R.providerIndexes,V=R.directiveStart,W=R.providerIndexes>>20;if(iu(o)||!o.multi){const te=new qs(D,f,Af),Ie=my(b,a,f?P:P+W,V);-1===Ie?(In(td(R,w),_,b),im(_,o,a.length),a.push(b),R.directiveStart++,R.directiveEnd++,f&&(R.providerIndexes+=1048576),u.push(te),w.push(te)):(u[Ie]=te,w[Ie]=te)}else{const te=my(b,a,P+W,V),Ie=my(b,a,P,P+W),Xe=Ie>=0&&u[Ie];if(f&&!Xe||!f&&!(te>=0&&u[te])){In(td(R,w),_,b);const gt=function iT(o,a,u,d,f){const _=new qs(o,u,Af);return _.multi=[],_.index=a,_.componentProviders=0,tT(_,f,d&&!u),_}(f?rT:nT,u.length,f,d,D);!f&&Xe&&(u[Ie].providerFactory=gt),im(_,o,a.length,0),a.push(b),R.directiveStart++,R.directiveEnd++,f&&(R.providerIndexes+=1048576),u.push(gt),w.push(gt)}else im(_,o,te>-1?te:Ie,tT(u[f?Ie:te],D,!f&&d));!f&&d&&Xe&&u[Ie].componentProviders++}}}function im(o,a,u,d){const f=iu(a),_=function A_(o){return!!o.useClass}(a);if(f||_){const D=(_?Y(a.useClass):a).prototype.ngOnDestroy;if(D){const R=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const P=R.indexOf(u);-1===P?R.push(u,[d,D]):R[P+1].push(d,D)}else R.push(u,D)}}}function tT(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function my(o,a,u,d){for(let f=u;f<d;f++)if(a[f]===o)return f;return-1}function nT(o,a,u,d){return Ic(this.multi,[])}function rT(o,a,u,d){const f=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,b=Jn(u,u[Je],this.providerFactory.index,d);_=b.slice(0,w),Ic(f,_);for(let D=w;D<b.length;D++)_.push(b[D])}else _=[],Ic(f,_);return _}function Ic(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function T0(o,a=[]){return u=>{u.providersResolver=(d,f)=>function iR(o,a,u){const d=Bt();if(d.firstCreatePass){const f=Ni(o);rm(u,d.data,d.blueprint,f,!0),rm(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class Kf{}class sT{}function sR(o,a){return new oT(o,a??null)}class oT extends Kf{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new WC(this);const d=or(a);this._bootstrapComponents=tl(d.bootstrap),this._r3Injector=mw(a,u,[{provide:Kf,useValue:this},{provide:If,useValue:this.componentFactoryResolver}],Ce(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class D0 extends sT{constructor(a){super(),this.moduleType=a}create(a){return new oT(this.moduleType,a)}}class _y extends Kf{constructor(a,u,d){super(),this.componentFactoryResolver=new WC(this),this.instance=null;const f=new QI([...a,{provide:Kf,useValue:this},{provide:If,useValue:this.componentFactoryResolver}],u||R_(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function sm(o,a,u=null){return new _y(o,a,u).injector}let Zf=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=vf(0,u.type),f=d.length>0?sm([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=pt({token:o,providedIn:"environment",factory:()=>new o(dn(kd))}),o})();function al(o){o.getStandaloneInjector=a=>a.get(Zf).getOrCreateStandaloneInjector(o)}function cT(o,a,u,d){return function um(o,a,u,d,f,_){const w=a+u;return as(o,w,f)?ya(o,w+1,_?d.call(_,f):d(f)):Jf(o,w+1)}(ge(),lr(),o,a,u,d)}function Jf(o,a){const u=o[a];return u===jt?void 0:u}function Ey(o,a){const u=Bt();let d;const f=o+Dn;u.firstCreatePass?(d=function fR(o,a){if(a)for(let u=a.length-1;u>=0;u--){const d=a[u];if(o===d.name)return d}}(a,u.pipeRegistry),u.data[f]=d,d.onDestroy&&(u.destroyHooks??(u.destroyHooks=[])).push(f,d.onDestroy)):d=u.data[f];const _=d.factory||(d.factory=Es(d.type)),w=Lr(Af);try{const b=Pl(!1),D=_();return Pl(b),function yx(o,a,u,d){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=d}(u,ge(),f,D),D}finally{Lr(w)}}function pT(o,a,u,d){const f=o+Dn,_=ge(),w=Yr(_,f);return function th(o,a){return o[Je].data[a].pure}(_,f)?function hT(o,a,u,d,f,_,w){const b=a+u;return Vd(o,b,f,_)?ya(o,b+2,w?d.call(w,f,_):d(f,_)):Jf(o,b+2)}(_,lr(),a,w.transform,u,d,w):w.transform(u,d)}function dm(o){return a=>{setTimeout(o,void 0,a)}}const no=class M0 extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,d){let f=a,_=u||(()=>null),w=d;if(a&&"object"==typeof a){const D=a;f=D.next?.bind(D),_=D.error?.bind(D),w=D.complete?.bind(D)}this.__isAsync&&(_=dm(_),f&&(f=dm(f)),w&&(w=dm(w)));const b=super.subscribe({next:f,error:_,complete:w});return a instanceof ee.w0&&a.add(b),b}};function hm(){return this._results[Symbol.iterator]()}class cu{get changes(){return this._changes||(this._changes=new no)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=cu.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=hm)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const d=this;d.dirty=!1;const f=function Xi(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function ad(o,a,u){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],_=a[d];if(u&&(f=u(f),_=u(_)),_!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ll=(()=>{class o{}return o.__NG_ELEMENT_ID__=_R,o})();const Cc=ll,mR=class extends Cc{constructor(a,u,d){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(a,u){const d=this._declarationTContainer.tView,f=F_(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,u||null);f[Fa]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[Qi];return null!==w&&(f[Qi]=w.createEmbeddedView(d)),ou(d,f,a),new $_(f)}};function _R(){return bc(vr(),ge())}function bc(o,a){return 4&o.type?new mR(a,o,su(o,a)):null}let Iy=(()=>{class o{}return o.__NG_ELEMENT_ID__=yR,o})();function yR(){return Tc(vr(),ge())}const Cy=Iy,Xf=class extends Cy{constructor(a,u,d){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=d}get element(){return su(this._hostTNode,this._hostLView)}get injector(){return new Ks(this._hostTNode,this._hostLView)}get parentInjector(){const a=Wh(this._hostTNode,this._hostLView);if(Yo(a)){const u=Qo(a,this._hostLView),d=Eo(a);return new Ks(u[Je].data[d+8],u)}return new Ks(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=P0(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-Sr}createEmbeddedView(a,u,d){let f,_;"number"==typeof d?f=d:null!=d&&(f=d.index,_=d.injector);const w=a.createEmbeddedView(u||{},_);return this.insert(w,f),w}createComponent(a,u,d,f,_){const w=a&&!function Wu(o){return"function"==typeof o}(a);let b;if(w)b=u;else{const V=u||{};b=V.index,d=V.injector,f=V.projectableNodes,_=V.environmentInjector||V.ngModuleRef}const D=w?a:new Mg(wt(a)),R=d||this.parentInjector;if(!_&&null==D.ngModule){const W=(w?R:this.parentInjector).get(kd,null);W&&(_=W)}const P=D.create(R,f,void 0,_);return this.insert(P.hostView,b),P}insert(a,u){const d=a._lView,f=d[Je];if(function Kc(o){return Ei(o[Rn])}(d)){const P=this.indexOf(a);if(-1!==P)this.detach(P);else{const V=d[Rn],W=new Xf(V,V[ar],V[Rn]);W.detach(W.indexOf(a))}}const _=this._adjustIndex(u),w=this._lContainer;!function Zl(o,a,u,d){const f=Sr+d,_=u.length;d>0&&(u[f-1][Ri]=a),d<_-Sr?(a[Ri]=u[f],Jp(u,Sr+d,a)):(u.push(a),a[Ri]=null),a[Rn]=u;const w=a[Fa];null!==w&&u!==w&&function $v(o,a){const u=o[jo];a[Qn]!==a[Rn][Rn][Qn]&&(o[Hc]=!0),null===u?o[jo]=[a]:u.push(a)}(w,a);const b=a[Qi];null!==b&&b.insertView(o),a[Vt]|=64}(f,d,w,_);const b=Js(_,w),D=d[Ht],R=ga(D,w[La]);return null!==R&&function g_(o,a,u,d,f,_){d[xi]=f,d[ar]=a,Td(o,d,u,1,f,_)}(f,w[ar],D,d,R,b),a.attachToViewContainerRef(),Jp(ep(w),_,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=P0(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),d=wd(this._lContainer,u);d&&(sa(ep(this._lContainer),u),af(d[Je],d))}detach(a){const u=this._adjustIndex(a,-1),d=wd(this._lContainer,u);return d&&null!=sa(ep(this._lContainer),u)?new $_(d):null}_adjustIndex(a,u=0){return a??this.length+u}};function P0(o){return o[_o]}function ep(o){return o[_o]||(o[_o]=[])}function Tc(o,a){let u;const d=a[o.index];if(Ei(d))u=d;else{let f;if(8&o.type)f=Ar(d);else{const _=a[Ht];f=_.createComment("");const w=xr(o,a);Xa(_,ga(_,w),f,function y_(o,a){return o.nextSibling(a)}(_,w),!1)}a[o.index]=u=Rg(d,a,f,o),Nw(a,u)}return new Xf(u,o,a)}class fm{constructor(a){this.queryList=a,this.matches=null}clone(){return new fm(this.queryList)}setDirty(){this.queryList.setDirty()}}class k0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const d=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let _=0;_<d;_++){const w=u.getByIndex(_);f.push(this.queries[w.indexInDeclarationView].clone())}return new k0(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==yT(a,u).matches&&this.queries[u].setDirty()}}class Ln{constructor(a,u,d=null){this.predicate=a,this.flags=u,this.read=d}}class ro{constructor(a=[]){this.queries=a}elementStart(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,_=this.getByIndex(d).embeddedTView(a,f);_&&(_.indexInDeclarationView=d,null!==u?u.push(_):u=[_])}return null!==u?new ro(u):null}template(a,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class nh{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new nh(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const _=d[f];this.matchTNodeWithReadOption(a,u,O0(u,_)),this.matchTNodeWithReadOption(a,u,Xo(u,a,_,!1,!1))}else d===ll?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Xo(u,a,d,!1,!1))}matchTNodeWithReadOption(a,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Cf||f===Iy||f===ll&&4&u.type)this.addMatch(u.index,-2);else{const _=Xo(u,a,f,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,d)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function O0(o,a){const u=o.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===a)return u[d+1];return null}function F0(o,a,u,d){return-1===u?function gT(o,a){return 11&o.type?su(o,a):4&o.type?bc(o,a):null}(a,o):-2===u?function rh(o,a,u){return u===Cf?su(a,o):u===ll?bc(a,o):u===Iy?Tc(a,o):void 0}(o,a,d):Jn(o,o[Je],u,a)}function L0(o,a,u,d){const f=a[Qi].queries[d];if(null===f.matches){const _=o.data,w=u.matches,b=[];for(let D=0;D<w.length;D+=2){const R=w[D];b.push(R<0?null:F0(a,_[R],w[D+1],u.metadata.read))}f.matches=b}return f.matches}function ul(o,a,u,d){const f=o.queries.getByIndex(u),_=f.matches;if(null!==_){const w=L0(o,a,f,u);for(let b=0;b<_.length;b+=2){const D=_[b];if(D>0)d.push(w[b/2]);else{const R=_[b+1],P=a[-D];for(let V=Sr;V<P.length;V++){const W=P[V];W[Fa]===W[Rn]&&ul(W[Je],W,R,d)}if(null!==P[jo]){const V=P[jo];for(let W=0;W<V.length;W++){const te=V[W];ul(te[Je],te,R,d)}}}}}return d}function by(o){const a=ge(),u=Bt(),d=Zc();Nu(d+1);const f=yT(u,d);if(o.dirty&&function Tu(o){return 4==(4&o[Vt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const _=f.crossesNgTemplate?ul(u,a,d,[]):L0(u,a,f,d);o.reset(_,Eg),o.notifyOnChanges()}return!0}return!1}function U0(o,a,u,d){const f=Bt();if(f.firstCreatePass){const _=vr();(function _T(o,a,u){null===o.queries&&(o.queries=new ro),o.queries.track(new nh(a,u))})(f,new Ln(a,u,d),_.index),function wR(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}!function mT(o,a,u){const d=new cu(4==(4&u));bw(o,a,d,d.destroy),null===a[Qi]&&(a[Qi]=new k0),a[Qi].queries.push(new fm(d))}(f,ge(),u)}function pm(){return function vR(o,a){return o[Qi].queries[a].queryList}(ge(),Zc())}function yT(o,a){return o.queries.getByIndex(a)}function V0(o){return!!or(o)}function lh(...o){}const OT=new tn("Application Initializer");let Ry=(()=>{class o{constructor(u){this.appInits=u,this.resolve=lh,this.reject=lh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const _=this.appInits[f]();if(Hg(_))u.push(_);else if(Ww(_)){const w=new Promise((b,D)=>{_.subscribe({complete:b,error:D})});u.push(w)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(dn(OT,8))},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const W0=new tn("AppId",{providedIn:"root",factory:function Ny(){return`${cl()}${cl()}${cl()}`}});function cl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const np=new tn("Platform Initializer"),FR=new tn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),LR=new tn("AnimationModuleType");let My=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Py=new tn("LocaleId",{providedIn:"root",factory:()=>qn(Py,vt.Optional|vt.SkipSelf)||function FT(){return typeof $localize<"u"&&$localize.locale||Kd}()}),K0=new tn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class LT{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let UT=(()=>{class o{compileModuleSync(u){return new D0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),_=tl(or(u).declarations).reduce((w,b)=>{const D=wt(b);return D&&w.push(new Mg(D)),w},[]);return new LT(d,_)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Im=(()=>Promise.resolve(0))();function Y0(o){typeof Zone>"u"?Im.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ss{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new no(!1),this.onMicrotaskEmpty=new no(!1),this.onStable=new no(!1),this.onError=new no(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function UR(){let o=an.requestAnimationFrame,a=an.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function VR(o){const a=()=>{!function jT(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(an,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,X0(o),o.isCheckStableRunning=!0,J0(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),X0(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,_,w,b)=>{try{return eE(o),u.invokeTask(f,_,w,b)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),Uy(o)}},onInvoke:(u,d,f,_,w,b,D)=>{try{return eE(o),u.invoke(f,_,w,b,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),Uy(o)}},onHasTask:(u,d,f,_)=>{u.hasTask(f,_),d===f&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,X0(o),J0(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,d,f,_)=>(u.handleError(f,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ss.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(Ss.isInAngularZone())throw new _e(909,!1)}run(a,u,d){return this._inner.run(a,u,d)}runTask(a,u,d,f){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+f,a,Q0,lh,lh);try{return _.runTask(w,u,d)}finally{_.cancelTask(w)}}runGuarded(a,u,d){return this._inner.runGuarded(a,u,d)}runOutsideAngular(a){return this._outer.run(a)}}const Q0={};function J0(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function X0(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function eE(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Uy(o){o._nesting--,J0(o)}class tE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new no,this.onMicrotaskEmpty=new no,this.onStable=new no,this.onError=new no}run(a,u,d){return a.apply(u,d)}runGuarded(a,u,d){return a.apply(u,d)}runOutsideAngular(a){return a()}runTask(a,u,d,f){return a.apply(u,d)}}const Vy=new tn(""),Cm=new tn("");let nE,uh=(()=>{class o{constructor(u,d,f){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,nE||(function $T(o){nE=o}(f),f.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ss.assertNotInAngularZone(),Y0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Y0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(dn(Ss),dn(By),dn(Cm))},o.\u0275prov=pt({token:o,factory:o.\u0275fac}),o})(),By=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return nE?.findTestabilityInTree(this,u,d)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Fo=!1;let du=null;const HT=new tn("AllowMultipleToken"),ch=new tn("PlatformDestroyListeners"),jy=new tn("appBootstrapListener");class rE{constructor(a,u){this.name=a,this.token=u}}function Ta(o,a,u=[]){const d=`Platform: ${a}`,f=new tn(d);return(_=[])=>{let w=Tm();if(!w||w.injector.get(HT,!1)){const b=[...u,..._,{provide:f,useValue:!0}];o?o(b):function $y(o){if(du&&!du.get(HT,!1))throw new _e(400,!1);du=o;const a=o.get(rp);(function zT(o){const a=o.get(np,null);a&&a.forEach(u=>u())})(o)}(function qT(o=[],a){return Tf.create({name:a,providers:[{provide:dc,useValue:"platform"},{provide:ch,useValue:new Set([()=>du=null])},...o]})}(b,d))}return function bm(o){const a=Tm();if(!a)throw new _e(401,!1);return a}()}}function Tm(){return du?.get(rp)??null}let rp=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const f=function WT(o,a){let u;return u="noop"===o?new tE:("zone.js"===o?void 0:o)||new Ss(a),u}(d?.ngZone,function ip(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),_=[{provide:Ss,useValue:f}];return f.run(()=>{const w=Tf.create({providers:_,parent:this.injector,name:u.moduleType.name}),b=u.create(w),D=b.injector.get(Ig,null);if(!D)throw new _e(402,!1);return f.runOutsideAngular(()=>{const R=f.onError.subscribe({next:P=>{D.handleError(P)}});b.onDestroy(()=>{dh(this._modules,b),R.unsubscribe()})}),function io(o,a,u){try{const d=u();return Hg(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(D,f,()=>{const R=b.injector.get(Ry);return R.runInitializers(),R.donePromise.then(()=>(function _0(o){ye(o,"Expected localeId to be defined"),"string"==typeof o&&(Mb=o.toLowerCase().replace(/_/g,"-"))}(b.injector.get(Py,Kd)||Kd),this._moduleDoBootstrap(b),b))})})}bootstrapModule(u,d=[]){const f=iE({},d);return function BR(o,a,u){const d=new D0(u);return Promise.resolve(d)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(u){const d=u.injector.get(Gy);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new _e(-403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(ch,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(dn(Tf))},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function iE(o,a){return Array.isArray(a)?a.reduce(iE,o):{...o,...a}}let Gy=(()=>{class o{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,d,f){this._zone=u,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new L.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),w=new L.y(b=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Ss.assertNotInAngularZone(),Y0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{D.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ue.T)(_,w.pipe((0,le.B)()))}bootstrap(u,d){const f=u instanceof XI;if(!this._injector.get(Ry).done){!f&&Dr(u);throw new _e(405,Fo)}let w;w=f?u:this._injector.get(If).resolveComponentFactory(u),this.componentTypes.push(w.componentType);const b=function jR(o){return o.isBoundToModule}(w)?void 0:this._injector.get(Kf),R=w.create(Tf.NULL,[],d||w.selector,b),P=R.location.nativeElement,V=R.injector.get(Vy,null);return V?.registerApplication(P),R.onDestroy(()=>{this.detachView(R.hostView),dh(this.components,R),V?.unregisterApplication(P)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;dh(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const d=this._injector.get(jy,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>dh(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new _e(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(dn(Ss),dn(kd),dn(Ig))},o.\u0275prov=pt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function dh(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}function KT(){return!1}let GR=(()=>{class o{}return o.__NG_ELEMENT_ID__=YT,o})();function YT(o){return function Dm(o,a,u){if(Ua(o)&&!u){const d=yr(o.index,a);return new $_(d,d)}return 47&o.type?new $_(a[Qn],a):null}(vr(),ge(),16==(16&o))}class tD{constructor(){}supports(a){return Ud(a)}create(a){return new YR(a)}}const op=(o,a)=>a;class YR{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||op}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,d=this._removalsHead,f=0,_=null;for(;u||d;){const w=!d||u&&u.currentIndex<Sm(d,f,_)?u:d,b=Sm(w,f,_),D=w.currentIndex;if(w===d)f--,d=d._nextRemoved;else if(u=u._next,null==w.previousIndex)f++;else{_||(_=[]);const R=b-f,P=D-f;if(R!=P){for(let W=0;W<R;W++){const te=W<_.length?_[W]:_[W]=0,Ie=te+W;P<=Ie&&Ie<R&&(_[W]=te+1)}_[w.previousIndex]=P-R}}b!==D&&a(w,b,D)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Ud(a))throw new _e(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,_,w,u=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let b=0;b<this.length;b++)_=a[b],w=this._trackByFn(b,_),null!==u&&Object.is(u.trackById,w)?(d&&(u=this._verifyReinsertion(u,_,w,b)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,w,b),d=!0),u=u._next}else f=0,function dx(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Symbol.iterator]();let d;for(;!(d=u.next()).done;)a(d.value)}}(a,b=>{w=this._trackByFn(f,b),null!==u&&Object.is(u.trackById,w)?(d&&(u=this._verifyReinsertion(u,b,w,f)),Object.is(u.item,b)||this._addIdentityChange(u,b)):(u=this._mismatch(u,b,w,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,d,f){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,_,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,_,f)):a=this._addAfter(new nD(u,d),_,f),a}_verifyReinsertion(a,u,d,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?a=this._reinsertAfter(_,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,_=a._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(a,u,d),this._addToMoves(a,d),a}_moveAfter(a,u,d){return this._unlink(a),this._insertAfter(a,u,d),this._addToMoves(a,d),a}_addAfter(a,u,d){return this._insertAfter(a,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,d){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new hE),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,d=a._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hE),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class nD{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rD{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const u=a._prevDup,d=a._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class hE{constructor(){this.map=new Map}put(a){const u=a.trackById;let d=this.map.get(u);d||(d=new rD,this.map.set(u,d)),d.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Sm(o,a,u){const d=o.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+a+f}class qy{constructor(){}supports(a){return a instanceof Map||W_(a)}create(){return new fE}}class fE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||W_(a)))throw new _e(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const d=a._prev;return u._next=a,u._prev=d,a._prev=u,d&&(d._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const _=f._prev,w=f._next;return _&&(_._next=w),w&&(w._prev=_),f._next=null,f._prev=null,f}const d=new QR(a);return this._records.set(a,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(d=>u(a[d],d))}}class QR{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function iD(){return new Am([new tD])}let Am=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||iD()),deps:[[o,new yt,new Hl]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new _e(901,!1)}}return o.\u0275prov=pt({token:o,providedIn:"root",factory:iD}),o})();function pE(){return new gE([new qy])}let gE=(()=>{class o{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:d=>o.create(u,d||pE()),deps:[[o,new yt,new Hl]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(d)return d;throw new _e(901,!1)}}return o.\u0275prov=pt({token:o,providedIn:"root",factory:pE}),o})();const As=Ta(null,"core",[]);let Wy=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(dn(Gy))},o.\u0275mod=re({type:o}),o.\u0275inj=mt({}),o})();function Sc(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(Et,xe,U)=>{U.d(xe,{Z:()=>Qe});var c=U(2090),ee=U(4859),L=U(6881),ue=U(1877);class le{constructor(_e,ke){this._delegate=_e,this.firebase=ke,(0,L._addComponent)(_e,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(_e,ke=L._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(_e);return!Ge.isInitialized()&&"EXPLICIT"===(null===(Oe=Ge.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:ke})}_removeServiceInstance(_e,ke=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(ke)}_addComponent(_e){(0,L._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,L._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function me(){const ut=function Ce(ut){const _e={},ke={__esModule:!0,initializeApp:function Fe(Ue,ot={}){const ae=L.initializeApp(Ue,ot);if((0,c.r3)(_e,ae.name))return _e[ae.name];const At=new ut(ae,ke);return _e[ae.name]=At,At},app:Ge,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Te(Ue){const ot=Ue.name,ae=ot.replace("-compat","");if(L._registerComponent(Ue)&&"PUBLIC"===Ue.type){const At=(nt=Ge())=>{if("function"!=typeof nt[ae])throw we.create("invalid-app-argument",{appName:ot});return nt[ae]()};void 0!==Ue.serviceProps&&(0,c.ZB)(At,Ue.serviceProps),ke[ae]=At,ut.prototype[ae]=function(...nt){return this._getService.bind(this,ot).apply(this,Ue.multipleInstances?nt:[])}}return"PUBLIC"===Ue.type?ke[ae]:null},removeApp:function Oe(Ue){delete _e[Ue]},useAsService:function Ke(Ue,ot){return"serverAuth"===ot?null:ot},modularAPIs:L}};function Ge(Ue){if(!(0,c.r3)(_e,Ue=Ue||L._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Ue});return _e[Ue]}return ke.default=ke,Object.defineProperty(ke,"apps",{get:function be(){return Object.keys(_e).map(Ue=>_e[Ue])}}),Ge.App=ut,ke}(le);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function _e(ke){(0,c.ZB)(ut,ke)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),ut}(),G=new ue.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qe=z;!function Se(ut){(0,L.registerVersion)("@firebase/app-compat","0.2.13",ut)}()},6881:(Et,xe,U)=>{U.r(xe),U.d(xe,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Ls,_DEFAULT_ENTRY_NAME:()=>ri,_addComponent:()=>at,_addOrOverwriteComponent:()=>Ft,_apps:()=>an,_clearComponents:()=>qr,_components:()=>cn,_getProvider:()=>yi,_registerComponent:()=>Si,_removeServiceInstance:()=>_r,deleteApp:()=>Ai,getApp:()=>vs,getApps:()=>dn,initializeApp:()=>Jt,onLog:()=>Ki,registerVersion:()=>sr,setLogLevel:()=>xn});var c=U(5861),ee=U(4859),L=U(1877),ue=U(2090);const le=(pe,re)=>re.some(Le=>pe instanceof Le);let ie,we;const z=new WeakMap,G=new WeakMap,Y=new WeakMap,ze=new WeakMap,Se=new WeakMap;let _e={get(pe,re,Le){if(pe instanceof IDBTransaction){if("done"===re)return G.get(pe);if("objectStoreNames"===re)return pe.objectStoreNames||Y.get(pe);if("store"===re)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return Fe(pe[re])},set:(pe,re,Le)=>(pe[re]=Le,!0),has:(pe,re)=>pe instanceof IDBTransaction&&("done"===re||"store"===re)||re in pe};function Ge(pe){return"function"==typeof pe?function Oe(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...re){return pe.apply(be(this),re),Fe(z.get(this))}:function(...re){return Fe(pe.apply(be(this),re))}:function(re,...Le){const _t=pe.call(be(this),re,...Le);return Y.set(_t,re.sort?re.sort():[re]),Fe(_t)}}(pe):(pe instanceof IDBTransaction&&function ut(pe){if(G.has(pe))return;const re=new Promise((Le,_t)=>{const Dt=()=>{pe.removeEventListener("complete",zt),pe.removeEventListener("error",wt),pe.removeEventListener("abort",wt)},zt=()=>{Le(),Dt()},wt=()=>{_t(pe.error||new DOMException("AbortError","AbortError")),Dt()};pe.addEventListener("complete",zt),pe.addEventListener("error",wt),pe.addEventListener("abort",wt)});G.set(pe,re)}(pe),le(pe,function Ce(){return ie||(ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,_e):pe)}function Fe(pe){if(pe instanceof IDBRequest)return function Qe(pe){const re=new Promise((Le,_t)=>{const Dt=()=>{pe.removeEventListener("success",zt),pe.removeEventListener("error",wt)},zt=()=>{Le(Fe(pe.result)),Dt()},wt=()=>{_t(pe.error),Dt()};pe.addEventListener("success",zt),pe.addEventListener("error",wt)});return re.then(Le=>{Le instanceof IDBCursor&&z.set(Le,pe)}).catch(()=>{}),Se.set(re,pe),re}(pe);if(ze.has(pe))return ze.get(pe);const re=Ge(pe);return re!==pe&&(ze.set(pe,re),Se.set(re,pe)),re}const be=pe=>Se.get(pe),Ue=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],ae=new Map;function At(pe,re){if(!(pe instanceof IDBDatabase)||re in pe||"string"!=typeof re)return;if(ae.get(re))return ae.get(re);const Le=re.replace(/FromIndex$/,""),_t=re!==Le,Dt=ot.includes(Le);if(!(Le in(_t?IDBIndex:IDBObjectStore).prototype)||!Dt&&!Ue.includes(Le))return;const zt=function(){var wt=(0,c.Z)(function*(un,...sn){const Dr=this.transaction(un,Dt?"readwrite":"readonly");let or=Dr.store;return _t&&(or=or.index(sn.shift())),(yield Promise.all([or[Le](...sn),Dt&&Dr.done]))[0]});return function(sn){return wt.apply(this,arguments)}}();return ae.set(re,zt),zt}!function ke(pe){_e=pe(_e)}(pe=>({...pe,get:(re,Le,_t)=>At(re,Le)||pe.get(re,Le,_t),has:(re,Le)=>!!At(re,Le)||pe.has(re,Le)}));class nt{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(Le=>{if(function Kt(pe){return"VERSION"===pe.getComponent()?.type}(Le)){const _t=Le.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(Le=>Le).join(" ")}}const ct="@firebase/app",gi=new L.Yd("@firebase/app"),ri="[DEFAULT]",ys={[ct]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},an=new Map,cn=new Map;function at(pe,re){try{pe.container.addComponent(re)}catch(Le){gi.debug(`Component ${re.name} failed to register with FirebaseApp ${pe.name}`,Le)}}function Ft(pe,re){pe.container.addOrOverwriteComponent(re)}function Si(pe){const re=pe.name;if(cn.has(re))return gi.debug(`There were multiple attempts to register component ${re}.`),!1;cn.set(re,pe);for(const Le of an.values())at(Le,pe);return!0}function yi(pe,re){const Le=pe.container.getProvider("heartbeat").getImmediate({optional:!0});return Le&&Le.triggerHeartbeat(),pe.container.getProvider(re)}function _r(pe,re,Le=ri){yi(pe,re).clearInstance(Le)}function qr(){cn.clear()}const ii=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mn{constructor(re,Le,_t){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},Le),this._name=Le.name,this._automaticDataCollectionEnabled=Le.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}const Ls="9.23.0";function Jt(pe,re={}){let Le=pe;"object"!=typeof re&&(re={name:re});const _t=Object.assign({name:ri,automaticDataCollectionEnabled:!1},re),Dt=_t.name;if("string"!=typeof Dt||!Dt)throw ii.create("bad-app-name",{appName:String(Dt)});if(Le||(Le=(0,ue.aH)()),!Le)throw ii.create("no-options");const zt=an.get(Dt);if(zt){if((0,ue.vZ)(Le,zt.options)&&(0,ue.vZ)(_t,zt.config))return zt;throw ii.create("duplicate-app",{appName:Dt})}const wt=new ee.H0(Dt);for(const sn of cn.values())wt.addComponent(sn);const un=new mn(Le,_t,wt);return an.set(Dt,un),un}function vs(pe=ri){const re=an.get(pe);if(!re&&pe===ri&&(0,ue.aH)())return Jt();if(!re)throw ii.create("no-app",{appName:pe});return re}function dn(){return Array.from(an.values())}function Ai(pe){return qn.apply(this,arguments)}function qn(){return(qn=(0,c.Z)(function*(pe){const re=pe.name;an.has(re)&&(an.delete(re),yield Promise.all(pe.container.getProviders().map(Le=>Le.delete())),pe.isDeleted=!0)})).apply(this,arguments)}function sr(pe,re,Le){var _t;let Dt=null!==(_t=ys[pe])&&void 0!==_t?_t:pe;Le&&(Dt+=`-${Le}`);const zt=Dt.match(/\s|\//),wt=re.match(/\s|\//);if(zt||wt){const un=[`Unable to register library "${Dt}" with version "${re}":`];return zt&&un.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),zt&&wt&&un.push("and"),wt&&un.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void gi.warn(un.join(" "))}Si(new ee.wA(`${Dt}-version`,()=>({library:Dt,version:re}),"VERSION"))}function Ki(pe,re){if(null!==pe&&"function"!=typeof pe)throw ii.create("invalid-log-argument");(0,L.Am)(pe,re)}function xn(pe){(0,L.Ub)(pe)}const Zi="firebase-heartbeat-database",si=1,H="firebase-heartbeat-store";let j=null;function K(){return j||(j=function Te(pe,re,{blocked:Le,upgrade:_t,blocking:Dt,terminated:zt}={}){const wt=indexedDB.open(pe,re),un=Fe(wt);return _t&&wt.addEventListener("upgradeneeded",sn=>{_t(Fe(wt.result),sn.oldVersion,sn.newVersion,Fe(wt.transaction),sn)}),Le&&wt.addEventListener("blocked",sn=>Le(sn.oldVersion,sn.newVersion,sn)),un.then(sn=>{zt&&sn.addEventListener("close",()=>zt()),Dt&&sn.addEventListener("versionchange",Dr=>Dt(Dr.oldVersion,Dr.newVersion,Dr))}).catch(()=>{}),un}(Zi,si,{upgrade:(pe,re)=>{0===re&&pe.createObjectStore(H)}}).catch(pe=>{throw ii.create("idb-open",{originalErrorMessage:pe.message})})),j}function ne(){return(ne=(0,c.Z)(function*(pe){try{return yield(yield K()).transaction(H).objectStore(H).get(rn(pe))}catch(re){if(re instanceof ue.ZR)gi.warn(re.message);else{const Le=ii.create("idb-get",{originalErrorMessage:re?.message});gi.warn(Le.message)}}})).apply(this,arguments)}function Ve(pe,re){return xt.apply(this,arguments)}function xt(){return(xt=(0,c.Z)(function*(pe,re){try{const _t=(yield K()).transaction(H,"readwrite");yield _t.objectStore(H).put(re,rn(pe)),yield _t.done}catch(Le){if(Le instanceof ue.ZR)gi.warn(Le.message);else{const _t=ii.create("idb-set",{originalErrorMessage:Le?.message});gi.warn(_t.message)}}})).apply(this,arguments)}function rn(pe){return`${pe.name}!${pe.options.appId}`}class gn{constructor(re){this.container=re,this._heartbeatsCache=null;const Le=this.container.getProvider("app").getImmediate();this._storage=new Yi(Le),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var re=this;return(0,c.Z)(function*(){const _t=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=Yt();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!re._heartbeatsCache.heartbeats.some(zt=>zt.date===Dt))return re._heartbeatsCache.heartbeats.push({date:Dt,agent:_t}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(zt=>{const wt=new Date(zt.date).valueOf();return Date.now()-wt<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,c.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const Le=Yt(),{heartbeatsToSend:_t,unsentEntries:Dt}=function Wr(pe,re=1024){const Le=[];let _t=pe.slice();for(const Dt of pe){const zt=Le.find(wt=>wt.agent===Dt.agent);if(zt){if(zt.dates.push(Dt.date),ws(Le)>re){zt.dates.pop();break}}else if(Le.push({agent:Dt.agent,dates:[Dt.date]}),ws(Le)>re){Le.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:Le,unsentEntries:_t}}(re._heartbeatsCache.heartbeats),zt=(0,ue.L)(JSON.stringify({version:2,heartbeats:_t}));return re._heartbeatsCache.lastSentHeartbeatDate=Le,Dt.length>0?(re._heartbeatsCache.heartbeats=Dt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),zt})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class Yi{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,c.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function Ee(pe){return ne.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var Le=this;return(0,c.Z)(function*(){var _t;if(yield Le._canUseIndexedDBPromise){const zt=yield Le.read();return Ve(Le.app,{lastSentHeartbeatDate:null!==(_t=re.lastSentHeartbeatDate)&&void 0!==_t?_t:zt.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var Le=this;return(0,c.Z)(function*(){var _t;if(yield Le._canUseIndexedDBPromise){const zt=yield Le.read();return Ve(Le.app,{lastSentHeartbeatDate:null!==(_t=re.lastSentHeartbeatDate)&&void 0!==_t?_t:zt.lastSentHeartbeatDate,heartbeats:[...zt.heartbeats,...re.heartbeats]})}})()}}function ws(pe){return(0,ue.L)(JSON.stringify({version:2,heartbeats:pe})).length}!function _l(pe){Si(new ee.wA("platform-logger",re=>new nt(re),"PRIVATE")),Si(new ee.wA("heartbeat",re=>new gn(re),"PRIVATE")),sr(ct,"0.9.13",pe),sr(ct,"0.9.13","esm2017"),sr("fire-js","")}("")},4859:(Et,xe,U)=>{U.d(xe,{H0:()=>Ce,wA:()=>L,zt:()=>le});var c=U(5861),ee=U(2090);class L{constructor(z,G,Y){this.name=z,this.instanceFactory=G,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ue="[DEFAULT]";class le{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const Y=new ee.BH;if(this.instancesDeferred.set(G,Y),this.isInitialized(G)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:G});ze&&Y.resolve(ze)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const Y=this.normalizeInstanceIdentifier(z?.identifier),ze=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Se){if(ze)return null;throw Se}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function we(me){return"EAGER"===me.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[G,Y]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(G);try{const Se=this.getOrInitializeService({instanceIdentifier:ze});Y.resolve(Se)}catch{}}}}clearInstance(z=ue){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,c.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...G.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ue){return this.instances.has(z)}getOptions(z=ue){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,Y=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:Y,options:G});for(const[Se,Qe]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Se)&&Qe.resolve(ze);return ze}onInit(z,G){var Y;const ze=this.normalizeInstanceIdentifier(G),Se=null!==(Y=this.onInitCallbacks.get(ze))&&void 0!==Y?Y:new Set;Se.add(z),this.onInitCallbacks.set(ze,Se);const Qe=this.instances.get(ze);return Qe&&z(Qe,ze),()=>{Se.delete(z)}}invokeOnInitCallbacks(z,G){const Y=this.onInitCallbacks.get(G);if(Y)for(const ze of Y)try{ze(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let Y=this.instances.get(z);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(me=z,me===ue?void 0:me),options:G}),this.instances.set(z,Y),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(Y,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,Y)}catch{}var me;return Y||null}normalizeInstanceIdentifier(z=ue){return this.component?this.component.multipleInstances?z:ue:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ce{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new le(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(Et,xe,U)=>{U.d(xe,{Am:()=>me,Ub:()=>Ce,Yd:()=>we,in:()=>ee});const c=[];var ee=(()=>{return(z=ee||(ee={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",ee;var z})();const L={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ue=ee.INFO,le={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ie=(z,G,...Y)=>{if(G<z.logLevel)return;const ze=(new Date).toISOString(),Se=le[G];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Se](`[${ze}]  ${z.name}:`,...Y)};class we{constructor(G){this.name=G,this._logLevel=ue,this._logHandler=ie,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ee))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...G),this._logHandler(this,ee.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...G),this._logHandler(this,ee.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...G),this._logHandler(this,ee.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...G),this._logHandler(this,ee.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...G),this._logHandler(this,ee.ERROR,...G)}}function Ce(z){c.forEach(G=>{G.setLogLevel(z)})}function me(z,G){for(const Y of c){let ze=null;G&&G.level&&(ze=L[G.level]),Y.userLogHandler=null===z?null:(Se,Qe,...ut)=>{const _e=ut.map(ke=>{if(null==ke)return null;if("string"==typeof ke)return ke;if("number"==typeof ke||"boolean"==typeof ke)return ke.toString();if(ke instanceof Error)return ke.message;try{return JSON.stringify(ke)}catch{return null}}).filter(ke=>ke).join(" ");Qe>=(ze??Se.logLevel)&&z({level:ee[Qe].toLowerCase(),message:_e,args:ut,type:Se.name})}}}},259:(Et,xe,U)=>{U.d(xe,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=U(6881);(0,c.registerVersion)("firebase","9.23.0","app")},9260:(Et,xe,U)=>{U.d(xe,{Z:()=>c.Z});var c=U(3942);c.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(Et,xe,U)=>{U.r(xe);var c=U(5861),ee=U(3942),L=U(2090),ue=U(6881),le=U(7582),ie=U(1877),we=U(4859);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y_EMAIL_SIGNIN="EMAIL_SIGNIN",Y_PASSWORD_RESET="PASSWORD_RESET",Y_RECOVER_EMAIL="RECOVER_EMAIL",Y_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Y_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Y_VERIFY_EMAIL="VERIFY_EMAIL";const Qe=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ut=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new ie.Yd("@firebase/auth");function Fe(v,...p){Oe.logLevel<=ie.in.ERROR&&Oe.error(`Auth (${ue.SDK_VERSION}): ${v}`,...p)}function be(v,...p){throw ot(v,...p)}function Te(v,...p){return ot(v,...p)}function Ke(v,p,m){const E=Object.assign(Object.assign({},ut()),{[p]:m});return new L.LL("auth","Firebase",E).create(p,{appName:v.name})}function Ue(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&be(v,"argument-error"),Ke(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ot(v,...p){if("string"!=typeof v){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return _e.create(v,...p)}function ae(v,p,...m){if(!v)throw ot(p,...m)}function At(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Fe(p),new Error(p)}function nt(v,p){v||At(p)}function Kt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ct(){return"http:"===fo()||"https:"===fo()}function fo(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class _s{constructor(p,m){this.shortDelay=p,this.longDelay=m,nt(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function gi(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function de(v,p){nt(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class fe{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void At("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void At("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void At("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ce=new _s(3e4,6e4);function Ae(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function De(v,p,m,E){return ft.apply(this,arguments)}function ft(){return(ft=(0,c.Z)(function*(v,p,m,E,A={}){return pt(v,A,(0,c.Z)(function*(){let M={},$={};E&&("GET"===p?$=E:M={body:JSON.stringify(E)});const X=(0,L.xO)(Object.assign({key:v.config.apiKey},$)).slice(1),Ne=yield v._getAdditionalHeaders();return Ne["Content-Type"]="application/json",v.languageCode&&(Ne["X-Firebase-Locale"]=v.languageCode),fe.fetch()(Nn(v,v.config.apiHost,m,X),Object.assign({method:p,headers:Ne,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function pt(v,p,m){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,c.Z)(function*(v,p,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},ye),p);try{const A=new Tn(v),M=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const $=yield M.json();if("needConfirmation"in $)throw Gn(v,"account-exists-with-different-credential",$);if(M.ok&&!("errorMessage"in $))return $;{const X=M.ok?$.errorMessage:$.error.message,[Ne,We]=X.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw Gn(v,"credential-already-in-use",$);if("EMAIL_EXISTS"===Ne)throw Gn(v,"email-already-in-use",$);if("USER_DISABLED"===Ne)throw Gn(v,"user-disabled",$);const rt=E[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(We)throw Ke(v,rt,We);be(v,rt)}}catch(A){if(A instanceof L.ZR)throw A;be(v,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function mt(v,p,m,E){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,c.Z)(function*(v,p,m,E,A={}){const M=yield De(v,p,m,E,A);return"mfaPendingCredential"in M&&be(v,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Nn(v,p,m,E){const A=`${p}${m}?${E}`;return v.config.emulator?de(v.config,A):`${v.config.apiScheme}://${A}`}class Tn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Te(this.auth,"network-request-failed")),ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(v,p,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=Te(v,p,E);return A.customData._tokenResponse=m,A}function zn(){return(zn=(0,c.Z)(function*(v,p){return De(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function mi(){return(mi=(0,c.Z)(function*(v,p){return De(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function vt(){return(vt=(0,c.Z)(function*(v,p){return De(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function _i(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function ri(){return(ri=(0,c.Z)(function*(v,p=!1){const m=(0,L.m9)(v),E=yield m.getIdToken(p),A=an(E);ae(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const M="object"==typeof A.firebase?A.firebase:void 0,$=M?.sign_in_provider;return{claims:A,token:E,authTime:_i(ys(A.auth_time)),issuedAtTime:_i(ys(A.iat)),expirationTime:_i(ys(A.exp)),signInProvider:$||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function ys(v){return 1e3*Number(v)}function an(v){const[p,m,E]=v.split(".");if(void 0===p||void 0===m||void 0===E)return Fe("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,L.tV)(m);return A?JSON.parse(A):(Fe("Failed to decode base64 JWT payload"),null)}catch(A){return Fe("Caught error parsing JWT payload as JSON",A?.toString()),null}}function at(v,p){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof L.ZR&&function Si({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class yi{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,c.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,c.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class _r{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=_i(this.lastLoginAt),this.creationTime=_i(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function qr(v){return Bn.apply(this,arguments)}function Bn(){return Bn=(0,c.Z)(function*(v){var p;const m=v.auth,E=yield v.getIdToken(),A=yield at(v,function Fr(v,p){return vt.apply(this,arguments)}(m,{idToken:E}));ae(A?.users.length,m,"internal-error");const M=A.users[0];v._notifyReloadListener(M);const $=null!==(p=M.providerUserInfo)&&void 0!==p&&p.length?function Jt(v){return v.map(p=>{var{providerId:m}=p,E=(0,le._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(M.providerUserInfo):[],X=function Ls(v,p){return[...v.filter(E=>!p.some(A=>A.providerId===E.providerId)),...p]}(v.providerData,$),rt=!!v.isAnonymous&&!(v.email&&M.passwordHash||X?.length),st={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:X,metadata:new _r(M.createdAt,M.lastLoginAt),isAnonymous:rt};Object.assign(v,st)}),Bn.apply(this,arguments)}function mn(){return(mn=(0,c.Z)(function*(v){const p=(0,L.m9)(v);yield qr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function dn(){return(dn=(0,c.Z)(function*(v,p){const m=yield pt(v,{},(0,c.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:M}=v.config,$=Nn(v,A,"/v1/token",`key=${M}`),X=yield v._getAdditionalHeaders();return X["Content-Type"]="application/x-www-form-urlencoded",fe.fetch()($,{method:"POST",headers:X,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ae(p.idToken,"internal-error"),ae(typeof p.idToken<"u","internal-error"),ae(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function cn(v){const p=an(v);return ae(p,"internal-error"),ae(typeof p.exp<"u","internal-error"),ae(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,c.Z)(function*(){return ae(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,c.Z)(function*(){const{accessToken:A,refreshToken:M,expiresIn:$}=yield function vs(v,p){return dn.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(A,M,Number($))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:A,expirationTime:M}=m,$=new Ai;return E&&(ae("string"==typeof E,"internal-error",{appName:p}),$.refreshToken=E),A&&(ae("string"==typeof A,"internal-error",{appName:p}),$.accessToken=A),M&&(ae("number"==typeof M,"internal-error",{appName:p}),$.expirationTime=M),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return At("not implemented")}}function qn(v,p){ae("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class sr{constructor(p){var{uid:m,auth:E,stsTokenManager:A}=p,M=(0,le._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new _r(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,c.Z)(function*(){const E=yield at(m,m.stsTokenManager.getToken(m.auth,p));return ae(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function Lr(v){return ri.apply(this,arguments)}(this,p)}reload(){return function ii(v){return mn.apply(this,arguments)}(this)}_assign(p){this!==p&&(ae(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new sr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,c.Z)(function*(){let A=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),A=!0),m&&(yield qr(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,c.Z)(function*(){const m=yield p.getIdToken();return yield at(p,function mr(v,p){return zn.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,A,M,$,X,Ne,We,rt;const st=null!==(E=m.displayName)&&void 0!==E?E:void 0,kn=null!==(A=m.email)&&void 0!==A?A:void 0,eo=null!==(M=m.phoneNumber)&&void 0!==M?M:void 0,Rd=null!==($=m.photoURL)&&void 0!==$?$:void 0,Zv=null!==(X=m.tenantId)&&void 0!==X?X:void 0,On=null!==(Ne=m._redirectEventId)&&void 0!==Ne?Ne:void 0,yg=null!==(We=m.createdAt)&&void 0!==We?We:void 0,S_=null!==(rt=m.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:Nd,emailVerified:Md,isAnonymous:ss,providerData:mf,stsTokenManager:cc}=m;ae(Nd&&cc,p,"internal-error");const Yv=Ai.fromJSON(this.name,cc);ae("string"==typeof Nd,p,"internal-error"),qn(st,p.name),qn(kn,p.name),ae("boolean"==typeof Md,p,"internal-error"),ae("boolean"==typeof ss,p,"internal-error"),qn(eo,p.name),qn(Rd,p.name),qn(Zv,p.name),qn(On,p.name),qn(yg,p.name),qn(S_,p.name);const _f=new sr({uid:Nd,auth:p,email:kn,emailVerified:Md,displayName:st,isAnonymous:ss,photoURL:Rd,phoneNumber:eo,tenantId:Zv,stsTokenManager:Yv,createdAt:yg,lastLoginAt:S_});return mf&&Array.isArray(mf)&&(_f.providerData=mf.map(Qv=>Object.assign({},Qv))),On&&(_f._redirectEventId=On),_f}static _fromIdTokenResponse(p,m,E=!1){return(0,c.Z)(function*(){const A=new Ai;A.updateFromServerResponse(m);const M=new sr({uid:m.localId,auth:p,stsTokenManager:A,isAnonymous:E});return yield qr(M),M})()}}const Ki=new Map;function xn(v){nt(v instanceof Function,"Expected a class definition");let p=Ki.get(v);return p?(nt(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Ki.set(v,p),p)}const si=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,c.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,c.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,c.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function H(v,p,m){return`firebase:${v}:${p}:${m}`}class j{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:A,name:M}=this.auth;this.fullUserKey=H(this.userKey,A.apiKey,M),this.fullPersistenceKey=H("persistence",A.apiKey,M),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,c.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?sr._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,c.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,c.Z)(function*(){if(!m.length)return new j(xn(si),p,E);const A=(yield Promise.all(m.map(function(){var We=(0,c.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return We.apply(this,arguments)}}()))).filter(We=>We);let M=A[0]||xn(si);const $=H(E,p.config.apiKey,p.name);let X=null;for(const We of m)try{const rt=yield We._get($);if(rt){const st=sr._fromJSON(p,rt);We!==M&&(X=st),M=We;break}}catch{}const Ne=A.filter(We=>We._shouldAllowMigration);return M._shouldAllowMigration&&Ne.length?(M=Ne[0],X&&(yield M._set($,X.toJSON())),yield Promise.all(m.map(function(){var We=(0,c.Z)(function*(rt){if(rt!==M)try{yield rt._remove($)}catch{}});return function(rt){return We.apply(this,arguments)}}())),new j(M,p,E)):new j(M,p,E)})()}}function K(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(xt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ee(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Yn(p))return"Blackberry";if(Mn(p))return"Webos";if(ne(p))return"Safari";if((p.includes("chrome/")||Ve(p))&&!p.includes("edge/"))return"Chrome";if(rn(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Ee(v=(0,L.z$)()){return/firefox\//i.test(v)}function ne(v=(0,L.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ve(v=(0,L.z$)()){return/crios\//i.test(v)}function xt(v=(0,L.z$)()){return/iemobile/i.test(v)}function rn(v=(0,L.z$)()){return/android/i.test(v)}function Yn(v=(0,L.z$)()){return/blackberry/i.test(v)}function Mn(v=(0,L.z$)()){return/webos/i.test(v)}function gn(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function ws(v=(0,L.z$)()){return gn(v)||rn(v)||Mn(v)||Yn(v)||/windows phone/i.test(v)||xt(v)}function pe(v,p=[]){let m;switch(v){case"Browser":m=K((0,L.z$)());break;case"Worker":m=`${K((0,L.z$)())}-${v}`;break;default:m=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${ue.SDK_VERSION}/${E}`}function Le(){return(Le=(0,c.Z)(function*(v){return(yield De(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _t(v,p){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,c.Z)(function*(v,p){return De(v,"GET","/v2/recaptchaConfig",Ae(v,p))})).apply(this,arguments)}function zt(v){return void 0!==v&&void 0!==v.getResponse}function wt(v){return void 0!==v&&void 0!==v.enterprise}class un{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Dr(v){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=A=>{const M=Te("internal-error");M.customData=A,m(M)},E.type="text/javascript",E.charset="UTF-8",function sn(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function or(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Oa="NO_RECAPTCHA";class xi{constructor(p){this.type="recaptcha-enterprise",this.auth=_n(p)}verify(p="verify",m=!1){var E=this;return(0,c.Z)(function*(){function M(){return M=(0,c.Z)(function*(X){if(!m){if(null==X.tenantId&&null!=X._agentRecaptchaConfig)return X._agentRecaptchaConfig.siteKey;if(null!=X.tenantId&&void 0!==X._tenantRecaptchaConfigs[X.tenantId])return X._tenantRecaptchaConfigs[X.tenantId].siteKey}return new Promise(function(){var Ne=(0,c.Z)(function*(We,rt){_t(X,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(st=>{if(void 0!==st.recaptchaKey){const kn=new un(st);return null==X.tenantId?X._agentRecaptchaConfig=kn:X._tenantRecaptchaConfigs[X.tenantId]=kn,We(kn.siteKey)}rt(new Error("recaptcha Enterprise site key undefined"))}).catch(st=>{rt(st)})});return function(We,rt){return Ne.apply(this,arguments)}}())}),M.apply(this,arguments)}function $(X,Ne,We){const rt=window.grecaptcha;wt(rt)?rt.enterprise.ready(()=>{rt.enterprise.execute(X,{action:p}).then(st=>{Ne(st)}).catch(()=>{Ne(Oa)})}):We(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((X,Ne)=>{(function A(X){return M.apply(this,arguments)})(E.auth).then(We=>{if(!m&&wt(window.grecaptcha))$(We,X,Ne);else{if(typeof window>"u")return void Ne(new Error("RecaptchaVerifier is only supported in browser"));Dr("https://www.google.com/recaptcha/enterprise.js?render="+We).then(()=>{$(We,X,Ne)}).catch(rt=>{Ne(rt)})}}).catch(We=>{Ne(We)})})})()}}function Je(v,p,m){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,c.Z)(function*(v,p,m,E=!1){const A=new xi(v);let M;try{M=yield A.verify(m)}catch{M=yield A.verify(m,!0)}const $=Object.assign({},p);return Object.assign($,E?{captchaResp:M}:{captchaResponse:M}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}class Rn{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=M=>new Promise(($,X)=>{try{$(p(M))}catch(Ne){X(Ne)}});E.onAbort=m,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,c.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const A of m.queue)yield A(p),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const M of E)try{M()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Ri{constructor(p,m,E,A){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=E,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ar(this),this.idTokenSubscription=new ar(this),this.beforeStateQueue=new Rn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=xn(m)),this._initializationPromise=this.queue((0,c.Z)(function*(){var A,M;if(!E._deleted&&(E.persistenceManager=yield j.create(E,p),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(M=E.currentUser)||void 0===M?void 0:M.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,c.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,c.Z)(function*(){var E;const A=yield m.assertedPersistence.getCurrentUser();let M=A,$=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const X=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Ne=M?._redirectEventId,We=yield m.tryRedirectSignIn(p);(!X||X===Ne)&&We?.user&&(M=We.user,$=!0)}if(!M)return m.directlySetCurrentUser(null);if(!M._redirectEventId){if($)try{yield m.beforeStateQueue.runMiddleware(M)}catch(X){M=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(X))}return M?m.reloadAndSetCurrentUserOrClear(M):m.directlySetCurrentUser(null)}return ae(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===M._redirectEventId?m.directlySetCurrentUser(M):m.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(p){var m=this;return(0,c.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,c.Z)(function*(){try{yield qr(p)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function po(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,c.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,c.Z)(function*(){const E=p?(0,L.m9)(p):null;return E&&ae(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,c.Z)(function*(){if(!E._deleted)return p&&ae(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,c.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,c.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,c.Z)(function*(){yield m.assertedPersistence.setPersistence(xn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,c.Z)(function*(){const m=yield _t(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new un(m);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new xi(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,c.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,c.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&xn(p)||m._popupRedirectResolver;ae(E,m,"argument-error"),m.redirectPersistenceManager=yield j.create(m,[xn(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,c.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,c.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,c.Z)(function*(){if(p===m.currentUser)return m.queue((0,c.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,A){if(this._deleted)return()=>{};const M="function"==typeof m?m:m.next.bind(m),$=this._isInitialized?Promise.resolve():this._initializationPromise;return ae($,this,"internal-error"),$.then(()=>M(this.currentUser)),"function"==typeof m?p.addObserver(m,E,A):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,c.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=pe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,c.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();A&&(E["X-Firebase-Client"]=A);const M=yield p._getAppCheckToken();return M&&(E["X-Firebase-AppCheck"]=M),E})()}_getAppCheckToken(){var p=this;return(0,c.Z)(function*(){var m;const E=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return E?.error&&function Ge(v,...p){Oe.logLevel<=ie.in.WARN&&Oe.warn(`Auth (${ue.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function _n(v){return(0,L.m9)(v)}class ar{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(m=>this.observer=m)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function oi(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function vl(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Us{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return At("not implemented")}_getIdTokenResponse(p){return At("not implemented")}_linkToIdToken(p,m){return At("not implemented")}_getReauthenticationResolver(p){return At("not implemented")}}function Bo(v,p){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,c.Z)(function*(v,p){return De(v,"POST","/v1/accounts:resetPassword",Ae(v,p))})).apply(this,arguments)}function Fa(v,p){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,c.Z)(function*(v,p){return De(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function mo(){return(mo=(0,c.Z)(function*(v,p){return De(v,"POST","/v1/accounts:update",Ae(v,p))})).apply(this,arguments)}function Ur(v,p){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,c.Z)(function*(v,p){return mt(v,"POST","/v1/accounts:signInWithPassword",Ae(v,p))})).apply(this,arguments)}function vi(v,p){return wl.apply(this,arguments)}function wl(){return(wl=(0,c.Z)(function*(v,p){return De(v,"POST","/v1/accounts:sendOobCode",Ae(v,p))})).apply(this,arguments)}function La(){return(La=(0,c.Z)(function*(v,p){return vi(v,p)})).apply(this,arguments)}function _o(v,p){return jo.apply(this,arguments)}function jo(){return(jo=(0,c.Z)(function*(v,p){return vi(v,p)})).apply(this,arguments)}function Sr(v,p){return vu.apply(this,arguments)}function vu(){return(vu=(0,c.Z)(function*(v,p){return vi(v,p)})).apply(this,arguments)}function Ei(){return(Ei=(0,c.Z)(function*(v,p){return vi(v,p)})).apply(this,arguments)}function Ua(){return(Ua=(0,c.Z)(function*(v,p){return mt(v,"POST","/v1/accounts:signInWithEmailLink",Ae(v,p))})).apply(this,arguments)}function Ni(){return(Ni=(0,c.Z)(function*(v,p){return mt(v,"POST","/v1/accounts:signInWithEmailLink",Ae(v,p))})).apply(this,arguments)}class wu extends Us{constructor(p,m,E,A=null){super("password",E),this._email=p,this._password=m,this._tenantId=A}static _fromEmailAndPassword(p,m){return new wu(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new wu(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,c.Z)(function*(){var E;switch(m.signInMethod){case"password":const A={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const M=yield Je(p,A,"signInWithPassword");return Ur(p,M)}return Ur(p,A).catch(function(){var M=(0,c.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const X=yield Je(p,A,"signInWithPassword");return Ur(p,X)}return Promise.reject($)});return function($){return M.apply(this,arguments)}}());case"emailLink":return function El(v,p){return Ua.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:be(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,c.Z)(function*(){switch(E.signInMethod){case"password":return Fa(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Gc(v,p){return Ni.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:be(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ji(v,p){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,c.Z)(function*(v,p){return mt(v,"POST","/v1/accounts:signInWithIdp",Ae(v,p))})).apply(this,arguments)}class Bs extends Us{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Bs(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):be("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A}=m,M=(0,le._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const $=new Bs(E,A);return $.idToken=M.idToken||void 0,$.accessToken=M.accessToken||void 0,$.secret=M.secret,$.nonce=M.nonce,$.pendingToken=M.pendingToken||null,$}_getIdTokenResponse(p){return Ji(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Ji(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ji(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,L.xO)(m)}return p}}function zc(){return(zc=(0,c.Z)(function*(v,p){return De(v,"POST","/v1/accounts:sendVerificationCode",Ae(v,p))})).apply(this,arguments)}function xh(){return(xh=(0,c.Z)(function*(v,p){return mt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ae(v,p))})).apply(this,arguments)}function Eu(){return(Eu=(0,c.Z)(function*(v,p){const m=yield mt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ae(v,p));if(m.temporaryProof)throw Gn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Rh={USER_NOT_FOUND:"user-not-found"};function Iu(){return(Iu=(0,c.Z)(function*(v,p){return mt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ae(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Rh)})).apply(this,arguments)}class Kr extends Us{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Kr({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Kr({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Up(v,p){return xh.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function a_(v,p){return Eu.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ov(v,p){return Iu.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:M}=p;return E||m||A||M?new Kr({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:M}):null}}class Va{constructor(p){var m,E,A,M,$,X;const Ne=(0,L.zd)((0,L.pd)(p)),We=null!==(m=Ne.apiKey)&&void 0!==m?m:null,rt=null!==(E=Ne.oobCode)&&void 0!==E?E:null,st=function Vp(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ne.mode)&&void 0!==A?A:null);ae(We&&rt&&st,"argument-error"),this.apiKey=We,this.operation=st,this.code=rt,this.continueUrl=null!==(M=Ne.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==($=Ne.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(X=Ne.tenantId)&&void 0!==X?X:null}static parseLink(p){const m=function Nh(v){const p=(0,L.zd)((0,L.pd)(v)).link,m=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||m||p||v}(p);try{return new Va(m)}catch{return null}}}let Bp=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return wu._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=Va.parseLink(E);return ae(A,"argument-error"),wu._fromEmailAndCode(m,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class js{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Es extends js{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class $o extends Es{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ae("providerId"in m&&"signInMethod"in m,"argument-error"),Bs._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ae(p.idToken||p.accessToken,"argument-error"),Bs._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return $o.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return $o.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:M,nonce:$,providerId:X}=p;if(!E&&!A&&!m&&!M||!X)return null;try{return new $o(X)._credential({idToken:m,accessToken:E,nonce:$,pendingToken:M})}catch{return null}}}let qc=(()=>{class v extends Es{constructor(){super("facebook.com")}static credential(m){return Bs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Il=(()=>{class v extends Es{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Bs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return v.credential(E,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Mh=(()=>{class v extends Es{constructor(){super("github.com")}static credential(m){return Bs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class yo extends Us{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Ji(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Ji(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ji(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A,pendingToken:M}=m;return E&&A&&M&&E===A?new yo(E,M):null}static _create(p,m){return new yo(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cu extends js{constructor(p){ae(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Cu.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Cu.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=yo.fromJSON(p);return ae(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return yo._create(E,m)}catch{return null}}}let bu=(()=>{class v extends Es{constructor(){super("twitter.com")}static credential(m,E){return Bs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return v.credential(E,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function vo(v,p){return ai.apply(this,arguments)}function ai(){return(ai=(0,c.Z)(function*(v,p){return mt(v,"POST","/v1/accounts:signUp",Ae(v,p))})).apply(this,arguments)}class Zr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,A=!1){return(0,c.Z)(function*(){const M=yield sr._fromIdTokenResponse(p,E,A),$=Cl(E);return new Zr({user:M,providerId:$,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,c.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const A=Cl(E);return new Zr({user:p,providerId:A,_tokenResponse:E,operationType:m})})()}}function Cl(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Ba(){return(Ba=(0,c.Z)(function*(v){var p;const m=_n(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Zr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield vo(m,{returnSecureToken:!0}),A=yield Zr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class $s extends L.ZR{constructor(p,m,E,A){var M;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,$s.prototype),this.customData={appName:p.name,tenantId:null!==(M=p.tenantId)&&void 0!==M?M:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,A){return new $s(p,m,E,A)}}function xr(v,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?$s._fromErrorAndOperation(v,M,p,E):M})}function Ph(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Yr(){return Yr=(0,c.Z)(function*(v,p){const m=(0,L.m9)(v);yield Hs(!0,m,p);const{providerUserInfo:E}=yield function zr(v,p){return mi.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),A=Ph(E||[]);return m.providerData=m.providerData.filter(M=>A.has(M.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),Yr.apply(this,arguments)}function yr(v,p){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,c.Z)(function*(v,p,m=!1){const E=yield at(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Zr._forOperation(v,"link",E)})).apply(this,arguments)}function Hs(v,p,m){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,c.Z)(function*(v,p,m){yield qr(p);const A=!1===v?"provider-already-linked":"no-such-provider";ae(Ph(p.providerData).has(m)===v,p.auth,A)})).apply(this,arguments)}function wo(v,p){return ja.apply(this,arguments)}function ja(){return(ja=(0,c.Z)(function*(v,p,m=!1){const{auth:E}=v,A="reauthenticate";try{const M=yield at(v,xr(E,A,p,v),m);ae(M.idToken,E,"internal-error");const $=an(M.idToken);ae($,E,"internal-error");const{sub:X}=$;return ae(v.uid===X,E,"user-mismatch"),Zr._forOperation(v,A,M)}catch(M){throw"auth/user-not-found"===M?.code&&be(E,"user-mismatch"),M}})).apply(this,arguments)}function bl(v,p){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,c.Z)(function*(v,p,m=!1){const E="signIn",A=yield xr(v,E,p),M=yield Zr._fromIdTokenResponse(v,E,A);return m||(yield v._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Tl(v,p){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,c.Z)(function*(v,p){return bl(_n(v),p)})).apply(this,arguments)}function Fh(v,p){return Du.apply(this,arguments)}function Du(){return(Du=(0,c.Z)(function*(v,p){const m=(0,L.m9)(v);return yield Hs(!1,m,p.providerId),yr(m,p)})).apply(this,arguments)}function Lh(v,p){return Su.apply(this,arguments)}function Su(){return(Su=(0,c.Z)(function*(v,p){return wo((0,L.m9)(v),p)})).apply(this,arguments)}function Uh(){return(Uh=(0,c.Z)(function*(v,p){return mt(v,"POST","/v1/accounts:signInWithCustomToken",Ae(v,p))})).apply(this,arguments)}function Bt(){return Bt=(0,c.Z)(function*(v,p){const m=_n(v),E=yield function l_(v,p){return Uh.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),A=yield Zr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A}),Bt.apply(this,arguments)}class Dl{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Sl._fromServerResponse(p,m):"totpInfo"in m?vr._fromServerResponse(p,m):be(p,"internal-error")}}class Sl extends Dl{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Sl(m)}}class vr extends Dl{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new vr(m)}}function Ho(v,p,m){var E;ae((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),ae(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ae(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ae(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function li(){return li=(0,c.Z)(function*(v,p,m){var E;const A=_n(v),M={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const $=yield Je(A,M,"getOobCode",!0);m&&Ho(A,$,m),yield _o(A,$)}else m&&Ho(A,M,m),yield _o(A,M).catch(function(){var $=(0,c.Z)(function*(X){if("auth/missing-recaptcha-token"!==X.code)return Promise.reject(X);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ne=yield Je(A,M,"getOobCode",!0);m&&Ho(A,Ne,m),yield _o(A,Ne)}});return function(X){return $.apply(this,arguments)}}())}),li.apply(this,arguments)}function xu(){return(xu=(0,c.Z)(function*(v,p,m){yield Bo((0,L.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Gs(){return Gs=(0,c.Z)(function*(v,p){yield function Qi(v,p){return mo.apply(this,arguments)}((0,L.m9)(v),{oobCode:p})}),Gs.apply(this,arguments)}function Al(v,p){return lr.apply(this,arguments)}function lr(){return(lr=(0,c.Z)(function*(v,p){const m=(0,L.m9)(v),E=yield Bo(m,{oobCode:p}),A=E.requestType;switch(ae(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(E.mfaInfo,m,"internal-error");default:ae(E.email,m,"internal-error")}let M=null;return E.mfaInfo&&(M=Dl._fromServerResponse(_n(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:M},operation:A}})).apply(this,arguments)}function Is(){return(Is=(0,c.Z)(function*(v,p){const{data:m}=yield Al((0,L.m9)(v),p);return m.email})).apply(this,arguments)}function Pi(){return Pi=(0,c.Z)(function*(v,p,m){var E;const A=_n(v),M={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let $;if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const We=yield Je(A,M,"signUpPassword");$=vo(A,We)}else $=vo(A,M).catch(function(){var We=(0,c.Z)(function*(rt){if("auth/missing-recaptcha-token"===rt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const st=yield Je(A,M,"signUpPassword");return vo(A,st)}return Promise.reject(rt)});return function(rt){return We.apply(this,arguments)}}());const X=yield $.catch(We=>Promise.reject(We)),Ne=yield Zr._fromIdTokenResponse(A,"signIn",X);return yield A._updateCurrentUser(Ne.user),Ne}),Pi.apply(this,arguments)}function Ru(){return Ru=(0,c.Z)(function*(v,p,m){var E;const A=_n(v),M={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function $(X,Ne){ae(Ne.handleCodeInApp,A,"argument-error"),Ne&&Ho(A,X,Ne)}if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const X=yield Je(A,M,"getOobCode",!0);$(X,m),yield Sr(A,X)}else $(M,m),yield Sr(A,M).catch(function(){var X=(0,c.Z)(function*(Ne){if("auth/missing-recaptcha-token"!==Ne.code)return Promise.reject(Ne);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const We=yield Je(A,M,"getOobCode",!0);$(We,m),yield Sr(A,We)}});return function(Ne){return X.apply(this,arguments)}}())}),Ru.apply(this,arguments)}function $a(){return($a=(0,c.Z)(function*(v,p,m){const E=(0,L.m9)(v),A=Bp.credentialWithLink(p,m||Kt());return ae(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Tl(E,A)})).apply(this,arguments)}function Nu(){return(Nu=(0,c.Z)(function*(v,p){return De(v,"POST","/v1/accounts:createAuthUri",Ae(v,p))})).apply(this,arguments)}function Mu(){return Mu=(0,c.Z)(function*(v,p){const E={identifier:p,continueUri:ct()?Kt():"http://localhost"},{signinMethods:A}=yield function Zc(v,p){return Nu.apply(this,arguments)}((0,L.m9)(v),E);return A||[]}),Mu.apply(this,arguments)}function Rl(){return Rl=(0,c.Z)(function*(v,p){const m=(0,L.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Ho(m.auth,A,p);const{email:M}=yield function Hc(v,p){return La.apply(this,arguments)}(m.auth,A);M!==v.email&&(yield v.reload())}),Rl.apply(this,arguments)}function Nl(){return Nl=(0,c.Z)(function*(v,p,m){const E=(0,L.m9)(v),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Ho(E.auth,M,m);const{email:$}=yield function wi(v,p){return Ei.apply(this,arguments)}(E.auth,M);$!==v.email&&(yield v.reload())}),Nl.apply(this,arguments)}function ku(){return(ku=(0,c.Z)(function*(v,p){return De(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ou(){return Ou=(0,c.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,L.m9)(v),M={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},$=yield at(E,function $h(v,p){return ku.apply(this,arguments)}(E.auth,M));E.displayName=$.displayName||null,E.photoURL=$.photoUrl||null;const X=E.providerData.find(({providerId:Ne})=>"password"===Ne);X&&(X.displayName=E.displayName,X.photoURL=E.photoURL),yield E._updateTokensIfNecessary($)}),Ou.apply(this,arguments)}function Pn(v,p,m){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,c.Z)(function*(v,p,m){const{auth:E}=v,M={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(M.email=p),m&&(M.password=m);const $=yield at(v,Fa(E,M));yield v._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class zo{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class Gp extends zo{constructor(p,m,E,A){super(p,m,E),this.username=A}}class Hh extends zo{constructor(p,m){super(p,"facebook.com",m)}}class d_ extends Gp{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Lu extends zo{constructor(p,m){super(p,"google.com",m)}}class Qc extends Gp{constructor(p,m,E){super(p,"twitter.com",m,E)}}function Jc(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Hp(v){var p,m;if(!v)return null;const{providerId:E}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},M=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const $=null===(m=null===(p=an(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if($)return new zo(M,"anonymous"!==$&&"custom"!==$?$:null)}if(!E)return null;switch(E){case"facebook.com":return new Hh(M,A);case"github.com":return new d_(M,A);case"google.com":return new Lu(M,A);case"twitter.com":return new Qc(M,A,v.screenName||null);case"custom":case"anonymous":return new zo(M,null);default:return new zo(M,E,A)}}(m)}class qo{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new qo("enroll",p,m)}static _fromMfaPendingCredential(p){return new qo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return qo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return qo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Wo{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=_n(p),A=m.customData._serverResponse,M=(A.mfaInfo||[]).map(X=>Dl._fromServerResponse(E,X));ae(A.mfaPendingCredential,E,"internal-error");const $=qo._fromMfaPendingCredential(A.mfaPendingCredential);return new Wo($,M,function(){var X=(0,c.Z)(function*(Ne){const We=yield Ne._process(E,$);delete A.mfaInfo,delete A.mfaPendingCredential;const rt=Object.assign(Object.assign({},A),{idToken:We.idToken,refreshToken:We.refreshToken});switch(m.operationType){case"signIn":const st=yield Zr._fromIdTokenResponse(E,m.operationType,rt);return yield E._updateCurrentUser(st.user),st;case"reauthenticate":return ae(m.user,E,"internal-error"),Zr._forOperation(m.user,m.operationType,rt);default:be(E,"internal-error")}});return function(Ne){return X.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,c.Z)(function*(){return m.signInResolver(p)})()}}class Yo{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Dl._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Yo(p)}getSession(){var p=this;return(0,c.Z)(function*(){return qo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,c.Z)(function*(){const A=p,M=yield E.getSession(),$=yield at(E.user,A._process(E.user.auth,M,m));return yield E.user._updateTokensIfNecessary($),E.user.reload()})()}unenroll(p){var m=this;return(0,c.Z)(function*(){const E="string"==typeof p?p:p.uid,A=yield m.user.getIdToken();try{const M=yield at(m.user,function Bu(v,p){return De(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ae(v,p))}(m.user.auth,{idToken:A,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:$})=>$!==E),yield m.user._updateTokensIfNecessary(M),yield m.user.reload()}catch(M){throw M}})()}}const Eo=new WeakMap,Qo="__sak";class ju{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Qo,"1"),this.storage.removeItem(Qo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jo=(()=>{class v extends ju{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pl(){const v=(0,L.z$)();return ne(v)||gn(v)}()&&function _l(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ws(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),M=this.localCache[E];A!==M&&m(E,M,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((X,Ne,We)=>{this.notifyListeners(X,We)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const X=this.storage.getItem(A);if(m.newValue!==X)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const M=()=>{const X=this.storage.getItem(A);!E&&this.localCache[A]===X||this.notifyListeners(A,X)},$=this.storage.getItem(A);!function Yi(){return(0,L.w1)()&&10===document.documentMode}()||$===m.newValue||m.newValue===m.oldValue?M():setTimeout(M,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const M of Array.from(A))M(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,M=this;return(0,c.Z)(function*(){yield A().call(M,m,E),M.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,c.Z)(function*(){const M=yield E().call(A,m);return A.localCache[m]=JSON.stringify(M),M})()}_remove(m){var E=()=>super._remove,A=this;return(0,c.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return v.type="LOCAL",v})(),Ws=(()=>{class v extends ju{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let qa=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(M=>M.isListeningto(m));if(E)return E;const A=new v(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,c.Z)(function*(){const A=m,{eventId:M,eventType:$,data:X}=A.data,Ne=E.handlersMap[$];if(!Ne?.size)return;A.ports[0].postMessage({status:"ack",eventId:M,eventType:$});const We=Array.from(Ne).map(function(){var st=(0,c.Z)(function*(kn){return kn(A.origin,X)});return function(kn){return st.apply(this,arguments)}}()),rt=yield function td(v){return Promise.all(v.map(function(){var p=(0,c.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(We);A.ports[0].postMessage({status:"done",eventId:M,eventType:$,response:rt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Wa(v="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return v+m}class Wh{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var A=this;return(0,c.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let $,X;return new Promise((Ne,We)=>{const rt=Wa("",20);M.port1.start();const st=setTimeout(()=>{We(new Error("unsupported_event"))},E);X={messageChannel:M,onMessage(kn){const eo=kn;if(eo.data.eventId===rt)switch(eo.data.status){case"ack":clearTimeout(st),$=setTimeout(()=>{We(new Error("timeout"))},3e3);break;case"done":clearTimeout($),Ne(eo.data.response);break;default:clearTimeout(st),clearTimeout($),We(new Error("invalid_response"))}}},A.handlers.add(X),M.port1.addEventListener("message",X.onMessage),A.target.postMessage({eventType:p,eventId:rt,data:m},[M.port2])}).finally(()=>{X&&A.removeMessageHandler(X)})})()}}function In(){return window}function Hu(){return typeof In().WorkerGlobalScope<"u"&&"function"==typeof In().importScripts}function Gu(){return(Gu=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Xo="firebaseLocalStorageDb",Jn=1,rd="firebaseLocalStorage",kl="fbase_key";class Ol{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Ks(v,p){return v.transaction([rd],p?"readwrite":"readonly").objectStore(rd)}function qu(){const v=indexedDB.open(Xo,Jn);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(rd,{keyPath:kl})}catch(A){m(A)}}),v.addEventListener("success",(0,c.Z)(function*(){const E=v.result;E.objectStoreNames.contains(rd)?p(E):(E.close(),yield function Wp(){const v=indexedDB.deleteDatabase(Xo);return new Ol(v).toPromise()}(),p(yield qu()))}))})}function ea(v,p,m){return id.apply(this,arguments)}function id(){return(id=(0,c.Z)(function*(v,p,m){const E=Ks(v,!0).put({[kl]:p,value:m});return new Ol(E).toPromise()})).apply(this,arguments)}function Ka(){return(Ka=(0,c.Z)(function*(v,p){const m=Ks(v,!1).get(p),E=yield new Ol(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Io(v,p){const m=Ks(v,!0).delete(p);return new Ol(m).toPromise()}const na=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,c.Z)(function*(){return m.db||(m.db=yield qu()),m.db})()}_withRetries(m){var E=this;return(0,c.Z)(function*(){let A=0;for(;;)try{const M=yield E._openDb();return yield m(M)}catch(M){if(A++>3)throw M;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,c.Z)(function*(){return Hu()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,c.Z)(function*(){m.receiver=qa._getInstance(function wr(){return Hu()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,c.Z)(function*(A,M){return{keyProcessed:(yield m._poll()).includes(M.key)}});return function(A,M){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,c.Z)(function*(A,M){return["keyChanged"]});return function(A,M){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,c.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function nd(){return Gu.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Wh(m.activeServiceWorker);const M=yield m.sender._send("ping",{},800);M&&null!==(E=M[0])&&void 0!==E&&E.fulfilled&&null!==(A=M[0])&&void 0!==A&&A.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,c.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function zu(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const m=yield qu();return yield ea(m,Qo,"1"),yield Io(m,Qo),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,c.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,c.Z)(function*(){return A._withPendingWrite((0,c.Z)(function*(){return yield A._withRetries(M=>ea(M,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,c.Z)(function*(){const A=yield E._withRetries(M=>function Fl(v,p){return Ka.apply(this,arguments)}(M,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,c.Z)(function*(){return E._withPendingWrite((0,c.Z)(function*(){return yield E._withRetries(A=>Io(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,c.Z)(function*(){const E=yield m._withRetries($=>{const X=Ks($,!1).getAll();return new Ol(X).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],M=new Set;for(const{fbase_key:$,value:X}of E)M.add($),JSON.stringify(m.localCache[$])!==JSON.stringify(X)&&(m.notifyListeners($,X),A.push($));for(const $ of Object.keys(m.localCache))m.localCache[$]&&!M.has($)&&(m.notifyListeners($,null),A.push($));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const M of Array.from(A))M(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Ul=1e12;class sd{constructor(p){this.auth=p,this.counter=Ul,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new od(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||Ul;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Ul))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,c.Z)(function*(){var E;return null===(E=m._widgets.get(p||Ul))||void 0===E||E.execute(),""})()}}class od{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;ae(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Uv(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yp=or("rcb"),Vv=new _s(3e4,6e4);class Bv{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=In().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return ae(function Qp(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&zt(In().grecaptcha)?Promise.resolve(In().grecaptcha):new Promise((E,A)=>{const M=In().setTimeout(()=>{A(Te(p,"network-request-failed"))},Vv.get());In()[Yp]=()=>{In().clearTimeout(M),delete In()[Yp];const X=In().grecaptcha;if(!X||!zt(X))return void A(Te(p,"internal-error"));const Ne=X.render;X.render=(We,rt)=>{const st=Ne(We,rt);return this.counter++,st},this.hostLanguage=m,E(X)},Dr(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Yp,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(M),A(Te(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=In().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Er{load(p){return(0,c.Z)(function*(){return new sd(p)})()}clearedOneInstance(){}}const Vl="recaptcha",Wu={theme:"light",type:"image"};class ad{constructor(p,m=Object.assign({},Wu),E){this.parameters=m,this.type=Vl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(E),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;ae(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Er:new Bv,this.validateStartingState()}verify(){var p=this;return(0,c.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(M=>{const $=X=>{X&&(p.tokenChangeListeners.delete($),M(X))};p.tokenChangeListeners.add($),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=In()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,c.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,c.Z)(function*(){ae(ct()&&!Hu(),p.auth,"internal-error"),yield function Xi(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function re(v){return Le.apply(this,arguments)}(p.auth);ae(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Cs{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Kr._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function sa(){return(sa=(0,c.Z)(function*(v,p,m){const E=_n(v),A=yield Bl(E,p,(0,L.m9)(m));return new Cs(A,M=>Tl(E,M))})).apply(this,arguments)}function Zu(){return(Zu=(0,c.Z)(function*(v,p,m){const E=(0,L.m9)(v);yield Hs(!1,E,"phone");const A=yield Bl(E.auth,p,(0,L.m9)(m));return new Cs(A,M=>Fh(E,M))})).apply(this,arguments)}function Yu(){return(Yu=(0,c.Z)(function*(v,p,m){const E=(0,L.m9)(v),A=yield Bl(E.auth,p,(0,L.m9)(m));return new Cs(A,M=>Lh(E,M))})).apply(this,arguments)}function Bl(v,p,m){return ui.apply(this,arguments)}function ui(){return ui=(0,c.Z)(function*(v,p,m){var E;const A=yield m.verify();try{let M;if(ae("string"==typeof A,v,"argument-error"),ae(m.type===Vl,v,"argument-error"),M="string"==typeof p?{phoneNumber:p}:p,"session"in M){const $=M.session;if("phoneNumber"in M)return ae("enroll"===$.type,v,"internal-error"),(yield function za(v,p){return De(v,"POST","/v2/accounts/mfaEnrollment:start",Ae(v,p))}(v,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ae("signin"===$.type,v,"internal-error");const X=(null===(E=M.multiFactorHint)||void 0===E?void 0:E.uid)||M.multiFactorUid;return ae(X,v,"missing-multi-factor-info"),(yield function ra(v,p){return De(v,"POST","/v2/accounts/mfaSignIn:start",Ae(v,p))}(v,{mfaPendingCredential:$.credential,mfaEnrollmentId:X,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function o_(v,p){return zc.apply(this,arguments)}(v,{phoneNumber:M.phoneNumber,recaptchaToken:A});return $}}finally{m._reset()}}),ui.apply(this,arguments)}function ci(){return(ci=(0,c.Z)(function*(v,p){yield yr((0,L.m9)(v),p)})).apply(this,arguments)}let lt=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=_n(m)}verifyPhoneNumber(m,E){return Bl(this.auth,m,(0,L.m9)(E))}static credential(m,E){return Kr._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?Kr._fromTokenResponse(E,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function jn(v,p){return p?xn(p):(ae(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class $n extends Us{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ji(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Ji(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Ji(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Yh(v){return bl(v.auth,new $n(v),v.bypassAuthState)}function jl(v){const{auth:p,user:m}=v;return ae(m,p,"internal-error"),wo(m,new $n(v),v.bypassAuthState)}function di(v){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,c.Z)(function*(v){const{auth:p,user:m}=v;return ae(m,p,"internal-error"),yr(m,new $n(v),v.bypassAuthState)})).apply(this,arguments)}class ud{constructor(p,m,E,A,M=!1){this.auth=p,this.resolver=E,this.user=A,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,c.Z)(function*(E,A){p.pendingPromise={resolve:E,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(M){p.reject(M)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,c.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:M,tenantId:$,error:X,type:Ne}=p;if(X)return void m.reject(X);const We={auth:m.auth,requestUri:E,sessionId:A,tenantId:$||void 0,postBody:M||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ne)(We))}catch(rt){m.reject(rt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Yh;case"linkViaPopup":case"linkViaRedirect":return di;case"reauthViaPopup":case"reauthViaRedirect":return jl;default:be(this.auth,"internal-error")}}resolve(p){nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Oi=new _s(2e3,1e4);function $l(){return($l=(0,c.Z)(function*(v,p,m){const E=_n(v);Ue(v,p,js);const A=jn(E,m);return new Ju(E,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function Zs(){return(Zs=(0,c.Z)(function*(v,p,m){const E=(0,L.m9)(v);Ue(E.auth,p,js);const A=jn(E.auth,m);return new Ju(E.auth,"reauthViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}function cd(){return(cd=(0,c.Z)(function*(v,p,m){const E=(0,L.m9)(v);Ue(E.auth,p,js);const A=jn(E.auth,m);return new Ju(E.auth,"linkViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}let Ju=(()=>{class v extends ud{constructor(m,E,A,M,$){super(m,E,M,$),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,c.Z)(function*(){const E=yield m.execute();return ae(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,c.Z)(function*(){nt(1===m.filter.length,"Popup operations only handle one event");const E=Wa();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Te(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,Oi.get())};m()}}return v.currentPopupAction=null,v})();const Co="pendingRedirect",bo=new Map;class Xn extends ud{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,c.Z)(function*(){let E=bo.get(m.auth._key());if(!E){try{const M=(yield function dd(v,p){return hd.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(M)}catch(A){E=()=>Promise.reject(A)}bo.set(m.auth._key(),E)}return m.bypassAuthState||bo.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,c.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const A=yield E.auth._redirectUserForId(p.eventId);if(A)return E.user=A,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function hd(){return(hd=(0,c.Z)(function*(v,p){const m=la(p),E=ec(v);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function oa(v,p){return aa.apply(this,arguments)}function aa(){return(aa=(0,c.Z)(function*(v,p){return ec(v)._set(la(p),"true")})).apply(this,arguments)}function Qh(v,p){bo.set(v._key(),p)}function ec(v){return xn(v._redirectPersistence)}function la(v){return H(Co,v.config.apiKey,v.name)}function Jh(v,p,m){return function Xp(v,p,m){return Gl.apply(this,arguments)}(v,p,m)}function Gl(){return(Gl=(0,c.Z)(function*(v,p,m){const E=_n(v);Ue(v,p,js),yield E._initializationPromise;const A=jn(E,m);return yield oa(A,E),A._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function zl(v,p,m){return function es(v,p,m){return ql.apply(this,arguments)}(v,p,m)}function ql(){return(ql=(0,c.Z)(function*(v,p,m){const E=(0,L.m9)(v);Ue(E.auth,p,js),yield E.auth._initializationPromise;const A=jn(E.auth,m);yield oa(A,E.auth);const M=yield er(E);return A._openRedirect(E.auth,p,"reauthViaRedirect",M)})).apply(this,arguments)}function Ir(v,p,m){return function fd(v,p,m){return pd.apply(this,arguments)}(v,p,m)}function pd(){return(pd=(0,c.Z)(function*(v,p,m){const E=(0,L.m9)(v);Ue(E.auth,p,js),yield E.auth._initializationPromise;const A=jn(E.auth,m);yield Hs(!1,E,p.providerId),yield oa(A,E.auth);const M=yield er(E);return A._openRedirect(E.auth,p,"linkViaRedirect",M)})).apply(this,arguments)}function To(){return(To=(0,c.Z)(function*(v,p){return yield _n(v)._initializationPromise,ua(v,p,!1)})).apply(this,arguments)}function ua(v,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,c.Z)(function*(v,p,m=!1){const E=_n(v),A=jn(E,p),$=yield new Xn(E,A,m).execute();return $&&!m&&(delete $.user._redirectEventId,yield E._persistUserIfCurrent($.user),yield E._setRedirectUser(null,p)),$})).apply(this,arguments)}function er(v){return ca.apply(this,arguments)}function ca(){return(ca=(0,c.Z)(function*(v){const p=Wa(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Ya{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Rr(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ys(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!Ys(p)){const A=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Te(this.auth,A))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ts(p))}saveEventToCache(p){this.cachedEventUids.add(ts(p)),this.lastProcessedEventTime=Date.now()}}function ts(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Ys({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function da(v){return eg.apply(this,arguments)}function eg(){return(eg=(0,c.Z)(function*(v,p={}){return De(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Qa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tc=/^https?/;function Qs(){return(Qs=(0,c.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield da(v);for(const m of p)try{if(md(m))return}catch{}be(v,"unauthorized-domain")})).apply(this,arguments)}function md(v){const p=Kt(),{protocol:m,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const $=new URL(v);return""===$.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&$.hostname===E}if(!tc.test(m))return!1;if(Qa.test(v))return E===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Wl=new _s(3e4,6e4);function bt(){const v=In().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let rc=null;const Xh=new _s(5e3,15e3),ef="__/auth/iframe",rs="emulator/auth/iframe",tf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rf(v){const p=v.config;ae(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?de(p,rs):`https://${v.config.authDomain}/${ef}`,E={apiKey:p.apiKey,appName:v.name,v:ue.SDK_VERSION},A=nf.get(v.config.apiHost);A&&(E.eid=A);const M=v._getFrameworks();return M.length&&(E.fw=M.join(",")),`${m}?${(0,L.xO)(E).slice(1)}`}function T(){return T=(0,c.Z)(function*(v){const p=yield function Fi(v){return rc=rc||function ns(v){return new Promise((p,m)=>{var E,A,M;function $(){bt(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{bt(),m(Te(v,"network-request-failed"))},timeout:Wl.get()})}if(null!==(A=null===(E=In().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(M=In().gapi)||void 0===M||!M.load){const X=or("iframefcb");return In()[X]=()=>{gapi.load?$():m(Te(v,"network-request-failed"))},Dr(`https://apis.google.com/js/api.js?onload=${X}`).catch(Ne=>m(Ne))}$()}}).catch(p=>{throw rc=null,p})}(v),rc}(v),m=In().gapi;return ae(m,v,"internal-error"),p.open({where:document.body,url:rf(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tf,dontclear:!0},E=>new Promise(function(){var A=(0,c.Z)(function*(M,$){yield E.restyle({setHideOnLeave:!1});const X=Te(v,"network-request-failed"),Ne=In().setTimeout(()=>{$(X)},Xh.get());function We(){In().clearTimeout(Ne),M(E)}E.ping(We).then(We,()=>{$(X)})});return function(M,$){return A.apply(this,arguments)}}()))}),T.apply(this,arguments)}const x={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F=500,q=600,Q="_blank",se="http://localhost";class Ze{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Nt="__/auth/handler",Mt="emulator/auth/handler",Qr=encodeURIComponent("fac");function Cn(v,p,m,E,A,M){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,c.Z)(function*(v,p,m,E,A,M){ae(v.config.authDomain,v,"auth-domain-config-required"),ae(v.config.apiKey,v,"invalid-api-key");const $={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:ue.SDK_VERSION,eventId:A};if(p instanceof js){p.setDefaultLanguage(v.languageCode),$.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||($.customParameters=JSON.stringify(p.getCustomParameters()));for(const[rt,st]of Object.entries(M||{}))$[rt]=st}if(p instanceof Es){const rt=p.getScopes().filter(st=>""!==st);rt.length>0&&($.scopes=rt.join(","))}v.tenantId&&($.tid=v.tenantId);const X=$;for(const rt of Object.keys(X))void 0===X[rt]&&delete X[rt];const Ne=yield v._getAppCheckToken(),We=Ne?`#${Qr}=${encodeURIComponent(Ne)}`:"";return`${function Do({config:v}){return v.emulator?de(v,Mt):`https://${v.authDomain}/${Nt}`}(v)}?${(0,L.xO)(X).slice(1)}${We}`})).apply(this,arguments)}const ha="webStorageSupport",is=class Nr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=ua,this._overrideRedirectResult=Qh}_openPopup(p,m,E,A){var M=this;return(0,c.Z)(function*(){var $;nt(null===($=M.eventManagers[p._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const X=yield Cn(p,m,E,Kt(),A);return function qe(v,p,m,E=F,A=q){const M=Math.max((window.screen.availHeight-A)/2,0).toString(),$=Math.max((window.screen.availWidth-E)/2,0).toString();let X="";const Ne=Object.assign(Object.assign({},x),{width:E.toString(),height:A.toString(),top:M,left:$}),We=(0,L.z$)().toLowerCase();m&&(X=Ve(We)?Q:m),Ee(We)&&(p=p||se,Ne.scrollbars="yes");const rt=Object.entries(Ne).reduce((kn,[eo,Rd])=>`${kn}${eo}=${Rd},`,"");if(function Wr(v=(0,L.z$)()){var p;return gn(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(We)&&"_self"!==X)return function dt(v,p){const m=document.createElement("a");m.href=v,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",X),new Ze(null);const st=window.open(p||"",X,rt);ae(st,v,"popup-blocked");try{st.focus()}catch{}return new Ze(st)}(p,X,Wa())})()}_openRedirect(p,m,E,A){var M=this;return(0,c.Z)(function*(){return yield M._originValidation(p),function Kh(v){In().location.href=v}(yield Cn(p,m,E,Kt(),A)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:A,promise:M}=this.eventManagers[m];return A?Promise.resolve(A):(nt(M,"If manager is not set, promise should be"),M)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,c.Z)(function*(){const E=yield function I(v){return T.apply(this,arguments)}(p),A=new Ya(p);return E.register("authEvent",M=>(ae(M?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:A},m.iframes[p._key()]=E,A})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(ha,{type:ha},A=>{var M;const $=null===(M=A?.[0])||void 0===M?void 0:M[ha];void 0!==$&&m(!!$),be(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function nc(v){return Qs.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return ws()||ne()||gn()}};class So{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return At("unexpected MultiFactorSessionType")}}}class _d extends So{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new _d(p)}_finalizeEnroll(p,m,E){return function ed(v,p){return De(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ae(v,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Zp(v,p){return De(v,"POST","/v2/accounts/mfaSignIn:finalize",Ae(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yd=(()=>{class v{constructor(){}static assertion(m){return _d._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var ng="@firebase/auth";class ic{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,c.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Zl(){return window}(0,L.Pz)("authIdTokenMaxAge"),function p_(v){(0,ue._registerComponent)(new we.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),M=p.getProvider("app-check-internal"),{apiKey:$,authDomain:X}=E.options;ae($&&!$.includes(":"),"invalid-api-key",{appName:E.name});const Ne={apiKey:$,authDomain:X,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pe(v)},We=new Ri(E,A,M,Ne);return function Wn(v,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(xn);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,p?.popupRedirectResolver)}(We,m),We},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new we.wA("auth-internal",p=>{const m=_n(p.getProvider("auth").getImmediate());return new ic(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(ng,"0.23.2",function rg(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ue.registerVersion)(ng,"0.23.2","esm2017")}("Browser");const $v=2e3;function wd(){return wd=(0,c.Z)(function*(v,p,m){var E;const{BuildInfo:A}=Zl();nt(p.sessionId,"AuthEvent did not contain a session ID");const M=yield function Xa(v){return Ed.apply(this,arguments)}(p.sessionId),$={};return gn()?$.ibi=A.packageName:rn()?$.apn=A.packageName:be(v,"operation-not-supported-in-this-environment"),A.displayName&&($.appDisplayName=A.displayName),$.sessionId=M,Cn(v,m,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,$)}),wd.apply(this,arguments)}function Ja(){return(Ja=(0,c.Z)(function*(v){const{BuildInfo:p}=Zl(),m={};gn()?m.iosBundleId=p.packageName:rn()?m.androidPackageName=p.packageName:be(v,"operation-not-supported-in-this-environment"),yield da(v,m)})).apply(this,arguments)}function sc(){return(sc=(0,c.Z)(function*(v,p,m){const{cordova:E}=Zl();let A=()=>{};try{yield new Promise((M,$)=>{let X=null;function Ne(){var st;M();const kn=null===(st=E.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof kn&&kn(),"function"==typeof m?.close&&m.close()}function We(){X||(X=window.setTimeout(()=>{$(Te(v,"redirect-cancelled-by-user"))},$v))}function rt(){"visible"===document?.visibilityState&&We()}p.addPassiveListener(Ne),document.addEventListener("resume",We,!1),rn()&&document.addEventListener("visibilitychange",rt,!1),A=()=>{p.removePassiveListener(Ne),document.removeEventListener("resume",We,!1),document.removeEventListener("visibilitychange",rt,!1),X&&window.clearTimeout(X)}})}finally{A()}})).apply(this,arguments)}function Ed(){return(Ed=(0,c.Z)(function*(v){const p=function __(v){if(nt(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),m=new Uint8Array(p);for(let E=0;E<v.length;E++)m[E]=v.charCodeAt(E);return m}(v),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Id=20;class lf extends Ya{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,c.Z)(function*(){yield p.initPromise})()}}function uf(v){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,c.Z)(function*(v){const p=yield cf()._get(Jl(v));return p&&(yield cf()._remove(Jl(v))),p})).apply(this,arguments)}function sg(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<Id;m++){const E=Math.floor(Math.random()*p.length);v.push(p.charAt(E))}return v.join("")}function cf(){return xn(Jo)}function Jl(v){return H("authEvent",v.config.apiKey,v.name)}function Js(v){if(!v?.includes("?"))return{};const[p,...m]=v.split("?");return(0,L.zd)(m.join("?"))}const Td=class bd{constructor(){this._redirectPersistence=Ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ua,this._overrideRedirectResult=Qh}_initialize(p){var m=this;return(0,c.Z)(function*(){const E=p._key();let A=m.eventManagers.get(E);return A||(A=new lf(p),m.eventManagers.set(E,A),m.attachCallbackListeners(p,A)),A})()}_openPopup(p){be(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,E,A){var M=this;return(0,c.Z)(function*(){!function Gv(v){var p,m,E,A,M,$,X,Ne,We,rt;const st=Zl();ae("function"==typeof(null===(p=st?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ae(typeof(null===(m=st?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ae("function"==typeof(null===(M=null===(A=null===(E=st?.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===M?void 0:M.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(Ne=null===(X=null===($=st?.cordova)||void 0===$?void 0:$.plugins)||void 0===X?void 0:X.browsertab)||void 0===Ne?void 0:Ne.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(rt=null===(We=st?.cordova)||void 0===We?void 0:We.InAppBrowser)||void 0===rt?void 0:rt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const $=yield M._initialize(p);yield $.initialized(),$.resetRedirect(),function Xu(){bo.clear()}(),yield M._originValidation(p);const X=function ga(v,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:sg(),postBody:null,tenantId:v.tenantId,error:Te(v,"no-auth-event")}}(p,E,A);yield function y_(v,p){return cf()._set(Jl(v),p)}(p,X);const Ne=yield function m_(v,p,m){return wd.apply(this,arguments)}(p,X,m),We=yield function Hv(v){const{cordova:p}=Zl();return new Promise(m=>{p.plugins.browsertab.isAvailable(E=>{let A=null;E?p.plugins.browsertab.openUrl(v):A=p.InAppBrowser.open(v,function Yt(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(A)})})}(Ne);return function Yl(v,p,m){return sc.apply(this,arguments)}(p,$,We)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function af(v){return Ja.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:E,handleOpenURL:A,BuildInfo:M}=Zl(),$=setTimeout((0,c.Z)(function*(){yield uf(p),m.onEvent(ag())}),500),X=function(){var rt=(0,c.Z)(function*(st){clearTimeout($);const kn=yield uf(p);let eo=null;kn&&st?.url&&(eo=function Ql(v,p){var m,E;const A=function hf(v){const p=Js(v),m=p.link?decodeURIComponent(p.link):void 0,E=Js(m).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Js(A).link||A||E||m||v}(p);if(A.includes("/__/auth/callback")){const M=Js(A),$=M.firebaseError?function df(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,X=null===(E=null===(m=$?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Ne=X?Te(X):null;return Ne?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ne,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(kn,st.url)),m.onEvent(eo||ag())});return function(kn){return rt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,X);const Ne=A,We=`${M.packageName.toLowerCase()}://`;Zl().handleOpenURL=function(){var rt=(0,c.Z)(function*(st){if(st.toLowerCase().startsWith(We)&&X({url:st}),"function"==typeof Ne)try{Ne(st)}catch(kn){console.error(kn)}});return function(st){return rt.apply(this,arguments)}}()}};function ag(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}const ug=1e3;function bs(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function el(v=(0,L.z$)()){return!("file:"!==bs()&&"ionic:"!==bs()&&"capacitor:"!==bs()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Wv(){try{const v=self.localStorage,p=Wa();if(v)return v.setItem(p,"1"),v.removeItem(p),!function qv(v=(0,L.z$)()){return function oc(){return(0,L.w1)()&&11===document?.documentMode}()||function zv(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return cg()&&(0,L.hl)()}return!1}function cg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function xd(){return(function Sd(){return"http:"===bs()||"https:"===bs()}()||(0,L.ru)()||el())&&!function Ad(){return(0,L.b$)()||(0,L.UG)()}()&&Wv()&&!cg()}function v_(){return el()&&typeof document<"u"}function ac(){return(ac=(0,c.Z)(function*(){return!!v_()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},ug);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Li={LOCAL:"local",NONE:"none",SESSION:"session"},Xl=ae,hg="persistence";function fg(v){return pg.apply(this,arguments)}function pg(){return(pg=(0,c.Z)(function*(v){yield v._initializationPromise;const p=gg(),m=H(hg,v.config.apiKey,v.name);p&&p.setItem(m,v._getPersistence())})).apply(this,arguments)}function gg(){var v;try{return(null===(v=function dg(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const mg=ae;class Br{constructor(){this.browserResolver=xn(is),this.cordovaResolver=xn(Td),this.underlyingResolver=null,this._redirectPersistence=Ws,this._completeRedirectFn=ua,this._overrideRedirectResult=Qh}_initialize(p){var m=this;return(0,c.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,E,A){var M=this;return(0,c.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(p,m,E,A)})()}_openRedirect(p,m,E,A){var M=this;return(0,c.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(p,m,E,A)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return v_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,c.Z)(function*(){if(p.underlyingResolver)return;const m=yield function w_(){return ac.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function Ci(v){return v.unwrap()}function E_(v){return C_(v)}function C_(v){const{_tokenResponse:p}=v instanceof L.ZR?v.customData:v;if(!p)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return lt.credentialFromResult(v);const m=p.providerId;if(!m||m===me.PASSWORD)return null;let E;switch(m){case me.GOOGLE:E=Il;break;case me.FACEBOOK:E=qc;break;case me.GITHUB:E=Mh;break;case me.TWITTER:E=bu;break;default:const{oauthIdToken:A,oauthAccessToken:M,oauthTokenSecret:$,pendingToken:X,nonce:Ne}=p;return M||$||A||X?X?m.startsWith("saml.")?yo._create(m,X):Bs._fromParams({providerId:m,signInMethod:m,pendingToken:X,idToken:A,accessToken:M}):new $o(m).credential({idToken:A,accessToken:M,rawNonce:Ne}):null}return v instanceof L.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Cr(v,p){return p.catch(m=>{throw m instanceof L.ZR&&function I_(v,p){var m;const E=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new gf(v,function Vu(v,p){var m;const E=(0,L.m9)(v),A=p;return ae(p.customData.operationType,E,"argument-error"),ae(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Wo._fromError(E,A)}(v,p));else if(E){const A=C_(p),M=p;A&&(M.credential=A,M.tenantId=E.tenantId||void 0,M.email=E.email||void 0,M.phoneNumber=E.phoneNumber||void 0)}}(v,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:E_(m),additionalUserInfo:Jc(m),user:xo.getOrCreate(A)}})}function ff(v,p){return pf.apply(this,arguments)}function pf(){return(pf=(0,c.Z)(function*(v,p){const m=yield p;return{verificationId:m.verificationId,confirm:E=>Cr(v,m.confirm(E))}})).apply(this,arguments)}class gf{constructor(p,m){this.resolver=m,this.auth=function lc(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Cr(Ci(this.auth),this.resolver.resolveSignIn(p))}}class xo{constructor(p){this._delegate=p,this.multiFactor=function zh(v){const p=(0,L.m9)(v);return Eo.has(p)||Eo.set(p,Yo._fromUser(p)),Eo.get(p)}(p)}static getOrCreate(p){return xo.USER_MAP.has(p)||xo.USER_MAP.set(p,new xo(p)),xo.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,c.Z)(function*(){return Cr(m.auth,Fh(m._delegate,p))})()}linkWithPhoneNumber(p,m){var E=this;return(0,c.Z)(function*(){return ff(E.auth,function Ku(v,p,m){return Zu.apply(this,arguments)}(E._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,c.Z)(function*(){return Cr(m.auth,function yt(v,p,m){return cd.apply(this,arguments)}(m._delegate,p,Br))})()}linkWithRedirect(p){var m=this;return(0,c.Z)(function*(){return yield fg(_n(m.auth)),Ir(m._delegate,p,Br)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,c.Z)(function*(){return Cr(m.auth,Lh(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return ff(this.auth,function ld(v,p,m){return Yu.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return Cr(this.auth,function Hl(v,p,m){return Zs.apply(this,arguments)}(this._delegate,p,Br))}reauthenticateWithRedirect(p){var m=this;return(0,c.Z)(function*(){return yield fg(_n(m.auth)),zl(m._delegate,p,Br)})()}sendEmailVerification(p){return function Pu(v,p){return Rl.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,c.Z)(function*(){return yield function kh(v,p){return Yr.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function Vr(v,p){return Pn((0,L.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function zs(v,p){return Pn((0,L.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function ln(v,p){return ci.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function $p(v,p){return Ou.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Yc(v,p,m){return Nl.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xo.USER_MAP=new WeakMap;const tu=ae;let _g=(()=>{class v{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;tu(A,"invalid-api-key",{appName:m.name}),tu(A,"invalid-api-key",{appName:m.name});const M=typeof window<"u"?Br:void 0;this._delegate=E.initialize({options:{persistence:Xs(A,m.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function yl(v,p,m){const E=_n(v);ae(E._canInitEmulator,E,"emulator-config-failed"),ae(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const A=!!m?.disableWarnings,M=oi(p),{host:$,port:X}=function Ht(v){const p=oi(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const M=A[1];return{host:M,port:vl(E.substr(M.length+1))}}{const[M,$]=E.split(":");return{host:M,port:vl($)}}}(p);E.config.emulator={url:`${M}//${$}${null===X?"":`:${X}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:$,port:X,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Vo(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,E)}applyActionCode(m){return function u_(v,p){return Gs.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Al(this._delegate,m)}confirmPasswordReset(m,E){return function Vh(v,p,m){return xu.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var A=this;return(0,c.Z)(function*(){return Cr(A._delegate,function Go(v,p,m){return Pi.apply(this,arguments)}(A._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function jh(v,p){return Mu.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function c_(v,p){return"EMAIL_SIGNIN"===Va.parseLink(p)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,c.Z)(function*(){tu(xd(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Hn(v,p){return To.apply(this,arguments)}(m._delegate,Br);return E?Cr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function lg(v,p){_n(v)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,E,A){const{next:M,error:$,complete:X}=nu(m,E,A);return this._delegate.onAuthStateChanged(M,$,X)}onIdTokenChanged(m,E,A){const{next:M,error:$,complete:X}=nu(m,E,A);return this._delegate.onIdTokenChanged(M,$,X)}sendSignInLinkToEmail(m,E){return function xl(v,p,m){return Ru.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function Au(v,p,m){return li.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,c.Z)(function*(){let A;switch(function eu(v,p){Xl(Object.values(Li).includes(p),v,"invalid-persistence-type"),(0,L.b$)()?Xl(p!==Li.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Xl(p===Li.NONE,v,"unsupported-persistence-type"):cg()?Xl(p===Li.NONE||p===Li.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Xl(p===Li.NONE||Wv(),v,"unsupported-persistence-type")}(E._delegate,m),m){case Li.SESSION:A=Ws;break;case Li.LOCAL:A=(yield xn(na)._isAvailable())?na:Jo;break;case Li.NONE:A=si;break;default:return be("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Cr(this._delegate,function Ar(v){return Ba.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Cr(this._delegate,Tl(this._delegate,m))}signInWithCustomToken(m){return Cr(this._delegate,function ge(v,p){return Bt.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Cr(this._delegate,function Bh(v,p,m){return Tl((0,L.m9)(v),Bp.credential(p,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Cr(this._delegate,function ur(v,p,m){return $a.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return ff(this._delegate,function Jp(v,p,m){return sa.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,c.Z)(function*(){return tu(xd(),E._delegate,"operation-not-supported-in-this-environment"),Cr(E._delegate,function Za(v,p,m){return $l.apply(this,arguments)}(E._delegate,m,Br))})()}signInWithRedirect(m){var E=this;return(0,c.Z)(function*(){return tu(xd(),E._delegate,"operation-not-supported-in-this-environment"),yield fg(E._delegate),Jh(E._delegate,m,Br)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Mi(v,p){return Is.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Li,v})();function nu(v,p,m){let E=v;"function"!=typeof v&&({next:E,error:p,complete:m}=v);const A=E;return{next:$=>A($&&xo.getOrCreate($)),error:p,complete:m}}function Xs(v,p){const m=function Kv(v,p){const m=gg();if(!m)return[];const E=H(hg,v,p);switch(m.getItem(E)){case Li.NONE:return[si];case Li.LOCAL:return[na,Ws];case Li.SESSION:return[Ws];default:return[]}}(v,p);if(typeof self<"u"&&!m.includes(na)&&m.push(na),typeof window<"u")for(const E of[Jo,Ws])m.includes(E)||m.push(E);return m.includes(si)||m.push(si),m}class ru{constructor(){this.providerId="phone",this._delegate=new lt(Ci(ee.Z.auth()))}static credential(p,m){return lt.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}ru.PHONE_SIGN_IN_METHOD=lt.PHONE_SIGN_IN_METHOD,ru.PROVIDER_ID=lt.PROVIDER_ID;const uc=ae;class b_{constructor(p,m,E=ee.Z.app()){var A;uc(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new ad(p,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function D_(v){v.INTERNAL.registerComponent(new we.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new _g(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Y_EMAIL_SIGNIN,PASSWORD_RESET:Y_PASSWORD_RESET,RECOVER_EMAIL:Y_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Y_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Y_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Y_VERIFY_EMAIL}},EmailAuthProvider:Bp,FacebookAuthProvider:qc,GithubAuthProvider:Mh,GoogleAuthProvider:Il,OAuthProvider:$o,SAMLAuthProvider:Cu,PhoneAuthProvider:ru,PhoneMultiFactorGenerator:yd,RecaptchaVerifier:b_,TwitterAuthProvider:bu,Auth:_g,AuthCredential:Us,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(ee.Z)},5861:(Et,xe,U)=>{function c(L,ue,le,ie,we,Ce,me){try{var z=L[Ce](me),G=z.value}catch(Y){return void le(Y)}z.done?ue(G):Promise.resolve(G).then(ie,we)}function ee(L){return function(){var ue=this,le=arguments;return new Promise(function(ie,we){var Ce=L.apply(ue,le);function me(G){c(Ce,ie,we,me,z,"next",G)}function z(G){c(Ce,ie,we,me,z,"throw",G)}me(void 0)})}}U.d(xe,{Z:()=>ee})},7582:(Et,xe,U)=>{function ue(de,fe){var ye={};for(var ce in de)Object.prototype.hasOwnProperty.call(de,ce)&&fe.indexOf(ce)<0&&(ye[ce]=de[ce]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(ce=Object.getOwnPropertySymbols(de);Ae<ce.length;Ae++)fe.indexOf(ce[Ae])<0&&Object.prototype.propertyIsEnumerable.call(de,ce[Ae])&&(ye[ce[Ae]]=de[ce[Ae]])}return ye}function Y(de,fe,ye,ce){return new(ye||(ye=Promise))(function(De,ft){function pt(Qt){try{mt(ce.next(Qt))}catch(Nn){ft(Nn)}}function Sn(Qt){try{mt(ce.throw(Qt))}catch(Nn){ft(Nn)}}function mt(Qt){Qt.done?De(Qt.value):function Ae(De){return De instanceof ye?De:new ye(function(ft){ft(De)})}(Qt.value).then(pt,Sn)}mt((ce=ce.apply(de,fe||[])).next())})}function Fe(de){return this instanceof Fe?(this.v=de,this):new Fe(de)}function be(de,fe,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,ce=ye.apply(de,fe||[]),De=[];return Ae={},ft("next"),ft("throw"),ft("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function ft(Tn){ce[Tn]&&(Ae[Tn]=function(Gn){return new Promise(function(mr,zn){De.push([Tn,Gn,mr,zn])>1||pt(Tn,Gn)})})}function pt(Tn,Gn){try{!function Sn(Tn){Tn.value instanceof Fe?Promise.resolve(Tn.value.v).then(mt,Qt):Nn(De[0][2],Tn)}(ce[Tn](Gn))}catch(mr){Nn(De[0][3],mr)}}function mt(Tn){pt("next",Tn)}function Qt(Tn){pt("throw",Tn)}function Nn(Tn,Gn){Tn(Gn),De.shift(),De.length&&pt(De[0][0],De[0][1])}}function Ke(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,fe=de[Symbol.asyncIterator];return fe?fe.call(de):(de=function ut(de){var fe="function"==typeof Symbol&&Symbol.iterator,ye=fe&&de[fe],ce=0;if(ye)return ye.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&ce>=de.length&&(de=void 0),{value:de&&de[ce++],done:!de}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),ye={},ce("next"),ce("throw"),ce("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function ce(De){ye[De]=de[De]&&function(ft){return new Promise(function(pt,Sn){!function Ae(De,ft,pt,Sn){Promise.resolve(Sn).then(function(mt){De({value:mt,done:pt})},ft)}(pt,Sn,(ft=de[De](ft)).done,ft.value)})}}}U.d(xe,{FC:()=>be,KL:()=>Ke,_T:()=>ue,mG:()=>Y,qq:()=>Fe}),"function"==typeof SuppressedError&&SuppressedError}},Et=>{Et(Et.s=6767)}]);