"use strict";(self.webpackChunkangularfirebase_student_app=self.webpackChunkangularfirebase_student_app||[]).push([[179],{2011:(gt,De,L)=>{L.d(De,{Dh:()=>pe,GT:()=>ie,cc:()=>Se,hO:()=>je,on:()=>q,pX:()=>oe,xv:()=>de});var d=L(4650),J=L(9260),F=L(2122);gt=L.hmd(gt);const ae=["ngOnDestroy"],oe=(xe,Ae,ke,Te={})=>new Proxy(xe,{get:(Ie,Re)=>ke.runOutsideAngular(()=>{var Oe;if(xe[Re])return!(null===(Oe=Te?.spy)||void 0===Oe)&&Oe.get&&Te.spy.get(Re,xe[Re]),xe[Re];if(ae.indexOf(Re)>-1)return()=>{};const Pe=Ae.toPromise().then($=>{const Ee=$&&$[Re];return"function"==typeof Ee?Ee.bind($):Ee&&Ee.then?Ee.then(Be=>ke.run(()=>Be)):ke.run(()=>Ee)});return new Proxy(()=>{},{get:($,Ee)=>Pe[Ee],apply:($,Ee,Be)=>Pe.then(Ze=>{var mt;const et=Ze&&Ze(...Be);return!(null===(mt=Te?.spy)||void 0===mt)&&mt.apply&&Te.spy.apply(Re,Be,et),et})})})}),ie=(xe,Ae)=>{Ae.forEach(ke=>{Object.getOwnPropertyNames(ke.prototype||ke).forEach(Te=>{Object.defineProperty(xe.prototype,Te,Object.getOwnPropertyDescriptor(ke.prototype||ke,Te))})})};class me{constructor(Ae){return Ae}}const pe=new d.OlP("angularfire2.app.options"),de=new d.OlP("angularfire2.app.name");function q(xe,Ae,ke){const Ie="object"==typeof ke&&ke||{};Ie.name=Ie.name||"string"==typeof ke&&ke||"[DEFAULT]";const Oe=J.Z.apps.filter(Pe=>Pe&&Pe.name===Ie.name)[0]||Ae.runOutsideAngular(()=>J.Z.initializeApp(xe,Ie));try{JSON.stringify(xe)!==JSON.stringify(Oe.options)&&G("error",`${Oe.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(Oe)}const G=(xe,...Ae)=>{(0,d.X6Q)()&&typeof console<"u"&&console[xe](...Ae)},Y={provide:me,useFactory:q,deps:[pe,d.R0b,[new d.FiY,de]]};let je=(()=>{class xe{constructor(ke){J.Z.registerVersion("angularfire",F.q4.full,"core"),J.Z.registerVersion("angularfire",F.q4.full,"app-compat"),J.Z.registerVersion("angular",d.q4F.full,ke.toString())}static initializeApp(ke,Te){return{ngModule:xe,providers:[{provide:pe,useValue:ke},{provide:de,useValue:Te}]}}}return xe.\u0275fac=function(ke){return new(ke||xe)(d.LFG(d.Lbi))},xe.\u0275mod=d.oAB({type:xe}),xe.\u0275inj=d.cJS({providers:[Y]}),xe})();function Se(xe,Ae,ke,Te,Ie){const[,Re,Oe]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===xe)||[];if(Re)return function We(xe,Ae){try{return xe.toString()===Ae.toString()}catch{return xe===Ae}}(Ie,Oe)||(ge("error",`${Ae} was already initialized on the ${ke} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ie,was:Oe})),Re;{const Pe=Te();return globalThis.\u0275AngularfireInstanceCache.push([xe,Pe,Ie]),Pe}}const ut=!!gt.hot,ge=(xe,...Ae)=>{(0,d.X6Q)()&&typeof console<"u"&&console[xe](...Ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(gt,De,L)=>{L.d(De,{q4:()=>hl,iC:()=>mu,fc:()=>_p,HU:()=>$i,vb:()=>sn,JM:()=>Jr});var d=L(4650),J=L(259),F=L(5861),ae=L(9681),oe=L(2090),ie=L(4859),me=L(1877),pe=L(8766);const de="@firebase/installations",q="0.6.1",G=1e4,Y=`w:${q}`,je="FIS_v2",Se="https://firebaseinstallations.googleapis.com/v1",We=36e5,Ae=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ke(T){return T instanceof oe.ZR&&T.code.includes("request-failed")}function Te({projectId:T}){return`${Se}/projects/${T}/installations`}function Ie(T){return{token:T.token,requestStatus:2,expiresIn:Ze(T.expiresIn),creationTime:Date.now()}}function Re(T,D){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,F.Z)(function*(T,D){const B=(yield D.json()).error;return Ae.create("request-failed",{requestName:T,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Pe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Ee(T){return Be.apply(this,arguments)}function Be(){return(Be=(0,F.Z)(function*(T){const D=yield T();return D.status>=500&&D.status<600?T():D})).apply(this,arguments)}function Ze(T){return Number(T.replace("s","000"))}function Pn(){return(Pn=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:D},{fid:M}){const B=Te(T),Q=Pe(T),re=D.getImmediate({optional:!0});if(re){const dt=yield re.getHeartbeatsHeader();dt&&Q.append("x-firebase-client",dt)}const at={method:"POST",headers:Q,body:JSON.stringify({fid:M,authVersion:je,appId:T.appId,sdkVersion:Y})},ft=yield Ee(()=>fetch(B,at));if(ft.ok){const dt=yield ft.json();return{fid:dt.fid||M,registrationStatus:2,refreshToken:dt.refreshToken,authToken:Ie(dt.authToken)}}throw yield Re("Create Installation",ft)})).apply(this,arguments)}function _r(T){return new Promise(D=>{setTimeout(D,T)})}const ys=/^[cdef][\w-]{21}$/,se="";function he(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const M=function le(T){return function Qn(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return ys.test(M)?M:se}catch{return se}}function ee(T){return`${T.appName}!${T.appId}`}const Fe=new Map;function Le(T,D){const M=ee(T);zt(M,D),function vt(T,D){const M=function an(){return!Qt&&"BroadcastChannel"in self&&(Qt=new BroadcastChannel("[Firebase] FID Change"),Qt.onmessage=T=>{zt(T.data.key,T.data.fid)}),Qt}();M&&M.postMessage({key:T,fid:D}),function Jt(){0===Fe.size&&Qt&&(Qt.close(),Qt=null)}()}(M,D)}function zt(T,D){const M=Fe.get(T);if(M)for(const B of M)B(D)}let Qt=null;const ur="firebase-installations-database",lr=1,xn="firebase-installations-store";let Vn=null;function ri(){return Vn||(Vn=(0,pe.X3)(ur,lr,{upgrade:(T,D)=>{0===D&&T.createObjectStore(xn)}})),Vn}function Cn(T,D){return ht.apply(this,arguments)}function ht(){return(ht=(0,F.Z)(function*(T,D){const M=ee(T),Q=(yield ri()).transaction(xn,"readwrite"),re=Q.objectStore(xn),we=yield re.get(M);return yield re.put(D,M),yield Q.done,(!we||we.fid!==D.fid)&&Le(T,D.fid),D})).apply(this,arguments)}function es(T){return po.apply(this,arguments)}function po(){return(po=(0,F.Z)(function*(T){const D=ee(T),B=(yield ri()).transaction(xn,"readwrite");yield B.objectStore(xn).delete(D),yield B.done})).apply(this,arguments)}function kn(T,D){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,F.Z)(function*(T,D){const M=ee(T),Q=(yield ri()).transaction(xn,"readwrite"),re=Q.objectStore(xn),we=yield re.get(M),at=D(we);return void 0===at?yield re.delete(M):yield re.put(at,M),yield Q.done,at&&(!we||we.fid!==at.fid)&&Le(T,at.fid),at})).apply(this,arguments)}function ii(T){return yn.apply(this,arguments)}function yn(){return yn=(0,F.Z)(function*(T){let D;const M=yield kn(T.appConfig,B=>{const Q=function En(T){return Cr(T||{fid:he(),registrationStatus:0})}(B),re=function It(T,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ae.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},B=function xt(T,D){return Wr.apply(this,arguments)}(T,M);return{installationEntry:M,registrationPromise:B}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Hn(T)}:{installationEntry:D}}(T,Q);return D=re.registrationPromise,re.installationEntry});return M.fid===se?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}}),yn.apply(this,arguments)}function Wr(){return Wr=(0,F.Z)(function*(T,D){try{const M=yield function et(T,D){return Pn.apply(this,arguments)}(T,D);return Cn(T.appConfig,M)}catch(M){throw ke(M)&&409===M.customData.serverCode?yield es(T.appConfig):yield Cn(T.appConfig,{fid:D.fid,registrationStatus:0}),M}}),Wr.apply(this,arguments)}function Hn(T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,F.Z)(function*(T){let D=yield zs(T.appConfig);for(;1===D.registrationStatus;)yield _r(100),D=yield zs(T.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:B}=yield ii(T);return B||M}return D})).apply(this,arguments)}function zs(T){return kn(T,D=>{if(!D)throw Ae.create("installation-not-found");return Cr(D)})}function Cr(T){return function ea(T){return 1===T.registrationStatus&&T.registrationTime+G<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function si(){return(si=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:D},M){const B=function en(T,{fid:D}){return`${Te(T)}/${D}/authTokens:generate`}(T,M),Q=function $(T,{refreshToken:D}){const M=Pe(T);return M.append("Authorization",function mt(T){return`${je} ${T}`}(D)),M}(T,M),re=D.getImmediate({optional:!0});if(re){const dt=yield re.getHeartbeatsHeader();dt&&Q.append("x-firebase-client",dt)}const at={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:Y,appId:T.appId}})},ft=yield Ee(()=>fetch(B,at));if(ft.ok)return Ie(yield ft.json());throw yield Re("Generate Auth Token",ft)})).apply(this,arguments)}function ts(T){return fn.apply(this,arguments)}function fn(){return fn=(0,F.Z)(function*(T,D=!1){let M;const B=yield kn(T.appConfig,re=>{if(!Wt(re))throw Ae.create("not-registered");const we=re.authToken;if(!D&&function H(T){return 2===T.requestStatus&&!function j(T){const D=Date.now();return D<T.creationTime||T.creationTime+T.expiresIn<D+We}(T)}(we))return re;if(1===we.requestStatus)return M=function st(T,D){return Ce.apply(this,arguments)}(T,D),re;{if(!navigator.onLine)throw Ae.create("app-offline");const at=function W(T){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:D})}(re);return M=function Nt(T,D){return Mt.apply(this,arguments)}(T,at),at}});return M?yield M:B.authToken}),fn.apply(this,arguments)}function Ce(){return(Ce=(0,F.Z)(function*(T,D){let M=yield it(T.appConfig);for(;1===M.authToken.requestStatus;)yield _r(100),M=yield it(T.appConfig);const B=M.authToken;return 0===B.requestStatus?ts(T,D):B})).apply(this,arguments)}function it(T){return kn(T,D=>{if(!Wt(D))throw Ae.create("not-registered");return function _e(T){return 1===T.requestStatus&&T.requestTime+G<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Mt(){return Mt=(0,F.Z)(function*(T,D){try{const M=yield function ln(T,D){return si.apply(this,arguments)}(T,D),B=Object.assign(Object.assign({},D),{authToken:M});return yield Cn(T.appConfig,B),M}catch(M){if(!ke(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const B=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Cn(T.appConfig,B)}else yield es(T.appConfig);throw M}}),Mt.apply(this,arguments)}function Wt(T){return void 0!==T&&2===T.registrationStatus}function tt(){return(tt=(0,F.Z)(function*(T){const D=T,{installationEntry:M,registrationPromise:B}=yield ii(D);return B?B.catch(console.error):ts(D).catch(console.error),M.fid})).apply(this,arguments)}function cn(){return cn=(0,F.Z)(function*(T,D=!1){const M=T;return yield function Tr(T){return Dn.apply(this,arguments)}(M),(yield ts(M,D)).token}),cn.apply(this,arguments)}function Dn(){return(Dn=(0,F.Z)(function*(T){const{registrationPromise:D}=yield ii(T);D&&(yield D)})).apply(this,arguments)}function ta(T){return Ae.create("missing-app-config-values",{valueName:T})}const Zd="installations",Un=T=>{const D=T.getProvider("app").getImmediate(),M=function cc(T){if(!T||!T.options)throw ta("App Configuration");if(!T.name)throw ta("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!T.options[M])throw ta(M);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},dc=T=>{const D=T.getProvider("app").getImmediate(),M=(0,ae._getProvider)(D,Zd).getImmediate();return{getId:()=>function ne(T){return tt.apply(this,arguments)}(M),getToken:Q=>function Je(T){return cn.apply(this,arguments)}(M,Q)}};(function un(){(0,ae._registerComponent)(new ie.wA(Zd,Un,"PUBLIC")),(0,ae._registerComponent)(new ie.wA("installations-internal",dc,"PRIVATE"))})(),(0,ae.registerVersion)(de,q),(0,ae.registerVersion)(de,q,"esm2017");const Jn="@firebase/remote-config",Lr=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class mo{constructor(D,M,B,Q){this.client=D,this.storage=M,this.storageCache=B,this.logger=Q}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-M,Q=B<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Q}.`),Q}fetch(D){var M=this;return(0,F.Z)(function*(){const[B,Q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Q&&M.isCachedDataFresh(D.cacheMaxAgeMillis,B))return Q;D.eTag=Q&&Q.eTag;const re=yield M.client.fetch(D),we=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&we.push(M.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(we),re})()}}function Vi(T=navigator){return T.languages&&T.languages[0]||T.language}class Zs{constructor(D,M,B,Q,re,we){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=B,this.projectId=Q,this.apiKey=re,this.appId=we}fetch(D){var M=this;return(0,F.Z)(function*(){const[B,Q]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),we=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,at={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ft={sdk_version:M.sdkVersion,app_instance_id:B,app_instance_id_token:Q,app_id:M.appId,language_code:Vi()},dt={method:"POST",headers:at,body:JSON.stringify(ft)},Lt=fetch(we,dt),St=new Promise((fi,pi)=>{D.signal.addEventListener(()=>{const Xr=new Error("The operation was aborted.");Xr.name="AbortError",pi(Xr)})});let hi;try{yield Promise.race([Lt,St]),hi=yield Lt}catch(fi){let pi="fetch-client-network";throw"AbortError"===fi?.name&&(pi="fetch-timeout"),Lr.create(pi,{originalErrorMessage:fi?.message})}let zn=hi.status;const Rs=hi.headers.get("ETag")||void 0;let _l,Da;if(200===hi.status){let fi;try{fi=yield hi.json()}catch(pi){throw Lr.create("fetch-client-parse",{originalErrorMessage:pi?.message})}_l=fi.entries,Da=fi.state}if("INSTANCE_STATE_UNSPECIFIED"===Da?zn=500:"NO_CHANGE"===Da?zn=304:("NO_TEMPLATE"===Da||"EMPTY_CONFIG"===Da)&&(_l={}),304!==zn&&200!==zn)throw Lr.create("fetch-status",{httpStatus:zn});return{status:zn,eTag:Rs,config:_l}})()}}class ns{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,F.Z)(function*(){const B=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,B)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:B}){var Q=this;return(0,F.Z)(function*(){yield function Es(T,D){return new Promise((M,B)=>{const Q=Math.max(D-Date.now(),0),re=setTimeout(M,Q);T.addEventListener(()=>{clearTimeout(re),B(Lr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const re=yield Q.client.fetch(D);return yield Q.storage.deleteThrottleMetadata(),re}catch(re){if(!function wn(T){if(!(T instanceof oe.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(re))throw re;const we={throttleEndTimeMillis:Date.now()+(0,oe.$s)(B),backoffCount:B+1};return yield Q.storage.setThrottleMetadata(we),Q.attemptFetch(D,we)}})()}}class sa{constructor(D,M,B,Q,re){this.app=D,this._client=M,this._storageCache=B,this._storage=Q,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _o(T,D){const M=T.target.error||void 0;return Lr.create(D,{originalErrorMessage:M&&M?.message})}const Zr="app_namespace_store";class Ui{constructor(D,M,B,Q=function oi(){return new Promise((T,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=B=>{D(_o(B,"storage-open"))},M.onsuccess=B=>{T(B.target.result)},M.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(Zr,{keyPath:"compositeKey"})}}catch(M){D(Lr.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=D,this.appName=M,this.namespace=B,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,F.Z)(function*(){const B=yield M.openDbPromise;return new Promise((Q,re)=>{const at=B.transaction([Zr],"readonly").objectStore(Zr),ft=M.createCompositeKey(D);try{const dt=at.get(ft);dt.onerror=Lt=>{re(_o(Lt,"storage-get"))},dt.onsuccess=Lt=>{const St=Lt.target.result;Q(St?St.value:void 0)}}catch(dt){re(Lr.create("storage-get",{originalErrorMessage:dt?.message}))}})})()}set(D,M){var B=this;return(0,F.Z)(function*(){const Q=yield B.openDbPromise;return new Promise((re,we)=>{const ft=Q.transaction([Zr],"readwrite").objectStore(Zr),dt=B.createCompositeKey(D);try{const Lt=ft.put({compositeKey:dt,value:M});Lt.onerror=St=>{we(_o(St,"storage-set"))},Lt.onsuccess=()=>{re()}}catch(Lt){we(Lr.create("storage-set",{originalErrorMessage:Lt?.message}))}})})()}delete(D){var M=this;return(0,F.Z)(function*(){const B=yield M.openDbPromise;return new Promise((Q,re)=>{const at=B.transaction([Zr],"readwrite").objectStore(Zr),ft=M.createCompositeKey(D);try{const dt=at.delete(ft);dt.onerror=Lt=>{re(_o(Lt,"storage-delete"))},dt.onsuccess=()=>{Q()}}catch(dt){re(Lr.create("storage-delete",{originalErrorMessage:dt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Wa{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const M=D.storage.getLastFetchStatus(),B=D.storage.getLastSuccessfulFetchTimestampMillis(),Q=D.storage.getActiveConfig(),re=yield M;re&&(D.lastFetchStatus=re);const we=yield B;we&&(D.lastSuccessfulFetchTimestampMillis=we);const at=yield Q;at&&(D.activeConfig=at)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Ka(){return rp.apply(this,arguments)}function rp(){return(rp=(0,F.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Bi(){(0,ae._registerComponent)(new ie.wA("remote-config",function T(D,{instanceIdentifier:M}){const B=D.getProvider("app").getImmediate(),Q=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Lr.create("registration-window");if(!(0,oe.hl)())throw Lr.create("indexed-db-unavailable");const{projectId:re,apiKey:we,appId:at}=B.options;if(!re)throw Lr.create("registration-project-id");if(!we)throw Lr.create("registration-api-key");if(!at)throw Lr.create("registration-app-id");const ft=new Ui(at,B.name,M=M||"firebase"),dt=new Wa(ft),Lt=new me.Yd(Jn);Lt.logLevel=me.in.ERROR;const St=new Zs(Q,ae.SDK_VERSION,M,re,we,at),hi=new ns(St,ft),zn=new mo(hi,ft,dt,Lt),Rs=new sa(B,zn,dt,ft,Lt);return function On(T){const D=(0,oe.m9)(T);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Rs),Rs},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Jn,"0.4.1"),(0,ae.registerVersion)(Jn,"0.4.1","esm2017")}();const gc="/firebase-messaging-sw.js",bs="/firebase-cloud-messaging-push-scope",oa="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Za="https://fcmregistrations.googleapis.com/v1",mc="google.c.a.c_id",Xd="google.c.a.c_l",ip="google.c.a.ts",km="google.c.a.e";var yo=(()=>{return(T=yo||(yo={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",yo;var T})();function rs(T){const D=new Uint8Array(T);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Om(T){const M=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(M),Q=new Uint8Array(B.length);for(let re=0;re<B.length;++re)Q[re]=B.charCodeAt(re);return Q}const ua="fcm_token_details_db",_c=5,Yr="fcm_token_object_Store";function eh(){return eh=(0,F.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(ua))return null;let D=null;return(yield(0,pe.X3)(ua,_c,{upgrade:(B=(0,F.Z)(function*(Q,re,we,at){var ft;if(re<2||!Q.objectStoreNames.contains(Yr))return;const dt=at.objectStore(Yr),Lt=yield dt.index("fcmSenderId").get(T);if(yield dt.clear(),Lt)if(2===re){const St=Lt;if(!St.auth||!St.p256dh||!St.endpoint)return;D={token:St.fcmToken,createTime:null!==(ft=St.createTime)&&void 0!==ft?ft:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:rs(St.vapidKey)}}}else if(3===re){const St=Lt;D={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:rs(St.auth),p256dh:rs(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:rs(St.vapidKey)}}}else if(4===re){const St=Lt;D={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:rs(St.auth),p256dh:rs(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:rs(St.vapidKey)}}}}),function(re,we,at,ft){return B.apply(this,arguments)})})).close(),yield(0,pe.Lj)(ua),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),function sp(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:D}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var B}),eh.apply(this,arguments)}const Bu="firebase-messaging-database",vo=1,wo="firebase-messaging-store";let ju=null;function la(){return ju||(ju=(0,pe.X3)(Bu,vo,{upgrade:(T,D)=>{0===D&&T.createObjectStore(wo)}})),ju}function $u(T){return ca.apply(this,arguments)}function ca(){return ca=(0,F.Z)(function*(T){const D=ha(T),B=yield(yield la()).transaction(wo).objectStore(wo).get(D);if(B)return B;{const Q=yield function yc(T){return eh.apply(this,arguments)}(T.appConfig.senderId);if(Q)return yield Eo(T,Q),Q}}),ca.apply(this,arguments)}function Eo(T,D){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,F.Z)(function*(T,D){const M=ha(T),Q=(yield la()).transaction(wo,"readwrite");return yield Q.objectStore(wo).put(D,M),yield Q.done,D})).apply(this,arguments)}function da(){return(da=(0,F.Z)(function*(T){const D=ha(T),B=(yield la()).transaction(wo,"readwrite");yield B.objectStore(wo).delete(D),yield B.done})).apply(this,arguments)}function ha({appConfig:T}){return T.appId}const Bn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hu(T,D){return qn.apply(this,arguments)}function qn(){return(qn=(0,F.Z)(function*(T,D){const M=yield Io(T),B=Qa(D),Q={method:"POST",headers:M,body:JSON.stringify(B)};let re;try{re=yield(yield fetch(pa(T.appConfig),Q)).json()}catch(we){throw Bn.create("token-subscribe-failed",{errorInfo:we?.toString()})}if(re.error)throw Bn.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw Bn.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function bo(){return(bo=(0,F.Z)(function*(T,D){const M=yield Io(T),B=Qa(D.subscriptionOptions),Q={method:"PATCH",headers:M,body:JSON.stringify(B)};let re;try{re=yield(yield fetch(`${pa(T.appConfig)}/${D.token}`,Q)).json()}catch(we){throw Bn.create("token-update-failed",{errorInfo:we?.toString()})}if(re.error)throw Bn.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw Bn.create("token-update-no-token");return re.token})).apply(this,arguments)}function er(T,D){return vc.apply(this,arguments)}function vc(){return(vc=(0,F.Z)(function*(T,D){const B={method:"DELETE",headers:yield Io(T)};try{const re=yield(yield fetch(`${pa(T.appConfig)}/${D}`,B)).json();if(re.error)throw Bn.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(Q){throw Bn.create("token-unsubscribe-failed",{errorInfo:Q?.toString()})}})).apply(this,arguments)}function pa({projectId:T}){return`${Za}/projects/${T}/registrations`}function Io(T){return cr.apply(this,arguments)}function cr(){return(cr=(0,F.Z)(function*({appConfig:T,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Qa({p256dh:T,auth:D,endpoint:M,vapidKey:B}){const Q={web:{endpoint:M,auth:D,p256dh:T}};return B!==oa&&(Q.web.applicationPubKey=B),Q}const ga=6048e5;function Is(){return Is=(0,F.Z)(function*(T){const D=yield function wc(T,D){return Ec.apply(this,arguments)}(T.swRegistration,T.vapidKey),M={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:D.endpoint,auth:rs(D.getKey("auth")),p256dh:rs(D.getKey("p256dh"))},B=yield $u(T.firebaseDependencies);if(B){if(function Wu(T,D){return D.vapidKey===T.vapidKey&&D.endpoint===T.endpoint&&D.auth===T.auth&&D.p256dh===T.p256dh}(B.subscriptionOptions,M))return Date.now()>=B.createTime+ga?function Ot(T,D){return qu.apply(this,arguments)}(T,{token:B.token,createTime:Date.now(),subscriptionOptions:M}):B.token;try{yield er(T.firebaseDependencies,B.token)}catch(Q){console.warn(Q)}return nh(T.firebaseDependencies,M)}return nh(T.firebaseDependencies,M)}),Is.apply(this,arguments)}function Xa(){return Xa=(0,F.Z)(function*(T){const D=yield $u(T.firebaseDependencies);D&&(yield er(T.firebaseDependencies,D.token),yield function th(T){return da.apply(this,arguments)}(T.firebaseDependencies));const M=yield T.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),Xa.apply(this,arguments)}function qu(){return qu=(0,F.Z)(function*(T,D){try{const M=yield function fa(T,D){return bo.apply(this,arguments)}(T.firebaseDependencies,D),B=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield Eo(T.firebaseDependencies,B),M}catch(M){throw yield function Ja(T){return Xa.apply(this,arguments)}(T),M}}),qu.apply(this,arguments)}function nh(T,D){return zu.apply(this,arguments)}function zu(){return(zu=(0,F.Z)(function*(T,D){const B={token:yield Hu(T,D),createTime:Date.now(),subscriptionOptions:D};return yield Eo(T,B),B.token})).apply(this,arguments)}function Ec(){return(Ec=(0,F.Z)(function*(T,D){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Om(D)})})).apply(this,arguments)}function op(T){const D={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function bc(T,D){if(!D.notification)return;T.notification={};const M=D.notification.title;M&&(T.notification.title=M);const B=D.notification.body;B&&(T.notification.body=B);const Q=D.notification.image;Q&&(T.notification.image=Q);const re=D.notification.icon;re&&(T.notification.icon=re)}(D,T),function ye(T,D){D.data&&(T.data=D.data)}(D,T),function rn(T,D){var M,B,Q,re,we;if(!(D.fcmOptions||null!==(M=D.notification)&&void 0!==M&&M.click_action))return;T.fcmOptions={};const at=null!==(Q=null===(B=D.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==Q?Q:null===(re=D.notification)||void 0===re?void 0:re.click_action;at&&(T.fcmOptions.link=at);const ft=null===(we=D.fcmOptions)||void 0===we?void 0:we.analytics_label;ft&&(T.fcmOptions.analyticsLabel=ft)}(D,T),D}function rh(T,D){const M=[];for(let B=0;B<T.length;B++)M.push(T.charAt(B)),B<D.length&&M.push(D.charAt(B));return M.join("")}function eu(T){return Bn.create("missing-app-config-values",{valueName:T})}rh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),rh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ku{constructor(D,M,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function Dr(T){if(!T||!T.options)throw eu("App Configuration Object");if(!T.name)throw eu("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=T;for(const B of D)if(!M[B])throw eu(B);return{appName:T.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Q,installations:M,analyticsProvider:B}}_delete(){return Promise.resolve()}}function li(T){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,F.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(gc,{scope:bs}),T.swRegistration.update().catch(()=>{})}catch(D){throw Bn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function ih(){return(ih=(0,F.Z)(function*(T,D){if(!D&&!T.swRegistration&&(yield li(T)),D||!T.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Bn.create("invalid-sw-registration");T.swRegistration=D}})).apply(this,arguments)}function Qu(){return(Qu=(0,F.Z)(function*(T,D){D?T.vapidKey=D:T.vapidKey||(T.vapidKey=oa)})).apply(this,arguments)}function ci(){return ci=(0,F.Z)(function*(T,D){if(!navigator)throw Bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bn.create("permission-blocked");return yield function Cc(T,D){return Qu.apply(this,arguments)}(T,D?.vapidKey),yield function Yu(T,D){return ih.apply(this,arguments)}(T,D?.serviceWorkerRegistration),function Gu(T){return Is.apply(this,arguments)}(T)}),ci.apply(this,arguments)}function Co(){return(Co=(0,F.Z)(function*(T,D,M){const B=function is(T){switch(T){case yo.NOTIFICATION_CLICKED:return"notification_open";case yo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:M[mc],message_name:M[Xd],message_time:M[ip],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function tu(){return tu=(0,F.Z)(function*(T,D){const M=D.data;if(!M.isFirebaseMessaging)return;T.onMessageHandler&&M.messageType===yo.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(op(M)):T.onMessageHandler.next(op(M)));const B=M.data;(function Ic(T){return"object"==typeof T&&!!T&&mc in T})(B)&&"1"===B[km]&&(yield function Ys(T,D,M){return Co.apply(this,arguments)}(T,M.messageType,B))}),tu.apply(this,arguments)}const oh="@firebase/messaging",Dc=T=>{const D=new Ku(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function sh(T,D){return tu.apply(this,arguments)}(D,M)),D},Cs=T=>{const D=T.getProvider("messaging").getImmediate();return{getToken:B=>function dr(T,D){return ci.apply(this,arguments)}(D,B)}};function Sc(){return uh.apply(this,arguments)}function uh(){return(uh=(0,F.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ah(){(0,ae._registerComponent)(new ie.wA("messaging",Dc,"PUBLIC")),(0,ae._registerComponent)(new ie.wA("messaging-internal",Cs,"PRIVATE")),(0,ae.registerVersion)(oh,"0.12.1"),(0,ae.registerVersion)(oh,"0.12.1","esm2017")}();const lh="analytics",Qr="firebase_id",ma="origin",An=6e4,_a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xc="https://www.googletagmanager.com/gtag/js",Sr=new me.Yd("@firebase/analytics");function lp(T){return Promise.all(T.map(D=>D.catch(M=>M)))}function To(){return(To=(0,F.Z)(function*(T,D,M,B,Q,re){const we=B[Q];try{if(we)yield D[we];else{const ft=(yield lp(M)).find(dt=>dt.measurementId===Q);ft&&(yield D[ft.appId])}}catch(at){Sr.error(at)}T("config",Q,re)})).apply(this,arguments)}function Qs(){return(Qs=(0,F.Z)(function*(T,D,M,B,Q){try{let re=[];if(Q&&Q.send_to){let we=Q.send_to;Array.isArray(we)||(we=[we]);const at=yield lp(M);for(const ft of we){const dt=at.find(St=>St.measurementId===ft),Lt=dt&&D[dt.appId];if(!Lt){re=[];break}re.push(Lt)}}0===re.length&&(re=Object.values(D)),yield Promise.all(re),T("event",B,Q||{})}catch(re){Sr.error(re)}})).apply(this,arguments)}const Di=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Xu=30,dh=new class Do{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function cp(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function su(){return(su=(0,F.Z)(function*(T){var D;const{appId:M,apiKey:B}=T,Q={method:"GET",headers:cp(B)},re=_a.replace("{app-id}",M),we=yield fetch(re,Q);if(200!==we.status&&304!==we.status){let at="";try{const ft=yield we.json();null!==(D=ft.error)&&void 0!==D&&D.message&&(at=ft.error.message)}catch{}throw Di.create("config-fetch-failed",{httpStatus:we.status,responseMessage:at})}return we.json()})).apply(this,arguments)}function ou(){return(ou=(0,F.Z)(function*(T,D=dh,M){const{appId:B,apiKey:Q,measurementId:re}=T.options;if(!B)throw Di.create("no-app-id");if(!Q){if(re)return{measurementId:re,appId:B};throw Di.create("no-api-key")}const we=D.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},at=new au;return setTimeout((0,F.Z)(function*(){at.abort()}),void 0!==M?M:An),Ts({appId:B,apiKey:Q,measurementId:re},we,at,D)})).apply(this,arguments)}function Ts(T,D,M){return Ds.apply(this,arguments)}function Ds(){return Ds=(0,F.Z)(function*(T,{throttleEndTimeMillis:D,backoffCount:M},B,Q=dh){var re;const{appId:we,measurementId:at}=T;try{yield function va(T,D){return new Promise((M,B)=>{const Q=Math.max(D-Date.now(),0),re=setTimeout(M,Q);T.addEventListener(()=>{clearTimeout(re),B(Di.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(B,D)}catch(ft){if(at)return Sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${ft?.message}]`),{appId:we,measurementId:at};throw ft}try{const ft=yield function So(T){return su.apply(this,arguments)}(T);return Q.deleteThrottleMetadata(we),ft}catch(ft){const dt=ft;if(!function Mc(T){if(!(T instanceof oe.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(dt)){if(Q.deleteThrottleMetadata(we),at)return Sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${dt?.message}]`),{appId:we,measurementId:at};throw ft}const Lt=503===Number(null===(re=dt?.customData)||void 0===re?void 0:re.httpStatus)?(0,oe.$s)(M,Q.intervalMillis,Xu):(0,oe.$s)(M,Q.intervalMillis),St={throttleEndTimeMillis:Date.now()+Lt,backoffCount:M+1};return Q.setThrottleMetadata(we,St),Sr.debug(`Calling attemptFetch again in ${Lt} millis`),Ts(T,St,B,Q)}}),Ds.apply(this,arguments)}class au{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let el,eo;function Xs(){return(Xs=(0,F.Z)(function*(T,D,M,B,Q){if(Q&&Q.global)T("event",M,B);else{const re=yield D;T("event",M,Object.assign(Object.assign({},B),{send_to:re}))}})).apply(this,arguments)}function Nc(){return(Nc=(0,F.Z)(function*(){if(!(0,oe.hl)())return Sr.warn(Di.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(T){return Sr.warn(Di.create("indexeddb-unavailable",{errorInfo:T?.toString()}).message),!1}return!0})).apply(this,arguments)}function fu(){return fu=(0,F.Z)(function*(T,D,M,B,Q,re,we){var at;const ft=function Fn(T){return ou.apply(this,arguments)}(T);ft.then(zn=>{M[zn.measurementId]=zn.appId,T.options.measurementId&&zn.measurementId!==T.options.measurementId&&Sr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${zn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zn=>Sr.error(zn)),D.push(ft);const dt=function hu(){return Nc.apply(this,arguments)}().then(zn=>{if(zn)return B.getId()}),[Lt,St]=yield Promise.all([ft,dt]);(function ya(T){const D=window.document.getElementsByTagName("script");for(const M of Object.values(D))if(M.src&&M.src.includes(xc)&&M.src.includes(T))return M;return null})(re)||function Vm(T,D){const M=document.createElement("script");M.src=`${xc}?l=${T}&id=${D}`,M.async=!0,document.head.appendChild(M)}(re,Lt.measurementId),eo&&(Q("consent","default",eo),function du(T){eo=T}(void 0)),Q("js",new Date);const hi=null!==(at=we?.config)&&void 0!==at?at:{};return hi[ma]="firebase",hi.update=!0,null!=St&&(hi[Qr]=St),Q("config",Lt.measurementId,hi),el&&(Q("set",el),function rl(T){el=T}(void 0)),Lt.measurementId}),fu.apply(this,arguments)}class hh{constructor(D){this.app=D}_delete(){return delete ss[this.app.options.appId],Promise.resolve()}}let ss={},il=[];const xo={};let sl,Ss,os="dataLayer",fh="gtag",ji=!1;function ol(T,D,M){!function ph(){const T=[];if((0,oe.ru)()&&T.push("This is a browser extension environment."),(0,oe.zI)()||T.push("Cookies are not available."),T.length>0){const D=T.map((B,Q)=>`(${Q+1}) ${B}`).join(" "),M=Di.create("invalid-analytics-context",{errorInfo:D});Sr.warn(M.message)}}();const B=T.options.appId;if(!B)throw Di.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Di.create("no-api-key");Sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ss[B])throw Di.create("already-exists",{id:B});if(!ji){!function Um(T){let D=[];Array.isArray(window[T])?D=window[T]:window[T]=D}(os);const{wrappedGtag:re,gtagCore:we}=function iu(T,D,M,B,Q){let re=function(...we){window[B].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(re=window[Q]),window[Q]=function ru(T,D,M,B){function re(){return re=(0,F.Z)(function*(we,at,ft){try{"event"===we?yield function Rc(T,D,M,B,Q){return Qs.apply(this,arguments)}(T,D,M,at,ft):"config"===we?yield function nu(T,D,M,B,Q,re){return To.apply(this,arguments)}(T,D,M,B,at,ft):"consent"===we?T("consent","update",ft):T("set",at)}catch(dt){Sr.error(dt)}}),re.apply(this,arguments)}return function Q(we,at,ft){return re.apply(this,arguments)}}(re,T,D,M),{gtagCore:re,wrappedGtag:window[Q]}}(ss,il,xo,os,fh);Ss=re,sl=we,ji=!0}return ss[B]=function Ao(T,D,M,B,Q,re,we){return fu.apply(this,arguments)}(T,il,xo,D,sl,os,M),new hh(T)}function al(){return As.apply(this,arguments)}function As(){return(As=(0,F.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const tn="@firebase/analytics";!function jm(){(0,ae._registerComponent)(new ie.wA(lh,(D,{options:M})=>ol(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ie.wA("analytics-internal",function T(D){try{const M=D.getProvider(lh).getImmediate();return{logEvent:(B,Q,re)=>function hp(T,D,M,B){T=(0,oe.m9)(T),function tl(T,D,M,B,Q){return Xs.apply(this,arguments)}(Ss,ss[T.app.options.appId],D,M,B).catch(Q=>Sr.error(Q))}(M,B,Q,re)}}catch(M){throw Di.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(tn,"0.9.1"),(0,ae.registerVersion)(tn,"0.9.1","esm2017")}();var ll=L(4408),pp=L(7565);const gp=new class _h extends pp.v{}(class fp extends ll.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(D,M,B):(D.flush(this),0)}});var mp=L(4986),Fc=L(8505),bn=L(5363),dl=L(9468);const hl=new d.GfV("7.6.1"),Lc="__angularfire_symbol__analyticsIsSupportedValue",di="__angularfire_symbol__analyticsIsSupported",as="__angularfire_symbol__remoteConfigIsSupportedValue",fl="__angularfire_symbol__remoteConfigIsSupported",gu="__angularfire_symbol__messagingIsSupportedValue",Ca="__angularfire_symbol__messagingIsSupported";function Jr(T,D,M){if(D){if(1===D.length)return D[0];const re=D.filter(we=>we.app===M);if(1===re.length)return re[0]}return M.container.getProvider(T).getImmediate({optional:!0})}globalThis[di]||(globalThis[di]=al().then(T=>globalThis[Lc]=T).catch(()=>globalThis[Lc]=!1)),globalThis[Ca]||(globalThis[Ca]=Sc().then(T=>globalThis[gu]=T).catch(()=>globalThis[gu]=!1)),globalThis[fl]||(globalThis[fl]=Ka().then(T=>globalThis[as]=T).catch(()=>globalThis[as]=!1));const sn=(T,D)=>{const M=D?[D]:(0,J.C6)(),B=[];return M.forEach(Q=>{Q.container.getProvider(T).instances.forEach(we=>{B.includes(we)||B.push(we)})}),B};function vr(){}class ot{constructor(D,M=gp){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,B){const Q=this.zone;return this.delegate.schedule(function(we){Q.runGuarded(()=>{D.apply(this,[we])})},M,B)}}class xr{constructor(D){this.zone=D,this.task=null}call(D,M){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vr,{},vr,vr)),M.pipe((0,Fc.b)({next:B,complete:B,error:B})).subscribe(D).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $i=(()=>{class T{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ot(Zone.current)),this.insideAngular=M.run(()=>new ot(Zone.current,mp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(M){return new(M||T)(d.LFG(d.R0b))},T.\u0275prov=d.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function xs(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function _p(T){return T.pipe((0,bn.Q)(xs().outsideAngular))}function mu(T){return xs(),function _u(T){return function(M){return(M=M.lift(new xr(T.ngZone))).pipe((0,dl.R)(T.outsideAngular),(0,bn.Q)(T.insideAngular))}}(xs())(T)}},2090:(gt,De,L)=>{L.d(De,{$s:()=>it,BH:()=>Ie,DV:()=>xn,Dv:()=>Hn,G6:()=>Qn,GJ:()=>ur,L:()=>pe,LL:()=>Fe,Pz:()=>Te,Sg:()=>Re,UG:()=>$,UI:()=>ri,US:()=>ie,Wj:()=>Cr,Wl:()=>zt,Yr:()=>_r,ZB:()=>G,ZR:()=>ee,aH:()=>ke,b$:()=>Ze,cI:()=>qe,dS:()=>ln,eu:()=>se,g5:()=>F,gK:()=>Tn,gQ:()=>ii,h$:()=>me,hl:()=>ys,hu:()=>J,jU:()=>Ee,lb:()=>ea,m9:()=>Wt,ne:()=>yn,p$:()=>q,pd:()=>Ei,r3:()=>lr,ru:()=>Be,tV:()=>de,uI:()=>Pe,ug:()=>si,vZ:()=>Cn,w1:()=>et,w9:()=>Jt,xO:()=>po,xb:()=>Vn,z$:()=>Oe,zI:()=>he,zd:()=>kn});const d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},J=function(H,j){if(!H)throw F(j)},F=function(H){return new Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},ae=function(H){const j=[];let W=0;for(let _e=0;_e<H.length;_e++){let ne=H.charCodeAt(_e);ne<128?j[W++]=ne:ne<2048?(j[W++]=ne>>6|192,j[W++]=63&ne|128):55296==(64512&ne)&&_e+1<H.length&&56320==(64512&H.charCodeAt(_e+1))?(ne=65536+((1023&ne)<<10)+(1023&H.charCodeAt(++_e)),j[W++]=ne>>18|240,j[W++]=ne>>12&63|128,j[W++]=ne>>6&63|128,j[W++]=63&ne|128):(j[W++]=ne>>12|224,j[W++]=ne>>6&63|128,j[W++]=63&ne|128)}return j},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,j){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let ne=0;ne<H.length;ne+=3){const tt=H[ne],Je=ne+1<H.length,cn=Je?H[ne+1]:0,Tr=ne+2<H.length,Dn=Tr?H[ne+2]:0;let Gn=(15&cn)<<2|Dn>>6,za=63&Dn;Tr||(za=64,Je||(Gn=64)),_e.push(W[tt>>2],W[(3&tt)<<4|cn>>4],W[Gn],W[za])}return _e.join("")},encodeString(H,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(H):this.encodeByteArray(ae(H),j)},decodeString(H,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(H):function(H){const j=[];let W=0,_e=0;for(;W<H.length;){const ne=H[W++];if(ne<128)j[_e++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const tt=H[W++];j[_e++]=String.fromCharCode((31&ne)<<6|63&tt)}else if(ne>239&&ne<365){const Tr=((7&ne)<<18|(63&H[W++])<<12|(63&H[W++])<<6|63&H[W++])-65536;j[_e++]=String.fromCharCode(55296+(Tr>>10)),j[_e++]=String.fromCharCode(56320+(1023&Tr))}else{const tt=H[W++],Je=H[W++];j[_e++]=String.fromCharCode((15&ne)<<12|(63&tt)<<6|63&Je)}}return j.join("")}(this.decodeStringToByteArray(H,j))},decodeStringToByteArray(H,j){this.init_();const W=j?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let ne=0;ne<H.length;){const tt=W[H.charAt(ne++)],cn=ne<H.length?W[H.charAt(ne)]:0;++ne;const Dn=ne<H.length?W[H.charAt(ne)]:64;++ne;const Ft=ne<H.length?W[H.charAt(ne)]:64;if(++ne,null==tt||null==cn||null==Dn||null==Ft)throw Error();_e.push(tt<<2|cn>>4),64!==Dn&&(_e.push(cn<<4&240|Dn>>2),64!==Ft&&_e.push(Dn<<6&192|Ft))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},me=function(H){const j=ae(H);return ie.encodeByteArray(j,!0)},pe=function(H){return me(H).replace(/\./g,"")},de=function(H){try{return ie.decodeString(H,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function q(H){return G(void 0,H)}function G(H,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return j}for(const W in j)!j.hasOwnProperty(W)||!Y(W)||(H[W]=G(H[W],j[W]));return H}function Y(H){return"__proto__"!==H}const ge=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=H&&de(H[1]);return j&&JSON.parse(j)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},ke=()=>{var H;return null===(H=ge())||void 0===H?void 0:H.config},Te=H=>{var j;return null===(j=ge())||void 0===j?void 0:j[`_${H}`]};class Ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,W)=>{this.resolve=j,this.reject=W})}wrapCallback(j){return(W,_e)=>{W?this.reject(W):this.resolve(_e),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(W):j(W,_e))}}}function Re(H,j){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=j||"demo-project",ne=H.iat||0,tt=H.sub||H.user_id;if(!tt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Je=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:ne,exp:ne+3600,auth_time:ne,sub:tt,user_id:tt,firebase:{sign_in_provider:"custom",identities:{}}},H);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Je)),""].join(".")}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function $(){var H;const j=null===(H=ge())||void 0===H?void 0:H.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ee(){return"object"==typeof self&&self.self===self}function Be(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function et(){const H=Oe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function _r(){return!0===d.NODE_CLIENT||!0===d.NODE_ADMIN}function Qn(){return!$()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ys(){try{return"object"==typeof indexedDB}catch{return!1}}function se(){return new Promise((H,j)=>{try{let W=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(_e);ne.onsuccess=()=>{ne.result.close(),W||self.indexedDB.deleteDatabase(_e),H(!0)},ne.onupgradeneeded=()=>{W=!1},ne.onerror=()=>{var tt;j((null===(tt=ne.error)||void 0===tt?void 0:tt.message)||"")}}catch(W){j(W)}})}function he(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ee extends Error{constructor(j,W,_e){super(W),this.code=j,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fe.prototype.create)}}class Fe{constructor(j,W,_e){this.service=j,this.serviceName=W,this.errors=_e}create(j,...W){const _e=W[0]||{},ne=`${this.service}/${j}`,tt=this.errors[j],Je=tt?function Le(H,j){return H.replace(yt,(W,_e)=>{const ne=j[_e];return null!=ne?String(ne):`<${_e}?>`})}(tt,_e):"Error";return new ee(ne,`${this.serviceName}: ${Je} (${ne}).`,_e)}}const yt=/\{\$([^}]+)}/g;function qe(H){return JSON.parse(H)}function zt(H){return JSON.stringify(H)}const vt=function(H){let j={},W={},_e={},ne="";try{const tt=H.split(".");j=qe(de(tt[0])||""),W=qe(de(tt[1])||""),ne=tt[2],_e=W.d||{},delete W.d}catch{}return{header:j,claims:W,data:_e,signature:ne}},Jt=function(H){const W=vt(H).claims;return!!W&&"object"==typeof W&&W.hasOwnProperty("iat")},ur=function(H){const j=vt(H).claims;return"object"==typeof j&&!0===j.admin};function lr(H,j){return Object.prototype.hasOwnProperty.call(H,j)}function xn(H,j){if(Object.prototype.hasOwnProperty.call(H,j))return H[j]}function Vn(H){for(const j in H)if(Object.prototype.hasOwnProperty.call(H,j))return!1;return!0}function ri(H,j,W){const _e={};for(const ne in H)Object.prototype.hasOwnProperty.call(H,ne)&&(_e[ne]=j.call(W,H[ne],ne,H));return _e}function Cn(H,j){if(H===j)return!0;const W=Object.keys(H),_e=Object.keys(j);for(const ne of W){if(!_e.includes(ne))return!1;const tt=H[ne],Je=j[ne];if(ht(tt)&&ht(Je)){if(!Cn(tt,Je))return!1}else if(tt!==Je)return!1}for(const ne of _e)if(!W.includes(ne))return!1;return!0}function ht(H){return null!==H&&"object"==typeof H}function po(H){const j=[];for(const[W,_e]of Object.entries(H))Array.isArray(_e)?_e.forEach(ne=>{j.push(encodeURIComponent(W)+"="+encodeURIComponent(ne))}):j.push(encodeURIComponent(W)+"="+encodeURIComponent(_e));return j.length?"&"+j.join("&"):""}function kn(H){const j={};return H.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[ne,tt]=_e.split("=");j[decodeURIComponent(ne)]=decodeURIComponent(tt)}}),j}function Ei(H){const j=H.indexOf("?");if(!j)return"";const W=H.indexOf("#",j);return H.substring(j,W>0?W:void 0)}class ii{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,W){W||(W=0);const _e=this.W_;if("string"==typeof j)for(let Ft=0;Ft<16;Ft++)_e[Ft]=j.charCodeAt(W)<<24|j.charCodeAt(W+1)<<16|j.charCodeAt(W+2)<<8|j.charCodeAt(W+3),W+=4;else for(let Ft=0;Ft<16;Ft++)_e[Ft]=j[W]<<24|j[W+1]<<16|j[W+2]<<8|j[W+3],W+=4;for(let Ft=16;Ft<80;Ft++){const Gn=_e[Ft-3]^_e[Ft-8]^_e[Ft-14]^_e[Ft-16];_e[Ft]=4294967295&(Gn<<1|Gn>>>31)}let Dn,Or,ne=this.chain_[0],tt=this.chain_[1],Je=this.chain_[2],cn=this.chain_[3],Tr=this.chain_[4];for(let Ft=0;Ft<80;Ft++){Ft<40?Ft<20?(Dn=cn^tt&(Je^cn),Or=1518500249):(Dn=tt^Je^cn,Or=1859775393):Ft<60?(Dn=tt&Je|cn&(tt|Je),Or=2400959708):(Dn=tt^Je^cn,Or=3395469782);const Gn=(ne<<5|ne>>>27)+Dn+Tr+Or+_e[Ft]&4294967295;Tr=cn,cn=Je,Je=4294967295&(tt<<30|tt>>>2),tt=ne,ne=Gn}this.chain_[0]=this.chain_[0]+ne&4294967295,this.chain_[1]=this.chain_[1]+tt&4294967295,this.chain_[2]=this.chain_[2]+Je&4294967295,this.chain_[3]=this.chain_[3]+cn&4294967295,this.chain_[4]=this.chain_[4]+Tr&4294967295}update(j,W){if(null==j)return;void 0===W&&(W=j.length);const _e=W-this.blockSize;let ne=0;const tt=this.buf_;let Je=this.inbuf_;for(;ne<W;){if(0===Je)for(;ne<=_e;)this.compress_(j,ne),ne+=this.blockSize;if("string"==typeof j){for(;ne<W;)if(tt[Je]=j.charCodeAt(ne),++Je,++ne,Je===this.blockSize){this.compress_(tt),Je=0;break}}else for(;ne<W;)if(tt[Je]=j[ne],++Je,++ne,Je===this.blockSize){this.compress_(tt),Je=0;break}}this.inbuf_=Je,this.total_+=W}digest(){const j=[];let W=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ne=this.blockSize-1;ne>=56;ne--)this.buf_[ne]=255&W,W/=256;this.compress_(this.buf_);let _e=0;for(let ne=0;ne<5;ne++)for(let tt=24;tt>=0;tt-=8)j[_e]=this.chain_[ne]>>tt&255,++_e;return j}}function yn(H,j){const W=new En(H,j);return W.subscribe.bind(W)}class En{constructor(j,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{j(this)}).catch(_e=>{this.error(_e)})}next(j){this.forEachObserver(W=>{W.next(j)})}error(j){this.forEachObserver(W=>{W.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,W,_e){let ne;if(void 0===j&&void 0===W&&void 0===_e)throw new Error("Missing Observer.");ne=function xt(H,j){if("object"!=typeof H||null===H)return!1;for(const W of j)if(W in H&&"function"==typeof H[W])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:W,complete:_e},void 0===ne.next&&(ne.next=Wr),void 0===ne.error&&(ne.error=Wr),void 0===ne.complete&&(ne.complete=Wr);const tt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),tt}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,j)}sendOne(j,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{W(this.observers[j])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wr(){}const Hn=function(H,j,W,_e){let ne;if(_e<j?ne="at least "+j:_e>W&&(ne=0===W?"none":"no more than "+W),ne)throw new Error(H+" failed: Was called with "+_e+(1===_e?" argument.":" arguments.")+" Expects "+ne+".")};function Tn(H,j){return`${H} failed: ${j} argument `}function Cr(H,j,W,_e){if((!_e||W)&&"function"!=typeof W)throw new Error(Tn(H,j)+"must be a valid function.")}function ea(H,j,W,_e){if((!_e||W)&&("object"!=typeof W||null===W))throw new Error(Tn(H,j)+"must be a valid context object.")}const ln=function(H){const j=[];let W=0;for(let _e=0;_e<H.length;_e++){let ne=H.charCodeAt(_e);if(ne>=55296&&ne<=56319){const tt=ne-55296;_e++,J(_e<H.length,"Surrogate pair missing trail surrogate."),ne=65536+(tt<<10)+(H.charCodeAt(_e)-56320)}ne<128?j[W++]=ne:ne<2048?(j[W++]=ne>>6|192,j[W++]=63&ne|128):ne<65536?(j[W++]=ne>>12|224,j[W++]=ne>>6&63|128,j[W++]=63&ne|128):(j[W++]=ne>>18|240,j[W++]=ne>>12&63|128,j[W++]=ne>>6&63|128,j[W++]=63&ne|128)}return j},si=function(H){let j=0;for(let W=0;W<H.length;W++){const _e=H.charCodeAt(W);_e<128?j++:_e<2048?j+=2:_e>=55296&&_e<=56319?(j+=4,W++):j+=3}return j},ts=1e3,fn=2,st=144e5,Ce=.5;function it(H,j=ts,W=fn){const _e=j*Math.pow(W,H),ne=Math.round(Ce*_e*(Math.random()-.5)*2);return Math.min(st,_e+ne)}function Wt(H){return H&&H._delegate?H._delegate:H}},229:(gt,De,L)=>{var d=L(4650);let J=null;function F(){return J}class oe{}const ie=new d.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function pe(){return(0,d.LFG)(q)}()},providedIn:"platform"}),n})();const de=new d.OlP("Location Initialized");let q=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){G()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){G()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Y(){return new q((0,d.LFG)(ie))}()},providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function je(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function We(n){return n&&"?"!==n[0]?"?"+n:n}let ut=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(xe)},providedIn:"root"}),n})();const ge=new d.OlP("appBaseHref");let xe=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return je(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+We(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const l=this.prepareExternalUrl(i+We(o));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){const l=this.prepareExternalUrl(i+We(o));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(me),d.LFG(ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ae=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=je(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let l=this.prepareExternalUrl(i+We(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){let l=this.prepareExternalUrl(i+We(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(me),d.LFG(ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Oe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Se(Re(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+We(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Re(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=We,n.joinWithSlash=je,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(d.LFG(ut))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Te(){return new ke((0,d.LFG)(ut))}()},providedIn:"root"}),n})();function Re(n){return n.replace(/\/index.html$/,"")}var $=(()=>(($=$||{})[$.Decimal=0]="Decimal",$[$.Percent=1]="Percent",$[$.Currency=2]="Currency",$[$.Scientific=3]="Scientific",$))(),et=(()=>((et=et||{})[et.Decimal=0]="Decimal",et[et.Group=1]="Group",et[et.List=2]="List",et[et.PercentSign=3]="PercentSign",et[et.PlusSign=4]="PlusSign",et[et.MinusSign=5]="MinusSign",et[et.Exponential=6]="Exponential",et[et.SuperscriptingExponent=7]="SuperscriptingExponent",et[et.PerMille=8]="PerMille",et[et.Infinity=9]="Infinity",et[et.NaN=10]="NaN",et[et.TimeSeparator=11]="TimeSeparator",et[et.CurrencyDecimal=12]="CurrencyDecimal",et[et.CurrencyGroup=13]="CurrencyGroup",et))();function qe(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===et.CurrencyDecimal)return t[d.wAp.NumberSymbols][et.Decimal];if(e===et.CurrencyGroup)return t[d.wAp.NumberSymbols][et.Group]}return r}const Tr=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Dn=22,Or=".",Ft="0",Gn=";",za=",",Ws="#";function yr(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class Xn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ii=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Xn(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===o?void 0:o);else if(null!==o){const h=r.get(o);r.move(h,l),On(h,i)}});for(let i=0,o=r.length;i<o;i++){const h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{On(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function On(n,e){n.context.$implicit=e.item}let Ci=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new jt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class jt{constructor(){this.$implicit=null,this.ngIf=null}}function hc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Xd=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function aa(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Yd(n,e,t){return function cc(n,e,t,r,i,o,l=!1){let h="",g=!1;if(isFinite(n)){let y=function un(n){let r,i,o,l,h,e=Math.abs(n)+"",t=0;for((i=e.indexOf(Or))>-1&&(e=e.replace(Or,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Ft;o++);if(o===(h=e.length))r=[0],i=1;else{for(h--;e.charAt(h)===Ft;)h--;for(i-=o,r=[],l=0;o<=h;o++,l++)r[l]=Number(e.charAt(o))}return i>Dn&&(r=r.splice(0,Dn-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(y=function dc(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let I=e.minInt,S=e.minFrac,R=e.maxFrac;if(o){const Ke=o.match(Tr);if(null===Ke)throw new Error(`${o} is not a valid digit info`);const Ge=Ke[1],ze=Ke[3],pt=Ke[5];null!=Ge&&(I=yr(Ge)),null!=ze&&(S=yr(ze)),null!=pt?R=yr(pt):null!=ze&&S>R&&(R=S)}!function Jn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const o=Math.min(Math.max(e,i),t);let l=o+n.integerLen,h=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let S=l;S<r.length;S++)r[S]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=o+1),r[0]=0;for(let S=1;S<l;S++)r[S]=0}if(h>=5)if(l-1<0){for(let S=0;S>l;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,o);i++)r.push(0);let g=0!==o;const y=e+n.integerLen,I=r.reduceRight(function(S,R,O,U){return U[O]=(R+=S)<10?R:R-10,g&&(0===U[O]&&O>=y?U.pop():g=!1),R>=10?1:0},0);I&&(r.unshift(I),n.integerLen++)}(y,S,R);let O=y.digits,U=y.integerLen;const Z=y.exponent;let te=[];for(g=O.every(Ke=>!Ke);U<I;U++)O.unshift(0);for(;U<0;U++)O.unshift(0);U>0?te=O.splice(U,O.length):(te=O,O=[0]);const $e=[];for(O.length>=e.lgSize&&$e.unshift(O.splice(-e.lgSize,O.length).join(""));O.length>e.gSize;)$e.unshift(O.splice(-e.gSize,O.length).join(""));O.length&&$e.unshift(O.join("")),h=$e.join(qe(t,r)),te.length&&(h+=qe(t,i)+te.join("")),Z&&(h+=qe(t,et.Exponential)+"+"+Z)}else h=qe(t,et.Infinity);return h=n<0&&!g?e.negPre+h+e.negSuf:e.posPre+h+e.posSuf,h}(n,function Un(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(Gn),i=r[0],o=r[1],l=-1!==i.indexOf(Or)?i.split(Or):[i.substring(0,i.lastIndexOf(Ft)+1),i.substring(i.lastIndexOf(Ft)+1)],h=l[0],g=l[1]||"";t.posPre=h.substring(0,h.indexOf(Ws));for(let I=0;I<g.length;I++){const S=g.charAt(I);S===Ft?t.minFrac=t.maxFrac=I+1:S===Ws?t.maxFrac=I+1:t.posSuf+=S}const y=h.split(za);if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,o){const I=i.length-t.posPre.length-t.posSuf.length,S=o.indexOf(Ws);t.negPre=o.substring(0,S).replace(/'/g,""),t.negSuf=o.slice(S+I).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function zt(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,$.Decimal),qe(e,et.MinusSign)),e,et.Group,et.Decimal,t)}(function yo(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(o){throw function ns(n,e){return new d.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16))},n.\u0275pipe=d.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let ua=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Yr="server";function Bu(n){return n===Yr}let la=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new $u((0,d.LFG)(ie),window)}),n})();class $u{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Eo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ca(this.window.history)||ca(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ca(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qs extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ru extends Qs{static makeCurrent(){!function ae(n){J||(J=n)}(new ru)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ya(){return iu=iu||document.querySelector("base"),iu?iu.getAttribute("href"):null}();return null==t?null:function Di(n){Js=Js||document.createElement("a"),Js.setAttribute("href",n);const e=Js.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function na(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Js,iu=null;const Xu=new d.OlP("TRANSITION_ID"),Do=[{provide:d.ip1,useFactory:function ch(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Xu,ie,d.zs3],multi:!0}];let cp=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const So=new d.OlP("EventManagerPlugins");let su=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const l=i[o];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(So),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Fn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ou=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let o=i.get(t)??0;return o+=r,o>0?i.set(t,o):i.delete(t),o}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ts=(()=>{class n extends ou{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(o=>o.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const o=this.styleRef.get(r);o?o.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ds={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},va=/%COMP%/g,wa=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function lu(n,e){return e.flat(100).map(t=>t.replace(va,n))}function nl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ar=(()=>{class n{constructor(t,r,i,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new cu(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Nc?i.applyToHost(t):i instanceof hu&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const l=this.eventManager,h=this.sharedStylesHost,g=this.removeStylesOnCompDestory;switch(r.encapsulation){case d.ifc.Emulated:o=new Nc(l,h,r,this.appId,g);break;case d.ifc.ShadowDom:return new rl(l,h,t,r);default:o=new hu(l,h,r,g)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(su),d.LFG(Ts),d.LFG(d.AFp),d.LFG(wa))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class cu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ds[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(du(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(du(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Ds[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ds[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,nl(r)):this.eventManager.addEventListener(e,t,nl(r))}}function du(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class rl extends cu{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=lu(i.id,i.styles);for(const l of o){const h=document.createElement("style");h.textContent=l,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hu extends cu{constructor(e,t,r,i,o=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=lu(o,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Nc extends hu{constructor(e,t,r,i,o){const l=i+"-"+r.id;super(e,t,r,o,l),this.contentAttr=function Ea(n){return"_ngcontent-%COMP%".replace(va,n)}(l),this.hostAttr=function uu(n){return"_nghost-%COMP%".replace(va,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ao=(()=>{class n extends Fn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const fu=["alt","control","meta","shift"],hh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ss={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let il=(()=>{class n extends Fn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),l=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,o.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),fu.forEach(y=>{const I=r.indexOf(y);I>-1&&(r.splice(I,1),l+=y+".")}),l+=o,0!=r.length||0===o.length)return null;const g={};return g.domEventName=i,g.fullKey=l,g}static matchEventFullKeyCode(t,r){let i=hh[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),fu.forEach(l=>{l!==i&&(0,ss[l])(t)&&(o+=l+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const gh=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function ji(){ru.makeCurrent()},multi:!0},{provide:ie,useFactory:function ph(){return(0,d.RDi)(document),document},deps:[]}]),Pc=new d.OlP(""),al=[{provide:d.rWj,useClass:class dh{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let o=i.length,l=!1;const h=function(g){l=l||g,o--,0==o&&r(l)};i.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],As=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Bm(){return new d.qLn},deps:[]},{provide:So,useClass:Ao,multi:!0,deps:[ie,d.R0b,d.Lbi]},{provide:So,useClass:il,multi:!0,deps:[ie]},{provide:Ar,useClass:Ar,deps:[su,Ts,d.AFp,wa]},{provide:d.FYo,useExisting:Ar},{provide:ou,useExisting:Ts},{provide:Ts,useClass:Ts,deps:[ie]},{provide:su,useClass:su,deps:[So,d.R0b]},{provide:class th{},useClass:cp,deps:[]},[]];let Ia=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Xu,useExisting:d.AFp},Do]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pc,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...As,...al],imports:[ua,d.hGG]}),n})(),hp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function pu(){return new hp((0,d.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let $m=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):d.LFG(Hm),r},providedIn:"root"}),n})(),Hm=(()=>{class n extends $m{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${d.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${d.JZr})`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function yh(n){return new Hm(n.get(ie))}(d.LFG(d.zs3)),r},providedIn:"root"}),n})();var sn=L(8996),vr=L(7669);function ot(...n){const e=(0,vr.yG)(n);return(0,sn.D)(n,e)}var xr=L(7579);class $i extends xr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ta=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var tr=L(9751);const{isArray:_p}=Array,{getPrototypeOf:vh,prototype:mu,keys:_u}=Object;function gl(n){if(1===n.length){const e=n[0];if(_p(e))return{args:e,keys:null};if(function ml(n){return n&&"object"==typeof n&&vh(n)===mu}(e)){const t=_u(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var T=L(4671),D=L(4004);const{isArray:M}=Array;function Q(n){return(0,D.U)(e=>function B(n,e){return M(e)?n(...e):n(e)}(n,e))}function re(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var we=L(5403),at=L(9672);function ft(...n){const e=(0,vr.yG)(n),t=(0,vr.jO)(n),{args:r,keys:i}=gl(n);if(0===r.length)return(0,sn.D)([],e);const o=new tr.y(function dt(n,e,t=T.y){return r=>{Lt(e,()=>{const{length:i}=n,o=new Array(i);let l=i,h=i;for(let g=0;g<i;g++)Lt(e,()=>{const y=(0,sn.D)(n[g],e);let I=!1;y.subscribe((0,we.x)(r,S=>{o[g]=S,I||(I=!0,h--),h||r.next(t(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>re(i,l):T.y));return t?o.pipe(Q(t)):o}function Lt(n,e,t){n?(0,at.f)(t,n,e):e()}var St=L(8189);function zn(...n){return function hi(){return(0,St.J)(1)}()((0,sn.D)(n,(0,vr.yG)(n)))}var Rs=L(8421);function _l(n){return new tr.y(e=>{(0,Rs.Xf)(n()).subscribe(e)})}var Da=L(9635),fi=L(576);function pi(n,e){const t=(0,fi.m)(n)?n:()=>n,r=i=>i.error(t());return new tr.y(e?i=>e.schedule(r,0,i):r)}var Xr=L(515),yp=L(727),Rr=L(4482);function wh(){return(0,Rr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,we.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class vp extends tr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yp.w0;const t=this.getSubject();e.add(this.source.subscribe((0,we.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yp.w0.EMPTY)}return e}refCount(){return wh()(this)}}function Wn(n,e){return(0,Rr.e)((t,r)=>{let i=null,o=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,we.x)(r,g=>{i?.unsubscribe();let y=0;const I=o++;(0,Rs.Xf)(n(g,I)).subscribe(i=(0,we.x)(r,S=>r.next(e?e(g,S,I,y++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function Vc(n){return n<=0?()=>Xr.E:(0,Rr.e)((e,t)=>{let r=0;e.subscribe((0,we.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Uc(...n){const e=(0,vr.yG)(n);return(0,Rr.e)((t,r)=>{(e?zn(n,t,e):zn(n,t)).subscribe(r)})}function Ms(n,e){return(0,Rr.e)((t,r)=>{let i=0;t.subscribe((0,we.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var hr=L(5577);function wp(n){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,we.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function dv(n=Ep){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,we.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ep(){return new Ta}function Sa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ms((i,o)=>n(i,o,r)):T.y,Vc(1),t?wp(e):dv(()=>new Ta))}function yl(n,e){return(0,fi.m)(e)?(0,hr.z)(n,e,1):(0,hr.z)(n,1)}var gi=L(8505);function yu(n){return(0,Rr.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,we.x)(t,void 0,void 0,l=>{o=(0,Rs.Xf)(n(l,yu(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Ro(n,e){return(0,Rr.e)(function hb(n,e,t,r,i){return(o,l)=>{let h=t,g=e,y=0;o.subscribe((0,we.x)(l,I=>{const S=y++;g=h?n(g,I,S):(h=!0,I),r&&l.next(g)},i&&(()=>{h&&l.next(g),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Eh(n){return n<=0?()=>Xr.E:(0,Rr.e)((e,t)=>{let r=[];e.subscribe((0,we.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function bh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ms((i,o)=>n(i,o,r)):T.y,Eh(1),t?wp(e):dv(()=>new Ta))}function Ih(n){return(0,Rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Tt="primary",Bc=Symbol("RouteTitle");class hv{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function vl(n){return new hv(n)}function zm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const l=r[o],h=n[o];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function to(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Ch(n[i],e[i]))return!1;return!0}function Ch(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Wm(n){return Array.prototype.concat.apply([],n)}function Th(n){return n.length>0?n[n.length-1]:null}function wr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function nr(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,sn.D)(Promise.resolve(n)):ot(n)}const vu=!1,bp={exact:function Ip(n,e,t){if(!wu(n.segments,e.segments)||!Dp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ip(n.children[r],e.children[r],t))return!1;return!0},subset:Cp},Dh={exact:function $c(n,e){return to(n,e)},subset:function Km(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ch(n[t],e[t]))},ignored:()=>!0};function Br(n,e,t){return bp[t.paths](n.root,e.root,t.matrixParams)&&Dh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Cp(n,e,t){return Tp(n,e,e.segments,t)}function Tp(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!wu(i,t)||e.hasChildren()||!Dp(i,t,r))}if(n.segments.length===t.length){if(!wu(n.segments,t)||!Dp(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Cp(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(wu(n.segments,i)&&Dp(n.segments,i,r)&&n.children[Tt])&&Tp(n.children[Tt],e,o,r)}}function Dp(n,e,t){return e.every((r,i)=>Dh[t](n[i].parameters,r.parameters))}class mi{constructor(e=new Kt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vl(this.queryParams)),this._queryParamMap}toString(){return bu.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,wr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sh(this)}}class wl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=vl(this.parameters)),this._parameterMap}toString(){return Rp(this)}}function wu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Eu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Ap},providedIn:"root"}),n})();class Ap{parse(e){const t=new Np(e);return new mi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gc(e.root,!0)}`,r=function fv(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${bl(t)}=${bl(i)}`).join("&"):`${bl(t)}=${bl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Zm(n){return encodeURI(n)}(e.fragment)}`:""}`}}const bu=new Ap;function Sh(n){return n.segments.map(e=>Rp(e)).join("/")}function Gc(n,e){if(!n.hasChildren())return Sh(n);if(e){const t=n.children[Tt]?Gc(n.children[Tt],!1):"",r=[];return wr(n.children,(i,o)=>{o!==Tt&&r.push(`${o}:${Gc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Hc(n,e){let t=[];return wr(n.children,(r,i)=>{i===Tt&&(t=t.concat(e(r,i)))}),wr(n.children,(r,i)=>{i!==Tt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Tt?[Gc(n.children[Tt],!1)]:[`${i}:${Gc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${Sh(n)}/${t[0]}`:`${Sh(n)}/(${t.join("//")})`}}function El(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bl(n){return El(n).replace(/%3B/gi,";")}function Aa(n){return El(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Il(n){return decodeURIComponent(n)}function xp(n){return Il(n.replace(/\+/g,"%20"))}function Rp(n){return`${Aa(n.path)}${function qc(n){return Object.keys(n).map(e=>`;${Aa(e)}=${Aa(n[e])}`).join("")}(n.parameters)}`}const pv=/^[^\/()?;=#]+/;function Cl(n){const e=n.match(pv);return e?e[0]:""}const Mp=/^[^=?&#]+/,mv=/^[^&#]+/;class Np{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new Kt(e,t)),r}parseSegment(){const e=Cl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,vu);return this.capture(e),new wl(Il(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Cl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Cl(this.remaining);i&&(r=i,this.capture(r))}e[Il(t)]=Il(r)}parseQueryParam(e){const t=function gv(n){const e=n.match(Mp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function zc(n){const e=n.match(mv);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=xp(t),o=xp(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Cl(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,vu);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Tt);const l=this.parseChildren();t[o]=1===Object.keys(l).length?l[Tt]:new Kt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,vu)}}function Ah(n){return n.segments.length>0?new Kt([],{[Tt]:n}):n}function Tl(n){const e={};for(const r of Object.keys(n.children)){const o=Tl(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Ym(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}function Iu(n){return n instanceof mi}const xh=!1;function Qm(n,e,t,r,i){if(0===t.length)return Mo(e.root,e.root,e.root,r,i);const o=function Mh(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Pp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return wr(o.outlets,(g,y)=>{h[y]="string"==typeof g?g.split("/"):g}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===l?(o.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new Pp(t,e,r)}(t);return o.toRoot()?Mo(e.root,e.root,new Kt([],{}),r,i):function l(g){const y=function kp(n,e,t,r){if(n.isAbsolute)return new No(e.root,!0,0);if(-1===r)return new No(t,t===e.root,0);return function Kc(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new d.vHH(4005,xh&&"Invalid number of '../'");i=r.segments.length}return new No(r,!1,i-o)}(t,r+(Dl(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,g),I=y.processChildren?fr(y.segmentGroup,y.index,o.commands):Nh(y.segmentGroup,y.index,o.commands);return Mo(e.root,y.segmentGroup,I,r,i)}(n.snapshot?._lastPathIndex)}function Dl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Rh(n){return"object"==typeof n&&null!=n&&n.outlets}function Mo(n,e,t,r,i){let l,o={};r&&wr(r,(g,y)=>{o[y]=Array.isArray(g)?g.map(I=>`${I}`):`${g}`}),l=n===e?t:Jm(n,e,t);const h=Ah(Tl(l));return new mi(h,o,i)}function Jm(n,e,t){const r={};return wr(n.children,(i,o)=>{r[o]=i===e?t:Jm(i,e,t)}),new Kt(n.segments,r)}class Pp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dl(r[0]))throw new d.vHH(4003,xh&&"Root segment cannot have matrix parameters");const i=r.find(Rh);if(i&&i!==Th(r))throw new d.vHH(4004,xh&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class No{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Nh(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return fr(n,e,t);const r=function Tu(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const l=n.segments[i],h=t[r];if(Rh(h))break;const g=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!Yc(g,y,l))return o;r+=2}else{if(!Yc(g,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Kt(n.segments.slice(0,r.pathIndex),{});return o.children[Tt]=new Kt(n.segments.slice(r.pathIndex),n.children),fr(o,0,i)}return r.match&&0===i.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?Al(n,e,t):r.match?fr(n,0,i):Al(n,e,t)}function fr(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function Sl(n){return Rh(n[0])?n[0].outlets:{[Tt]:n}}(t),i={};if(!r[Tt]&&n.children[Tt]&&1===n.numberOfChildren&&0===n.children[Tt].segments.length){const o=fr(n.children[Tt],e,t);return new Kt(n.segments,o.children)}return wr(r,(o,l)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[l]=Nh(n.children[l],e,o))}),wr(n.children,(o,l)=>{void 0===r[l]&&(i[l]=o)}),new Kt(n.segments,i)}}function Al(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Rh(o)){const g=Zc(o.outlets);return new Kt(r,g)}if(0===i&&Dl(t[0])){r.push(new wl(n.segments[e].path,Ph(t[0]))),i++;continue}const l=Rh(o)?o.outlets[Tt]:`${o}`,h=i<t.length-1?t[i+1]:null;l&&h&&Dl(h)?(r.push(new wl(l,Ph(h))),i+=2):(r.push(new wl(l,{})),i++)}return new Kt(r,{})}function Zc(n){const e={};return wr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Al(new Kt([],{}),0,t))}),e}function Ph(n){const e={};return wr(n,(t,r)=>e[r]=`${t}`),e}function Yc(n,e,t){return n==t.path&&to(e,t.parameters)}const Qc="imperative";class Ns{constructor(e,t){this.id=e,this.url=t}}class Op extends Ns{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _i extends Ns{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xl extends Ns{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Du extends Ns{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Jc extends Ns{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rl extends Ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xm extends Ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Si extends Ns{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class e_ extends Ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fp extends Ns{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lp{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Po{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ml{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xc{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kh{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ed{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let yv=(()=>{class n{createUrlTree(t,r,i,o,l,h){return Qm(t||r.root,i,o,l,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return yv.\u0275fac(e)},providedIn:"root"}),n})();class p{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=E(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return E(e,this._root).map(t=>t.value)}}function _(n,e){if(n===e.value)return e;for(const t of e.children){const r=_(n,t);if(r)return r}return null}function E(n,e){if(n===e.value)return[e];for(const t of e.children){const r=E(n,t);if(r.length)return r.unshift(e),r}return[]}class A{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function P(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class K extends p{constructor(e,t){super(e),this.snapshot=t,Nl(this,e)}toString(){return this.snapshot.toString()}}function fe(n,e){const t=function He(n,e){const l=new Kn([],{},{},"",{},Tt,e,null,n.root,-1,{});return new us("",new A(l,[]))}(n,e),r=new $i([new wl("",{})]),i=new $i({}),o=new $i({}),l=new $i({}),h=new $i(""),g=new Xe(r,i,l,h,o,Tt,e,t.root);return g.snapshot=t.root,new K(new A(g,[]),t)}class Xe{constructor(e,t,r,i,o,l,h,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,D.U)(y=>y[Bc]))??ot(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,D.U)(e=>vl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,D.U)(e=>vl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function At(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Et(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Kn{get title(){return this.data?.[Bc]}constructor(e,t,r,i,o,l,h,g,y,I,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=h,this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=I,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class us extends p{constructor(e,t){super(t),this.url=e,Nl(this,t)}toString(){return Vp(this._root)}}function Nl(n,e){e.value._routerState=n,e.children.forEach(t=>Nl(n,t))}function Vp(n){const e=n.children.length>0?` { ${n.children.map(Vp).join(", ")} } `:"";return`${n.value}${e}`}function Ra(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,to(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),to(e.params,t.params)||n.params.next(t.params),function jc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!to(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),to(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ls(n,e){const t=to(n.params,e.params)&&function Sp(n,e){return wu(n,e)&&n.every((t,r)=>to(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ls(n.parent,e.parent))}function Ma(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Up(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ma(n,r,i);return Ma(n,r)})}(n,e,t);return new A(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>Ma(n,h)),l}}const r=function Bp(n){return new Xe(new $i(n.url),new $i(n.params),new $i(n.queryParams),new $i(n.fragment),new $i(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Ma(n,o));return new A(r,i)}}const Oh="ngNavigationCancelingError";function r_(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Iu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wv(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function wv(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Oh]=!0,r.cancellationCode=e,t&&(r.url=t),r}function kl(n){return Fh(n)&&Iu(n.url)}function Fh(n){return n&&n[Oh]}class qk{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new i_,this.attachRef=null}}let i_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new qk,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jp=!1;let Ev=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(i_),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,jp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,jp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,jp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,jp);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new VS(t,h,i.injector);if(r&&function US(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(l);this.activated=i.createComponent(y,i.length,g)}else this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class VS{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xe?this.route:e===i_?this.childContexts:this.parent.get(e,t)}}let bv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Ev],encapsulation:2}),n})();function Iv(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function s_(n){const e=n.children&&n.children.map(s_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=bv),t}function no(n){return n.outlet||Tt}function _b(n,e){const t=n.filter(r=>no(r)===e);return t.push(...n.filter(r=>no(r)!==e)),t}function $p(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class yb{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ra(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=P(t);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),wr(i,(o,l)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=P(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=P(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=P(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new t_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Xc(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(Ra(i),i===o)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Ra(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=$p(i.snapshot),g=h?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=g,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class HS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Tv{constructor(e,t){this.component=e,this.route=t}}function Hp(n,e,t){const r=n._root;return Lh(r,e?e._root:null,t,[r.value])}function td(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Lh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=P(e);return n.children.forEach(l=>{(function vb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const g=function Wk(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!wu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!wu(n.url,e.url)||!to(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ls(n,e)||!to(n.queryParams,e.queryParams);default:return!ls(n,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new HS(r)):(o.data=l.data,o._resolvedData=l._resolvedData),Lh(n,e,o.component?h?h.children:null:t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Tv(h.outlet.component,l))}else l&&Gp(e,h,i),i.canActivateChecks.push(new HS(r)),Lh(n,null,o.component?h?h.children:null:t,r,i)})(l,o[l.value.outlet],t,r.concat([l.value]),i),delete o[l.value.outlet]}),wr(o,(l,h)=>Gp(l,t.getContext(h),i)),i}function Gp(n,e,t){const r=P(n),i=n.value;wr(r,(o,l)=>{Gp(o,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Tv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Vh(n){return"function"==typeof n}function Au(n){return n instanceof Ta||"EmptyError"===n?.name}const o_=Symbol("INITIAL_VALUE");function Ol(){return Wn(n=>ft(n.map(e=>e.pipe(Vc(1),Uc(o_)))).pipe((0,D.U)(e=>{for(const t of e)if(!0!==t){if(t===o_)return o_;if(!1===t||t instanceof mi)return t}return!0}),Ms(e=>e!==o_),Vc(1)))}function Nv(n){return(0,Da.z)((0,gi.b)(e=>{if(Iu(e))throw r_(0,e)}),(0,D.U)(e=>!0===e))}const Pv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ib(n,e,t,r,i){const o=kv(n,e,t);return o.matched?function Uh(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ot(i.map(l=>{const h=td(l,n);return nr(function xv(n){return n&&Vh(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Ol(),Nv()):ot(!0)}(r=Iv(e,r),e,t).pipe((0,D.U)(l=>!0===l?o:{...Pv})):ot(o)}function kv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Pv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||zm)(t,n,e);if(!i)return{...Pv};const o={};wr(i.posParams,(h,g)=>{o[g]=h.path});const l=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Bh(n,e,t,r){if(t.length>0&&function YS(n,e,t){return t.some(r=>Ov(n,e,r)&&no(r)!==Tt)}(n,t,r)){const o=new Kt(e,function Cb(n,e,t,r){const i={};i[Tt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&no(o)!==Tt){const l=new Kt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[no(o)]=l}return i}(n,e,r,new Kt(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function Tb(n,e,t){return t.some(r=>Ov(n,e,r))}(n,t,r)){const o=new Kt(n.segments,function ZS(n,e,t,r,i){const o={};for(const l of r)if(Ov(n,t,l)&&!i[no(l)]){const h=new Kt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[no(l)]=h}return{...i,...o}}(n,e,t,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new Kt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Ov(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Db(n,e,t,r){return!!(no(n)===r||r!==Tt&&Ov(e,t,n))&&("**"===n.path||kv(e,n,t).matched)}function jh(n,e,t){return 0===e.length&&!n.children[t]}const l_=!1;class xu{constructor(e){this.segmentGroup=e||null}}class $h{constructor(e){this.urlTree=e}}function qp(n){return pi(new xu(n))}function Fv(n){return pi(new $h(n))}class Sb{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=Bh(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Tt).pipe((0,D.U)(o=>this.createUrlTree(Tl(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(yu(o=>{if(o instanceof $h)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof xu?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Tt).pipe((0,D.U)(i=>this.createUrlTree(Tl(i),e.queryParams,e.fragment))).pipe(yu(i=>{throw i instanceof xu?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,l_)}createUrlTree(e,t,r){const i=Ah(e);return new mi(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,D.U)(o=>new Kt([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,sn.D)(i).pipe(yl(o=>{const l=r.children[o],h=_b(t,o);return this.expandSegmentGroup(e,h,l,o).pipe((0,D.U)(g=>({segment:g,outlet:o})))}),Ro((o,l)=>(o[l.outlet]=l.segment,o),{}),bh())}expandSegment(e,t,r,i,o,l){return(0,sn.D)(r).pipe(yl(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,o,l).pipe(yu(y=>{if(y instanceof xu)return ot(null);throw y}))),Sa(h=>!!h),yu((h,g)=>{if(Au(h))return jh(t,i,o)?ot(new Kt([],{})):qp(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,o,l,h){return Db(i,t,o,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l):qp(t):qp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Fv(o):this.lineralizeSegments(r,o).pipe((0,hr.z)(l=>{const h=new Kt(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){const{matched:h,consumedSegments:g,remainingSegments:y,positionalParamSegments:I}=kv(t,i,o);if(!h)return qp(t);const S=this.applyRedirectCommands(g,i.redirectTo,I);return i.redirectTo.startsWith("/")?Fv(S):this.lineralizeSegments(i,S).pipe((0,hr.z)(R=>this.expandSegment(e,t,r,R.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=Iv(r,e),r.loadChildren?(r._loadedRoutes?ot({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,D.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Kt(i,{})))):ot(new Kt(i,{}))):Ib(t,r,i,e).pipe(Wn(({matched:l,consumedSegments:h,remainingSegments:g})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,hr.z)(I=>{const S=I.injector??e,R=I.routes,{segmentGroup:O,slicedSegments:U}=Bh(t,h,g,R),Z=new Kt(O.segments,O.children);if(0===U.length&&Z.hasChildren())return this.expandChildren(S,R,Z).pipe((0,D.U)(Ge=>new Kt(h,Ge)));if(0===R.length&&0===U.length)return ot(new Kt(h,{}));const te=no(r)===o;return this.expandSegment(S,Z,R,U,te?Tt:o,!0).pipe((0,D.U)(Ke=>new Kt(h.concat(Ke.segments),Ke.children)))})):qp(t)))}getChildConfig(e,t,r){return t.children?ot({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function KS(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ot(!0):ot(i.map(l=>{const h=td(l,n);return nr(function Sv(n){return n&&Vh(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Ol(),Nv())}(e,t,r).pipe((0,hr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,gi.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function JS(n){return pi(wv(l_,3))}())):ot({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ot(r);if(i.numberOfChildren>1||!i.children[Tt])return e.redirectTo,pi(new d.vHH(4e3,l_));i=i.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new mi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return wr(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[o]=t[h]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let l={};return wr(t.children,(h,g)=>{l[g]=this.createSegmentGroup(e,h,r,i)}),new Kt(o,l)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,l_);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Lv{}class zp{constructor(e,t,r,i,o,l,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=l,this.urlSerializer=h}recognize(){const e=Bh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe((0,D.U)(t=>{if(null===t)return null;const r=new Kn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new A(r,t),o=new us(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=At(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,sn.D)(Object.keys(r.children)).pipe(yl(i=>{const o=r.children[i],l=_b(t,i);return this.processSegmentGroup(e,l,o,i)}),Ro((i,o)=>i&&o?(i.push(...o),i):null),function Gm(n,e=!1){return(0,Rr.e)((t,r)=>{let i=0;t.subscribe((0,we.x)(r,o=>{const l=n(o,i++);(l||e)&&r.next(o),!l&&r.complete()}))})}(i=>null!==i),wp(null),bh(),(0,D.U)(i=>{if(null===i)return null;const o=xb(i);return function tA(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return(0,sn.D)(t).pipe(yl(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,o)),Sa(l=>!!l),yu(l=>{if(Au(l))return jh(r,i,o)?ot([]):ot(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!Db(t,r,i,o))return ot(null);let l;if("**"===t.path){const h=i.length>0?Th(i).parameters:{},g=Mb(r)+i.length;l=ot({snapshot:new Kn(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Na(t),no(t),t.component??t._loadedComponent??null,t,Rb(r),g,Nb(t)),consumedSegments:[],remainingSegments:[]})}else l=Ib(r,t,i,e).pipe((0,D.U)(({matched:h,consumedSegments:g,remainingSegments:y,parameters:I})=>{if(!h)return null;const S=Mb(r)+g.length;return{snapshot:new Kn(g,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Na(t),no(t),t.component??t._loadedComponent??null,t,Rb(r),S,Nb(t)),consumedSegments:g,remainingSegments:y}}));return l.pipe(Wn(h=>{if(null===h)return ot(null);const{snapshot:g,consumedSegments:y,remainingSegments:I}=h;e=t._injector??e;const S=t._loadedInjector??e,R=function nA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:O,slicedSegments:U}=Bh(r,y,I,R.filter(te=>void 0===te.redirectTo));if(0===U.length&&O.hasChildren())return this.processChildren(S,R,O).pipe((0,D.U)(te=>null===te?null:[new A(g,te)]));if(0===R.length&&0===U.length)return ot([new A(g,[])]);const Z=no(t)===o;return this.processSegment(S,R,O,U,Z?Tt:o).pipe((0,D.U)(te=>null===te?null:[new A(g,te)]))}))}}function rA(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function xb(n){const e=[],t=new Set;for(const r of n){if(!rA(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=xb(r.children);e.push(new A(r.value,i))}return e.filter(r=>!t.has(r))}function Rb(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Mb(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Na(n){return n.data||{}}function Nb(n){return n.resolve||{}}function Uv(n){return"string"==typeof n.title||null===n.title}function Bv(n){return Wn(e=>{const t=n(e);return t?(0,sn.D)(t).pipe((0,D.U)(()=>e)):ot(e)})}const Hh=new d.OlP("ROUTES");let $v=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=nr(t.loadComponent()).pipe((0,D.U)(Ob),(0,gi.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ih(()=>{this.componentLoaders.delete(t)})),i=new vp(r,()=>new xr.x).pipe(wh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ot({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,D.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,y,I=!1;Array.isArray(h)?y=h:(g=h.create(t).injector,y=Wm(g.get(Hh,[],d.XFs.Self|d.XFs.Optional)));return{routes:y.map(s_),injector:g}}),Ih(()=>{this.childrenLoaders.delete(r)})),l=new vp(o,()=>new xr.x).pipe(wh());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return nr(t()).pipe((0,D.U)(Ob),(0,hr.z)(r=>r instanceof d.YKP||Array.isArray(r)?ot(r):(0,sn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ob(n){return function ko(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let d_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new xr.x,this.configLoader=(0,d.f3M)($v),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(Eu),this.rootContexts=(0,d.f3M)(i_),this.navigationId=0,this.afterPreactivation=()=>ot(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Po(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Lp(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new $i({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qc,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ms(r=>0!==r.id),(0,D.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Wn(r=>{let i=!1,o=!1;return ot(r).pipe((0,gi.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Wn(l=>{const h=t.browserUrlTree.toString(),g=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!g&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const I="";return this.events.next(new Du(l.id,t.serializeUrl(r.rawUrl),I,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Xr.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Fb(l.source)&&(t.browserUrlTree=l.extractedUrl),ot(l).pipe(Wn(I=>{const S=this.transitions?.getValue();return this.events.next(new Op(I.id,this.urlSerializer.serialize(I.extractedUrl),I.source,I.restoredState)),S!==this.transitions?.getValue()?Xr.E:Promise.resolve(I)}),function Ab(n,e,t,r){return Wn(i=>function XS(n,e,t,r,i){return new Sb(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,D.U)(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,gi.b)(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},r.urlAfterRedirects=I.urlAfterRedirects}),function sA(n,e,t,r,i){return(0,hr.z)(o=>function Vv(n,e,t,r,i,o,l="emptyOnly"){return new zp(n,e,t,r,i,l,o).recognize().pipe(Wn(h=>null===h?function eA(n){return new tr.y(e=>e.error(n))}(new Lv):ot(h)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe((0,D.U)(l=>({...o,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,gi.b)(I=>{if(r.targetSnapshot=I.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!I.extras.skipLocationChange){const R=t.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);t.setBrowserUrl(R,I)}t.browserUrlTree=I.urlAfterRedirects}const S=new Rl(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(S)}));if(g&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:I,extractedUrl:S,source:R,restoredState:O,extras:U}=l,Z=new Op(I,this.urlSerializer.serialize(S),R,O);this.events.next(Z);const te=fe(S,this.rootComponentType).snapshot;return ot(r={...l,targetSnapshot:te,urlAfterRedirects:S,extras:{...U,skipLocationChange:!1,replaceUrl:!1}})}{const I="";return this.events.next(new Du(l.id,t.serializeUrl(r.extractedUrl),I,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Xr.E}}),(0,gi.b)(l=>{const h=new Xm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,D.U)(l=>r={...l,guards:Hp(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function a_(n,e){return(0,hr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return 0===l.length&&0===o.length?ot({...t,guardsResult:!0}):function zS(n,e,t,r){return(0,sn.D)(n).pipe((0,hr.z)(i=>function WS(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?ot(o.map(h=>{const g=$p(e)??i,y=td(h,g);return nr(function GS(n){return n&&Vh(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):g.runInContext(()=>y(n,e,t,r))).pipe(Sa())})).pipe(Ol()):ot(!0)}(i.component,i.route,t,e,r)),Sa(i=>!0!==i,!0))}(l,r,i,n).pipe((0,hr.z)(h=>h&&function wb(n){return"boolean"==typeof n}(h)?function Rv(n,e,t,r){return(0,sn.D)(e).pipe(yl(i=>zn(function nd(n,e){return null!==n&&e&&e(new Ml(n)),ot(!0)}(i.route.parent,r),function u_(n,e){return null!==n&&e&&e(new kh(n)),ot(!0)}(i.route,r),function Mv(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function Dv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>_l(()=>ot(l.guards.map(g=>{const y=$p(l.node)??t,I=td(g,y);return nr(function Av(n){return n&&Vh(n.canActivateChild)}(I)?I.canActivateChild(r,n):y.runInContext(()=>I(r,n))).pipe(Sa())})).pipe(Ol())));return ot(o).pipe(Ol())}(n,i.path,t),function bb(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ot(!0);const i=r.map(o=>_l(()=>{const l=$p(e)??t,h=td(o,l);return nr(function Kk(n){return n&&Vh(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(Sa())}));return ot(i).pipe(Ol())}(n,i.route,t))),Sa(i=>!0!==i,!0))}(r,o,n,e):ot(h)),(0,D.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,gi.b)(l=>{if(r.guardsResult=l.guardsResult,Iu(l.guardsResult))throw r_(0,l.guardsResult);const h=new Si(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Ms(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Bv(l=>{if(l.guards.canActivateChecks.length)return ot(l).pipe((0,gi.b)(h=>{const g=new e_(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}),Wn(h=>{let g=!1;return ot(h).pipe(function Zk(n,e){return(0,hr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ot(t);let o=0;return(0,sn.D)(i).pipe(yl(l=>function Yk(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!Uv(i)&&(o[Bc]=i.title),function Pb(n,e,t,r){const i=function Qk(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ot({});const o={};return(0,sn.D)(i).pipe((0,hr.z)(l=>function kb(n,e,t,r){const i=$p(e)??r,o=td(n,i);return nr(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[l],e,t,r).pipe(Sa(),(0,gi.b)(h=>{o[l]=h}))),Eh(1),function qm(n){return(0,D.U)(()=>n)}(o),yu(l=>Au(l)?Xr.E:pi(l)))}(o,n,e,r).pipe((0,D.U)(l=>(n._resolvedData=l,n.data=At(n,t).resolve,i&&Uv(i)&&(n.data[Bc]=i.title),null)))}(l.route,r,n,e)),(0,gi.b)(()=>o++),Eh(1),(0,hr.z)(l=>o===i.length?ot(t):Xr.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,gi.b)({next:()=>g=!0,complete:()=>{g||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,gi.b)(h=>{const g=new Fp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}))}),Bv(l=>{const h=g=>{const y=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(g.routeConfig).pipe((0,gi.b)(I=>{g.component=I}),(0,D.U)(()=>{})));for(const I of g.children)y.push(...h(I));return y};return ft(h(l.targetSnapshot.root)).pipe(wp(),Vc(1))}),Bv(()=>this.afterPreactivation()),(0,D.U)(l=>{const h=function Pl(n,e,t){const r=Ma(n,e._root,t?t._root:void 0);return new K(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:h}}),(0,gi.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,D.U)(r=>(new yb(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Vc(1),(0,gi.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new _i(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),Ih(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),yu(l=>{if(o=!0,Fh(l)){kl(l)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new xl(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),kl(l)){const g=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Fb(r.source)};t.scheduleNavigation(g,Qc,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new Jc(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(l))}catch(g){r.reject(g)}}return Xr.E}))}))}cancelNavigationTransition(t,r,i){const o=new xl(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Fb(n){return n!==Qc}let Lb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[Bc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(oA)},providedIn:"root"}),n})(),oA=(()=>{class n extends Lb{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(hp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(uA)},providedIn:"root"}),n})();class aA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let uA=(()=>{class n extends aA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vt=new d.OlP("",{providedIn:"root",factory:()=>({})});let Ub=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Bb)},providedIn:"root"}),n})(),Bb=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cA(n){throw n}function dA(n,e,t){return e.parse("/")}const jb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(Vt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||cA,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||dA,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(Ub),this.routeReuseStrategy=(0,d.f3M)(Vb),this.urlCreationStrategy=(0,d.f3M)(v),this.titleStrategy=(0,d.f3M)(Lb),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Wm((0,d.f3M)(Hh,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(d_),this.urlSerializer=(0,d.f3M)(Eu),this.location=(0,d.f3M)(ke),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new mi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fe(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Qc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(s_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:h,preserveFragment:g}=r,y=g?this.currentUrlTree.fragment:l;let I=null;switch(h){case"merge":I={...this.currentUrlTree.queryParams,...o};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=o||null}return null!==I&&(I=this.removeEmptyProps(I)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,I,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Iu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Qc,null,r)}navigate(t,r={skipLocationChange:!1}){return function fA(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...jb}:!1===r?{...hA}:r,Iu(t))return Br(this.currentUrlTree,t,i);const o=this.parseUrl(t);return Br(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,l){if(this.disposed)return Promise.resolve(!1);let h,g,y,I;return l?(h=l.resolve,g=l.reject,y=l.promise):y=new Promise((S,R)=>{h=S,g=R}),I="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:I,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:h,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zp=(()=>{class n{constructor(t,r,i,o,l,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=l,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new xr.x;const g=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof _i&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Hi),d.Y36(Xe),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(ut))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),pA=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,l){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(h=>{h instanceof _i&&this.update()})}ngAfterContentInit(){ot(this.links.changes,ot(null)).pipe((0,St.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,sn.D)(t).pipe((0,St.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function $b(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Hi),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(Zp,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,Zp,5),2&t){let o;d.iGM(o=d.CRH())&&(r.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]}),n})();class Hv{}let Gv=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ms(t=>t instanceof _i),yl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,d.MMx)(o.providers,t,`Route: ${o.path}`));const l=o._injector??t,h=o._loadedInjector??l;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(l,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(h,o.children??o._loadedRoutes))}return(0,sn.D)(i).pipe((0,St.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ot(null);const o=i.pipe((0,hr.z)(l=>null===l?ot(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,sn.D)([o,l]).pipe((0,St.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hi),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Hv),d.LFG($v))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Yp=new d.OlP("");let Hb=(()=>{class n{constructor(t,r,i,o,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Op?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _i&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ed&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ed(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();var ro=(()=>((ro=ro||{})[ro.COMPLETE=0]="COMPLETE",ro[ro.FAILED=1]="FAILED",ro[ro.REDIRECTING=2]="REDIRECTING",ro))();const Qp=!1;function rd(n,e){return{\u0275kind:n,\u0275providers:e}}const zv=new d.OlP("",{providedIn:"root",factory:()=>!1});function Jp(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Hi),i=n.get(Gb);1===n.get(f_)&&r.initialNavigation(),n.get(qb,null,d.XFs.Optional)?.setUpPreloading(),n.get(Yp,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Gb=new d.OlP(Qp?"bootstrap done indicator":"",{factory:()=>new xr.x}),f_=new d.OlP(Qp?"initial navigation":"",{providedIn:"root",factory:()=>1});function yA(){let n=[];return n=Qp?[{provide:d.Xts,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Hi);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function n_(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],rd(1,n)}const qb=new d.OlP(Qp?"router preloader":"");function vA(n){return rd(0,[{provide:qb,useExisting:Gv},{provide:Hv,useExisting:n}])}const zh=!1,bA=new d.OlP(zh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Wv=[ke,{provide:Eu,useClass:Ap},Hi,i_,{provide:Xe,useFactory:function qv(n){return n.routerState.root},deps:[Hi]},$v,zh?{provide:zv,useValue:!0}:[]];function IA(){return new d.PXZ("Router",Hi)}let CA=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Wv,zh&&r?.enableTracing?yA().\u0275providers:[],{provide:Hh,multi:!0,useValue:t},{provide:bA,useFactory:Kb,deps:[[Hi,new d.FiY,new d.tp0]]},{provide:Vt,useValue:r||{}},r?.useHash?{provide:ut,useClass:Ae}:{provide:ut,useClass:xe},{provide:Yp,useFactory:()=>{const n=(0,d.f3M)(la),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Vt),r=(0,d.f3M)(d_),i=(0,d.f3M)(Eu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Hb(i,r,n,e,t)}},r?.preloadingStrategy?vA(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:IA},r?.initialNavigation?DA(r):[],[{provide:Zb,useFactory:Jp},{provide:d.tb,multi:!0,useExisting:Zb}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Hh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(bA,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[bv]}),n})();function Kb(n){if(zh&&n)throw new d.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function DA(n){return["disabled"===n.initialNavigation?rd(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Hi);return()=>{e.setUpLocationChangeListener()}}},{provide:f_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?rd(2,[{provide:f_,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(de,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Hi),o=e.get(Gb);(function Xk(n,e){n.events.pipe(Ms(t=>t instanceof _i||t instanceof xl||t instanceof Jc||t instanceof Du),(0,D.U)(t=>t instanceof _i||t instanceof Du?ro.COMPLETE:t instanceof xl&&(0===t.code||1===t.code)?ro.REDIRECTING:ro.FAILED),Ms(t=>t!==ro.REDIRECTING),Vc(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(d_).afterPreactivation=()=>(r(!0),o.closed?ot(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const Zb=new d.OlP(zh?"Router Initializer":"");let Kh=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Ru=(()=>{class n extends Kh{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Ps=new d.OlP("NgValueAccessor"),Zv={provide:Ps,useExisting:(0,d.Gpc)(()=>id),multi:!0},Qb=new d.OlP("CompositionEventMode");let id=(()=>{class n extends Kh{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Yv(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Qb,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[d._Bn([Zv]),d.qOj]}),n})();const SA=!1;function Fl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Qv(n){return null!=n&&"number"==typeof n.length}const Ai=new d.OlP("NgValidators"),Mu=new d.OlP("NgAsyncValidators"),Jb=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class io{static min(e){return function Xb(n){return e=>{if(Fl(e.value)||Fl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function cs(n){return e=>{if(Fl(e.value)||Fl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return eI(e)}static requiredTrue(e){return function tI(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function AA(n){return Fl(n.value)||Jb.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function m_(n){return e=>Fl(e.value)||!Qv(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Jv(n){return e=>Qv(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function nI(n){if(!n)return __;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Fl(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return aI(e)}static composeAsync(e){return uI(e)}}function eI(n){return Fl(n.value)?{required:!0}:null}function __(n){return null}function rI(n){return null!=n}function Xv(n){const e=(0,d.QGY)(n)?(0,sn.D)(n):n;if(SA&&!(0,d.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new d.vHH(-1101,t)}return e}function iI(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function sI(n,e){return e.map(t=>t(n))}function oI(n){return n.map(e=>function ew(n){return!n.validate}(e)?e:t=>e.validate(t))}function aI(n){if(!n)return null;const e=n.filter(rI);return 0==e.length?null:function(t){return iI(sI(t,e))}}function tw(n){return null!=n?aI(oI(n)):null}function uI(n){if(!n)return null;const e=n.filter(rI);return 0==e.length?null:function(t){return function Kv(...n){const e=(0,vr.jO)(n),{args:t,keys:r}=gl(n),i=new tr.y(o=>{const{length:l}=t;if(!l)return void o.complete();const h=new Array(l);let g=l,y=l;for(let I=0;I<l;I++){let S=!1;(0,Rs.Xf)(t[I]).subscribe((0,we.x)(o,R=>{S||(S=!0,y--),h[I]=R},()=>g--,void 0,()=>{(!g||!S)&&(y||o.next(r?re(r,h):h),o.complete())}))}});return e?i.pipe(Q(e)):i}(sI(t,e).map(Xv)).pipe((0,D.U)(iI))}}function nw(n){return null!=n?uI(oI(n)):null}function Oo(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function y_(n){return n._rawValidators}function lI(n){return n._rawAsyncValidators}function rw(n){return n?Array.isArray(n)?n:[n]:[]}function eg(n,e){return Array.isArray(n)?n.includes(e):n===e}function cI(n,e){const t=rw(e);return rw(n).forEach(i=>{eg(t,i)||t.push(i)}),t}function dI(n,e){return rw(e).filter(t=>!eg(n,t))}class hI{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class yi extends hI{get formDirective(){return null}get path(){return null}}class Ll extends hI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fI{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Zh=(()=>{class n extends fI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ll,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),pI=(()=>{class n extends fI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(yi,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();function lw(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const cw=!1,E_="VALID",b_="INVALID",Yh="PENDING",rg="DISABLED";function dw(n){return(ig(n)?n.validators:n)||null}function hw(n,e){return(ig(e)?e.asyncValidators:n)||null}function ig(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function I_(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,cw?function RA(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new d.vHH(1001,cw?function MA(n,e){return`Cannot find form control ${lw(n,e)}`}(e,t):"")}function vI(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,cw?function ng(n,e){return`Must supply a value for form control ${lw(n,e)}`}(e,i):"")})}class Qh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===E_}get invalid(){return this.status===b_}get pending(){return this.status==Yh}get disabled(){return this.status===rg}get enabled(){return this.status!==rg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(cI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dI(e,this._rawAsyncValidators))}hasValidator(e){return eg(this._rawValidators,e)}hasAsyncValidator(e){return eg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Yh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=rg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=E_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===E_||this.status===Yh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rg:E_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Yh,this._hasOwnPendingAsyncValidator=!0;const t=Xv(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?rg:this.errors?b_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yh)?Yh:this._anyControlsHaveStatus(b_)?b_:E_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ig(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function NA(n){return Array.isArray(n)?tw(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function PA(n){return Array.isArray(n)?nw(n):n||null}(this._rawAsyncValidators)}}class sg extends Qh{constructor(e,t,r){super(dw(t),hw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){vI(this,!0,e),Object.keys(e).forEach(r=>{I_(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class wI extends sg{}const sd=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>og}),og="always";function Jh(n,e,t=og){bI(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function kA(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&T_(n,e)})}(n,e),function FA(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function OA(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&T_(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function EI(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function C_(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),od(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function fw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bI(n,e){const t=y_(n);null!==e.validator?n.setValidators(Oo(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=lI(n);null!==e.asyncValidator?n.setAsyncValidators(Oo(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();fw(e._rawValidators,i),fw(e._rawAsyncValidators,i)}function od(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=y_(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(l=>l!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=lI(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(l=>l!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return fw(e._rawValidators,r),fw(e._rawAsyncValidators,r),t}function T_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function gw(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const rf=class extends Qh{constructor(e=null,t,r){super(dw(t),hw(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ig(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=gw(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){gw(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let cg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),DI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const fg=new d.OlP("NgModelWithFormControlWarning"),Ew={provide:yi,useExisting:(0,d.Gpc)(()=>sf)};let sf=(()=>{class n extends yi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(od(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Jh(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){C_(t.control||null,t,!1),function tf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function ud(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(C_(r||null,t),(n=>n instanceof rf)(i)&&(Jh(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Fo(n,e){bI(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function ug(n,e){return od(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){bI(this.form,this),this._oldForm&&od(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ai,10),d.Y36(Mu,10),d.Y36(sd,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Ew]),d.qOj,d.TTD]}),n})();const qA={provide:Ll,useExisting:(0,d.Gpc)(()=>M_)};let M_=(()=>{class n extends Ll{set isDisabled(t){}constructor(t,r,i,o,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Bl(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===id?t=o:function ef(n){return Object.getPrototypeOf(n.constructor)===Ru}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){this._added||this._setUpControl(),function Ul(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ag(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(yi,13),d.Y36(Ai,10),d.Y36(Mu,10),d.Y36(Ps,10),d.Y36(fg,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([qA]),d.qOj,d.TTD]}),n})(),ld=(()=>{class n{constructor(){this._validator=__}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):__,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const ZA={provide:Ai,useExisting:(0,d.Gpc)(()=>L_),multi:!0};let L_=(()=>{class n extends ld{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>eI}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([ZA]),d.qOj]}),n})(),Sw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[DI]}),n})();class dd extends Qh{constructor(e,t,r){super(dw(t),hw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){vI(this,!1,e),e.forEach((r,i)=>{I_(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Aw(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let VI=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return Aw(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new sg(i,o)}record(t,r=null){const i=this._reduceControls(t);return new wI(i,r)}control(t,r,i){let o={};return this.useNonNullable?(Aw(r)?o=r:(o.validators=r,o.asyncValidators=i),new rf(t,{...o,nonNullable:!0})):new rf(t,r,i)}array(t,r,i){const o=t.map(l=>this._createControl(l));return new dd(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof rf||t instanceof Qh?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sd,useValue:t.callSetDisabledState??og}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Sw]}),n})(),ka=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fg,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:sd,useValue:t.callSetDisabledState??og}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Sw]}),n})();var Rw=L(4986),V_=L(6451),Vo=L(3099);function so(n,e=T.y){return n=n??Uo,(0,Rr.e)((t,r)=>{let i,o=!0;t.subscribe((0,we.x)(r,l=>{const h=e(l);(o||!n(i,h))&&(o=!1,i=h,r.next(l))}))})}function Uo(n,e){return n===e}var BI=L(5032),pn=L(2122),$r=L(2011),gg=(L(750),L(3942)),qi=L(4859),ve=L(5861),xi=L(9681),k=L(2090),Bo=L(1877);const Mw="@firebase/database";let af="";function $I(n){af=n}class HI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class GI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const U_=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new HI(e)}}catch{}return new GI},Oa=U_("localStorage"),mg=U_("sessionStorage"),hd=new Bo.Yd("@firebase/database"),Pw=function(){let n=1;return function(){return n++}}(),kw=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},uf=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=uf.apply(null,r):e+="object"==typeof r?(0,k.Wl)(r):r,e+=" "}return e};let $l=null,Ow=!0;const Fw=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(hd.logLevel=Bo.in.VERBOSE,$l=hd.log.bind(hd),e&&mg.set("logging_enabled",!0)):"function"==typeof n?$l=n:($l=null,mg.remove("logging_enabled"))},ei=function(...n){if(!0===Ow&&(Ow=!1,null===$l&&!0===mg.get("logging_enabled")&&Fw(!0)),$l){const e=uf.apply(null,n);$l(e)}},_g=function(n){return function(...e){ei(n,...e)}},Lw=function(...n){const e="FIREBASE INTERNAL ERROR: "+uf(...n);hd.error(e)},Fa=function(...n){const e=`FIREBASE FATAL ERROR: ${uf(...n)}`;throw hd.error(e),new Error(e)},Ri=function(...n){const e="FIREBASE WARNING: "+uf(...n);hd.warn(e)},B_=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Hl="[MIN_NAME]",Pu="[MAX_NAME]",fd=function(n,e){if(n===e)return 0;if(n===Hl||e===Pu)return-1;if(e===Hl||n===Pu)return 1;{const t=Uw(n),r=Uw(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},sx=function(n,e){return n===e?0:n<e?-1:1},yg=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},Vw=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Wl)(e[r]),t+=":",t+=Vw(n[e[r]]);return t+="}",t},qI=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const zI=function(n){(0,k.hu)(!B_(n),"Invalid JSON number");const r=1023;let i,o,l,h,g;0===n?(o=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const I=y.join("");let S="";for(g=0;g<64;g+=8){let R=parseInt(I.substr(g,8),2).toString(16);1===R.length&&(R="0"+R),S+=R}return S.toLowerCase()},ZI=new RegExp("^-?(0*)\\d{1,10}$"),Uw=function(n){if(ZI.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},pd=function(n){try{n()}catch(e){setTimeout(()=>{throw Ri("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},JI=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},lf=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class XI{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ri(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Bw{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ei("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ri(e)}}let jo=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ux=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Rt="websocket",nC="long_polling";class Hw{constructor(e,t,r,i,o=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Oa.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Oa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function md(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===Rt)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==nC)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function lx(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ti(t,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}class cx{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const cf={},df={};function Zn(n){const e=n.toString();return cf[e]||(cf[e]=new cx),cf[e]}class rC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&pd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Gl{constructor(e,t,r,i,o,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_g(e),this.stats_=Zn(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),md(t,nC,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new rC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _d((...o)=>{const[l,h,g,y,I]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&ux.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Gl.forceAllow_=!0}static forceDisallow(){Gl.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!Gl.forceAllow_&&(Gl.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=qI(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class _d{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Pw(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=_d.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){ei("frame writing exception"),h.stack&&ei(h.stack),ei(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ei("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ei("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let H_=null;typeof MozWebSocket<"u"?H_=MozWebSocket:typeof WebSocket<"u"&&(H_=WebSocket);let hf=(()=>{class n{constructor(t,r,i,o,l,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_g(this.connId),this.stats_=Zn(r),this.connURL=n.connectionURL_(r,h,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,l){const h={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&ux.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),l&&(h.p=l),md(t,Rt,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Oa.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${af}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new H_(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==H_&&!n.forceDisallow_}static previouslyFailed(){return Oa.isInMemoryStorage||!0===Oa.get("previous_websocket_failure")}markConnectionHealthy(){Oa.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=qI(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Ww=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Gl,hf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=hf&&hf.isAvailable();let i=r&&!hf.previouslyFailed();if(t.webSocketOnly&&(r||Ri("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[hf];else{const o=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Yw{constructor(e,t,r,i,o,l,h,g,y,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_g("c:"+this.id+":"),this.transportManager_=new Ww(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=lf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=yg("t",e),r=yg("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=yg("t",e),r=yg("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=yg("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Lw("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Lw("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ri("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),lf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Oa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ff{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class mC{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class G_ extends mC{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new G_}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const _C=32,yC=768;class In{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function gn(){return new In("")}function Zt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ql(n){return n.pieces_.length-n.pieceNum_}function Rn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new In(n.pieces_,e)}function yd(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function pf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function vC(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new In(e,0)}function jn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof In)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new In(t,0)}function Xt(n){return n.pieceNum_>=n.pieces_.length}function Mi(n,e){const t=Zt(n),r=Zt(e);if(null===t)return e;if(t===r)return Mi(Rn(n),Rn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function bx(n,e){const t=pf(n,0),r=pf(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=fd(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function Ig(n,e){if(ql(n)!==ql(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function oo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ql(n)>ql(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class wC{constructor(e,t){this.errorPrefix_=t,this.parts_=pf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);bC(this)}}function bC(n){if(n.byteLength_>yC)throw new Error(n.errorPrefix_+"has a key path longer than "+yC+" bytes ("+n.byteLength_+").");if(n.parts_.length>_C)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_C+") or object contains a cycle "+vd(n))}function vd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Cg extends mC{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Cg}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Tg=1e3;let Dg,wd=(()=>{class n extends ff{constructor(t,r,i,o,l,h,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=_g("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Tg,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Cg.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&G_.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,l={r:o,a:t,b:r};this.log_((0,k.Wl)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new k.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const g=h.d;"ok"===h.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const g={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const y=g.d,I=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",g),"ok"!==I&&this.removeListen_(i,o),t.onComplete&&t.onComplete(I,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Ri(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const l=o.s,h=o.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const l={p:t};o&&(l.q=i,l.t=o),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Lw("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Tg,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Tg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Tg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ve.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,y=null;const I=function(){y?y.close():(g=!0,o())};t.realtime_={close:I,sendRequest:function(O){(0,k.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(O)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,U]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);g?ei("getToken() completed but was canceled"):(ei("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=U&&U.token,y=new Yw(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,Z=>{Ri(Z+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(O){t.log_("Failed to get token: "+O),g||(t.repoInfo_.nodeAdmin&&Ri(O),I())}}})()}interrupt(t){ei("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ei("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Tg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>Vw(l)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new In(t).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){ei("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ei("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+af.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=G_.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class nn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nn(e,t)}}class q_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new nn(Hl,e),i=new nn(Hl,t);return 0!==this.compare(r,i)}minPost(){return nn.MIN}}class Qw extends q_{static get __EMPTY_NODE(){return Dg}static set __EMPTY_NODE(e){Dg=e}compare(e,t){return fd(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nn.MIN}maxPost(){return new nn(Pu,Dg)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new nn(e,Dg)}toString(){return".key"}}const La=new Qw;class z_{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Ag,ao=(()=>{class n{constructor(t,r,i,o,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??ds.EMPTY_NODE,this.right=l??ds.EMPTY_NODE}copy(t,r,i,o,l){return new n(t??this.key,r??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const l=i(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===l?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ds.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ds.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ds{constructor(e,t=ds.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ds(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ao.BLACK,null,null))}remove(e){return new ds(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ao.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new z_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new z_(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new z_(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new z_(this.root_,null,this.comparator_,!0,e)}}function Ax(n,e){return fd(n.name,e.name)}function Sg(n,e){return fd(n,e)}ds.EMPTY_NODE=new class Sx{copy(e,t,r,i,o){return this}insert(e,t,r){return new ao(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const W_=function(n){return"number"==typeof n?"number:"+zI(n):"string:"+n},SC=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===Ag||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===Ag||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let AC,xC,Jw,zl=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),SC(this.priorityNode_)}static set __childrenNodeConstructor(t){AC=t}static get __childrenNodeConstructor(){return AC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Xt(t)?this:".priority"===Zt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Zt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===ql(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+W_(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?zI(this.value_):this.value_,this.lazyHash_=kw(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(o>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),o===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const $n=new class xx extends q_{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?fd(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(Pu,new zl("[PRIORITY-POST]",Jw))}makePost(e,t){const r=xC(e);return new nn(t,new zl("[PRIORITY-POST]",r))}toString(){return".priority"}},MC=Math.log(2);class Xw{constructor(e){this.count=parseInt(Math.log(e+1)/MC,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const K_=function(n,e,t,r){n.sort(e);const i=function(g,y){const I=y-g;let S,R;if(0===I)return null;if(1===I)return S=n[g],R=t?t(S):S,new ao(R,S.node,ao.BLACK,null,null);{const O=parseInt(I/2,10)+g,U=i(g,O),Z=i(O+1,y);return S=n[O],R=t?t(S):S,new ao(R,S.node,ao.BLACK,U,Z)}},h=function(g){let y=null,I=null,S=n.length;const R=function(U,Z){const te=S-U,$e=S;S-=U;const Ke=i(te+1,$e),Ge=n[te],ze=t?t(Ge):Ge;O(new ao(ze,Ge.node,Z,null,Ke))},O=function(U){y?(y.left=U,y=U):(I=U,y=U)};for(let U=0;U<g.count;++U){const Z=g.nextBitIsOne(),te=Math.pow(2,g.count-(U+1));Z?R(te,ao.BLACK):(R(te,ao.BLACK),R(te,ao.RED))}return I}(new Xw(n.length));return new ds(r||e,h)};let xg;const mf={};class Va{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(mf&&$n,"ChildrenNode.ts has not been loaded"),xg=xg||new Va({".priority":mf},{".priority":$n}),xg}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ds?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==La,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(nn.Wrap);let h,l=o.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=o.getNext();h=i?K_(r,e.getCompare()):mf;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const I=Object.assign({},this.indexes_);return I[g]=h,new Va(I,y)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,o)=>{const l=(0,k.DV)(this.indexSet_,o);if((0,k.hu)(l,"Missing index implementation for "+o),i===mf){if(l.isDefinedOn(e.node)){const h=[],g=t.getIterator(nn.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&h.push(y),y=g.getNext();return h.push(e),K_(h,l.getCompare())}return mf}{const h=t.get(e.name);let g=i;return h&&(g=g.remove(new nn(e.name,h))),g.insert(e,e.node)}});return new Va(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===mf)return i;{const o=t.get(e.name);return o?i.remove(new nn(e.name,o)):i}});return new Va(r,this.indexSet_)}}let Ed,Ht=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&SC(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ed||(Ed=new n(new ds(Sg),null,Va.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ed}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ed:r}}getChild(t){const r=Zt(t);return null===r?this:this.getImmediateChild(r).getChild(Rn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new nn(t,r);let o,l;r.isEmpty()?(o=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?Ed:this.priorityNode_;return new n(o,h,l)}}updateChild(t,r){const i=Zt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Zt(t)||1===ql(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Rn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,l=!0;if(this.forEachChild($n,(h,g)=>{r[h]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):l=!1}),!t&&l&&o<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+W_(this.getPriority().val())+":"),this.forEachChild($n,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":kw(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new nn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new nn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new nn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,nn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,nn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)>0;)o.getNext(),l=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===_f?-1:0}withIndex(t){if(t===La||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===La||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator($n),o=r.getIterator($n);let l=i.getNext(),h=o.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=o.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===La?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const _f=new class NC extends Ht{constructor(){super(new ds(Sg),Ht.EMPTY_NODE,Va.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ht.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(nn,{MIN:{value:new nn(Hl,Ht.EMPTY_NODE)},MAX:{value:new nn(Pu,_f)}}),Qw.__EMPTY_NODE=Ht.EMPTY_NODE,zl.__childrenNodeConstructor=Ht,function DC(n){Ag=n}(_f),function RC(n){Jw=n}(_f);const PC=!0;function ir(n,e=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new zl(n,ir(e));if(n instanceof Array||!PC){let t=Ht.EMPTY_NODE;return ti(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const o=ir(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(ir(e))}{const t=[];let r=!1;if(ti(n,(l,h)=>{if("."!==l.substring(0,1)){const g=ir(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new nn(l,g)))}}),0===t.length)return Ht.EMPTY_NODE;const o=K_(t,Ax,l=>l.name,Sg);if(r){const l=K_(t,$n.getCompare());return new Ht(o,ir(e),new Va({".priority":l},{".priority":$n}))}return new Ht(o,ir(e),Va.Default)}}!function gf(n){xC=n}(ir);class e0 extends q_{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Xt(e)&&".priority"!==Zt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?fd(e.name,t.name):o}makePost(e,t){const r=ir(e),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new nn(t,i)}maxPost(){const e=Ht.EMPTY_NODE.updateChild(this.indexPath_,_f);return new nn(Pu,e)}toString(){return pf(this.indexPath_,0).join("/")}}const t0=new class Rx extends q_{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?fd(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(e,t){const r=ir(e);return new nn(t,r)}toString(){return".value"}};function n0(n){return{type:"value",snapshotNode:n}}function Rg(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function yf(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Mg(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class kC{constructor(e){this.index_=e}updateChild(e,t,r,i,o,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(yf(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(Rg(t,r)):l.trackChildChange(Mg(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild($n,(i,o)=>{t.hasChild(i)||r.trackChildChange(yf(i,o))}),t.isLeafNode()||t.forEachChild($n,(i,o)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(o)||r.trackChildChange(Mg(i,o,l))}else r.trackChildChange(Rg(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ht.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ng{constructor(e){this.indexedFilter_=new kC(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ng.getStartPost_(e),this.endPost_=Ng.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,l){return this.matches(new nn(t,r))||(r=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ht.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ht.EMPTY_NODE);const o=this;return t.forEachChild($n,(l,h)=>{o.matches(new nn(l,h))||(i=i.updateImmediateChild(l,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Nx{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ng(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,l){return this.rangedFilter_.matches(new nn(t,r))||(r=Ht.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,l):this.fullLimitUpdateChild_(e,t,r,o,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=Ht.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),l++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(Ht.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;o.hasNext();){const h=o.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,Ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let l;if(this.reverse_){const S=this.index_.getCompare();l=(R,O)=>S(O,R)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const g=new nn(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),I=this.rangedFilter_.matches(g);if(h.hasChild(t)){const S=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const O=null==R?1:l(R,g);if(I&&!r.isEmpty()&&O>=0)return o?.trackChildChange(Mg(t,r,S)),h.updateImmediateChild(t,r);{o?.trackChildChange(yf(t,S));const Z=h.updateImmediateChild(t,Ht.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(o?.trackChildChange(Rg(R.name,R.node)),Z.updateImmediateChild(R.name,R.node)):Z}}return r.isEmpty()?e:I&&l(y,g)>=0?(null!=o&&(o.trackChildChange(yf(y.name,y.node)),o.trackChildChange(Rg(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Ht.EMPTY_NODE)):e}}class Z_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$n}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$n}copy(){const e=new Z_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function r0(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function s0(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Y_(n,e){const t=n.copy();return t.index_=e,t}function FC(n){const e={};if(n.isDefault())return e;let t;if(n.index_===$n?t="$priority":n.index_===t0?t="$value":n.index_===La?t="$key":((0,k.hu)(n.index_ instanceof e0,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function vf(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==$n&&(e.i=n.index_.toString()),e}class Pg extends ff{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=_g("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Pg.getListenId_(e,r),h={};this.listens_[l]=h;const g=FC(e._queryParams);this.restRequest_(o+".json",g,(y,I)=>{let S=I;if(404===y&&(S=null,y=null),null===y&&this.onDataUpdate_(o,S,!1,r),(0,k.DV)(this.listens_,l)===h){let R;R=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(R,null)}})}unlisten(e,t){const r=Pg.getListenId_(e,t);delete this.listens_[r]}get(e){const t=FC(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(o,l)=>{let h=l;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,k.cI)(h.responseText)}catch{Ri("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&Ri("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class LC{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function kg(){return{value:null,children:new Map}}function bd(n,e,t){if(Xt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Zt(e);n.children.has(r)||n.children.set(r,kg()),bd(n.children.get(r),e=Rn(e),t)}}function Q_(n,e){if(Xt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild($n,(r,i)=>{bd(n,new In(r),i)}),Q_(n,e)}}if(n.children.size>0){const t=Zt(e);return e=Rn(e),n.children.has(t)&&Q_(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function J_(n,e,t){null!==n.value?t(e,n.value):function Lx(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{J_(i,new In(e.toString()+"/"+r),t)})}class gO{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ti(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Ux{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new gO(e);const r=1e4+2e4*Math.random();lf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ti(e,(i,o)=>{o>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),lf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var uo=(()=>{return(n=uo||(uo={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",uo;var n})();function Og(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ks{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=uo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Xt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new In(e));return new ks(gn(),t,this.revert)}}return(0,k.hu)(Zt(this.path)===e,"operationForChild called for unrelated child."),new ks(Rn(this.path),this.affectedTree,this.revert)}}class Fg{constructor(e,t){this.source=e,this.path=t,this.type=uo.LISTEN_COMPLETE}operationForChild(e){return Xt(this.path)?new Fg(this.source,gn()):new Fg(this.source,Rn(this.path))}}class ku{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=uo.OVERWRITE}operationForChild(e){return Xt(this.path)?new ku(this.source,gn(),this.snap.getImmediateChild(e)):new ku(this.source,Rn(this.path),this.snap)}}class Ua{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=uo.MERGE}operationForChild(e){if(Xt(this.path)){const t=this.children.subtree(new In(e));return t.isEmpty()?null:t.value?new ku(this.source,gn(),t.value):new Ua(this.source,gn(),t)}return(0,k.hu)(Zt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ua(this.source,Rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Wl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Zt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Bx{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Kl(n,e,t,r,i,o){const l=r.filter(h=>h.type===t);l.sort((h,g)=>function $x(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new nn(e.childName,e.snapshotNode),i=new nn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),l.forEach(h=>{const g=function X_(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(g,n.query_))})})}function ey(n,e){return{eventCache:n,serverCache:e}}function wf(n,e,t,r){return ey(new Wl(e,t,r),n.serverCache)}function a0(n,e,t,r){return ey(n.eventCache,new Wl(e,t,r))}function Ef(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Zl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Lg;class Mn{constructor(e,t=(()=>(Lg||(Lg=new ds(sx)),Lg))()){this.value=e,this.children=t}static fromObject(e){let t=new Mn(null);return ti(e,(r,i)=>{t=t.set(new In(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:gn(),value:this.value};if(Xt(e))return null;{const r=Zt(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Rn(e),t);return null!=o?{path:jn(new In(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xt(e))return this;{const t=Zt(e),r=this.children.get(t);return null!==r?r.subtree(Rn(e)):new Mn(null)}}set(e,t){if(Xt(e))return new Mn(t,this.children);{const r=Zt(e),o=(this.children.get(r)||new Mn(null)).set(Rn(e),t),l=this.children.insert(r,o);return new Mn(this.value,l)}}remove(e){if(Xt(e))return this.children.isEmpty()?new Mn(null):new Mn(null,this.children);{const t=Zt(e),r=this.children.get(t);if(r){const i=r.remove(Rn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new Mn(null):new Mn(this.value,o)}return this}}get(e){if(Xt(e))return this.value;{const t=Zt(e),r=this.children.get(t);return r?r.get(Rn(e)):null}}setTree(e,t){if(Xt(e))return t;{const r=Zt(e),o=(this.children.get(r)||new Mn(null)).setTree(Rn(e),t);let l;return l=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Mn(this.value,l)}}fold(e){return this.fold_(gn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(jn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,gn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Xt(e))return null;{const o=Zt(e),l=this.children.get(o);return l?l.findOnPath_(Rn(e),jn(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gn(),t)}foreachOnPath_(e,t,r){if(Xt(e))return this;{this.value&&r(t,this.value);const i=Zt(e),o=this.children.get(i);return o?o.foreachOnPath_(Rn(e),jn(t,i),r):new Mn(null)}}foreach(e){this.foreach_(gn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(jn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Os{constructor(e){this.writeTree_=e}static empty(){return new Os(new Mn(null))}}function Cd(n,e,t){if(Xt(e))return new Os(new Mn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const l=Mi(i,e);return o=o.updateChild(l,t),new Os(n.writeTree_.set(i,o))}{const i=new Mn(t),o=n.writeTree_.setTree(e,i);return new Os(o)}}}function l0(n,e,t){let r=n;return ti(t,(i,o)=>{r=Cd(r,jn(e,i),o)}),r}function BC(n,e){if(Xt(e))return Os.empty();{const t=n.writeTree_.setTree(e,new Mn(null));return new Os(t)}}function c0(n,e){return null!=Td(n,e)}function Td(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Mi(t.path,e)):null}function d0(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild($n,(r,i)=>{e.push(new nn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new nn(r,i.value))}),e}function Ba(n,e){if(Xt(e))return n;{const t=Td(n,e);return new Os(null!=t?new Mn(t):n.writeTree_.subtree(e))}}function ty(n){return n.writeTree_.isEmpty()}function bf(n,e){return h0(gn(),n.writeTree_,e)}function h0(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,k.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=h0(jn(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(jn(n,".priority"),r)),t}}function Vg(n,e){return ry(e,n)}function HC(n,e){if(n.snap)return oo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&oo(jn(n.path,t),e))return!0;return!1}function zi(n){return n.visible}function Dd(n,e,t){let r=Os.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const l=o.path;let h;if(o.snap)oo(t,l)?(h=Mi(t,l),r=Cd(r,h,o.snap)):oo(l,t)&&(h=Mi(l,t),r=Cd(r,gn(),o.snap.getChild(h)));else{if(!o.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(oo(t,l))h=Mi(t,l),r=l0(r,h,o.children);else if(oo(l,t))if(h=Mi(l,t),Xt(h))r=l0(r,gn(),o.children);else{const g=(0,k.DV)(o.children,Zt(h));if(g){const y=g.getChild(Rn(h));r=Cd(r,gn(),y)}}}}}return r}function GC(n,e,t,r,i){if(r||i){const o=Ba(n.visibleWrites,e);return!i&&ty(o)?t:i||null!=t||c0(o,gn())?bf(Dd(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(oo(y.path,e)||oo(e,y.path))},e),t||Ht.EMPTY_NODE):null}{const o=Td(n.visibleWrites,e);if(null!=o)return o;{const l=Ba(n.visibleWrites,e);return ty(l)?t:null!=t||c0(l,gn())?bf(l,t||Ht.EMPTY_NODE):null}}}function ny(n,e,t,r){return GC(n.writeTree,n.treePath,e,t,r)}function Bg(n,e){return function zx(n,e,t){let r=Ht.EMPTY_NODE;const i=Td(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild($n,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=Ba(n.visibleWrites,e);return t.forEachChild($n,(l,h)=>{const g=bf(Ba(o,new In(l)),h);r=r.updateImmediateChild(l,g)}),d0(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return d0(Ba(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function zC(n,e,t,r){return function mO(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=jn(e,t);if(c0(n.visibleWrites,o))return null;{const l=Ba(n.visibleWrites,o);return ty(l)?i.getChild(t):bf(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function jg(n,e){return function qC(n,e){return Td(n.visibleWrites,e)}(n.writeTree,jn(n.treePath,e))}function p0(n,e,t){return function _O(n,e,t,r){const i=jn(e,t),o=Td(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?bf(Ba(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function WC(n,e){return ry(jn(n.treePath,e),n.writeTree)}function ry(n,e){return{treePath:n,writeTree:e}}class KC{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,Mg(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,yf(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,Rg(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Mg(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const $g=new class ZC{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Hg{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Wl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return p0(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Zl(this.viewCache_),o=function Wx(n,e,t,r,i,o){return function f0(n,e,t,r,i,o,l){let h;const g=Ba(n.visibleWrites,e),y=Td(g,gn());if(null!=y)h=y;else{if(null==t)return[];h=bf(g,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const I=[],S=l.getCompare(),R=o?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let O=R.getNext();for(;O&&I.length<i;)0!==S(O,r)&&I.push(O),O=R.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function Sd(n,e,t,r,i,o){const l=e.eventCache;if(null!=jg(r,t))return e;{let h,g;if(Xt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Zl(e),S=Bg(r,y instanceof Ht?y:Ht.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,o)}else{const y=ny(r,Zl(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=Zt(t);if(".priority"===y){(0,k.hu)(1===ql(t),"Can't have a priority with additional path components");const I=l.getNode();g=e.serverCache.getNode();const S=zC(r,t,I,g);h=null!=S?n.filter.updatePriority(I,S):l.getNode()}else{const I=Rn(t);let S;if(l.isCompleteForChild(y)){g=e.serverCache.getNode();const R=zC(r,t,l.getNode(),g);S=null!=R?l.getNode().getImmediateChild(y).updateChild(I,R):l.getNode().getImmediateChild(y)}else S=p0(r,y,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),y,S,I,i,o):l.getNode()}}return wf(e,h,l.isFullyInitialized()||Xt(t),n.filter.filtersNodes())}}function iy(n,e,t,r,i,o,l,h){const g=e.serverCache;let y;const I=l?n.filter:n.filter.getIndexedFilter();if(Xt(t))y=I.updateFullNode(g.getNode(),r,null);else if(I.filtersNodes()&&!g.isFiltered()){const O=g.getNode().updateChild(t,r);y=I.updateFullNode(g.getNode(),O,null)}else{const O=Zt(t);if(!g.isCompleteForPath(t)&&ql(t)>1)return e;const U=Rn(t),te=g.getNode().getImmediateChild(O).updateChild(U,r);y=".priority"===O?I.updatePriority(g.getNode(),te):I.updateChild(g.getNode(),O,te,U,$g,null)}const S=a0(e,y,g.isFullyInitialized()||Xt(t),I.filtersNodes());return Sd(n,S,t,i,new Hg(i,S,o),h)}function sy(n,e,t,r,i,o,l){const h=e.eventCache;let g,y;const I=new Hg(i,e,o);if(Xt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=wf(e,y,!0,n.filter.filtersNodes());else{const S=Zt(t);if(".priority"===S)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=wf(e,y,h.isFullyInitialized(),h.isFiltered());else{const R=Rn(t),O=h.getNode().getImmediateChild(S);let U;if(Xt(R))U=r;else{const Z=I.getCompleteChild(S);U=null!=Z?".priority"===yd(R)&&Z.getChild(vC(R)).isEmpty()?Z:Z.updateChild(R,r):Ht.EMPTY_NODE}g=O.equals(U)?e:wf(e,n.filter.updateChild(h.getNode(),S,U,R,I,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function oy(n,e){return n.eventCache.isCompleteForChild(e)}function JC(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function XC(n,e,t,r,i,o,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=Xt(t)?r:new Mn(null).setTree(t,r);const I=e.serverCache.getNode();return y.children.inorderTraversal((S,R)=>{if(I.hasChild(S)){const U=JC(0,e.serverCache.getNode().getImmediateChild(S),R);g=iy(n,g,new In(S),U,i,o,l,h)}}),y.children.inorderTraversal((S,R)=>{const O=!e.serverCache.isCompleteForChild(S)&&null===R.value;if(!I.hasChild(S)&&!O){const Z=JC(0,e.serverCache.getNode().getImmediateChild(S),R);g=iy(n,g,new In(S),Z,i,o,l,h)}}),g}class eT{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new kC(r.getIndex()),o=function OC(n){return n.loadsAllData()?new kC(n.getIndex()):n.hasLimit()?new Nx(n):new Ng(n)}(r);this.processor_=function yO(n){return{filter:n}}(o);const l=t.serverCache,h=t.eventCache,g=i.updateFullNode(Ht.EMPTY_NODE,l.getNode(),null),y=o.updateFullNode(Ht.EMPTY_NODE,h.getNode(),null),I=new Wl(g,l.isFullyInitialized(),i.filtersNodes()),S=new Wl(y,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=ey(S,I),this.eventGenerator_=new Bx(this.query_)}get query(){return this.query_}}function nT(n,e){const t=Zl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Xt(e)&&!t.getImmediateChild(Zt(e)).isEmpty())?t.getChild(e):null}function g0(n){return 0===n.eventRegistrations_.length}function rT(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function m0(n,e,t,r){e.type===uo.MERGE&&null!==e.source.queryId&&((0,k.hu)(Zl(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(Ef(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function Kx(n,e,t,r,i){const o=new KC;let l,h;if(t.type===uo.OVERWRITE){const y=t;y.source.fromUser?l=sy(n,e,y.path,y.snap,r,i,o):((0,k.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!Xt(y.path),l=iy(n,e,y.path,y.snap,r,i,h,o))}else if(t.type===uo.MERGE){const y=t;y.source.fromUser?l=function vO(n,e,t,r,i,o,l){let h=e;return r.foreach((g,y)=>{const I=jn(t,g);oy(e,Zt(I))&&(h=sy(n,h,I,y,i,o,l))}),r.foreach((g,y)=>{const I=jn(t,g);oy(e,Zt(I))||(h=sy(n,h,I,y,i,o,l))}),h}(n,e,y.path,y.children,r,i,o):((0,k.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),l=XC(n,e,y.path,y.children,r,i,h,o))}else if(t.type===uo.ACK_USER_WRITE){const y=t;l=y.revert?function Qx(n,e,t,r,i,o){let l;if(null!=jg(r,t))return e;{const h=new Hg(r,e,i),g=e.eventCache.getNode();let y;if(Xt(t)||".priority"===Zt(t)){let I;if(e.serverCache.isFullyInitialized())I=ny(r,Zl(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Ht,"serverChildren would be complete if leaf node"),I=Bg(r,S)}y=n.filter.updateFullNode(g,I,o)}else{const I=Zt(t);let S=p0(r,I,e.serverCache);null==S&&e.serverCache.isCompleteForChild(I)&&(S=g.getImmediateChild(I)),y=null!=S?n.filter.updateChild(g,I,S,Rn(t),h,o):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(g,I,Ht.EMPTY_NODE,Rn(t),h,o):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=ny(r,Zl(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,o)))}return l=e.serverCache.isFullyInitialized()||null!=jg(r,gn()),wf(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,o):function Zx(n,e,t,r,i,o,l){if(null!=jg(i,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(Xt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return iy(n,e,t,g.getNode().getChild(t),i,o,h,l);if(Xt(t)){let y=new Mn(null);return g.getNode().forEachChild(La,(I,S)=>{y=y.set(new In(I),S)}),XC(n,e,t,y,i,o,h,l)}return e}{let y=new Mn(null);return r.foreach((I,S)=>{const R=jn(t,I);g.isCompleteForPath(R)&&(y=y.set(I,g.getNode().getChild(R)))}),XC(n,e,t,y,i,o,h,l)}}(n,e,y.path,y.affectedTree,r,i,o)}else{if(t.type!==uo.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function Yx(n,e,t,r,i){const o=e.serverCache;return Sd(n,a0(e,o.getNode(),o.isFullyInitialized()||Xt(t),o.isFiltered()),t,r,$g,i)}(n,e,t.path,r,o)}const g=o.getChanges();return function QC(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ef(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(n0(Ef(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function YC(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,k.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,_0(n,o.changes,o.viewCache.eventCache.getNode(),null)}function _0(n,e,t,r){return function jx(n,e,t,r){const i=[],o=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function Mx(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Kl(n,i,"child_removed",e,r,t),Kl(n,i,"child_added",e,r,t),Kl(n,i,"child_moved",o,r,t),Kl(n,i,"child_changed",e,r,t),Kl(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Gg,Rd;class y0{constructor(){this.views=new Map}}function sT(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,k.hu)(null!=o,"SyncTree gave us an op for an invalid query."),m0(o,e,t,r)}{let o=[];for(const l of n.views.values())o=o.concat(m0(l,e,t,r));return o}}function v0(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=ny(t,i?r:null),g=!1;h?g=!0:r instanceof Ht?(h=Bg(t,r),g=!1):(h=Ht.EMPTY_NODE,g=!1);const y=ey(new Wl(h,g,!1),new Wl(r,i,!1));return new eT(e,y)}return l}function rR(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ad(n,e){let t=null;for(const r of n.views.values())t=t||nT(r,e);return t}function iR(n,e){return e._queryParams.loadsAllData()?w0(n):n.views.get(e._queryIdentifier)}function sR(n,e){return null!=iR(n,e)}function xd(n){return null!=w0(n)}function w0(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let ay=1;class E0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mn(null),this.pendingWriteTree_=function Ug(){return{visibleWrites:Os.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uy(n,e,t,r,i){return function Hx(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Cd(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?qg(n,new ku({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ja(n,e,t=!1){const r=function $C(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Gx(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&HC(h,r.path)?i=!1:oo(r.path,h.path)&&(o=!0)),l--}return!!i&&(o?(function qx(n){n.visibleWrites=Dd(n.allWrites,zi,gn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=BC(n.visibleWrites,r.path):ti(r.children,g=>{n.visibleWrites=BC(n.visibleWrites,jn(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let o=new Mn(null);return null!=r.snap?o=o.set(gn(),!0):ti(r.children,l=>{o=o.set(new In(l),!0)}),qg(n,new ks(r.path,o,t))}return[]}function If(n,e,t){return qg(n,new ku({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function ly(n,e,t,r,i=!1){const o=e._path,l=n.syncPointTree_.get(o);let h=[];if(l&&("default"===e._queryIdentifier||sR(l,e))){const g=function EO(n,e,t,r){const i=e._queryIdentifier,o=[];let l=[];const h=xd(n);if("default"===i)for(const[g,y]of n.views.entries())l=l.concat(rT(y,t,r)),g0(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||o.push(y.query));else{const g=n.views.get(i);g&&(l=l.concat(rT(g,t,r)),g0(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||o.push(g.query)))}return h&&!xd(n)&&o.push(new(function tR(){return(0,k.hu)(Gg,"Reference.ts has not been loaded"),Gg}())(e._repo,e._path)),{removed:o,events:l}}(l,e,t,r);(function nR(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=g.removed;if(h=g.events,!i){const I=-1!==y.findIndex(R=>R._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(o,(R,O)=>xd(O));if(I&&!S){const R=n.syncPointTree_.subtree(o);if(!R.isEmpty()){const O=function $o(n){return n.fold((e,t,r)=>{if(t&&xd(t))return[w0(t)];{let i=[];return t&&(i=rR(t)),ti(r,(o,l)=>{i=i.concat(l)}),i}})}(R);for(let U=0;U<O.length;++U){const Z=O[U],te=Z.query,$e=cT(n,Z);n.listenProvider_.startListening(zg(te),dy(n,te),$e.hashFn,$e.onComplete)}}}!S&&y.length>0&&!r&&(I?n.listenProvider_.stopListening(zg(e),null):y.forEach(R=>{const O=n.queryToTagMap.get(hy(R));n.listenProvider_.stopListening(zg(R),O)}))}!function C0(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=hy(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,y)}return h}function aT(n,e,t,r){const i=fy(n,r);if(null!=i){const o=py(i),l=o.path,h=o.queryId,g=Mi(l,e);return dT(n,l,new ku(Og(h),g,t))}return[]}function b0(n,e,t,r=!1){const i=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(i,(R,O)=>{const U=Mi(R,i);o=o||Ad(O,U),l=l||xd(O)});let g,h=n.syncPointTree_.get(i);h?(l=l||xd(h),o=o||Ad(h,gn())):(h=new y0,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=o?g=!0:(g=!1,o=Ht.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((O,U)=>{const Z=Ad(U,gn());Z&&(o=o.updateImmediateChild(O,Z))}));const y=sR(h,e);if(!y&&!e._queryParams.loadsAllData()){const R=hy(e);(0,k.hu)(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const O=function uR(){return ay++}();n.queryToTagMap.set(R,O),n.tagToQueryMap.set(O,R)}let S=function wO(n,e,t,r,i,o){const l=v0(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function Xx(n,e){n.eventRegistrations_.push(e)}(l,t),function eR(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild($n,(o,l)=>{r.push(Rg(o,l))}),t.isFullyInitialized()&&r.push(n0(t.getNode())),_0(n,r,t.getNode(),e)}(l,t)}(h,e,t,Vg(n.pendingWriteTree_,i),o,g);if(!y&&!l&&!r){const R=iR(h,e);S=S.concat(function DO(n,e,t){const r=e._path,i=dy(n,e),o=cT(n,t),l=n.listenProvider_.startListening(zg(e),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!xd(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((y,I,S)=>{if(!Xt(y)&&I&&xd(I))return[w0(I).query];{let R=[];return I&&(R=R.concat(rR(I).map(O=>O.query))),ti(S,(O,U)=>{R=R.concat(U)}),R}});for(let y=0;y<g.length;++y){const I=g[y];n.listenProvider_.stopListening(zg(I),dy(n,I))}}return l}(n,e,R))}return S}function I0(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,h)=>{const y=Ad(h,Mi(l,e));if(y)return y});return GC(i,e,o,t,!0)}function qg(n,e){return uT(e,n.syncPointTree_,null,Vg(n.pendingWriteTree_,gn()))}function uT(n,e,t,r){if(Xt(n.path))return lT(n,e,t,r);{const i=e.get(gn());null==t&&null!=i&&(t=Ad(i,gn()));let o=[];const l=Zt(n.path),h=n.operationForChild(l),g=e.children.get(l);if(g&&h){const y=t?t.getImmediateChild(l):null,I=WC(r,l);o=o.concat(uT(h,g,y,I))}return i&&(o=o.concat(sT(i,n,r,t))),o}}function lT(n,e,t,r){const i=e.get(gn());null==t&&null!=i&&(t=Ad(i,gn()));let o=[];return e.children.inorderTraversal((l,h)=>{const g=t?t.getImmediateChild(l):null,y=WC(r,l),I=n.operationForChild(l);I&&(o=o.concat(lT(I,h,g,y)))}),i&&(o=o.concat(sT(i,n,r,t))),o}function cT(n,e){const t=e.query,r=dy(n,t);return{hashFn:()=>(function tT(n){return n.viewCache_.serverCache.getNode()}(e)||Ht.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function aR(n,e,t){const r=fy(n,t);if(r){const i=py(r),o=i.path,l=i.queryId,h=Mi(o,e);return dT(n,o,new Fg(Og(l),h))}return[]}(n,t._path,r):function CO(n,e){return qg(n,new Fg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function KI(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return ly(n,t,null,o)}}}}function dy(n,e){const t=hy(e);return n.queryToTagMap.get(t)}function hy(n){return n._path.toString()+"$"+n._queryIdentifier}function fy(n,e){return n.tagToQueryMap.get(e)}function py(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new In(n.substr(0,e))}}function dT(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),sT(r,t,Vg(n.pendingWriteTree_,e),null)}function zg(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function oT(){return(0,k.hu)(Rd,"Reference.ts has not been loaded"),Rd}())(n._repo,n._path):n}class hs{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new hs(t)}node(){return this.node_}}class T0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=jn(this.path_,e);return new T0(this.syncTree_,t)}node(){return I0(this.syncTree_,this.path_)}}const D0=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},hT=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?lR(n[".sv"],e,t):"object"==typeof n[".sv"]?S0(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},lR=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},S0=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},A0=function(n,e,t,r){return x0(e,new T0(t,n),r)},gy=function(n,e,t){return x0(n,new hs(e),t)};function x0(n,e,t){const r=n.getPriority().val(),i=hT(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,h=hT(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new zl(h,ir(i)):n}{const l=n;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new zl(i))),l.forEachChild($n,(h,g)=>{const y=x0(g,e.getImmediateChild(h),t);y!==g&&(o=o.updateImmediateChild(h,y))}),o}}class my{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Wg(n,e){let t=e instanceof In?e:new In(e),r=n,i=Zt(t);for(;null!==i;){const o=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new my(i,r,o),t=Rn(t),i=Zt(t)}return r}function Md(n){return n.node.value}function _y(n,e){n.node.value=e,yy(n)}function fT(n){return n.node.childCount>0}function lo(n,e){ti(n.node.children,(t,r)=>{e(new my(t,n,r))})}function Ou(n,e,t,r){t&&!r&&e(n),lo(n,i=>{Ou(i,e,!0,r)}),t&&r&&e(n)}function Nd(n){return new In(null===n.parent?n.name:Nd(n.parent)+"/"+n.name)}function yy(n){null!==n.parent&&function cR(n,e,t){const r=function R0(n){return void 0===Md(n)&&!fT(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,yy(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,yy(n))}(n.parent,n.name,n)}const SO=/[\[\].#$\/\u0000-\u001F\u007F]/,dR=/[\[\].#$\u0000-\u001F\u007F]/,M0=10485760,vy=function(n){return"string"==typeof n&&0!==n.length&&!SO.test(n)},gT=function(n){return"string"==typeof n&&0!==n.length&&!dR.test(n)},wy=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!B_(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Ho=function(n,e,t,r){r&&void 0===e||Kg((0,k.gK)(n,"value"),e,t)},Kg=function(n,e,t){const r=t instanceof In?new wC(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+vd(r));if("function"==typeof e)throw new Error(n+"contains a function "+vd(r)+" with contents = "+e.toString());if(B_(e))throw new Error(n+"contains "+e.toString()+" "+vd(r));if("string"==typeof e&&e.length>M0/3&&(0,k.ug)(e)>M0)throw new Error(n+"contains a string greater than "+M0+" utf8 bytes "+vd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(ti(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!vy(l)))throw new Error(n+" contains an invalid key ("+l+") "+vd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function EC(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),bC(n)})(r,l),Kg(n,h,r),function Ix(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+vd(r)+" in addition to actual children.")}},hR=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];ti(e,(l,h)=>{const g=new In(l);if(Kg(i,h,jn(t,g)),".priority"===yd(g)&&!wy(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=pf(r);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!vy(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(bx);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&oo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},Zg=function(n,e,t){if(!t||void 0!==e){if(B_(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!wy(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cf=function(n,e,t,r){if(!(r&&void 0===t||vy(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Tf=function(n,e,t,r){if(!(r&&void 0===t||gT(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yT=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Tf(n,e,t,r)},Fs=function(n,e){if(".info"===Zt(e))throw new Error(n+" failed = Can't modify data under /.info/")},N0=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!vy(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gT(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ey{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Pd(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!Ig(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function P0(n,e,t){Pd(n,t),vT(n,r=>Ig(r,e))}function Ls(n,e,t){Pd(n,t),vT(n,r=>oo(r,e)||oo(e,r))}function vT(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(AO(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function AO(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();$l&&ei("event: "+t.toString()),pd(r)}}}const fR="repo_interrupt",xO=25;class wT{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ey,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kg(),this.transactionQueueTree_=new my,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ET(n){const t=n.infoData_.getNode(new In(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Yg(n){return D0({timestamp:ET(n)})}function gR(n,e,t,r,i){n.dataUpdateCount++;const o=new In(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,k.UI)(t,y=>ir(y));l=function cy(n,e,t,r){const i=fy(n,r);if(i){const o=py(i),l=o.path,h=o.queryId,g=Mi(l,e),y=Mn.fromObject(t);return dT(n,l,new Ua(Og(h),g,y))}return[]}(n.serverSyncTree_,o,g,i)}else{const g=ir(t);l=aT(n.serverSyncTree_,o,g,i)}else if(r){const g=(0,k.UI)(t,y=>ir(y));l=function oR(n,e,t){const r=Mn.fromObject(t);return qg(n,new Ua({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,g)}else{const g=ir(t);l=If(n.serverSyncTree_,o,g)}let h=o;l.length>0&&(h=Sf(n,o)),Ls(n.eventQueue_,h,l)}function mR(n,e){bT(n,"connected",e),!1===e&&function vR(n){Fu(n,"onDisconnectEvents");const e=Yg(n),t=kg();J_(n.onDisconnect_,gn(),(i,o)=>{const l=A0(i,o,n.serverSyncTree_,e);bd(t,i,l)});let r=[];J_(t,gn(),(i,o)=>{r=r.concat(If(n.serverSyncTree_,i,o));const l=Iy(n,i);Sf(n,l)}),n.onDisconnect_=kg(),Ls(n.eventQueue_,gn(),r)}(n)}function bT(n,e,t){const r=new In("/.info/"+e),i=ir(t);n.infoData_.updateSnapshot(r,i);const o=If(n.infoSyncTree_,r,i);Ls(n.eventQueue_,r,o)}function k0(n){return n.nextWriteId_++}function Df(n,e,t,r,i){Fu(n,"set",{path:e.toString(),value:t,priority:r});const o=Yg(n),l=ir(t,r),h=I0(n.serverSyncTree_,e),g=gy(l,h,o),y=k0(n),I=uy(n.serverSyncTree_,e,g,y,!0);Pd(n.eventQueue_,I),n.server_.put(e.toString(),l.val(!0),(R,O)=>{const U="ok"===R;U||Ri("set at "+e+" failed: "+R);const Z=ja(n.serverSyncTree_,y,!U);Ls(n.eventQueue_,e,Z),kd(0,i,R,O)});const S=Iy(n,e);Sf(n,S),Ls(n.eventQueue_,S,[])}function IT(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Q_(n.onDisconnect_,e),kd(0,t,r,i)})}function Yl(n,e,t,r){const i=ir(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,l)=>{"ok"===o&&bd(n.onDisconnect_,e,i),kd(0,r,o,l)})}function L0(n,e,t){let r;r=".info"===Zt(e._path)?ly(n.infoSyncTree_,e,t):ly(n.serverSyncTree_,e,t),P0(n.eventQueue_,e._path,r)}function by(n){n.persistentConnection_&&n.persistentConnection_.interrupt(fR)}function Fu(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ei(t,...e)}function kd(n,e,t,r){e&&pd(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const l=new Error(o);l.code=i,e(l)}})}function TT(n,e,t){return I0(n.serverSyncTree_,e,t)||Ht.EMPTY_NODE}function U0(n,e=n.transactionQueueTree_){if(e||Qg(n,e),Md(e)){const t=AT(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function DT(n,e,t){const r=t.map(y=>y.currentWriteId),i=TT(n,e,r);let o=i;const l=i.hash();for(let y=0;y<t.length;y++){const I=t[y];(0,k.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const S=Mi(e,I.path);o=o.updateChild(S,I.currentOutputSnapshotRaw)}const h=o.val(!0),g=e;n.server_.put(g.toString(),h,y=>{Fu(n,"transaction put response",{path:g.toString(),status:y});let I=[];if("ok"===y){const S=[];for(let R=0;R<t.length;R++)t[R].status=2,I=I.concat(ja(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&S.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();Qg(n,Wg(n.transactionQueueTree_,e)),U0(n,n.transactionQueueTree_),Ls(n.eventQueue_,e,I);for(let R=0;R<S.length;R++)pd(S[R])}else{if("datastale"===y)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Ri("transaction at "+g.toString()+" failed: "+y);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=y}Sf(n,e)}},l)}(n,Nd(e),t)}else fT(e)&&lo(e,t=>{U0(n,t)})}function Sf(n,e){const t=ST(n,e),r=Nd(t);return function wR(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],y=Mi(t,g.path);let S,I=!1;if((0,k.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)I=!0,S=g.abortReason,i=i.concat(ja(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=xO)I=!0,S="maxretry",i=i.concat(ja(n.serverSyncTree_,g.currentWriteId,!0));else{const R=TT(n,g.path,l);g.currentInputSnapshot=R;const O=e[h].update(R.val());if(void 0!==O){Kg("transaction failed: Data returned ",O,g.path);let U=ir(O);"object"==typeof O&&null!=O&&(0,k.r3)(O,".priority")||(U=U.updatePriority(R.getPriority()));const te=g.currentWriteId,$e=Yg(n),Ke=gy(U,R,$e);g.currentOutputSnapshotRaw=U,g.currentOutputSnapshotResolved=Ke,g.currentWriteId=k0(n),l.splice(l.indexOf(te),1),i=i.concat(uy(n.serverSyncTree_,g.path,Ke,g.currentWriteId,g.applyLocally)),i=i.concat(ja(n.serverSyncTree_,te,!0))}else I=!0,S="nodata",i=i.concat(ja(n.serverSyncTree_,g.currentWriteId,!0))}Ls(n.eventQueue_,t,i),i=[],I&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}Qg(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)pd(r[h]);U0(n,n.transactionQueueTree_)}(n,AT(n,t),r),r}function ST(n,e){let t,r=n.transactionQueueTree_;for(t=Zt(e);null!==t&&void 0===Md(r);)r=Wg(r,t),t=Zt(e=Rn(e));return r}function AT(n,e){const t=[];return B0(n,e,t),t.sort((r,i)=>r.order-i.order),t}function B0(n,e,t){const r=Md(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);lo(e,i=>{B0(n,i,t)})}function Qg(n,e){const t=Md(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,_y(e,t.length>0?t:void 0)}lo(e,r=>{Qg(n,r)})}function Iy(n,e){const t=Nd(ST(n,e)),r=Wg(n.transactionQueueTree_,e);return function pT(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{j0(n,i)}),j0(n,r),Ou(r,i=>{j0(n,i)}),t}function j0(n,e){const t=Md(e);if(t){const r=[];let i=[],o=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(ja(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?_y(e,void 0):t.length=o+1,Ls(n.eventQueue_,Nd(e),i);for(let l=0;l<r.length;l++)pd(r[l])}}const Jg=function(n,e){const t=NO(n),r=t.namespace;return"firebase.com"===t.domain&&Fa(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Fa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ri("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Hw(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new In(t.pathString)}},NO=function(n){let e="",t="",r="",i="",o="",l=!0,h="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let I=n.indexOf("/");-1===I&&(I=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(I,S)),I<S&&(i=function ER(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(I,S)));const R=function xT(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ri(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));y=e.indexOf(":"),y>=0?(l="https"===h||"wss"===h,g=parseInt(e.substring(y+1),10)):y=e.length;const O=e.slice(0,y);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const U=e.indexOf(".");r=e.substring(0,U).toLowerCase(),t=e.substring(U+1),o=r}"ns"in R&&(o=R.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:o}},$0="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",H0=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=$0.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=$0.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class RT{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class MT{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class NT{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class bR{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return IT(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Fs("OnDisconnect.remove",this._path);const e=new k.BH;return Yl(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Fs("OnDisconnect.set",this._path),Ho("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return Yl(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Fs("OnDisconnect.setWithPriority",this._path),Ho("OnDisconnect.setWithPriority",e,this._path,!1),Zg("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function CT(n,e,t,r,i){const o=ir(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,h)=>{"ok"===l&&bd(n.onDisconnect_,e,o),kd(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Fs("OnDisconnect.update",this._path),hR("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function O0(n,e,t,r){if((0,k.xb)(t))return ei("onDisconnect().update() called with empty data.  Don't do anything."),void kd(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&ti(t,(l,h)=>{const g=ir(h);bd(n.onDisconnect_,jn(e,l),g)}),kd(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class fs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Xt(this._path)?null:yd(this._path)}get ref(){return new Go(this._repo,this._path)}get _queryIdentifier(){const e=vf(this._queryParams),t=Vw(e);return"{}"===t?"default":t}get _queryObject(){return vf(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof fs))return!1;const t=this._repo===e._repo,r=Ig(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ex(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Cy(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ql(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===La){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Hl)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Pu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===$n){if(null!=e&&!wy(e)||null!=t&&!wy(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof e0||n.getIndex()===t0,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function G0(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Go extends fs{constructor(e,t){super(e,t,new Z_,!1)}get parent(){const e=vC(this._path);return null===e?null:new Go(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Af{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new In(e),r=xf(this.ref,e);return new Af(this._node.getChild(t),r,$n)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Af(i,xf(this.ref,r),$n)))}hasChild(e){const t=new In(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function IR(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?xf(n._root,e):n._root}function PT(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=Jg(e,n._repo.repoInfo_.nodeAdmin);N0("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Fa("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),IR(n,t.path.toString())}function xf(n,e){return null===Zt((n=(0,k.m9)(n))._path)?yT("child","path",e,!1):Tf("child","path",e,!1),new Go(n._repo,jn(n._path,e))}function kT(n,e){n=(0,k.m9)(n),Fs("set",n._path),Ho("set",e,n._path,!1);const t=new k.BH;return Df(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function a(n,e){hR("update",e,n._path,!1);const t=new k.BH;return function yR(n,e,t,r){Fu(n,"update",{path:e.toString(),value:t});let i=!0;const o=Yg(n),l={};if(ti(t,(h,g)=>{i=!1,l[h]=A0(jn(e,h),ir(g),n.serverSyncTree_,o)}),i)ei("update() called with empty data.  Don't do anything."),kd(0,r,"ok",void 0);else{const h=k0(n),g=function IO(n,e,t,r){!function jC(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=l0(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Mn.fromObject(t);return qg(n,new Ua({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);Pd(n.eventQueue_,g),n.server_.merge(e.toString(),t,(y,I)=>{const S="ok"===y;S||Ri("update at "+e+" failed: "+y);const R=ja(n.serverSyncTree_,h,!S),O=R.length>0?Sf(n,e):e;Ls(n.eventQueue_,O,R),kd(0,r,y,I)}),ti(t,y=>{const I=Iy(n,jn(e,y));Sf(n,I)}),Ls(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function u(n){n=(0,k.m9)(n);const e=new NT(()=>{}),t=new c(e);return function _R(n,e,t){const r=function TO(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,I)=>{const S=Mi(y,t);r=r||Ad(I,S)});let i=n.syncPointTree_.get(t);i?r=r||Ad(i,gn()):(i=new y0,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,l=o?new Wl(r,!0,!1):null;return function Jx(n){return Ef(n.viewCache_)}(v0(i,e,Vg(n.pendingWriteTree_,e._path),o?l.getNode():Ht.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=ir(i).withIndex(e._queryParams.getIndex());let l;if(b0(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=If(n.serverSyncTree_,e._path,o);else{const h=dy(n.serverSyncTree_,e);l=aT(n.serverSyncTree_,e._path,o,h)}return Ls(n.eventQueue_,e._path,l),ly(n.serverSyncTree_,e,t,null,!0),o},i=>(Fu(n,"get for query "+(0,k.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Af(r,new Go(n._repo,n._path),n._queryParams.getIndex()))}class c{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new RT("value",this,new Af(e.snapshotNode,new Go(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new MT(this,e,t):null}matches(e){return e instanceof c&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class f{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new MT(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=xf(new Go(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new RT(e.type,this,new Af(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof f&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function m(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const g=t,y=(I,S)=>{L0(n._repo,n,h),g(I,S)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new NT(t,o||void 0),h="value"===e?new c(l):new f(e,l);return function F0(n,e,t){let r;r=".info"===Zt(e._path)?b0(n.infoSyncTree_,e,t):b0(n.serverSyncTree_,e,t),P0(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>L0(n._repo,n,h)}function w(n,e,t,r){return m(n,"value",e,t,r)}function b(n,e,t,r){return m(n,"child_added",e,t,r)}function C(n,e,t,r){return m(n,"child_changed",e,t,r)}function x(n,e,t,r){return m(n,"child_moved",e,t,r)}function N(n,e,t,r){return m(n,"child_removed",e,t,r)}function V(n,e,t){let r=null;const i=t?new NT(t):null;"value"===e?r=new c(i):e&&(r=new f(e,i)),L0(n._repo,n,r)}class z{}class X extends z{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ho("endAt",this._value,e._path,!0);const t=s0(e._queryParams,this._value,this._key);if(G0(t),Ql(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fs(e._repo,e._path,t,e._orderByCalled)}}class Ue extends z{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ho("endBefore",this._value,e._path,!1);const t=function Fx(n,e,t){let r;return r=s0(n,e,n.index_===La||t?t:Hl),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(G0(t),Ql(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fs(e._repo,e._path,t,e._orderByCalled)}}class lt extends z{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ho("startAt",this._value,e._path,!0);const t=r0(e._queryParams,this._value,this._key);if(G0(t),Ql(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fs(e._repo,e._path,t,e._orderByCalled)}}class Ne extends z{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ho("startAfter",this._value,e._path,!1);const t=function Ox(n,e,t){let r;return r=r0(n,e,n.index_===La||t?t:Pu),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(G0(t),Ql(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fs(e._repo,e._path,t,e._orderByCalled)}}class Yn extends z{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fs(e._repo,e._path,function Px(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class FO extends z{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fs(e._repo,e._path,function kx(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class tj extends z{constructor(e){super(),this._path=e}_apply(e){Cy(e,"orderByChild");const t=new In(this._path);if(Xt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new e0(t),i=Y_(e._queryParams,r);return Ql(i),new fs(e._repo,e._path,i,!0)}}class rj extends z{_apply(e){Cy(e,"orderByKey");const t=Y_(e._queryParams,La);return Ql(t),new fs(e._repo,e._path,t,!0)}}class sj extends z{_apply(e){Cy(e,"orderByPriority");const t=Y_(e._queryParams,$n);return Ql(t),new fs(e._repo,e._path,t,!0)}}class aj extends z{_apply(e){Cy(e,"orderByValue");const t=Y_(e._queryParams,t0);return Ql(t),new fs(e._repo,e._path,t,!0)}}class lj extends z{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ho("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new X(this._value,this._key)._apply(new lt(this._value,this._key)._apply(e))}}function Lu(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function iT(n){(0,k.hu)(!Gg,"__referenceConstructor has already been defined"),Gg=n})(Go),function bO(n){(0,k.hu)(!Rd,"__referenceConstructor has already been defined"),Rd=n}(Go);const dj="FIREBASE_DATABASE_EMULATOR_HOST",CR={};let LO=!1;function VO(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Fa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ei("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,l=Jg(o,i),h=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env[dj]),y?(g=!0,o=`http://${y}?ns=${h.namespace}`,l=Jg(o,i),h=l.repoInfo):g=!l.repoInfo.secure;const I=i&&g?new jo(jo.OWNER):new Bw(n.name,n.options,e);N0("Invalid Firebase Database URL",l),Xt(l.path)||Fa("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function pj(n,e,t,r){let i=CR[e.name];i||(i={},CR[e.name]=i);let o=i[n.toURLString()];return o&&Fa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new wT(n,LO,t,r),i[n.toURLString()]=o,o}(h,n,I,new XI(n.name,t));return new mj(S,n)}class mj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function pR(n,e,t){if(n.stats_=Zn(n.repoInfo_),n.forceRestClient_||JI())n.server_=new Pg(n.repoInfo_,(r,i,o,l)=>{gR(n,r,i,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>mR(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new wd(n.repoInfo_,e,(r,i,o,l)=>{gR(n,r,i,o,l)},r=>{mR(n,r)},r=>{!function RO(n,e){ti(e,(t,r)=>{bT(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function hO(n,e){const t=n.toString();return df[t]||(df[t]=e()),df[t]}(n.repoInfo_,()=>new Ux(n.stats_,n.server_)),n.infoData_=new LC,n.infoSyncTree_=new E0({startListening:(r,i,o,l)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=If(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),bT(n,"connected",!1),n.serverSyncTree_=new E0({startListening:(r,i,o,l)=>(n.server_.listen(r,o,i,(h,g)=>{const y=l(h,g);Ls(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Go(this._repo,gn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function fj(n,e){const t=CR[e];(!t||t[n.key]!==n)&&Fa(`Database ${e}(${n.repoInfo_}) has already been deleted.`),by(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Fa("Cannot call "+e+" on a deleted database.")}}function UO(){Ww.IS_TRANSPORT_INITIALIZED&&Ri("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function _j(){UO(),Gl.forceDisallow()}function yj(){UO(),hf.forceDisallow(),Gl.forceAllow()}function Ej(n,e){Fw(n,e)}const Ij={".sv":"timestamp"};class Dj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}wd.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},wd.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function bj(n){$I(xi.SDK_VERSION),(0,xi._registerComponent)(new qi.wA("database",(e,{instanceIdentifier:t})=>VO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,xi.registerVersion)(Mw,"0.14.1",n),(0,xi.registerVersion)(Mw,"0.14.1","esm2017")}();const Rj=new Bo.Yd("@firebase/database-compat"),jO=function(n){Rj.warn("FIREBASE WARNING: "+n)};class Pj{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,jO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class kj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Rf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Tf("DataSnapshot.child","path",e,!1),new Rf(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Tf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Rf(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new qo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Wi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=Wi.getCancelAndContextArgs_("Query.on",r,i),h=(y,I)=>{t.call(l.context,new Rf(this.database,y),I)};h.userCallback=t,h.context=l.context;const g=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(e){case"value":return w(this._delegate,h,g),t;case"child_added":return b(this._delegate,h,g),t;case"child_removed":return N(this._delegate,h,g),t;case"child_changed":return C(this._delegate,h,g),t;case"child_moved":return x(this._delegate,h,g),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,V(this._delegate,e,i)}else V(this._delegate,e)}get(){return u(this._delegate).then(e=>new Rf(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const o=Wi.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(y,I)=>{const S=new Rf(this.database,y);t&&t.call(o.context,S,I),l.resolve(S)};h.userCallback=t,h.context=o.context;const g=y=>{o.cancel&&o.cancel.call(o.context,y),l.reject(y)};switch(e){case"value":w(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":b(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":N(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":C(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":x(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Wi(this.database,Lu(this._delegate,function Er(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Yn(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Wi(this.database,Lu(this._delegate,function ej(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new FO(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Wi(this.database,Lu(this._delegate,function nj(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Tf("orderByChild","path",n,!1),new tj(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Wi(this.database,Lu(this._delegate,function ij(){return new rj}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Wi(this.database,Lu(this._delegate,function oj(){return new sj}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Wi(this.database,Lu(this._delegate,function uj(){return new aj}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Wi(this.database,Lu(this._delegate,function Pt(n=null,e){return Cf("startAt","key",e,!0),new lt(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Wi(this.database,Lu(this._delegate,function $t(n,e){return Cf("startAfter","key",e,!0),new Ne(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Wi(this.database,Lu(this._delegate,function be(n,e){return Cf("endAt","key",e,!0),new X(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Wi(this.database,Lu(this._delegate,function Ye(n,e){return Cf("endBefore","key",e,!0),new Ue(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Wi(this.database,Lu(this._delegate,function cj(n,e){return Cf("equalTo","key",e,!0),new lj(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Wi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new qo(this.database,new Go(this._delegate._repo,this._delegate._path))}}class qo extends Wi{constructor(e,t){super(e,new fs(t._repo,t._path,new Z_,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new qo(this.database,xf(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new qo(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new qo(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=kT(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,jO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fs("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=a(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function s(n,e,t){if(Fs("setWithPriority",n._path),Ho("setWithPriority",e,n._path,!1),Zg("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return Df(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function kO(n){return Fs("remove",n._path),kT(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Sj(n,e,t){var r;if(n=(0,k.m9)(n),Fs("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new k.BH,h=w(n,()=>{});return function MO(n,e,t,r,i,o){Fu(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:Pw(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=TT(n,e,void 0);l.currentInputSnapshot=h;const g=l.update(h.val());if(void 0===g)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Kg("transaction failed: Data returned ",g,l.path),l.status=0;const y=Wg(n.transactionQueueTree_,e),I=Md(y)||[];let S;I.push(l),_y(y,I),"object"==typeof g&&null!==g&&(0,k.r3)(g,".priority")?(S=(0,k.DV)(g,".priority"),(0,k.hu)(wy(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(I0(n.serverSyncTree_,e)||Ht.EMPTY_NODE).getPriority().val();const R=Yg(n),O=ir(g,S),U=gy(O,h,R);l.currentOutputSnapshotRaw=O,l.currentOutputSnapshotResolved=U,l.currentWriteId=k0(n);const Z=uy(n.serverSyncTree_,e,U,l.currentWriteId,l.applyLocally);Ls(n.eventQueue_,e,Z),U0(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,y,I)=>{let S=null;g?o.reject(g):(S=new Af(I,new Go(n._repo,n._path),$n),o.resolve(new Dj(y,S)))},h,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new kj(o.committed,new Rf(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function OO(n,e){n=(0,k.m9)(n),Fs("setPriority",n._path),Zg("setPriority",e,!1);const t=new k.BH;return Df(n._repo,jn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function PO(n,e){n=(0,k.m9)(n),Fs("push",n._path),Ho("push",e,n._path,!0);const t=ET(n._repo),r=H0(t),i=xf(n,r),o=xf(n,r);let l;return l=null!=e?kT(o,e).then(()=>o):Promise.resolve(o),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new qo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const o=new qo(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Fs("Reference.onDisconnect",this._delegate._path),new Pj(new bR(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class q0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:_j,forceLongPolling:yj}}useEmulator(e,t,r={}){!function BO(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Fa("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Fa('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new jo(jo.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);o=new jo(l)}!function hj(n,e,t,r){n.repoInfo_=new Hw(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof qo){const t=PT(this._delegate,e.toString());return new qo(this,t)}{const t=IR(this._delegate,e);return new qo(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=PT(this._delegate,e);return new qo(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function vj(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),by(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function wj(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function V0(n){n.persistentConnection_&&n.persistentConnection_.resume(fR)}(n._repo)}(this._delegate)}}q0.ServerValue={TIMESTAMP:function Cj(){return Ij}(),increment:n=>function Tj(n){return{".sv":{increment:n}}}(n)};var Fj=Object.freeze({__proto__:null,initStandalone:function Oj({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){$I(t);const l=new qi.zt("auth-internal",new qi.H0("database-standalone"));return l.setComponent(new qi.wA("auth-internal",()=>r,"PRIVATE")),{instance:new q0(VO(n,l,void 0,e,o),n),namespace:i}}});const Lj=q0.ServerValue;!function Vj(n){n.INTERNAL.registerComponent(new qi.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new q0(i,r)},"PUBLIC").setServiceProps({Reference:qo,Query:Wi,Database:q0,DataSnapshot:Rf,enableLogging:Ej,INTERNAL:Fj,ServerValue:Lj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.1")}(gg.Z);var OT=L(5363),Uj=L(6063);class Bj extends xr.x{constructor(e=1/0,t=1/0,r=Uj.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:l}=this;t||(r.push(e),!i&&r.push(o.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let l=0;l<o.length&&!e.closed;l+=r?1:2)e.next(o[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const l=t.now();let h=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)h=g;h&&r.splice(0,h+1)}}}function $O(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Vo.B)({connector:()=>new Bj(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function HO(n,e){return(0,fi.m)(e)?Wn(()=>n,e):Wn(()=>n)}var TR=L(9468);L(259);const SR=new Map,qO={activated:!1,tokenObservers:[]},qj={initialized:!1,enabled:!1};function Ki(n){return SR.get(n)||Object.assign({},qO)}function LT(){return qj}const AR="https://content-firebaseappcheck.googleapis.com/v1",Zj="exchangeDebugToken",zO={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Qj{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function Jj(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Vs=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function RR(n,e){return MR.apply(this,arguments)}function MR(){return(MR=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const o={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,o)}catch(S){throw Vs.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw Vs.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Vs.create("fetch-parse-error",{originalErrorMessage:S?.message})}const g=h.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Vs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(g[1]),I=Date.now();return{token:h.token,expireTimeMillis:I+y,issuedAtTimeMillis:I}})).apply(this,arguments)}const r$="firebase-app-check-database",i$=1,z0="firebase-app-check-store";let BT=null;function YO(n,e){return NR.apply(this,arguments)}function NR(){return(NR=(0,ve.Z)(function*(n,e){const r=(yield function ZO(){return BT||(BT=new Promise((n,e)=>{try{const t=indexedDB.open(r$,i$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Vs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(z0,{keyPath:"compositeKey"})}}catch(t){e(Vs.create("storage-open",{originalErrorMessage:t?.message}))}}),BT)}()).transaction(z0,"readwrite"),o=r.objectStore(z0).put({compositeKey:n,value:e});return new Promise((l,h)=>{o.onsuccess=g=>{l()},r.onerror=g=>{var y;h(Vs.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const W0=new Bo.Yd("@firebase/app-check");function OR(n,e){return(0,k.hl)()?function o$(n,e){return YO(function JO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{W0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function e1(){return LR.apply(this,arguments)}function LR(){return(LR=(0,ve.Z)(function*(){const n=LT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const h$={error:"UNKNOWN_ERROR"};function f$(n){return k.US.encodeString(JSON.stringify(n),!1)}function jT(n){return VR.apply(this,arguments)}function VR(){return(VR=(0,ve.Z)(function*(n,e=!1){const t=n.app;!function WO(n){if(!Ki(n).activated)throw Vs.create("use-before-activation",{appName:n.name})}(t);const r=Ki(t);let o,i=r.token;if(i&&!Ty(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(Ty(g)?i=g:yield OR(t,void 0))}if(!e&&i&&Ty(i))return{token:i.token};let h,l=!1;if(function XO(){return LT().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=RR(function n$(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${AR}/projects/${t}/apps/${r}:${Zj}?key=${i}`,body:{debug_token:e}}}(t,yield e1()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const g=yield r.exchangeTokenPromise;return yield OR(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Ki(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?W0.warn(g.message):W0.error(g),o=g}return i?o?h=Ty(i)?{token:i.token,internalError:o}:r1(o):(h={token:i.token},r.token=i,yield OR(t,i)):h=r1(o),l&&function n1(n,e){const t=Ki(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function BR(n,e){const t=Ki(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function t1(n){const{app:e}=n,t=Ki(e);let r=t.tokenRefresher;r||(r=function p$(n){const{app:e}=n;return new Qj((0,ve.Z)(function*(){let r;if(r=Ki(e).token?yield jT(n,!0):yield jT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ki(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},zO.RETRIAL_MIN_WAIT,zO.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ty(n){return n.expireTimeMillis-Date.now()>0}function r1(n){return{token:f$(h$),error:n}}class g${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ki(this.app);for(const t of e)BR(this.app,t.next);return Promise.resolve()}}const d1="app-check-internal";!function x$(){(0,xi._registerComponent)(new qi.wA("app-check",n=>function m$(n,e){return new g$(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(d1).initialize()})),(0,xi._registerComponent)(new qi.wA(d1,n=>function _$(n){return{getToken:e=>jT(n,e),addTokenListener:e=>function UR(n,e,t,r){const{app:i}=n,o=Ki(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&Ty(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),t1(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>t1(n))}(n,"INTERNAL",e),removeTokenListener:e=>BR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,xi.registerVersion)("@firebase/app-check","0.6.1")}();class K0{constructor(){return(0,pn.vb)("app-check")}}typeof window<"u"&&window;var HT=L(9260);const qR=new d.OlP("angularfire2.auth.use-emulator"),zR=new d.OlP("angularfire2.auth.settings"),WR=new d.OlP("angularfire2.auth.tenant-id"),KR=new d.OlP("angularfire2.auth.langugage-code"),ZR=new d.OlP("angularfire2.auth.use-device-language"),YR=new d.OlP("angularfire.auth.persistence"),QR=(n,e,t,r,i,o,l,h)=>(0,$r.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,o&&g.useDeviceLanguage(),l)for(const[y,I]of Object.entries(l))g.settings[y]=I;return h&&g.setPersistence(h),g},[t,r,i,o,l,h]);let GT=(()=>{class n{constructor(t,r,i,o,l,h,g,y,I,S,R,O){const U=new xr.x,Z=ot(void 0).pipe((0,OT.Q)(l.outsideAngular),Wn(()=>o.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,750)))),(0,D.U)(()=>(0,$r.on)(t,o,r)),(0,D.U)(te=>QR(te,o,h,y,I,S,g,R)),$O({bufferSize:1,refCount:!1}));if(Bu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ot(null);else{Z.pipe(Sa()).subscribe();const $e=Z.pipe(Wn(ze=>ze.getRedirectResult().then(pt=>pt,()=>null)),pn.iC,$O({bufferSize:1,refCount:!1})),Ke=Z.pipe(Wn(ze=>new tr.y(pt=>({unsubscribe:o.runOutsideAngular(()=>ze.onAuthStateChanged(Ct=>pt.next(Ct),Ct=>pt.error(Ct),()=>pt.complete()))})))),Ge=Z.pipe(Wn(ze=>new tr.y(pt=>({unsubscribe:o.runOutsideAngular(()=>ze.onIdTokenChanged(Ct=>pt.next(Ct),Ct=>pt.error(Ct),()=>pt.complete()))}))));this.authState=$e.pipe(HO(Ke),(0,TR.R)(l.outsideAngular),(0,OT.Q)(l.insideAngular)),this.user=$e.pipe(HO(Ge),(0,TR.R)(l.outsideAngular),(0,OT.Q)(l.insideAngular)),this.idToken=this.user.pipe(Wn(ze=>ze?(0,sn.D)(ze.getIdToken()):ot(null))),this.idTokenResult=this.user.pipe(Wn(ze=>ze?(0,sn.D)(ze.getIdTokenResult()):ot(null))),this.credential=(0,V_.T)($e,U,this.authState.pipe(Ms(ze=>!ze))).pipe((0,D.U)(ze=>ze?.user?ze:null),(0,TR.R)(l.outsideAngular),(0,OT.Q)(l.insideAngular))}return(0,$r.pX)(this,Z,o,{spy:{apply:(te,$e,Ke)=>{(te.startsWith("signIn")||te.startsWith("createUser"))&&Ke.then(Ge=>U.next(Ge))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($r.Dh),d.LFG($r.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(qR,8),d.LFG(zR,8),d.LFG(WR,8),d.LFG(KR,8),d.LFG(ZR,8),d.LFG(YR,8),d.LFG(K0,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),O$=(()=>{class n{constructor(){HT.Z.registerVersion("angularfire",pn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[GT]}),n})();function f1(n){return null==n}function p1(n){return"function"==typeof n.set}function g1(n,e){return p1(e)?e:n.ref(e)}function m1(n,e){if(function F$(n){return"string"==typeof n}(n))return e.stringCase();if(p1(n))return e.firebaseCase();if(function L$(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Z0(n,e,t="on",r=Rw.z){return new tr.y(i=>{let o=null;return o=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,D.U)(i=>{const{snapshot:o,prevKey:l}=i;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:l,key:h}}),(0,Vo.B)())}function _1(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function B$(n,e){const{payload:t,prevKey:r,key:i}=e,o=_1(n,i),l=function U$(n,e){if(f1(e))return 0;{const t=_1(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function y1(n){return(f1(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function v1(n,e,t){return function V$(n,e,t){return Z0(n,"value","once",t).pipe(Wn(r=>{const i=[ot(r)];return e.forEach(o=>i.push(Z0(n,o,"on",t))),(0,V_.T)(...i).pipe(Ro(B$,[]))}),so())}(n,e=y1(e),t)}function w1(n,e,t){const r=(e=y1(e)).map(i=>Z0(n,i,"on",t));return(0,V_.T)(...r)}function E1(n,e){return function(r,i){return m1(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function G$(n){return function(t){return t?m1(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function b1(n,e){return function(){return Z0(n,"value","on",e)}}const W$=new d.OlP("angularfire2.realtimeDatabaseURL"),K$=new d.OlP("angularfire2.database.use-emulator");let I1=(()=>{class n{constructor(t,r,i,o,l,h,g,y,I,S,R,O,U,Z,te){this.schedulers=h;const $e=g,Ke=(0,$r.on)(t,l,r);y&&QR(Ke,l,I,R,O,U,S,Z),this.database=(0,$r.cc)(`${Ke.name}.database.${i}`,"AngularFireDatabase",Ke.name,()=>{const Ge=l.runOutsideAngular(()=>Ke.database(i||void 0));return $e&&Ge.useEmulator(...$e),Ge},[$e])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>g1(this.database,t));let o=i;return r&&(o=r(i)),function q$(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:E1(r,"update"),set:E1(r,"set"),push:i=>r.push(i),remove:G$(r),snapshotChanges:i=>v1(n,i,t).pipe(pn.iC),stateChanges:i=>w1(n,i,t).pipe(pn.iC),auditTrail:i=>function j$(n,e,t){return function H$(n,e,t){return function $$(n,e){return Z0(n,"value","on",e).pipe((0,D.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function jI(...n){const e=(0,vr.jO)(n);return(0,Rr.e)((t,r)=>{const i=n.length,o=new Array(i);let l=n.map(()=>!1),h=!1;for(let g=0;g<i;g++)(0,Rs.Xf)(n[g]).subscribe((0,we.x)(r,y=>{o[g]=y,!h&&!l[g]&&(l[g]=!0,(h=l.every(T.y))&&(l=null))},BI.Z));t.subscribe((0,we.x)(r,g=>{if(h){const y=[g,...o];r.next(e?e(...y):y)}}))})}(e),(0,D.U)(([i,o])=>{const l=i.lastKeyToLoad,h=o.map(g=>g.key);return{actions:o,lastKeyToLoad:l,loadedKeys:h}}),function nx(n){return(0,Rr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,we.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,D.U)(i=>i.actions))}(n,w1(n,e).pipe(Ro((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(pn.iC),valueChanges:(i,o)=>v1(n,i,t).pipe((0,D.U)(h=>h.map(g=>o&&o.idField?Object.assign(Object.assign({},g.payload.val()),{[o.idField]:g.key}):g.payload.val())),pn.iC)}}(o,this)}object(t){return function z$(n,e){return{query:n,snapshotChanges:()=>b1(n,e.schedulers.outsideAngular)().pipe(pn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>b1(n,e.schedulers.outsideAngular)().pipe(pn.iC,(0,D.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>g1(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($r.Dh),d.LFG($r.xv,8),d.LFG(W$,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(K$,8),d.LFG(GT,8),d.LFG(qR,8),d.LFG(zR,8),d.LFG(WR,8),d.LFG(KR,8),d.LFG(ZR,8),d.LFG(YR,8),d.LFG(K0,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Z$=(()=>{class n{constructor(){HT.Z.registerVersion("angularfire",pn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[I1]}),n})(),JR=(()=>{class n{constructor(t){this.db=t}AddStudent(t){this.studentsRef.push({firstName:t.firstName,lastName:t.lastName,email:t.email,mobileNumber:t.mobileNumber})}GetStudent(t){return this.studentRef=this.db.object("students-list/"+t),this.studentRef}GetStudentsList(){return this.studentsRef=this.db.list("students-list"),this.studentsRef}UpdateStudent(t){this.studentRef.update({firstName:t.firstName,lastName:t.lastName,email:t.email,mobileNumber:t.mobileNumber})}DeleteStudent(t){this.studentRef=this.db.object("students-list/"+t),this.studentRef.remove()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(I1))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class C1{}class Y${}const Od="*";function Q$(n,e){return{type:7,name:n,definitions:e,options:{}}}function T1(n,e=null){return{type:4,styles:e,timings:n}}function D1(n,e=null){return{type:2,steps:n,options:e}}function Y0(n){return{type:6,styles:n,offset:null}}function XR(n,e,t){return{type:0,name:n,styles:e,options:t}}function S1(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function A1(n){Promise.resolve().then(n)}class Q0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){A1(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class x1{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?A1(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==o&&this._onFinish()}),l.onDestroy(()=>{++r==o&&this._onDestroy()}),l.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const eM="!",R1=["toast-component",""];function J$(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.remove())}),d.TgZ(1,"span",6),d._uU(2,"\xd7"),d.qZA()()}}function X$(n,e){if(1&n&&(d.ynx(0),d._uU(1),d.BQk()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("[",t.duplicatesCount+1,"]")}}function eH(n,e){if(1&n&&(d.TgZ(0,"div"),d._uU(1),d.YNc(2,X$,2,1,"ng-container",4),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.titleClass),d.uIk("aria-label",t.title),d.xp6(1),d.hij(" ",t.title," "),d.xp6(1),d.Q6J("ngIf",t.duplicatesCount)}}function tH(n,e){if(1&n&&d._UZ(0,"div",7),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.Q6J("innerHTML",t.message,d.oJD)}}function nH(n,e){if(1&n&&(d.TgZ(0,"div",8),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.uIk("aria-label",t.message),d.xp6(1),d.hij(" ",t.message," ")}}function rH(n,e){if(1&n&&(d.TgZ(0,"div"),d._UZ(1,"div",9),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Udp("width",t.width+"%")}}class cH{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class dH{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class hH{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new xr.x,this._activate=new xr.x,this._manualClose=new xr.x,this._resetTimeout=new xr.x,this._countDuplicate=new xr.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class qT{constructor(e,t,r,i,o,l){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=o,this.toastRef=l,this._onTap=new xr.x,this._onAction=new xr.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const N1=new d.OlP("ToastConfig");class fH extends dH{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class pH{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let gH=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mH=(()=>{class n{constructor(t,r,i,o){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=o,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new fH(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new pH(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gH),d.LFG(d._Vd),d.LFG(d.z2F),d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J0=(()=>{class n{constructor(t,r,i,o,l){this.overlay=r,this._injector=i,this.sanitizer=o,this.ngZone=l,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},o=""){return this._preBuildNotification(o,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,o){const{includeTitleDuplicates:l}=this.toastrConfig;for(const h of this.toasts)if((!l||l&&h.title===t)&&h.message===r)return h.toastRef.onDuplicate(i,o),h;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,o)):this._buildNotification(t,r,i,o)}_buildNotification(t,r,i,o){if(!o.toastComponent)throw new Error("toastComponent required");const l=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==l)return l;this.previousToastMessage=r;let h=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(h=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const g=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&o.enableHtml&&(y=this.sanitizer.sanitize(d.q3G.HTML,r));const I=new hH(g),S=new qT(this.index,o,y,i,t,I),O=d.zs3.create({providers:[{provide:qT,useValue:S}],parent:this._injector}),U=new cH(o.toastComponent,O),Z=g.attach(U,o.newestOnTop);I.componentInstance=Z.instance;const te={toastId:this.index,title:i||"",message:r||"",toastRef:I,onShown:I.afterActivate(),onHidden:I.afterClosed(),onTap:S.onTap(),onAction:S.onAction(),portal:Z};return h||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{te.toastRef.activate()})),this.toasts.push(te),te}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(N1),d.LFG(mH),d.LFG(d.zs3),d.LFG($m),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _H={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(J0),d.Y36(qT),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(d.d8E("@flyInOut",r.state),d.Tol(r.toastClasses),d.Udp("display",r.displayStyle))},attrs:R1,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(d.YNc(0,J$,3,0,"button",0),d.YNc(1,eH,3,5,"div",1),d.YNc(2,tH,1,3,"div",2),d.YNc(3,nH,2,4,"div",3),d.YNc(4,rH,2,2,"div",4)),2&t&&(d.Q6J("ngIf",r.options.closeButton),d.xp6(1),d.Q6J("ngIf",r.title),d.xp6(1),d.Q6J("ngIf",r.message&&r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.message&&!r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.options.progressBar))},dependencies:[Ci],encapsulation:2,data:{animation:[Q$("flyInOut",[XR("inactive",Y0({opacity:0})),XR("active",Y0({opacity:1})),XR("removed",Y0({opacity:0})),S1("inactive => active",T1("{{ easeTime }}ms {{ easing }}")),S1("active => removed",T1("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let yH=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:N1,useValue:{default:_H,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ua]}),n})();function vH(n,e){1&n&&(d.TgZ(0,"p",14)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please enter atleast first name "),d.qZA())}function wH(n,e){1&n&&(d.TgZ(0,"p",14)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Name shouldn't be less than 2 words "),d.qZA())}function EH(n,e){1&n&&(d.TgZ(0,"p",14)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please provide email "),d.qZA())}function bH(n,e){1&n&&(d.TgZ(0,"p",14)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please enter correct email "),d.qZA())}function IH(n,e){1&n&&(d.TgZ(0,"p",14)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please provide contact number "),d.qZA())}function CH(n,e){1&n&&(d.TgZ(0,"p",14)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Use numbers only number "),d.qZA())}let TH=(()=>{class n{constructor(t,r,i){this.crudApi=t,this.fb=r,this.toastr=i}ngOnInit(){this.crudApi.GetStudentsList(),this.studenForm()}studenForm(){this.studentForm=this.fb.group({firstName:["",[io.required,io.minLength(2)]],lastName:[""],email:["",[io.required,io.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[io.required,io.pattern("^[0-9]+$")]]})}get firstName(){return this.studentForm.get("firstName")}get lastName(){return this.studentForm.get("lastName")}get email(){return this.studentForm.get("email")}get mobileNumber(){return this.studentForm.get("mobileNumber")}ResetForm(){this.studentForm.reset()}submitStudentData(){this.crudApi.AddStudent(this.studentForm.value),this.toastr.success(this.studentForm.controls.firstName.value+" successfully added!"),this.ResetForm()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(JR),d.Y36(VI),d.Y36(J0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-add-student"]],decls:35,vars:8,consts:[[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","button",1,"btn","btn-secondary","gap-right",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"error"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h2",1),d._uU(2,"Add Student"),d.qZA()(),d.TgZ(3,"form",2),d.NdJ("ngSubmit",function(){return r.submitStudentData()}),d.TgZ(4,"div",3)(5,"div",4)(6,"div",3)(7,"div",5)(8,"label"),d._uU(9,"First name"),d.qZA(),d._UZ(10,"input",6),d.YNc(11,vH,4,0,"p",7),d.YNc(12,wH,4,0,"p",7),d.qZA(),d.TgZ(13,"div",5)(14,"label"),d._uU(15,"Last name"),d.qZA(),d._UZ(16,"input",8),d.qZA()(),d.TgZ(17,"div",3)(18,"div",5)(19,"label"),d._uU(20,"Email"),d.qZA(),d._UZ(21,"input",9),d.YNc(22,EH,4,0,"p",7),d.YNc(23,bH,4,0,"p",7),d.qZA(),d.TgZ(24,"div",5)(25,"label"),d._uU(26,"Mobile number"),d.qZA(),d._UZ(27,"input",10),d.YNc(28,IH,4,0,"p",7),d.YNc(29,CH,4,0,"p",7),d.qZA()(),d.TgZ(30,"div",11)(31,"button",12),d.NdJ("click",function(){return r.ResetForm()}),d._uU(32," Reset "),d.qZA(),d.TgZ(33,"button",13),d._uU(34," Add Student "),d.qZA()()()()()),2&t&&(d.xp6(3),d.Q6J("formGroup",r.studentForm),d.xp6(8),d.Q6J("ngIf",r.firstName.touched&&r.firstName.invalid),d.xp6(1),d.Q6J("ngIf",null==r.firstName.errors?null:r.firstName.errors.minlength),d.xp6(10),d.Q6J("ngIf",r.email.touched&&r.email.invalid),d.xp6(1),d.Q6J("ngIf",null==r.email.errors?null:r.email.errors.pattern),d.xp6(5),d.Q6J("ngIf",r.mobileNumber.touched&&r.mobileNumber.invalid),d.xp6(1),d.Q6J("ngIf",null==r.mobileNumber.errors?null:r.mobileNumber.errors.pattern),d.xp6(4),d.Q6J("disabled",!r.studentForm.valid))},dependencies:[Ci,cg,id,Zh,pI,L_,sf,M_]}),n})();function DH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",12),d.NdJ("keyup.enter",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.previous())})("click",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.previous())}),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()}if(2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.previousLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function SH(n,e){if(1&n&&(d.TgZ(0,"span",14),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()),2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.previousLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function AH(n,e){if(1&n&&(d.TgZ(0,"li",9),d.YNc(1,DH,4,2,"a",10),d.YNc(2,SH,4,2,"span",11),d.qZA()),2&n){d.oxw(2);const t=d.MAs(1);d.ekj("disabled",t.isFirstPage()),d.xp6(1),d.Q6J("ngIf",1<t.getCurrent()),d.xp6(1),d.Q6J("ngIf",t.isFirstPage())}}function xH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",12),d.NdJ("keyup.enter",function(){d.CHM(t);const i=d.oxw().$implicit;d.oxw(2);const o=d.MAs(1);return d.KtG(o.setCurrent(i.value))})("click",function(){d.CHM(t);const i=d.oxw().$implicit;d.oxw(2);const o=d.MAs(1);return d.KtG(o.setCurrent(i.value))}),d.TgZ(1,"span",13),d._uU(2),d.qZA(),d.TgZ(3,"span"),d._uU(4),d.ALo(5,"number"),d.qZA()()}if(2&n){const t=d.oxw().$implicit,r=d.oxw(2);d.xp6(2),d.hij("",r.screenReaderPageLabel," "),d.xp6(2),d.Oqu("..."===t.label?t.label:d.xi3(5,2,t.label,""))}}function RH(n,e){if(1&n&&(d.ynx(0),d.TgZ(1,"span",16)(2,"span",13),d._uU(3),d.qZA(),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"number"),d.qZA()(),d.BQk()),2&n){const t=d.oxw().$implicit,r=d.oxw(2);d.xp6(3),d.hij("",r.screenReaderCurrentLabel," "),d.xp6(2),d.Oqu("..."===t.label?t.label:d.xi3(6,2,t.label,""))}}function MH(n,e){if(1&n&&(d.TgZ(0,"li"),d.YNc(1,xH,6,5,"a",10),d.YNc(2,RH,7,5,"ng-container",15),d.qZA()),2&n){const t=e.$implicit;d.oxw(2);const r=d.MAs(1);d.ekj("current",r.getCurrent()===t.value)("ellipsis","..."===t.label),d.xp6(1),d.Q6J("ngIf",r.getCurrent()!==t.value),d.xp6(1),d.Q6J("ngIf",r.getCurrent()===t.value)}}function NH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",12),d.NdJ("keyup.enter",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.next())})("click",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.next())}),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()}if(2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.nextLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function PH(n,e){if(1&n&&(d.TgZ(0,"span",14),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()),2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.nextLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function kH(n,e){if(1&n&&(d.TgZ(0,"li",17),d.YNc(1,NH,4,2,"a",10),d.YNc(2,PH,4,2,"span",11),d.qZA()),2&n){d.oxw(2);const t=d.MAs(1);d.ekj("disabled",t.isLastPage()),d.xp6(1),d.Q6J("ngIf",!t.isLastPage()),d.xp6(1),d.Q6J("ngIf",t.isLastPage())}}function OH(n,e){if(1&n&&(d.TgZ(0,"ul",4),d.YNc(1,AH,3,4,"li",5),d.TgZ(2,"li",6),d._uU(3),d.qZA(),d.YNc(4,MH,3,6,"li",7),d.YNc(5,kH,3,4,"li",8),d.qZA()),2&n){const t=d.oxw(),r=d.MAs(1);d.ekj("responsive",t.responsive),d.xp6(1),d.Q6J("ngIf",t.directionLinks),d.xp6(2),d.AsE(" ",r.getCurrent()," / ",r.getLastPage()," "),d.xp6(1),d.Q6J("ngForOf",r.pages)("ngForTrackBy",t.trackByIndex),d.xp6(1),d.Q6J("ngIf",t.directionLinks)}}class tM{constructor(){this.change=new d.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(e){return null==e.id&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)}updateInstance(e){let t=!1;for(let r in this.instances[e.id])e[r]!==this.instances[e.id][r]&&(this.instances[e.id][r]=e[r],t=!0);return t}getCurrentPage(e){return this.instances[e]?this.instances[e].currentPage:1}setCurrentPage(e,t){if(this.instances[e]){let r=this.instances[e];t<=Math.ceil(r.totalItems/r.itemsPerPage)&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}}setTotalItems(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))}setItemsPerPage(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))}getInstance(e=this.DEFAULT_ID){return this.instances[e]?this.clone(this.instances[e]):{}}clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}}const FH=Number.MAX_SAFE_INTEGER;let LH=(()=>{class n{constructor(t){this.service=t,this.state={}}transform(t,r){if(!(t instanceof Array)){let S=r.id||this.service.defaultId();return this.state[S]?this.state[S].slice:t}let h,g,i=r.totalItems&&r.totalItems!==t.length,o=this.createInstance(t,r),l=o.id,y=o.itemsPerPage,I=this.service.register(o);if(!i&&t instanceof Array){if(y=+y||FH,h=(o.currentPage-1)*y,g=h+y,this.stateIsIdentical(l,t,h,g))return this.state[l].slice;{let R=t.slice(h,g);return this.saveState(l,t,R,h,g),this.service.change.emit(l),R}}return I&&this.service.change.emit(l),this.saveState(l,t,t,h,g),t}createInstance(t,r){return this.checkConfig(r),{id:null!=r.id?r.id:this.service.defaultId(),itemsPerPage:+r.itemsPerPage||0,currentPage:+r.currentPage||1,totalItems:+r.totalItems||t.length}}checkConfig(t){const i=["itemsPerPage","currentPage"].filter(o=>!(o in t));if(0<i.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${i.join(", ")}`)}saveState(t,r,i,o,l){this.state[t]={collection:r,size:r.length,slice:i,start:o,end:l}}stateIsIdentical(t,r,i,o){let l=this.state[t];return!(!l||l.size!==r.length||l.start!==i||l.end!==o)&&l.slice.every((g,y)=>g===r[i+y])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(tM,16))},n.\u0275pipe=d.Yjl({name:"paginate",type:n,pure:!1}),n})(),VH=(()=>{class n{constructor(t,r){this.service=t,this.changeDetectorRef=r,this.maxSize=7,this.pageChange=new d.vpe,this.pageBoundsCorrection=new d.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(i=>{this.id===i&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(t){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(t){this.pageChange.emit(t)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let t=this.service.getInstance(this.id);const r=this.outOfBoundCorrection(t);r!==t.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(r),this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}outOfBoundCorrection(t){const r=Math.ceil(t.totalItems/t.itemsPerPage);return r<t.currentPage&&0<r?r:t.currentPage<1?1:t.currentPage}createPageArray(t,r,i,o){o=+o;let l=[];const h=Math.max(Math.ceil(i/r),1),g=Math.ceil(o/2),y=t<=g,I=h-g<t,S=!y&&!I;let R=o<h,O=1;for(;O<=h&&O<=o;){let U,Z=this.calculatePageNumber(O,t,o,h);U=R&&(2===O&&(S||I)||O===o-1&&(S||y))?"...":Z,l.push({label:U,value:Z}),O++}return l}calculatePageNumber(t,r,i,o){let l=Math.ceil(i/2);return t===i?o:1===t?t:i<o?o-l<r?o-i+t:l<r?r-l+t:t:t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(tM),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[d.TTD]}),n})();function nM(n){return!!n&&"false"!==n}let UH=(()=>{class n{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new d.vpe,this.pageBoundsCorrection=new d.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(t){this._directionLinks=nM(t)}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=nM(t)}get responsive(){return this._responsive}set responsive(t){this._responsive=nM(t)}trackByIndex(t){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(t,r){if(1&t&&(d.TgZ(0,"pagination-template",0,1),d.NdJ("pageChange",function(o){return r.pageChange.emit(o)})("pageBoundsCorrection",function(o){return r.pageBoundsCorrection.emit(o)}),d.TgZ(2,"nav",2),d.YNc(3,OH,6,8,"ul",3),d.qZA()()),2&t){const i=d.MAs(1);d.Q6J("id",r.id)("maxSize",r.maxSize),d.xp6(2),d.uIk("aria-label",r.screenReaderPaginationLabel),d.xp6(1),d.Q6J("ngIf",!(r.autoHide&&i.pages.length<=1))}},dependencies:[VH,Ci,Ii,Xd],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),n})(),BH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[tM],imports:[[ua]]}),n})();function jH(n,e){1&n&&(d.TgZ(0,"a",7),d._uU(1," Add Student "),d.qZA())}function $H(n,e){1&n&&(d.TgZ(0,"div",8),d._UZ(1,"img",9),d.qZA())}function HH(n,e){1&n&&(d.TgZ(0,"div",8),d._UZ(1,"img",10),d.TgZ(2,"p",11),d._uU(3,"No student added yet!"),d.qZA(),d.TgZ(4,"a",7),d._uU(5," Add Student "),d.qZA()())}function GH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr")(1,"th",17),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA(),d.TgZ(9,"td",18)(10,"span",19),d._uU(11,"Edit"),d.qZA(),d.TgZ(12,"span",20),d.NdJ("click",function(){const o=d.CHM(t).$implicit,l=d.oxw(2);return d.KtG(l.deleteStudent(o))}),d._uU(13,"Delete"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.$key),d.xp6(2),d.AsE("",t.firstName," ",t.lastName,""),d.xp6(2),d.Oqu(t.email),d.xp6(2),d.Oqu(t.mobileNumber),d.xp6(2),d.MGl("routerLink","/edit-student/",t.$key,"")}}const qH=function(n){return{itemsPerPage:8,currentPage:n}};function zH(n,e){if(1&n&&(d.TgZ(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th",14),d._uU(5,"Student Id"),d.qZA(),d.TgZ(6,"th",14),d._uU(7,"Student name"),d.qZA(),d.TgZ(8,"th",14),d._uU(9,"Email"),d.qZA(),d.TgZ(10,"th",14),d._uU(11,"Mobile number"),d.qZA(),d.TgZ(12,"th",15),d._uU(13,"Edit"),d.qZA()()(),d.TgZ(14,"tbody"),d.YNc(15,GH,14,6,"tr",16),d.ALo(16,"paginate"),d.qZA()()()),2&n){const t=d.oxw();d.xp6(15),d.Q6J("ngForOf",d.xi3(16,1,t.Student,d.VKq(4,qH,t.p)))}}let WH=(()=>{class n{constructor(t,r){this.crudApi=t,this.toastr=r,this.p=1,this.hideWhenNoStudent=!1,this.noData=!1,this.preLoader=!0}ngOnInit(){this.dataState(),this.crudApi.GetStudentsList().snapshotChanges().subscribe(r=>{this.Student=[],r.forEach(i=>{let o=i.payload.toJSON();o.$key=i.key,this.Student.push(o)})})}dataState(){this.crudApi.GetStudentsList().valueChanges().subscribe(t=>{this.preLoader=!1,t.length<=0?(this.hideWhenNoStudent=!1,this.noData=!0):(this.hideWhenNoStudent=!0,this.noData=!1)})}deleteStudent(t){window.confirm("Are sure you want to delete this student ?")&&(this.crudApi.DeleteStudent(t.$key),this.toastr.success(t.firstName+" successfully deleted!"))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(JR),d.Y36(J0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-student-list"]],decls:9,vars:4,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["routerLink","/register-student","class","btn btn-success",4,"ngIf"],[1,"pricing-header","mx-auto"],["class","no-data text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"pageChange"],["routerLink","/register-student",1,"btn","btn-success"],[1,"no-data","text-center"],["src","assets/preloader.gif","alt","No student",1,"preloader-icon"],["src","assets/no-student.svg","alt","No student",1,"nodata-msg"],[1,"nodata-msg"],[1,"table-responsive"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"text-center","action-block"],[1,"mr-2","btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h2",1),d._uU(2,"Students List"),d.qZA(),d.YNc(3,jH,2,0,"a",2),d.qZA(),d.TgZ(4,"div",3),d.YNc(5,$H,2,0,"div",4),d.YNc(6,HH,6,0,"div",4),d.YNc(7,zH,17,6,"div",5),d.TgZ(8,"pagination-controls",6),d.NdJ("pageChange",function(o){return r.p=o}),d.qZA()()),2&t&&(d.xp6(3),d.Q6J("ngIf",r.hideWhenNoStudent),d.xp6(2),d.Q6J("ngIf",r.preLoader),d.xp6(1),d.Q6J("ngIf",r.noData),d.xp6(1),d.Q6J("ngIf",r.hideWhenNoStudent))},dependencies:[Ii,Ci,Zp,UH,LH]}),n})();function KH(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please enter firstname "),d.qZA())}function ZH(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Name shouldn't be less than 2 words "),d.qZA())}function YH(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please provide email "),d.qZA())}function QH(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please enter correct email "),d.qZA())}function JH(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please provide contact number "),d.qZA())}function XH(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Use numbers only number "),d.qZA())}const eG=[{path:"",redirectTo:"/register-student",pathMatch:"full"},{path:"register-student",component:TH},{path:"view-students",component:WH},{path:"edit-student/:id",component:(()=>{class n{constructor(t,r,i,o,l,h){this.crudApi=t,this.fb=r,this.location=i,this.actRoute=o,this.router=l,this.toastr=h}ngOnInit(){this.updateStudentData();const t=this.actRoute.snapshot.paramMap.get("id");this.crudApi.GetStudent(t).valueChanges().subscribe(r=>{this.editForm.setValue(r)})}get firstName(){return this.editForm.get("firstName")}get lastName(){return this.editForm.get("lastName")}get email(){return this.editForm.get("email")}get mobileNumber(){return this.editForm.get("mobileNumber")}updateStudentData(){this.editForm=this.fb.group({firstName:["",[io.required,io.minLength(2)]],lastName:[""],email:["",[io.required,io.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[io.required,io.pattern("^[0-9]+$")]]})}goBack(){this.location.back()}updateForm(){this.crudApi.UpdateStudent(this.editForm.value),this.toastr.success(this.editForm.controls.firstName.value+" updated successfully"),this.router.navigate(["view-students"])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(JR),d.Y36(VI),d.Y36(ke),d.Y36(Xe),d.Y36(Hi),d.Y36(J0))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-edit-student"]],decls:40,vars:8,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],[1,"btn-toolbar","mb-2","mb-md-0"],[1,"btn-group"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"row"],[1,"col-lg-12"],[1,"pricing-header","form-block","mx-auto"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","submit",1,"btn","btn-success","btn-block",3,"disabled"],[1,"error"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h1",1),d._uU(2,"Edit Student Details"),d.qZA(),d.TgZ(3,"div",2)(4,"div",3)(5,"button",4),d.NdJ("click",function(){return r.goBack()}),d._uU(6," Go Back "),d.qZA()()()(),d.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8),d.NdJ("ngSubmit",function(){return r.updateForm()}),d.TgZ(11,"div",5)(12,"div",9)(13,"div",5)(14,"div",10)(15,"label"),d._uU(16,"First name"),d.qZA(),d._UZ(17,"input",11),d.YNc(18,KH,4,0,"p",12),d.YNc(19,ZH,4,0,"p",12),d.qZA(),d.TgZ(20,"div",10)(21,"label"),d._uU(22,"Last name"),d.qZA(),d._UZ(23,"input",13),d.qZA()(),d.TgZ(24,"div",5)(25,"div",10)(26,"label"),d._uU(27,"Email"),d.qZA(),d._UZ(28,"input",14),d.YNc(29,YH,4,0,"p",12),d.YNc(30,QH,4,0,"p",12),d.qZA(),d.TgZ(31,"div",10)(32,"label"),d._uU(33,"Mobile number"),d.qZA(),d._UZ(34,"input",15),d.YNc(35,JH,4,0,"p",12),d.YNc(36,XH,4,0,"p",12),d.qZA()(),d.TgZ(37,"div",16)(38,"button",17),d._uU(39," Update Student "),d.qZA()()()()()()()()),2&t&&(d.xp6(10),d.Q6J("formGroup",r.editForm),d.xp6(8),d.Q6J("ngIf",r.firstName.touched&&r.firstName.invalid),d.xp6(1),d.Q6J("ngIf",null==r.firstName.errors?null:r.firstName.errors.minlength),d.xp6(10),d.Q6J("ngIf",r.email.touched&&r.email.invalid),d.xp6(1),d.Q6J("ngIf",null==r.email.errors?null:r.email.errors.pattern),d.xp6(5),d.Q6J("ngIf",r.mobileNumber.touched&&r.mobileNumber.invalid),d.xp6(1),d.Q6J("ngIf",null==r.mobileNumber.errors?null:r.mobileNumber.errors.pattern),d.xp6(2),d.Q6J("disabled",!r.editForm.valid))},dependencies:[Ci,cg,id,Zh,pI,L_,sf,M_]}),n})()}];let tG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ua,CA.forRoot(eG),CA]}),n})(),nG=(()=>{class n{constructor(){this.title="angularfirebase-student-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:23,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],["routerLink","/register-student",1,"navbar-brand","col-sm-3","col-md-2","mr-0"],[1,"dasboard-text"],[1,"navbar-nav","px-3"],[1,"nav-item","text-nowrap"],["routerLink","/register-student",1,"nav-link"],[1,"user-image",2,"background-image","url('assets/user.jpg')"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/register-student","routerLinkActive","active",1,"nav-link"],["routerLink","/view-students","routerLinkActive","active",1,"nav-link"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"a",1)(2,"span",2),d._uU(3,"Dashboard"),d.qZA()(),d.TgZ(4,"ul",3)(5,"li",4)(6,"a",5),d._UZ(7,"span",6),d._uU(8," Hello Admin "),d.qZA()()()(),d.TgZ(9,"div",7)(10,"div",8)(11,"nav",9)(12,"div",10)(13,"ul",11)(14,"li",12)(15,"a",13),d._uU(16," Add Student "),d.qZA()(),d.TgZ(17,"li",12)(18,"a",14),d._uU(19," Students List "),d.qZA()()()()(),d.TgZ(20,"main",15)(21,"div",16),d._UZ(22,"router-outlet"),d.qZA()()()())},dependencies:[Ev,Zp,pA]}),n})();const P1="firebasestorage.googleapis.com",k1="storageBucket";class br extends k.ZR{constructor(e,t,r=0){super(rM(e),`Firebase Storage: ${t} (${rM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,br.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function rM(n){return"storage/"+n}function iM(){return new br("unknown","An unknown error occurred, please check the error payload for server response.")}function O1(){return new br("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function F1(){return new br("canceled","User canceled the upload/download.")}function L1(){return new br("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Dy(n){return new br("invalid-argument",n)}function V1(){return new br("app-deleted","The Firebase app was deleted.")}function U1(n){return new br("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function X0(n,e){return new br("invalid-format","String does not match format '"+n+"': "+e)}function eE(n){throw new br("internal-error","Internal error: "+n)}class ps{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ps.makeFromUrl(e,t)}catch{return new ps(e,"")}if(""===r.path)return r;throw function fG(n){return new br("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(ze){ze.path_=decodeURIComponent(ze.path)}const S=t.replace(/[.]/g,"\\."),Ge=[{regex:h,indices:{bucket:1,path:3},postModify:function o(ze){"/"===ze.path.charAt(ze.path.length-1)&&(ze.path_=ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===P1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let ze=0;ze<Ge.length;ze++){const pt=Ge[ze],Ct=pt.regex.exec(e);if(Ct){let zr=Ct[pt.indices.path];zr||(zr=""),r=new ps(Ct[pt.indices.bucket],zr),pt.postModify(r);break}}if(null==r)throw function hG(n){return new br("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class yG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function zT(n){return"string"==typeof n||n instanceof String}function B1(n){return sM()&&n instanceof Blob}function sM(){return typeof Blob<"u"&&!(0,k.UG)()}function oM(n,e,t,r){if(r<e)throw Dy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Dy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Fd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function j1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Mf=(()=>{return(n=Mf||(Mf={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Mf;var n})();function $1(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class CG{constructor(e,t,r,i,o,l,h,g,y,I,S,R=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=I,this.connectionFactory_=S,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,U)=>{this.resolve_=O,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function EG(n){return void 0!==n}(g)?o():o(g)}catch(g){l(g)}else if(null!==h){const g=iM();g.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,g):g)}else l(i.canceled?this.appDelete_?V1():F1():O1())};this.canceled_?t(0,new WT(!1,null,!0)):this.backoffId_=function vG(n,e,t){let r=1,i=null,o=null,l=!1,h=0;function g(){return 2===h}let y=!1;function I(...te){y||(y=!0,e.apply(null,te))}function S(te){i=setTimeout(()=>{i=null,n(O,g())},te)}function R(){o&&clearTimeout(o)}function O(te,...$e){if(y)return void R();if(te)return R(),void I.call(null,te,...$e);if(g()||l)return R(),void I.call(null,te,...$e);let Ge;r<64&&(r*=2),1===h?(h=2,Ge=0):Ge=1e3*(r+Math.random()),S(Ge)}let U=!1;function Z(te){U||(U=!0,R(),!y&&(null!==i?(te||(h=2),clearTimeout(i),S(0)):te||(h=1)))}return S(0),o=setTimeout(()=>{l=!0,Z(!0)},t),Z}((r,i)=>{if(i)return void r(!1,new WT(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===Mf.NO_ERROR,g=o.getStatus();if(!h||$1(g,this.additionalRetryCodes_)&&this.retry){const I=o.getErrorCode()===Mf.ABORT;return void r(!1,new WT(!1,null,I))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new WT(y,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function wG(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class WT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function MG(...n){const e=function RG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(sM())return new Blob(n);throw new br("unsupported-environment","This browser doesn't seem to support creating Blobs")}const zo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class aM{constructor(e,t){this.data=e,this.contentType=t||null}}function uM(n,e){switch(n){case zo.RAW:return new aM(H1(e));case zo.BASE64:case zo.BASE64URL:return new aM(G1(n,e));case zo.DATA_URL:return new aM(function OG(n){const e=new q1(n);return e.base64?G1(zo.BASE64,e.rest):function kG(n){let e;try{e=decodeURIComponent(n)}catch{throw X0(zo.DATA_URL,"Malformed data URL.")}return H1(e)}(e.rest)}(e),function FG(n){return new q1(n).contentType}(e))}throw iM()}function H1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function G1(n,e){switch(n){case zo.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw X0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zo.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw X0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function PG(n){if(typeof atob>"u")throw function _G(n){return new br("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:X0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class q1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw X0(zo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function LG(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Jl{constructor(e,t){let r=0,i="";B1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(B1(this.data_)){const i=function NG(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Jl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Jl(r,!0)}}static getBlob(...e){if(sM()){const t=e.map(r=>r instanceof Jl?r.data_:r);return new Jl(MG.apply(null,t))}{const t=e.map(l=>zT(l)?uM(zo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[o++]=l[h]}),new Jl(i,!0)}}uploadData(){return this.data_}}function lM(n){let e;try{e=JSON.parse(n)}catch{return null}return function IG(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function z1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function BG(n,e){return e}class Us{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||BG}}let KT=null;function tE(){if(KT)return KT;const n=[];n.push(new Us("bucket")),n.push(new Us("generation")),n.push(new Us("metageneration")),n.push(new Us("name","fullPath",!0));const t=new Us("name");t.xform=function e(o,l){return function jG(n){return!zT(n)||n.length<2?n:z1(n)}(l)},n.push(t);const i=new Us("size");return i.xform=function r(o,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Us("timeCreated")),n.push(new Us("updated")),n.push(new Us("md5Hash",null,!0)),n.push(new Us("cacheControl",null,!0)),n.push(new Us("contentDisposition",null,!0)),n.push(new Us("contentEncoding",null,!0)),n.push(new Us("contentLanguage",null,!0)),n.push(new Us("contentType",null,!0)),n.push(new Us("metadata","customMetadata",!0)),KT=n,KT}function W1(n,e,t){const r=lM(e);return null===r?null:function HG(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return function $G(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new ps(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function cM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const K1="prefixes",Z1="items";class Xl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ec(n){if(!n)throw iM()}function ZT(n,e){return function t(r,i){const o=W1(n,i,e);return ec(null!==o),o}}function Sy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function cG(){return new br("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function lG(){return new br("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function uG(n){return new br("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function dG(n){return new br("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function nE(n){const e=Sy(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function aG(n){return new br("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function Y1(n,e,t){const i=Fd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Xl(i,"GET",ZT(n,t),l);return h.errorHandler=nE(e),h}function ZG(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const h=Fd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,I=new Xl(h,"GET",function WG(n,e){return function t(r,i){const o=function zG(n,e,t){const r=lM(t);return null===r?null:function qG(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[K1])for(const i of t[K1]){const o=i.replace(/\/$/,""),l=n._makeStorageReference(new ps(e,o));r.prefixes.push(l)}if(t[Z1])for(const i of t[Z1]){const o=n._makeStorageReference(new ps(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return ec(null!==o),o}}(n,e.bucket),y);return I.urlParams=o,I.errorHandler=Sy(e),I}function J1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function XG(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class YT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function dM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ec(!1)}return ec(!!t&&-1!==(e||["active"]).indexOf(t)),t}const r3={STATE_CHANGED:"state_changed"},Bs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hM(n){switch(n){case"running":case"pausing":case"canceling":return Bs.RUNNING;case"paused":return Bs.PAUSED;case"success":return Bs.SUCCESS;case"canceled":return Bs.CANCELED;default:return Bs.ERROR}}class i3{constructor(e,t,r){if(function bG(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Ay(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let tF=null;class s3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw eE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw eE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class o3 extends s3{initXhr(){this.xhr_.responseType="text"}}function Vu(){return tF?tF():new o3}class nF{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=tE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if($1(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=O1()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function e3(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l=J1(e,r,i),h={name:l.fullPath},g=Fd(o,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=cM(l,t),U=new Xl(g,"POST",function O(Z){let te;dM(Z);try{te=Z.getResponseHeader("X-Goog-Upload-URL")}catch{ec(!1)}return ec(zT(te)),te},n.maxUploadRetryTime);return U.urlParams=h,U.headers=I,U.body=S,U.errorHandler=Sy(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Vu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function t3(n,e,t,r){const g=new Xl(t,"POST",function o(y){const I=dM(y,["active","final"]);let S=null;try{S=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ec(!1)}S||ec(!1);const R=Number(S);return ec(!isNaN(R)),new YT(R,r.size(),"final"===I)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Sy(e),g}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Vu,t,r);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new YT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let l;try{l=function n3(n,e,t,r,i,o,l,h){const g=new YT(0,0);if(l?(g.current=l.current,g.total=l.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function gG(){return new br("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=g.total-g.current;let I=y;i>0&&(I=Math.min(I,i));const S=g.current;let O="";O=0===I?"finalize":y===I?"upload, finalize":"upload";const U={"X-Goog-Upload-Command":O,"X-Goog-Upload-Offset":`${g.current}`},Z=r.slice(S,S+I);if(null===Z)throw L1();const Ge=new Xl(t,"POST",function te(ze,pt){const Ct=dM(ze,["active","final"]),on=g.current+I,zr=r.size();let Jo;return Jo="final"===Ct?ZT(e,o)(ze,pt):null,new YT(on,zr,"final"===Ct,Jo)},e.maxUploadRetryTime);return Ge.headers=U,Ge.body=Z.uploadData(),Ge.progressCallback=h||null,Ge.errorHandler=Sy(n),Ge}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Vu,i,o,!1);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Y1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Vu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function X1(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let Ge="";for(let ze=0;ze<2;ze++)Ge+=Math.random().toString().slice(2);return Ge}();l["Content-Type"]="multipart/related; boundary="+g;const y=J1(e,r,i),I=cM(y,t),O=Jl.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+g+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===O)throw L1();const U={name:y.fullPath},Z=Fd(o,n.host,n._protocol),$e=n.maxUploadRetryTime,Ke=new Xl(Z,"POST",ZT(n,t),$e);return Ke.urlParams=U,Ke.headers=l,Ke.body=O.uploadData(),Ke.errorHandler=Sy(e),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Vu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=F1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=hM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new i3(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(hM(this._state)){case Bs.SUCCESS:Ay(this._resolve.bind(null,this.snapshot))();break;case Bs.CANCELED:case Bs.ERROR:Ay(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(hM(this._state)){case Bs.RUNNING:case Bs.PAUSED:e.next&&Ay(e.next.bind(e,this.snapshot))();break;case Bs.SUCCESS:e.complete&&Ay(e.complete.bind(e))();break;default:e.error&&Ay(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Xg{constructor(e,t){this._service=e,this._location=t instanceof ps?t:ps.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xg(e,t)}get root(){const e=new ps(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return z1(this._location.path)}get storage(){return this._service}get parent(){const e=function VG(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ps(this._location.bucket,e);return new Xg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw U1(e)}}function iF(n,e,t){return fM.apply(this,arguments)}function fM(){return(fM=(0,ve.Z)(function*(n,e,t){const i=yield sF(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield iF(n,e,i.nextPageToken))})).apply(this,arguments)}function sF(n,e){null!=e&&"number"==typeof e.maxResults&&oM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=ZG(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Vu)}function y3(n){n._throwIfRoot("getDownloadURL");const e=function YG(n,e,t){const i=Fd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Xl(i,"GET",function KG(n,e){return function t(r,i){const o=W1(n,i,e);return ec(null!==o),function GG(n,e,t,r){const i=lM(e);if(null===i||!zT(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const l=encodeURIComponent;return o.split(",").map(y=>{const S=n.fullPath;return Fd("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+j1({alt:"media",token:y})})[0]}(o,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=nE(e),h}(n.storage,n._location,tE());return n.storage.makeRequestWithTokens(e,Vu).then(t=>{if(null===t)throw function mG(){return new br("no-download-url","The given file does not have any download URLs.")}();return t})}function oF(n,e){const t=function UG(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ps(n._location.bucket,t);return new Xg(n.storage,r)}function aF(n,e){if(n instanceof pM){const t=n;if(null==t._bucket)throw function pG(){return new br("no-default-bucket","No default bucket found. Did you set the '"+k1+"' property when initializing the app?")}();const r=new Xg(t,t._bucket);return null!=e?aF(r,e):r}return void 0!==e?oF(n,e):n}function b3(n,e){if(e&&function w3(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof pM)return function E3(n,e){return new Xg(n,e)}(n,e);throw Dy("To use ref(service, url), the first argument must be a Storage instance.")}return aF(n,e)}function uF(n,e){const t=e?.[k1];return null==t?null:ps.makeFromBucketSpec(t,n)}class pM{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=P1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ps.makeFromBucketSpec(i,this._host):uF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ps.makeFromBucketSpec(this._url,e):uF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ve.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ve.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xg(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new yG(V1());{const l=function xG(n,e,t,r,i,o,l=!0){const h=j1(n.urlParams),g=n.url+h,y=Object.assign({},n.headers);return function SG(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function TG(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function DG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,o),function AG(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new CG(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,ve.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const lF="@firebase/storage";function hF(n,e){return b3(n=(0,k.m9)(n),e)}function N3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new pM(t,r,i,e,xi.SDK_VERSION)}!function P3(){(0,xi._registerComponent)(new qi.wA("storage",N3,"PUBLIC").setMultipleInstances(!0)),(0,xi.registerVersion)(lF,"0.10.1",""),(0,xi.registerVersion)(lF,"0.10.1","esm2017")}();class QT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class pF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new QT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new QT(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?l=>t(new QT(l,this,this._ref)):{next:t.next?l=>t.next(new QT(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class gF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ld(e,this._service))}get items(){return this._delegate.items.map(e=>new Ld(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ld{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function M3(n,e){return oF(n,e)}(this._delegate,e);return new Ld(t,this.storage)}get root(){return new Ld(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ld(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new pF(function C3(n,e,t){return function f3(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new nF(n,new Jl(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=zo.RAW,r){this._throwIfRoot("putString");const i=uM(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new pF(new nF(this._delegate,new Jl(i.data,!0),o),this)}listAll(){return function A3(n){return function g3(n){const e={prefixes:[],items:[]};return iF(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new gF(e,this.storage))}list(e){return function S3(n,e){return sF(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new gF(t,this.storage))}getMetadata(){return function T3(n){return function m3(n){n._throwIfRoot("getMetadata");const e=Y1(n.storage,n._location,tE());return n.storage.makeRequestWithTokens(e,Vu)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function D3(n,e){return function _3(n,e){n._throwIfRoot("updateMetadata");const t=function QG(n,e,t,r){const o=Fd(e.fullServerUrl(),n.host,n._protocol),h=cM(t,r),y=n.maxOperationRetryTime,I=new Xl(o,"PATCH",ZT(n,r),y);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=h,I.errorHandler=nE(e),I}(n.storage,n._location,e,tE());return n.storage.makeRequestWithTokens(t,Vu)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function x3(n){return y3(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function R3(n){return function v3(n){n._throwIfRoot("deleteObject");const e=function JG(n,e){const r=Fd(e.fullServerUrl(),n.host,n._protocol),h=new Xl(r,"DELETE",function l(g,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=nE(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Vu)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw U1(e)}}class mF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(_F(e))throw Dy("ref() expected a child path but got a URL, use refFromURL instead.");return new Ld(hF(this._delegate,e),this)}refFromURL(e){if(!_F(e))throw Dy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ps.makeFromUrl(e,this._delegate.host)}catch{throw Dy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ld(hF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function fF(n,e,t,r={}){!function I3(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function _F(n){return/^[A-Za-z]+:\/\//.test(n)}function L3(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new mF(t,r)}function yF(n){const e=function U3(n){return new tr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const o=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){o()}}).pipe(function rG(n,e=Rw.z){return(0,Rr.e)((t,r)=>{let i=null,o=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function g(){const y=l+n,I=e.now();if(I<y)return i=this.schedule(void 0,y-I),void r.add(i);h()}t.subscribe((0,we.x)(r,y=>{o=y,l=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,D.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function JT(n){return{getDownloadURL:()=>ot(void 0).pipe(pn.fc,Wn(()=>n.getDownloadURL()),pn.iC),getMetadata:()=>ot(void 0).pipe(pn.fc,Wn(()=>n.getMetadata()),pn.iC),delete:()=>(0,sn.D)(n.delete()),child:e=>JT(n.child(e)),updateMetadata:e=>(0,sn.D)(n.updateMetadata(e)),put:(e,t)=>yF(n.put(e,t)),putString:(e,t,r)=>yF(n.putString(e,t,r)),list:e=>(0,sn.D)(n.list(e)),listAll:()=>(0,sn.D)(n.listAll())}}!function V3(n){const e={TaskState:Bs,TaskEvent:r3,StringFormat:zo,Storage:mF,Reference:Ld};n.INTERNAL.registerComponent(new qi.wA("storage-compat",L3,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.1")}(gg.Z);const B3=new d.OlP("angularfire2.storageBucket"),j3=new d.OlP("angularfire2.storage.maxUploadRetryTime"),$3=new d.OlP("angularfire2.storage.maxOperationRetryTime"),H3=new d.OlP("angularfire2.storage.use-emulator");let G3=(()=>{class n{constructor(t,r,i,o,l,h,g,y,I,S){const R=(0,$r.on)(t,l,r);this.storage=(0,$r.cc)(`${R.name}.storage.${i}`,"AngularFireStorage",R.name,()=>{const O=l.runOutsideAngular(()=>R.storage(i||void 0)),U=I;return U&&O.useEmulator(...U),g&&O.setMaxUploadRetryTime(g),y&&O.setMaxOperationRetryTime(y),O},[g,y])}ref(t){return JT(this.storage.ref(t))}refFromURL(t){return JT(this.storage.refFromURL(t))}upload(t,r,i){return JT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($r.Dh),d.LFG($r.xv,8),d.LFG(B3,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(j3,8),d.LFG($3,8),d.LFG(H3,8),d.LFG(K0,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),q3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),z3=(()=>{class n{constructor(){HT.Z.registerVersion("angularfire",pn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[G3],imports:[q3]}),n})();function gM(){return(0,Rr.e)((n,e)=>{let t,r=!1;n.subscribe((0,we.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var bt,W3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vd={},mM=mM||{},Gt=W3||self;function XT(){}function eD(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function rE(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var _M="closure_uid_"+(1e9*Math.random()>>>0),Z3=0;function Y3(n,e,t){return n.call.apply(n.bind,arguments)}function Q3(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function gs(n,e,t){return(gs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Y3:Q3).apply(null,arguments)}function tD(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Zi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,o){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Nf(){this.s=this.s,this.o=this.o}Nf.prototype.s=!1,Nf.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function K3(n){Object.prototype.hasOwnProperty.call(n,_M)&&n[_M]||(n[_M]=++Z3)}(this)},Nf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vF=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function yM(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function wF(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(eD(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let l=0;l<o;l++)n[i+l]=r[l]}else n.push(r)}}function ms(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ms.prototype.h=function(){this.defaultPrevented=!0};var X3=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",XT,e),Gt.removeEventListener("test",XT,e)}catch{}return n}();function nD(n){return/^[\s\xa0]*$/.test(n)}var EF=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function vM(n,e){return n<e?-1:n>e?1:0}function rD(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function tc(n){return-1!=rD().indexOf(n)}function wM(n){return wM[" "](n),n}wM[" "]=XT;var iD,n,tq=tc("Opera"),xy=tc("Trident")||tc("MSIE"),bF=tc("Edge"),EM=bF||xy,IF=tc("Gecko")&&!(-1!=rD().toLowerCase().indexOf("webkit")&&!tc("Edge"))&&!(tc("Trident")||tc("MSIE"))&&!tc("Edge"),nq=-1!=rD().toLowerCase().indexOf("webkit")&&!tc("Edge");function CF(){var n=Gt.document;return n?n.documentMode:void 0}e:{var bM="",IM=(n=rD(),IF?/rv:([^\);]+)(\)|;)/.exec(n):bF?/Edge\/([\d\.]+)/.exec(n):xy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):nq?/WebKit\/(\S+)/.exec(n):tq?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(IM&&(bM=IM?IM[1]:""),xy){var CM=CF();if(null!=CM&&CM>parseFloat(bM)){iD=String(CM);break e}}iD=bM}var rq={};var sq=Gt.document&&xy&&(CF()||parseInt(iD,10))||void 0;function iE(n,e){if(ms.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(IF){e:{try{wM(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:oq[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&iE.X.h.call(this)}}Zi(iE,ms);var oq={2:"touch",3:"pen",4:"mouse"};iE.prototype.h=function(){iE.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var sE="closure_listenable_"+(1e6*Math.random()|0),aq=0;function uq(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++aq,this.ba=this.ea=!1}function sD(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function DM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function DF(n){const e={};for(const t in n)e[t]=n[t];return e}const SF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function AF(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<SF.length;o++)t=SF[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function oD(n){this.src=n,this.g={},this.h=0}function SM(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=vF(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(sD(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function AM(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ba&&o.listener==e&&o.capture==!!t&&o.ha==r)return i}return-1}oD.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var l=AM(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new uq(e,this.src,o,!!r,i)).ea=t,n.push(e)),e};var xM="closure_lm_"+(1e6*Math.random()|0),RM={};function xF(n,e,t,r,i){if(r&&r.once)return MF(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)xF(n,e[o],t,r,i);return null}return t=kM(t),n&&n[sE]?n.N(e,t,rE(r)?!!r.capture:!!r,i):RF(n,e,t,!1,r,i)}function RF(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var l=rE(i)?!!i.capture:!!i,h=NM(n);if(h||(n[xM]=h=new oD(n)),(t=h.add(e,t,r,l,o)).proxy)return t;if(r=function lq(){const e=cq;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)X3||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(PF(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function MF(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)MF(n,e[o],t,r,i);return null}return t=kM(t),n&&n[sE]?n.O(e,t,rE(r)?!!r.capture:!!r,i):RF(n,e,t,!0,r,i)}function NF(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)NF(n,e[o],t,r,i);else r=rE(r)?!!r.capture:!!r,t=kM(t),n&&n[sE]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=AM(o=n.g[e],t,r,i))&&(sD(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=NM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=AM(e,t,r,i)),(t=-1<n?e[n]:null)&&MM(t))}function MM(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[sE])SM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(PF(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=NM(e))?(SM(t,n),0==t.h&&(t.src=null,e[xM]=null)):sD(n)}}}function PF(n){return n in RM?RM[n]:RM[n]="on"+n}function cq(n,e){if(n.ba)n=!0;else{e=new iE(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&MM(n),n=t.call(r,e)}return n}function NM(n){return(n=n[xM])instanceof oD?n:null}var PM="__closure_events_fn_"+(1e9*Math.random()>>>0);function kM(n){return"function"==typeof n?n:(n[PM]||(n[PM]=function(e){return n.handleEvent(e)}),n[PM])}function Ni(){Nf.call(this),this.i=new oD(this),this.P=this,this.I=null}function Yi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ms(e,n);else if(e instanceof ms)e.target=e.target||n;else{var i=e;AF(e=new ms(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var l=e.g=t[o];i=aD(l,r,!0,e)&&i}if(i=aD(l=e.g=n,r,!0,e)&&i,i=aD(l,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=aD(l=e.g=t[o],r,!1,e)&&i}function aD(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.ba&&l.capture==t){var h=l.listener,g=l.ha||l.src;l.ea&&SM(n.i,l),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}Zi(Ni,Nf),Ni.prototype[sE]=!0,Ni.prototype.removeEventListener=function(n,e,t,r){NF(this,n,e,t,r)},Ni.prototype.M=function(){if(Ni.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)sD(t[r]);delete n.g[e],n.h--}}this.I=null},Ni.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ni.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var OM=Gt.JSON.stringify;function dq(){var n=FF;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var FM,kF=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new fq,n=>n.reset());class fq{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function pq(n){Gt.setTimeout(()=>{throw n},0)}function OF(n,e){FM||function gq(){var n=Gt.Promise.resolve(void 0);FM=function(){n.then(mq)}}(),LM||(FM(),LM=!0),FF.add(n,e)}var LM=!1,FF=new class hq{constructor(){this.h=this.g=null}add(e,t){const r=kF.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function mq(){for(var n;n=dq();){try{n.h.call(n.g)}catch(t){pq(t)}var e=kF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}LM=!1}function uD(n,e){Ni.call(this),this.h=n||1,this.g=e||Gt,this.j=gs(this.lb,this),this.l=Date.now()}function VM(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function UM(n,e,t){if("function"==typeof n)t&&(n=gs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gs(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function LF(n){n.g=UM(()=>{n.g=null,n.i&&(n.i=!1,LF(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Zi(uD,Ni),(bt=uD.prototype).ca=!1,bt.R=null,bt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Yi(this,"tick"),this.ca&&(VM(this),this.start()))}},bt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bt.M=function(){uD.X.M.call(this),VM(this),delete this.g};class _q extends Nf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:LF(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oE(n){Nf.call(this),this.h=n,this.g={}}Zi(oE,Nf);var VF=[];function UF(n,e,t,r){Array.isArray(t)||(t&&(VF[0]=t.toString()),t=VF);for(var i=0;i<t.length;i++){var o=xF(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function BF(n){DM(n.g,function(e,t){this.g.hasOwnProperty(t)&&MM(e)},n),n.g={}}function lD(){this.g=!0}function Ry(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Eq(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<i.length;l++)i[l]=""}}}return OM(t)}catch{return e}}(n,t)+(r?" "+r:"")})}oE.prototype.M=function(){oE.X.M.call(this),BF(this)},oE.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lD.prototype.Aa=function(){this.g=!1},lD.prototype.info=function(){};var em={},jF=null;function cD(){return jF=jF||new Ni}function $F(n){ms.call(this,em.Pa,n)}function aE(n){const e=cD();Yi(e,new $F(e))}function HF(n,e){ms.call(this,em.STAT_EVENT,n),this.stat=e}function js(n){const e=cD();Yi(e,new HF(e,n))}function GF(n,e){ms.call(this,em.Qa,n),this.size=e}function uE(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}em.Pa="serverreachability",Zi($F,ms),em.STAT_EVENT="statevent",Zi(HF,ms),em.Qa="timingevent",Zi(GF,ms);var dD={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},qF={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function BM(){}function WF(){}BM.prototype.h=null;var HM,lE={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function jM(){ms.call(this,"d")}function $M(){ms.call(this,"c")}function hD(){}function cE(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new oE(this),this.O=bq,this.T=new uD(n=EM?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new KF}function KF(){this.i=null,this.g="",this.h=!1}Zi(jM,ms),Zi($M,ms),Zi(hD,BM),hD.prototype.g=function(){return new XMLHttpRequest},hD.prototype.i=function(){return{}},HM=new hD;var bq=45e3,GM={},fD={};function qM(n,e,t){n.K=1,n.v=_D(Ud(e)),n.s=t,n.P=!0,ZF(n,null)}function ZF(n,e){n.F=Date.now(),dE(n),n.A=Ud(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),sL(t.i,"t",r),n.C=0,t=n.l.H,n.h=new KF,n.g=xL(n.l,t?e:null,!n.s),0<n.N&&(n.L=new _q(gs(n.La,n,n.g),n.N)),UF(n.S,n.g,"readystatechange",n.ib),e=n.H?DF(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),aE(),function yq(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var l="",h=o.split("&"),g=0;g<h.length;g++){var y=h[g].split("=");if(1<y.length){var I=y[0];y=y[1];var S=I.split("_");l=2<=S.length&&"type"==S[1]?l+(I+"=")+y+"&":l+(I+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function YF(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function QF(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Iq(n,t),i==fD){4==e&&(n.o=4,js(14),r=!1),Ry(n.j,n.m,null,"[Incomplete Response]");break}if(i==GM){n.o=4,js(15),Ry(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ry(n.j,n.m,i,null),zM(n,i)}YF(n)&&i!=fD&&i!=GM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,js(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),eN(e),e.K=!0,js(11))):(Ry(n.j,n.m,t,"[Invalid Chunked Response]"),tm(n),hE(n))}function Iq(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?fD:(t=Number(e.substring(t,r)),isNaN(t)?GM:(r+=1)+t>e.length?fD:(e=e.substr(r,t),n.C=r+t,e))}function dE(n){n.V=Date.now()+n.O,JF(n,n.O)}function JF(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=uE(gs(n.gb,n),e)}function pD(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function hE(n){0==n.l.G||n.I||TL(n.l,n)}function tm(n){pD(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,VM(n.T),BF(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function zM(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||WM(t.h,n)))if(!n.J&&WM(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;ID(t),ED(t)}XM(t),js(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=uE(gs(t.cb,t),6e3));if(1>=uL(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else rm(t,11)}else if((n.J||t.g==n)&&ID(t),!nD(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const I=y[3];null!=I&&(t.ma=I,t.j.info("VER="+t.ma));const S=y[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const R=y[5];null!=R&&"number"==typeof R&&0<R&&(t.J=r=1.5*R,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const O=n.g;if(O){const U=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var o=r.h;o.g||-1==U.indexOf("spdy")&&-1==U.indexOf("quic")&&-1==U.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(KM(o,o.h),o.h=null))}if(r.D){const Z=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;Z&&(r.za=Z,pr(r.F,r.D,Z))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=AL(r,r.H?r.ka:null,r.V),l.J){lL(r.h,l);var h=l,g=r.J;g&&h.setTimeout(g),h.B&&(pD(h),dE(h)),r.g=l}else IL(r);0<t.i.length&&bD(t)}else"stop"!=y[0]&&"close"!=y[0]||rm(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?rm(t,7):JM(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}aE()}catch{}}function XF(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(eD(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Tq(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(eD(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Cq(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(eD(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(bt=cE.prototype).setTimeout=function(n){this.O=n},bt.ib=function(n){n=n.target;const e=this.L;e&&3==Bd(n)?e.l():this.La(n)},bt.La=function(n){try{if(n==this.g)e:{const I=Bd(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>I)&&(3!=I||EM||this.g&&(this.h.h||this.g.fa()||_L(this.g)))){this.I||4!=I||7==e||aE(),pD(this);var t=this.g.aa();this.Y=t;t:if(YF(this)){var r=_L(this.g);n="";var i=r.length,o=4==Bd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){tm(this),hE(this);var l="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function vq(n,e,t,r,i,o,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.U,I,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nD(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,js(12),tm(this),hE(this);break e}Ry(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zM(this,t)}this.P?(QF(this,I,l),EM&&this.i&&3==I&&(UF(this.S,this.T,"tick",this.hb),this.T.start())):(Ry(this.j,this.m,l,null),zM(this,l)),4==I&&tm(this),this.i&&!this.I&&(4==I?TL(this.l,this):(this.i=!1,dE(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,js(12)):(this.o=0,js(13)),tm(this),hE(this)}}}catch{}},bt.hb=function(){if(this.g){var n=Bd(this.g),e=this.g.fa();this.C<e.length&&(pD(this),QF(this,n,e),this.i&&4!=n&&dE(this))}},bt.cancel=function(){this.I=!0,tm(this)},bt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function wq(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(aE(),js(17)),tm(this),this.o=2,hE(this)):JF(this,this.V-n)};var eL=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nm(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof nm){this.h=void 0!==e?e:n.h,gD(this,n.j),this.s=n.s,this.g=n.g,mD(this,n.m),this.l=n.l,e=n.i;var t=new gE;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),tL(this,t),this.o=n.o}else n&&(t=String(n).match(eL))?(this.h=!!e,gD(this,t[1]||"",!0),this.s=fE(t[2]||""),this.g=fE(t[3]||"",!0),mD(this,t[4]),this.l=fE(t[5]||"",!0),tL(this,t[6]||"",!0),this.o=fE(t[7]||"")):(this.h=!!e,this.i=new gE(null,this.h))}function Ud(n){return new nm(n)}function gD(n,e,t){n.j=t?fE(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function mD(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function tL(n,e,t){e instanceof gE?(n.i=e,function Nq(n,e){e&&!n.j&&(Pf(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(rL(this,r),sL(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=pE(e,Rq)),n.i=new gE(e,n.h))}function pr(n,e,t){n.i.set(e,t)}function _D(n){return pr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function fE(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function pE(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Sq),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Sq(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}nm.prototype.toString=function(){var n=[],e=this.j;e&&n.push(pE(e,nL,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(pE(e,nL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(pE(t,"/"==t.charAt(0)?xq:Aq,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",pE(t,Mq)),n.join("")};var nL=/[#\/\?@]/g,Aq=/[#\?:]/g,xq=/[#\?]/g,Rq=/[#\?@]/g,Mq=/#/g;function gE(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Pf(n){n.g||(n.g=new Map,n.h=0,n.i&&function Dq(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function rL(n,e){Pf(n),e=My(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function iL(n,e){return Pf(n),e=My(n,e),n.g.has(e)}function sL(n,e,t){rL(n,e),0<t.length&&(n.i=null,n.g.set(My(n,e),yM(t)),n.h+=t.length)}function My(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function oL(n){this.l=n||kq,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ga&&Gt.g.Ga()&&Gt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(bt=gE.prototype).add=function(n,e){Pf(this),this.i=null,n=My(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},bt.forEach=function(n,e){Pf(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},bt.oa=function(){Pf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},bt.W=function(n){Pf(this);let e=[];if("string"==typeof n)iL(this,n)&&(e=e.concat(this.g.get(My(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},bt.set=function(n,e){return Pf(this),this.i=null,iL(this,n=My(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},bt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=o;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var kq=10;function aL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function uL(n){return n.h?1:n.g?n.g.size:0}function WM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function KM(n,e){n.g?n.g.add(e):n.h=e}function lL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function cL(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return yM(n.i)}function ZM(){}function Oq(){this.g=new ZM}function Fq(n,e,t){const r=t||"";try{XF(n,function(i,o){let l=i;rE(i)&&(l=OM(i)),e.push(r+o+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yD(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function mE(n){this.l=n.ac||null,this.j=n.jb||!1}function vD(n,e){Ni.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=YM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oL.prototype.cancel=function(){if(this.i=cL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ZM.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},ZM.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},Zi(mE,BM),mE.prototype.g=function(){return new vD(this.l,this.j)},mE.prototype.i=function(n){return function(){return n}}({}),Zi(vD,Ni);var YM=0;function dL(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function _E(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yE(n)}function yE(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(bt=vD.prototype).open=function(n,e){if(this.readyState!=YM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,yE(this)},bt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_E(this)),this.readyState=YM},bt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yE(this)),this.g&&(this.readyState=3,yE(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dL(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},bt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?_E(this):yE(this),3==this.readyState&&dL(this)}},bt.Va=function(n){this.g&&(this.response=this.responseText=n,_E(this))},bt.Ua=function(n){this.g&&(this.response=n,_E(this))},bt.ga=function(){this.g&&_E(this)},bt.setRequestHeader=function(n,e){this.v.append(n,e)},bt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},bt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Vq=Gt.JSON.parse;function Mr(n){Ni.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hL,this.K=this.L=!1}Zi(Mr,Ni);var hL="",Uq=/^https?$/i,Bq=["POST","PUT"];function fL(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,pL(n),wD(n)}function pL(n){n.D||(n.D=!0,Yi(n,"complete"),Yi(n,"error"))}function gL(n){if(n.h&&typeof mM<"u"&&(!n.C[1]||4!=Bd(n)||2!=n.aa()))if(n.v&&4==Bd(n))UM(n.Ha,0,n);else if(Yi(n,"readystatechange"),4==Bd(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(eL)[1]||null;if(!i&&Gt.self&&Gt.self.location){var o=Gt.self.location.protocol;i=o.substr(0,o.length-1)}r=!Uq.test(i?i.toLowerCase():"")}t=r}if(t)Yi(n,"complete"),Yi(n,"success");else{n.m=6;try{var l=2<Bd(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",pL(n)}}finally{wD(n)}}}function wD(n,e){if(n.g){mL(n);const t=n.g,r=n.C[0]?XT:null;n.g=null,n.C=null,e||Yi(n,"ready");try{t.onreadystatechange=r}catch{}}}function mL(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function Bd(n){return n.g?n.g.readyState:0}function _L(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case hL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function yL(n){let e="";return DM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function QM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=yL(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):pr(n,e,t))}function vE(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function vL(n){this.Ca=0,this.i=[],this.j=new lD,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=vE("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=vE("baseRetryDelayMs",5e3,n),this.bb=vE("retryDelaySeedMs",1e4,n),this.$a=vE("forwardChannelMaxRetries",2,n),this.ta=vE("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new oL(n&&n.concurrentRequestLimit),this.Fa=new Oq,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function JM(n){if(wL(n),3==n.G){var e=n.U++,t=Ud(n.F);pr(t,"SID",n.I),pr(t,"RID",e),pr(t,"TYPE","terminate"),wE(n,t),(e=new cE(n,n.j,e,void 0)).K=2,e.v=_D(Ud(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=xL(e.l,null),e.g.da(e.v)),e.F=Date.now(),dE(e)}SL(n)}function ED(n){n.g&&(eN(n),n.g.cancel(),n.g=null)}function wL(n){ED(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),ID(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function bD(n){aL(n.h)||n.m||(n.m=!0,OF(n.Ja,n),n.C=0)}function EL(n,e){var t;t=e?e.m:n.U++;const r=Ud(n.F);pr(r,"SID",n.I),pr(r,"RID",t),pr(r,"AID",n.T),wE(n,r),n.o&&n.s&&QM(r,n.o,n.s),t=new cE(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=bL(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),KM(n.h,t),qM(t,r,e)}function wE(n,e){n.ia&&DM(n.ia,function(t,r){pr(e,r,t)}),n.l&&XF({},function(t,r){pr(e,r,t)})}function bL(n,e,t){t=Math.min(n.i.length,t);var r=n.l?gs(n.l.Ra,n.l,n):null;e:{var i=n.i;let o=-1;for(;;){const l=["count="+t];-1==o?0<t?(o=i[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let h=!0;for(let g=0;g<t;g++){let y=i[g].h;const I=i[g].g;if(y-=o,0>y)o=Math.max(0,i[g].h-100),h=!1;else try{Fq(I,l,"req"+y+"_")}catch{r&&r(I)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function IL(n){n.g||n.u||(n.Z=1,OF(n.Ia,n),n.A=0)}function XM(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=uE(gs(n.Ia,n),DL(n,n.A)),n.A++,0))}function eN(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function CL(n){n.g=new cE(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ud(n.sa);pr(e,"RID","rpc"),pr(e,"SID",n.I),pr(e,"CI",n.L?"0":"1"),pr(e,"AID",n.T),pr(e,"TYPE","xmlhttp"),wE(n,e),n.o&&n.s&&QM(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=_D(Ud(e)),t.s=null,t.P=!0,ZF(t,n)}function ID(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function TL(n,e){var t=null;if(n.g==e){ID(n),eN(n),n.g=null;var r=2}else{if(!WM(n.h,e))return;t=e.D,lL(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Yi(r=cD(),new GF(r,t)),bD(n)}else IL(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function $q(n,e){return!(uL(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=uE(gs(n.Ja,n,e),DL(n,n.C)),n.C++,0)))}(n,e)||2==r&&XM(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:rm(n,5);break;case 4:rm(n,10);break;case 3:rm(n,6);break;default:rm(n,2)}}function DL(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function rm(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=gs(n.kb,n);t||(t=new nm("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||gD(t,"https"),_D(t)),function Lq(n,e){const t=new lD;if(Gt.Image){const r=new Image;r.onload=tD(yD,t,r,"TestLoadImage: loaded",!0,e),r.onerror=tD(yD,t,r,"TestLoadImage: error",!1,e),r.onabort=tD(yD,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=tD(yD,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else js(2);n.G=0,n.l&&n.l.va(e),SL(n),wL(n)}function SL(n){if(n.G=0,n.la=[],n.l){const e=cL(n.h);(0!=e.length||0!=n.i.length)&&(wF(n.la,e),wF(n.la,n.i),n.h.i.length=0,yM(n.i),n.i.length=0),n.l.ua()}}function AL(n,e,t){var r=t instanceof nm?Ud(t):new nm(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),mD(r,r.m);else{var i=Gt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new nm(null,void 0);r&&gD(o,r),e&&(o.g=e),i&&mD(o,i),t&&(o.l=t),r=o}return e=n.za,(t=n.D)&&e&&pr(r,t,e),pr(r,"VER",n.ma),wE(n,r),r}function xL(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mr(t&&n.Da&&!n.ra?new mE({jb:!0}):n.ra)).Ka(n.H),e}function RL(){}function CD(){if(xy&&!(10<=Number(sq)))throw Error("Environmental error: no available transport.")}function Wo(n,e){Ni.call(this),this.g=new vL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!nD(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nD(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ny(this)}function ML(n){jM.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function NL(){$M.call(this),this.status=1}function Ny(n){this.g=n}(bt=Mr.prototype).Ka=function(n){this.L=n},bt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():HM.g(),this.C=function zF(n){return n.h||(n.h=n.i())}(this.u?this.u:HM),this.g.onreadystatechange=gs(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void fL(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=Gt.FormData&&n instanceof Gt.FormData,!(0<=vF(Bq,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of t)this.g.setRequestHeader(o,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{mL(this),0<this.B&&((this.K=function jq(n){return xy&&function iq(){return function eq(n){var e=rq;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=EF(String(iD)).split("."),t=EF("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",o=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=vM(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||vM(0==i[2].length,0==o[2].length)||vM(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gs(this.qa,this)):this.A=UM(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){fL(this,o)}},bt.qa=function(){typeof mM<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yi(this,"timeout"),this.abort(8))},bt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Yi(this,"complete"),Yi(this,"abort"),wD(this))},bt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wD(this,!0)),Mr.X.M.call(this)},bt.Ha=function(){this.s||(this.F||this.v||this.l?gL(this):this.fb())},bt.fb=function(){gL(this)},bt.aa=function(){try{return 2<Bd(this)?this.g.status:-1}catch{return-1}},bt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},bt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Vq(e)}},bt.Ea=function(){return this.m},bt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(bt=vL.prototype).ma=8,bt.G=1,bt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new cE(this,this.j,n,void 0);let o=this.s;if(this.S&&(o?(o=DF(o),AF(o,this.S)):o=this.S),null!==this.o||this.N||(i.H=o,o=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=bL(this,i,e),pr(t=Ud(this.F),"RID",n),pr(t,"CVER",22),this.D&&pr(t,"X-HTTP-Session-Id",this.D),wE(this,t),o&&(this.N?e="headers="+encodeURIComponent(String(yL(o)))+"&"+e:this.o&&QM(t,this.o,o)),KM(this.h,i),this.Ya&&pr(t,"TYPE","init"),this.O?(pr(t,"$req",e),pr(t,"SID","null"),i.Z=!0,qM(i,t,null)):qM(i,t,e),this.G=2}}else 3==this.G&&(n?EL(this,n):0==this.i.length||aL(this.h)||EL(this))},bt.Ia=function(){if(this.u=null,CL(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=uE(gs(this.eb,this),n)}},bt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,js(10),ED(this),CL(this))},bt.cb=function(){null!=this.v&&(this.v=null,ED(this),XM(this),js(19))},bt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),js(2)):(this.j.info("Failed to ping google.com"),js(1))},(bt=RL.prototype).xa=function(){},bt.wa=function(){},bt.va=function(){},bt.ua=function(){},bt.Ra=function(){},CD.prototype.g=function(n,e){return new Wo(n,e)},Zi(Wo,Ni),Wo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;js(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=AL(n,null,n.V),bD(n)},Wo.prototype.close=function(){JM(this.g)},Wo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=OM(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&bD(e)},Wo.prototype.M=function(){this.g.l=null,delete this.j,JM(this.g),delete this.g,Wo.X.M.call(this)},Zi(ML,jM),Zi(NL,$M),Zi(Ny,RL),Ny.prototype.xa=function(){Yi(this.g,"a")},Ny.prototype.wa=function(n){Yi(this.g,new ML(n))},Ny.prototype.va=function(n){Yi(this.g,new NL)},Ny.prototype.ua=function(){Yi(this.g,"b")},CD.prototype.createWebChannel=CD.prototype.g,Wo.prototype.send=Wo.prototype.u,Wo.prototype.open=Wo.prototype.m,Wo.prototype.close=Wo.prototype.close,dD.NO_ERROR=0,dD.TIMEOUT=8,dD.HTTP_ERROR=6,qF.COMPLETE="complete",WF.EventType=lE,lE.OPEN="a",lE.CLOSE="b",lE.ERROR="c",lE.MESSAGE="d",Ni.prototype.listen=Ni.prototype.N,Mr.prototype.listenOnce=Mr.prototype.O,Mr.prototype.getLastError=Mr.prototype.Oa,Mr.prototype.getLastErrorCode=Mr.prototype.Ea,Mr.prototype.getStatus=Mr.prototype.aa,Mr.prototype.getResponseJson=Mr.prototype.Sa,Mr.prototype.getResponseText=Mr.prototype.fa,Mr.prototype.send=Mr.prototype.da,Mr.prototype.setWithCredentials=Mr.prototype.Ka;var Hq=Vd.createWebChannelTransport=function(){return new CD},Gq=Vd.getStatEventTarget=function(){return cD()},tN=Vd.ErrorCode=dD,qq=Vd.EventType=qF,zq=Vd.Event=em,PL=Vd.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Wq=Vd.FetchXmlHttpFactory=mE,TD=Vd.WebChannel=WF,Kq=Vd.XhrIo=Mr;const kL="@firebase/firestore";class Pi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pi.UNAUTHENTICATED=new Pi(null),Pi.GOOGLE_CREDENTIALS=new Pi("google-credentials-uid"),Pi.FIRST_PARTY=new Pi("first-party-uid"),Pi.MOCK_USER=new Pi("mock-user");let Py="9.16.0";const kf=new Bo.Yd("@firebase/firestore");function nN(){return kf.logLevel}function Ve(n,...e){if(kf.logLevel<=Bo.in.DEBUG){const t=e.map(rN);kf.debug(`Firestore (${Py}): ${n}`,...t)}}function Hr(n,...e){if(kf.logLevel<=Bo.in.ERROR){const t=e.map(rN);kf.error(`Firestore (${Py}): ${n}`,...t)}}function im(n,...e){if(kf.logLevel<=Bo.in.WARN){const t=e.map(rN);kf.warn(`Firestore (${Py}): ${n}`,...t)}}function rN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Py}) INTERNAL ASSERTION FAILED: `+n;throw Hr(e),new Error(e)}function wt(n,e){n||ct()}function rt(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class OL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pi.UNAUTHENTICATED))}shutdown(){}}class Jq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xq{constructor(e){this.t=e,this.currentUser=Pi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new vi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=l;e.enqueueRetryable((0,ve.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},g=y=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new vi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new OL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Pi(e)}}class ez{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Pi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(wt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class tz{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new ez(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Pi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nz{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=o=>{null!=o.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.A;return this.A=o.token,Ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?i(o):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.A=t.token,new FL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function rz(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class LL{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=rz(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function qt(n,e){return n<e?-1:n>e?1:0}function ky(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function VL(n){return n+"\0"}class gr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gr.fromMillis(Date.now())}static fromDate(e){return gr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new gr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new gr(0,0))}static max(){return new Dt(new gr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class EE{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===EE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof EE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),l=t.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends EE{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const iz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nr extends EE{construct(e,t,r){return new Nr(e,t,r)}static isValidIdentifier(e){return iz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Me(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Me(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(o(),i++)}if(o(),l)throw new Me(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nr(t)}static emptyPath(){return new Nr([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(mn.fromString(e))}static fromName(e){return new Qe(mn.fromString(e).popFirst(5))}static empty(){return new Qe(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new mn(e.slice()))}}class DD{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function iN(n){return n.fields.find(e=>2===e.kind)}function sm(n){return n.fields.filter(e=>2!==e.kind)}DD.UNKNOWN_ID=-1;class SD{constructor(e,t){this.fieldPath=e,this.kind=t}}class bE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bE(0,Ko.min())}}function UL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new gr(t+1,0):new gr(t,r));return new Ko(i,Qe.empty(),e)}function BL(n){return new Ko(n.readTime,n.key,-1)}class Ko{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ko(Dt.min(),Qe.empty(),-1)}static max(){return new Ko(Dt.max(),Qe.empty(),-1)}}function sN(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:qt(n.largestBatchId,e.largestBatchId))}const jL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $L{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Of(n){return oN.apply(this,arguments)}function oN(){return oN=(0,ve.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==jL)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),oN.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,o=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++o,l&&o===i&&t()},g=>r(g))}),l=!0,o===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const o=e.length,l=new Array(o);let h=0;for(let g=0;g<o;g++){const y=g;t(e[y]).next(I=>{l[y]=I,++h,h===o&&r(l)},I=>i(I))}})}static doWhile(e,t){return new ue((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class AD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new vi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new IE(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=aN(r.target.error);this.P.reject(new IE(e,i))}}static open(e,t,r,i){try{return new AD(t,e.transaction(i,r))}catch(o){throw new IE(t,o)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uz(t)}}class Uu{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Uu.D((0,k.z$)())&&Hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),om(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,k.hl)())return!1;if(Uu.N())return!0;const e=(0,k.z$)(),t=Uu.D(e),r=0<t&&t<10,i=Uu.k(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=l=>{r(l.target.result)},o.onblocked=()=>{i(new IE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Me(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Me(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new IE(e,h))},o.onupgradeneeded=l=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,o.transaction,l.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,ve.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.F(e);const g=AD.open(o.db,e,l?"readonly":"readwrite",r),y=i(g).next(I=>(g.V(),I)).catch(I=>(g.abort(I),ue.reject(I))).toPromise();return y.catch(()=>{}),yield g.v,y}catch(g){const y=g,I="FirebaseError"!==y.name&&h<3;if(Ve("SimpleDb","Transaction failed with error:",y.message,"Retrying:",I),o.close(),!I)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class az{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return om(this.q.delete())}}class IE extends Me{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ff(n){return"IndexedDbTransactionError"===n.name}class uz{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),om(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),om(this.store.add(e))}get(e){return om(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),om(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),om(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.H(i,(l,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new ue((o,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(o,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=o=>{const l=aN(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new ue((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const g=new az(h),y=t(h.primaryKey,h.value,g);if(y instanceof ue){const I=y.catch(S=>(g.done(),ue.reject(S)));r.push(I)}g.isDone?i():null===g.G?h.continue():h.continue(g.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function om(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=aN(r.target.error);t(i)}})}let HL=!1;function aN(n){const e=Uu.D((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HL||(HL=!0,setTimeout(()=>{throw r},0)),r}}return n}class lz{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ff(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Of(r)}yield t.nt(6e4)}))}}class cz{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,o=!0;return ue.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ve("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});o=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,o)).next(h=>(Ve("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,o)=>{const l=BL(o);sN(l,r)>0&&(r=l)}),new Ko(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Zo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class dz{constructor(e,t,r,i,o,l,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class Lf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Lf&&e.projectId===this.projectId&&e.database===this.database}}function GL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function am(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function CE(n){return null==n}function TE(n){return 0===n&&1/n==-1/0}function zL(n){return"number"==typeof n&&Number.isInteger(n)&&!TE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class wi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new wi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wi.EMPTY_BYTE_STRING=new wi("");const fz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vf(n){if(wt(!!n),"string"==typeof n){let e=0;const t=fz.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pr(n.seconds),nanos:Pr(n.nanos)}}function Pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function um(n){return"string"==typeof n?wi.fromBase64String(n):wi.fromUint8Array(n)}function uN(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function WL(n){const e=n.mapValue.fields.__previous_value__;return uN(e)?WL(e):e}function DE(n){const e=Vf(n.mapValue.fields.__local_write_time__.timestampValue);return new gr(e.seconds,e.nanos)}const Uf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xD={nullValue:"NULL_VALUE"};function lm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uN(n)?4:QL(n)?9007199254740991:10:ct()}function nc(n,e){if(n===e)return!0;const t=lm(n);if(t!==lm(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return DE(n).isEqual(DE(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Vf(r.timestampValue),l=Vf(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,um(n.bytesValue).isEqual(um(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Pr(r.geoPointValue.latitude)===Pr(i.geoPointValue.latitude)&&Pr(r.geoPointValue.longitude)===Pr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Pr(r.integerValue)===Pr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Pr(r.doubleValue),l=Pr(i.doubleValue);return o===l?TE(o)===TE(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return ky(n.arrayValue.values||[],e.arrayValue.values||[],nc);case 10:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(GL(o)!==GL(l))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===l[h]||!nc(o[h],l[h])))return!1;return!0}(n,e);default:return ct()}var i}function SE(n,e){return void 0!==(n.values||[]).find(t=>nc(t,e))}function Bf(n,e){if(n===e)return 0;const t=lm(n),r=lm(e);if(t!==r)return qt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Pr(i.integerValue||i.doubleValue),h=Pr(o.integerValue||o.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return KL(n.timestampValue,e.timestampValue);case 4:return KL(DE(n),DE(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(i,o){const l=um(i),h=um(o);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),h=o.split("/");for(let g=0;g<l.length&&g<h.length;g++){const y=qt(l[g],h[g]);if(0!==y)return y}return qt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const l=qt(Pr(i.latitude),Pr(o.latitude));return 0!==l?l:qt(Pr(i.longitude),Pr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const l=i.values||[],h=o.values||[];for(let g=0;g<l.length&&g<h.length;++g){const y=Bf(l[g],h[g]);if(y)return y}return qt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Uf.mapValue&&o===Uf.mapValue)return 0;if(i===Uf.mapValue)return 1;if(o===Uf.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),g=o.fields||{},y=Object.keys(g);h.sort(),y.sort();for(let I=0;I<h.length&&I<y.length;++I){const S=qt(h[I],y[I]);if(0!==S)return S;const R=Bf(l[h[I]],g[y[I]]);if(0!==R)return R}return qt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ct()}}function KL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=Vf(n),r=Vf(e),i=qt(t.seconds,r.seconds);return 0!==i?i:qt(t.nanos,r.nanos)}function Oy(n){return lN(n)}function lN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Vf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?um(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const l of r.values||[])o?o=!1:i+=",",i+=lN(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${lN(r.fields[h])}`;return o+"}"}(n.mapValue):ct();var e}function cm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cN(n){return!!n&&"integerValue"in n}function AE(n){return!!n&&"arrayValue"in n}function ZL(n){return!!n&&"nullValue"in n}function YL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function RD(n){return!!n&&"mapValue"in n}function xE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return am(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function pz(n){return"nullValue"in n?xD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?cm(Lf.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function gz(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?cm(Lf.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Uf:ct()}function JL(n,e){const t=Bf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function XL(n,e){const t=Bf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class jf{constructor(e,t){this.position=e,this.inclusive=t}}function eV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(r=o.field.isKeyField()?Qe.comparator(Qe.fromName(l.referenceValue),t.key):Bf(l,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function tV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!nc(n.position[t],e.position[t]))return!1;return!0}class nV{}class dn extends nV{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new mz(e,t,r):"array-contains"===t?new vz(e,r):"in"===t?new uV(e,r):"not-in"===t?new wz(e,r):"array-contains-any"===t?new Ez(e,r):new dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new _z(e,r):new yz(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Bf(t,this.value)):null!==t&&lm(this.value)===lm(t)&&this.matchesComparison(Bf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Nn extends nV{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Nn(e,t)}matches(e){return Fy(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Fy(n){return"and"===n.op}function dN(n){return"or"===n.op}function hN(n){return rV(n)&&Fy(n)}function rV(n){for(const e of n.filters)if(e instanceof Nn)return!1;return!0}function fN(n){if(n instanceof dn)return n.field.canonicalString()+n.op.toString()+Oy(n.value);if(hN(n))return n.filters.map(e=>fN(e)).join(",");{const e=n.filters.map(t=>fN(t)).join(",");return`${n.op}(${e})`}}function iV(n,e){return n instanceof dn?(t=n,(r=e)instanceof dn&&t.op===r.op&&t.field.isEqual(r.field)&&nc(t.value,r.value)):n instanceof Nn?function(t,r){return r instanceof Nn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,l)=>i&&iV(o,r.filters[l]),!0)}(n,e):void ct();var t,r}function sV(n,e){const t=n.filters.concat(e);return Nn.create(t,n.op)}function oV(n){return n instanceof dn?`${(e=n).field.canonicalString()} ${e.op} ${Oy(e.value)}`:n instanceof Nn?function(e){return e.op.toString()+" {"+e.getFilters().map(oV).join(" ,")+"}"}(n):"Filter";var e}class mz extends dn{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class _z extends dn{constructor(e,t){super(e,"in",t),this.keys=aV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yz extends dn{constructor(e,t){super(e,"not-in",t),this.keys=aV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function aV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class vz extends dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return AE(t)&&SE(t.arrayValue,this.value)}}class uV extends dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&SE(this.value.arrayValue,t)}}class wz extends dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(SE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!SE(this.value.arrayValue,t)}}class Ez extends dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!AE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>SE(this.value.arrayValue,r))}}class Ly{constructor(e,t="asc"){this.field=e,this.dir=t}}function bz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class kr{constructor(e,t){this.comparator=e,this.root=t||Qi.EMPTY}insert(e,t){return new kr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qi.BLACK,null,null))}remove(e){return new kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new MD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new MD(this.root,e,this.comparator,!1)}getReverseIterator(){return new MD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new MD(this.root,e,this.comparator,!0)}}class MD{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Qi.RED,this.left=i??Qi.EMPTY,this.right=o??Qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Qi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Qi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}Qi.EMPTY=null,Qi.RED=!0,Qi.BLACK=!1,Qi.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Qi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ln{constructor(e){this.comparator=e,this.data=new kr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lV(this.data.getIterator())}getIteratorFrom(e){return new lV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class lV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vy(n){return n.hasNext()?n.getNext():void 0}class co{constructor(e){this.fields=e,e.sort(Nr.comparator)}static empty(){return new co([])}unionWith(e){let t=new Ln(Nr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new co(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ky(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ji{constructor(e){this.value=e}static empty(){return new Ji({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!RD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xE(t)}setAll(e){let t=Nr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=xE(l):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());RD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];RD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){am(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ji(xE(this.value))}}function cV(n){const e=[];return am(n.fields,(t,r)=>{const i=new Nr([t]);if(RD(r)){const o=cV(r.mapValue).fields;if(0===o.length)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new co(e)}class sr{constructor(e,t,r,i,o,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new sr(e,0,Dt.min(),Dt.min(),Dt.min(),Ji.empty(),0)}static newFoundDocument(e,t,r,i){return new sr(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new sr(e,2,t,Dt.min(),Dt.min(),Ji.empty(),0)}static newUnknownDocument(e,t){return new sr(e,3,t,Dt.min(),Dt.min(),Ji.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ji.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ji.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Iz{constructor(e,t=null,r=[],i=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=h,this.ft=null}}function pN(n,e=null,t=[],r=[],i=null,o=null,l=null){return new Iz(n,e,t,r,i,o,l)}function dm(n){const e=rt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>fN(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),CE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Oy(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Oy(r)).join(",")),e.ft=t}return e.ft}function RE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tV(n.startAt,e.startAt)&&tV(n.endAt,e.endAt)}function ND(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function PD(n,e){return n.filters.filter(t=>t instanceof dn&&t.field.isEqual(e))}function dV(n,e,t){let r=xD,i=!0;for(const o of PD(n,e)){let l=xD,h=!0;switch(o.op){case"<":case"<=":l=pz(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,h=!1;break;case"!=":case"not-in":l=xD}JL({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];JL({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function hV(n,e,t){let r=Uf,i=!0;for(const o of PD(n,e)){let l=Uf,h=!0;switch(o.op){case">=":case">":l=gz(o.value),h=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,h=!1;break;case"!=":case"not-in":l=Uf}XL({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];XL({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class jd{constructor(e,t=null,r=[],i=[],o=null,l="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=g,this.dt=null,this._t=null}}function fV(n,e,t,r,i,o,l,h){return new jd(n,e,t,r,i,o,l,h)}function Uy(n){return new jd(n)}function pV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function gN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function kD(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function mN(n){return null!==n.collectionGroup}function hm(n){const e=rt(n);if(null===e.dt){e.dt=[];const t=kD(e),r=gN(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Ly(t)),e.dt.push(new Ly(Nr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.dt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Ly(Nr.keyField(),o))}}}return e.dt}function $s(n){const e=rt(n);if(!e._t)if("F"===e.limitType)e._t=pN(e.path,e.collectionGroup,hm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of hm(e))t.push(new Ly(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new jf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new jf(e.startAt.position,e.startAt.inclusive):null;e._t=pN(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function _N(n,e){e.getFirstInequalityField(),kD(n);const t=n.filters.concat([e]);return new jd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function OD(n,e,t){return new jd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ME(n,e){return RE($s(n),$s(e))&&n.limitType===e.limitType}function gV(n){return`${dm($s(n))}|lt:${n.limitType}`}function yN(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>oV(r)).join(", ")}]`),CE(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Oy(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Oy(r)).join(",")),`Target(${t})`}($s(n))}; limitType=${n.limitType})`}function vN(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of hm(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,l){const h=eV(i,o,l);return i.inclusive?h<=0:h<0}(t.startAt,hm(t),r)||t.endAt&&!function(i,o,l){const h=eV(i,o,l);return i.inclusive?h>=0:h>0}(t.endAt,hm(t),r)));var t,r}function mV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _V(n){return(e,t)=>{let r=!1;for(const i of hm(n)){const o=Cz(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Cz(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,o,l){const h=o.data.field(i),g=l.data.field(i);return null!==h&&null!==g?Bf(h,g):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function yV(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:TE(e)?"-0":e}}function vV(n){return{integerValue:""+n}}function wV(n,e){return zL(e)?vV(e):yV(n,e)}class FD{constructor(){this._=void 0}}function Tz(n,e,t){return n instanceof By?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof fm?bV(n,e):n instanceof pm?IV(n,e):function(r,i){const o=EV(r,i),l=CV(o)+CV(r.gt);return cN(o)&&cN(r.gt)?vV(l):yV(r.yt,l)}(n,e)}function Dz(n,e,t){return n instanceof fm?bV(n,e):n instanceof pm?IV(n,e):t}function EV(n,e){return n instanceof jy?cN(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class By extends FD{}class fm extends FD{constructor(e){super(),this.elements=e}}function bV(n,e){const t=TV(e);for(const r of n.elements)t.some(i=>nc(i,r))||t.push(r);return{arrayValue:{values:t}}}class pm extends FD{constructor(e){super(),this.elements=e}}function IV(n,e){let t=TV(e);for(const r of n.elements)t=t.filter(i=>!nc(i,r));return{arrayValue:{values:t}}}class jy extends FD{constructor(e,t){super(),this.yt=e,this.gt=t}}function CV(n){return Pr(n.integerValue||n.doubleValue)}function TV(n){return AE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class NE{constructor(e,t){this.field=e,this.transform=t}}class Az{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function LD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class VD{}function DV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Hy(n.key,mr.none()):new $y(n.key,n.data,mr.none());{const t=n.data,r=Ji.empty();let i=new Ln(Nr.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);null===l&&o.length>1&&(o=o.popLast(),l=t.field(o)),null===l?r.delete(o):r.set(o,l),i=i.add(o)}return new $d(n.key,r,new co(i.toArray()),mr.none())}}function xz(n,e,t){n instanceof $y?function(r,i,o){const l=r.value.clone(),h=xV(r.fieldTransforms,i,o.transformResults);l.setAll(h),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof $d?function(r,i,o){if(!LD(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=xV(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(AV(r)),h.setAll(l),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function PE(n,e,t,r){return n instanceof $y?function(i,o,l,h){if(!LD(i.precondition,o))return l;const g=i.value.clone(),y=RV(i.fieldTransforms,h,o);return g.setAll(y),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof $d?function(i,o,l,h){if(!LD(i.precondition,o))return l;const g=RV(i.fieldTransforms,h,o),y=o.data;return y.setAll(AV(i)),y.setAll(g),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(l=t,LD(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l);var o,l}function Rz(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=EV(r.transform,i||null);null!=o&&(null===t&&(t=Ji.empty()),t.set(r.field,o))}return t||null}function SV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ky(t,r,(i,o)=>function Sz(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof fm&&r instanceof fm||t instanceof pm&&r instanceof pm?ky(t.elements,r.elements,nc):t instanceof jy&&r instanceof jy?nc(t.gt,r.gt):t instanceof By&&r instanceof By);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class $y extends VD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $d extends VD{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function AV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function xV(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,h=e.data.field(o.field);r.set(o.field,Dz(l,h,t[i]))}return r}function RV(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,Tz(o,l,e))}return r}class Hy extends VD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wN extends VD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Mz{constructor(e){this.count=e}}var ni,_n;function MV(n){switch(n){default:return ct();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function NV(n){if(void 0===n)return Hr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case ni.OK:return ce.OK;case ni.CANCELLED:return ce.CANCELLED;case ni.UNKNOWN:return ce.UNKNOWN;case ni.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case ni.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case ni.INTERNAL:return ce.INTERNAL;case ni.UNAVAILABLE:return ce.UNAVAILABLE;case ni.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case ni.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case ni.NOT_FOUND:return ce.NOT_FOUND;case ni.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case ni.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case ni.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case ni.ABORTED:return ce.ABORTED;case ni.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case ni.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case ni.DATA_LOSS:return ce.DATA_LOSS;default:return ct()}}(_n=ni||(ni={}))[_n.OK=0]="OK",_n[_n.CANCELLED=1]="CANCELLED",_n[_n.UNKNOWN=2]="UNKNOWN",_n[_n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_n[_n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_n[_n.NOT_FOUND=5]="NOT_FOUND",_n[_n.ALREADY_EXISTS=6]="ALREADY_EXISTS",_n[_n.PERMISSION_DENIED=7]="PERMISSION_DENIED",_n[_n.UNAUTHENTICATED=16]="UNAUTHENTICATED",_n[_n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_n[_n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_n[_n.ABORTED=10]="ABORTED",_n[_n.OUT_OF_RANGE=11]="OUT_OF_RANGE",_n[_n.UNIMPLEMENTED=12]="UNIMPLEMENTED",_n[_n.INTERNAL=13]="INTERNAL",_n[_n.UNAVAILABLE=14]="UNAVAILABLE",_n[_n.DATA_LOSS=15]="DATA_LOSS";class $f{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){am(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return qL(this.inner)}size(){return this.innerSize}}const Nz=new kr(Qe.comparator);function ho(){return Nz}const PV=new kr(Qe.comparator);function kE(...n){let e=PV;for(const t of n)e=e.insert(t.key,t);return e}function kV(n){let e=PV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function rc(){return OE()}function OV(){return OE()}function OE(){return new $f(n=>n.toString(),(n,e)=>n.isEqual(e))}const Pz=new kr(Qe.comparator),kz=new Ln(Qe.comparator);function Yt(...n){let e=kz;for(const t of n)e=e.add(t);return e}const Oz=new Ln(qt);function UD(){return Oz}class FE{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,LE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new FE(Dt.min(),i,UD(),ho(),Yt())}}class LE{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new LE(r,t,Yt(),Yt(),Yt())}}class BD{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class FV{constructor(e,t){this.targetId=e,this.Et=t}}class LV{constructor(e,t,r=wi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class VV{constructor(){this.At=0,this.Rt=BV(),this.bt=wi.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Yt(),t=Yt(),r=Yt();return this.Rt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new LE(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=BV()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Fz{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=ho(),this.qt=UV(),this.Ut=new Ln(qt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const o=i.target;if(ND(o))if(0===r){const l=new Qe(o.path);this.Qt(t,l,sr.newNoDocument(l,Dt.min()))}else wt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((o,l)=>{const h=this.Yt(l);if(h){if(o.current&&ND(h.target)){const g=new Qe(h.target.path);null!==this.Lt.get(g)||this.te(l,g)||this.Qt(l,g,sr.newNoDocument(g,e))}o.St&&(t.set(l,o.Ct()),o.xt())}});let r=Yt();this.qt.forEach((o,l)=>{let h=!0;l.forEachWhile(g=>{const y=this.Yt(g);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.Lt.forEach((o,l)=>l.setReadTime(e));const i=new FE(e,t,this.Ut,this.Lt,r);return this.Lt=ho(),this.qt=UV(),this.Ut=new Ln(qt),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new VV,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Ln(qt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new VV),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function UV(){return new kr(Qe.comparator)}function BV(){return new kr(Qe.comparator)}const Lz={asc:"ASCENDING",desc:"DESCENDING"},Vz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uz={and:"AND",or:"OR"};class Bz{constructor(e,t){this.databaseId=e,this.wt=t}}function Gy(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jV(n,e){return n.wt?e.toBase64():e.toUint8Array()}function jz(n,e){return Gy(n,e.toTimestamp())}function Gr(n){return wt(!!n),Dt.fromTimestamp(function(e){const t=Vf(e);return new gr(t.seconds,t.nanos)}(n))}function EN(n,e){return(t=n,new mn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function $V(n){const e=mn.fromString(n);return wt(QV(e)),e}function VE(n,e){return EN(n.databaseId,e.path)}function ic(n,e){const t=$V(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(GV(t))}function bN(n,e){return EN(n.databaseId,e)}function HV(n){const e=$V(n);return 4===e.length?mn.emptyPath():GV(e)}function UE(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GV(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function qV(n,e,t){return{name:VE(n,e),fields:t.value.mapValue.fields}}function zV(n,e,t){const r=ic(n,e.name),i=Gr(e.updateTime),o=e.createTime?Gr(e.createTime):Dt.min(),l=new Ji({mapValue:{fields:e.fields}}),h=sr.newFoundDocument(r,i,o,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function BE(n,e){let t;if(e instanceof $y)t={update:qV(n,e.key,e.value)};else if(e instanceof Hy)t={delete:VE(n,e.key)};else if(e instanceof $d)t={update:qV(n,e.key,e.data),updateMask:Zz(e.fieldMask)};else{if(!(e instanceof wN))return ct();t={verify:VE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof By)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fm)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof pm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof jy)return{fieldPath:o.field.canonicalString(),increment:l.gt};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:jz(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function IN(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?mr.updateTime(Gr(i.updateTime)):void 0!==i.exists?mr.exists(i.exists):mr.none():mr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let h=null;"setToServerValue"in l?(wt("REQUEST_TIME"===l.setToServerValue),h=new By):"appendMissingElements"in l?h=new fm(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new pm(l.removeAllFromArray.values||[]):"increment"in l?h=new jy(o,l.increment):ct();const g=Nr.fromServerFormat(l.fieldPath);return new NE(g,h)}(n,i)):[];var i;if(e.update){const i=ic(n,e.update.name),o=new Ji({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new co((e.updateMask.fieldPaths||[]).map(y=>Nr.fromServerFormat(y)));return new $d(i,o,l,t,r)}return new $y(i,o,t,r)}if(e.delete){const i=ic(n,e.delete);return new Hy(i,t)}if(e.verify){const i=ic(n,e.verify);return new wN(i,t)}return ct()}function WV(n,e){return{documents:[bN(n,e.path)]}}function CN(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=bN(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bN(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return YV(Nn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(g){if(0!==g.length)return g.map(y=>{return{field:qy((I=y).field),direction:zz(I.dir)};var I})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=(y=e.limit,n.wt||CE(y)?y:{value:y});var y,h,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function KV(n){let e=HV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let o=[];t.where&&(o=function(I){const S=ZV(I);return S instanceof Nn&&hN(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(I=>{return new Ly(zy((S=I).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(I){let S;return S="object"==typeof I?I.value:I,CE(S)?null:S}(t.limit));let g=null;var I;t.startAt&&(g=new jf((I=t.startAt).values||[],!!I.before));let y=null;return t.endAt&&(y=function(I){return new jf(I.values||[],!I.before)}(t.endAt)),fV(e,i,l,o,h,"F",g,y)}function ZV(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zy(e.unaryFilter.field);return dn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=zy(e.unaryFilter.field);return dn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zy(e.unaryFilter.field);return dn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zy(e.unaryFilter.field);return dn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}(n):void 0!==n.fieldFilter?dn.create(zy((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Nn.create(e.compositeFilter.filters.map(t=>ZV(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ct()}}(e.compositeFilter.op))}(n):ct();var e}function zz(n){return Lz[n]}function Wz(n){return Vz[n]}function Kz(n){return Uz[n]}function qy(n){return{fieldPath:n.canonicalString()}}function zy(n){return Nr.fromServerFormat(n.fieldPath)}function YV(n){return n instanceof dn?function(e){if("=="===e.op){if(YL(e.value))return{unaryFilter:{field:qy(e.field),op:"IS_NAN"}};if(ZL(e.value))return{unaryFilter:{field:qy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(YL(e.value))return{unaryFilter:{field:qy(e.field),op:"IS_NOT_NAN"}};if(ZL(e.value))return{unaryFilter:{field:qy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qy(e.field),op:Wz(e.op),value:e.value}}}(n):n instanceof Nn?function(e){const t=e.getFilters().map(r=>YV(r));return 1===t.length?t[0]:{compositeFilter:{op:Kz(e.op),filters:t}}}(n):ct()}function Zz(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Hs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JV(e)),e=Yz(n.get(t),e);return JV(e)}function Yz(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function JV(n){return n+"\x01\x01"}function sc(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf("\x01",o);switch((l<0||l>t)&&ct(),n.charAt(l+1)){case"\x01":const h=n.substring(o,l);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(o,l),i+="\0";break;case"\x11":i+=n.substring(o,l+1);break;default:ct()}o=l+2}return new mn(r)}const XV=["userId","batchId"];function jD(n,e){return[n,Hs(e)]}function eU(n,e,t){return[n,Hs(e),t]}const Qz={},Jz=["prefixPath","collectionGroup","readTime","documentId"],Xz=["prefixPath","collectionGroup","documentId"],eW=["collectionGroup","readTime","prefixPath","documentId"],tW=["canonicalId","targetId"],nW=["targetId","path"],rW=["path","targetId"],iW=["collectionId","parent"],sW=["indexId","uid"],oW=["uid","sequenceNumber"],aW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uW=["indexId","uid","orderedDocumentKey"],lW=["userId","collectionPath","documentId"],cW=["userId","collectionPath","largestBatchId"],dW=["userId","collectionGroup","largestBatchId"],tU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hW=[...tU,"documentOverlays"],nU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rU=nU,fW=[...rU,"indexConfiguration","indexState","indexEntries"];class TN extends $L{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function ki(n,e){const t=rt(n);return Uu.M(t.se,e)}class DN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&xz(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=PE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=PE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=OV();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=t.has(i.key)?null:h;const g=DV(l,h);null!==g&&r.set(i.key,g),l.isValidDocument()||l.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&ky(this.mutations,e.mutations,(t,r)=>SV(t,r))&&ky(this.baseMutations,e.baseMutations,(t,r)=>SV(t,r))}}class SN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=Pz;const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new SN(e,t,r,i)}}class AN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hf{constructor(e,t,r,i,o=Dt.min(),l=Dt.min(),h=wi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Hf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Hf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Hf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class iU{constructor(e){this.ie=e}}function sU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$D(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:VE(i=n.ie,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Gy(i,o.version.toTimestamp()),createTime:Gy(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:gm(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:gm(e.version)}}var i,o;return r}function $D(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function gm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mm(n){const e=new gr(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function _m(n,e){const t=(e.baseMutations||[]).map(o=>IN(n.ie,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>IN(n.ie,o)),i=gr.fromMillis(e.localWriteTimeMs);return new DN(e.batchId,i,t,r)}function jE(n){const e=mm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?mm(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(wt(1===(i=n.query).documents.length),r=$s(Uy(HV(i.documents[0])))):r=$s(KV(n.query)),new Hf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,wi.fromBase64String(n.resumeToken))}function oU(n,e){const t=gm(e.snapshotVersion),r=gm(e.lastLimboFreeSnapshotVersion);let i;i=ND(e.target)?WV(n.ie,e.target):CN(n.ie,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:dm(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function xN(n){const e=KV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?OD(e,e.limit,"L"):e}function RN(n,e){return new AN(e.largestBatchId,IN(n.ie,e.overlayMutation))}function aU(n,e){const t=e.path.lastSegment();return[n,Hs(e.path.popLast()),t]}function uU(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:gm(r.readTime),documentKey:Hs(r.documentKey.path),largestBatchId:r.largestBatchId}}class gW{getBundleMetadata(e,t){return lU(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:mm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return lU(e).put({bundleId:(r=t).id,createTime:gm(Gr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return cU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:xN(i.bundledQuery),readTime:mm(i.readTime)};var i})}saveNamedQuery(e,t){return cU(e).put({name:(r=t).name,readTime:gm(Gr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function lU(n){return ki(n,"bundles")}function cU(n){return ki(n,"namedQueries")}class HD{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new HD(e,t.uid||"")}getOverlay(e,t){return $E(e).get(aU(this.userId,t)).next(r=>r?RN(this.yt,r):null)}getOverlays(e,t){const r=rc();return ue.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,l)=>{const h=new AN(t,l);i.push(this.oe(e,h))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Hs(l.getCollectionPath())));const o=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push($E(e).Y("collectionPathOverlayIndex",h))}),ue.waitFor(o)}getOverlaysForCollection(e,t,r){const i=rc(),o=Hs(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return $E(e).W("collectionPathOverlayIndex",l).next(h=>{for(const g of h){const y=RN(this.yt,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=rc();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $E(e).Z({index:"collectionGroupOverlayIndex",range:h},(g,y,I)=>{const S=RN(this.yt,y);o.size()<i||S.largestBatchId===l?(o.set(S.getKey(),S),l=S.largestBatchId):I.done()}).next(()=>o)}oe(e,t){return $E(e).put(function(r,i,o){const[l,h,g]=aU(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:g,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:BE(r.ie,o.mutation)}}(this.yt,this.userId,t))}}function $E(n){return ki(n,"documentOverlays")}class ym{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Pr(e.integerValue));else if("doubleValue"in e){const r=Pr(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),TE(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(um(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?QL(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):ct()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),Qe.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function mW(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function dU(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=mW(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}ym.Ie=new ym;class _W{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=dU(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=dU(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class yW{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class vW{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class HE{constructor(){this.$e=new _W,this.Be=new yW(this.$e),this.Le=new vW(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class vm{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new vm(this.indexId,this.documentKey,this.arrayValue,r)}}function Gf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=hU(n.arrayValue,e.arrayValue),0!==t?t:(t=hU(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function hU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class wW{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){wt(e.collectionGroup===this.collectionId);const t=iN(e);if(void 0!==t&&!this.We(t))return!1;const r=sm(e);let i=0,o=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const l=r[i];if(!this.ze(this.Qe,l)||!this.He(this.Ke[o++],l))return!1;++i}for(;i<r.length;++i)if(o>=this.Ke.length||!this.He(this.Ke[o++],r[i]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function fU(n){var e,t;if(wt(n instanceof dn||n instanceof Nn),n instanceof dn){if(n instanceof uV){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>dn.create(n.field,"==",o)))||[];return Nn.create(i,"or")}return n}const r=n.filters.map(i=>fU(i));return Nn.create(r,n.op)}function EW(n){if(0===n.getFilters().length)return[];const e=PN(fU(n));return wt(pU(e)),MN(e)||NN(e)?[e]:e.getFilters()}function MN(n){return n instanceof dn}function NN(n){return n instanceof Nn&&hN(n)}function pU(n){return MN(n)||NN(n)||function(e){if(e instanceof Nn&&dN(e)){for(const t of e.getFilters())if(!MN(t)&&!NN(t))return!1;return!0}return!1}(n)}function PN(n){if(wt(n instanceof dn||n instanceof Nn),n instanceof dn)return n;if(1===n.filters.length)return PN(n.filters[0]);const e=n.filters.map(r=>PN(r));let t=Nn.create(e,n.op);return t=GD(t),pU(t)?t:(wt(t instanceof Nn),wt(Fy(t)),wt(t.filters.length>1),t.filters.reduce((r,i)=>kN(r,i)))}function kN(n,e){let t;return wt(n instanceof dn||n instanceof Nn),wt(e instanceof dn||e instanceof Nn),t=n instanceof dn?e instanceof dn?Nn.create([n,e],"and"):gU(n,e):e instanceof dn?gU(e,n):function(r,i){if(wt(r.filters.length>0&&i.filters.length>0),Fy(r)&&Fy(i))return sV(r,i.getFilters());const o=dN(r)?r:i,l=dN(r)?i:r,h=o.filters.map(g=>kN(g,l));return Nn.create(h,"or")}(n,e),GD(t)}function gU(n,e){if(Fy(e))return sV(e,n.getFilters());{const t=e.filters.map(r=>kN(n,r));return Nn.create(t,"or")}}function GD(n){if(wt(n instanceof dn||n instanceof Nn),n instanceof dn)return n;const e=n.getFilters();if(1===e.length)return GD(e[0]);if(rV(n))return n;const t=e.map(i=>GD(i)),r=[];return t.forEach(i=>{i instanceof dn?r.push(i):i instanceof Nn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Nn.create(r,n.op)}class bW{constructor(){this.Je=new ON}addToCollectionParentIndex(e,t){return this.Je.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Ko.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Ko.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class ON{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ln(mn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ln(mn.comparator)).toArray()}}const qD=new Uint8Array(0);class IW{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new ON,this.Xe=new $f(r=>dm(r),(r,i)=>RE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const o={collectionId:r,parent:Hs(i)};return mU(e).put(o)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[VL(t),""],!1,!0);return mU(e).W(i).next(o=>{for(const l of o){if(l.collectionId!==t)break;r.push(sc(l.parent))}return r})}addFieldIndex(e,t){const r=zD(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const o=r.add(i);if(t.indexState){const l=qE(e);return o.next(h=>{l.put(uU(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=zD(e),i=qE(e),o=GE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=GE(e);let i=!0;const o=new Map;return ue.forEach(this.Ze(t),l=>this.tn(e,l).next(h=>{i&&(i=!!h),o.set(l,h)})).next(()=>{if(i){let l=Yt();const h=[];return ue.forEach(o,(g,y)=>{var I;Ve("IndexedDbIndexManager",`Using index ${I=g,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(Ge=>`${Ge.fieldPath}:${Ge.kind}`).join(",")}`} to execute ${dm(t)}`);const S=function(Ge,ze){const pt=iN(ze);if(void 0===pt)return null;for(const Ct of PD(Ge,pt.fieldPath))switch(Ct.op){case"array-contains-any":return Ct.value.arrayValue.values||[];case"array-contains":return[Ct.value]}return null}(y,g),R=function(Ge,ze){const pt=new Map;for(const Ct of sm(ze))for(const on of PD(Ge,Ct.fieldPath))switch(on.op){case"==":case"in":pt.set(Ct.fieldPath.canonicalString(),on.value);break;case"not-in":case"!=":return pt.set(Ct.fieldPath.canonicalString(),on.value),Array.from(pt.values())}return null}(y,g),O=function(Ge,ze){const pt=[];let Ct=!0;for(const on of sm(ze)){const zr=0===on.kind?dV(Ge,on.fieldPath,Ge.startAt):hV(Ge,on.fieldPath,Ge.startAt);pt.push(zr.value),Ct&&(Ct=zr.inclusive)}return new jf(pt,Ct)}(y,g),U=function(Ge,ze){const pt=[];let Ct=!0;for(const on of sm(ze)){const zr=0===on.kind?hV(Ge,on.fieldPath,Ge.endAt):dV(Ge,on.fieldPath,Ge.endAt);pt.push(zr.value),Ct&&(Ct=zr.inclusive)}return new jf(pt,Ct)}(y,g),Z=this.en(g,y,O),te=this.en(g,y,U),$e=this.nn(g,y,R),Ke=this.sn(g.indexId,S,Z,O.inclusive,te,U.inclusive,$e);return ue.forEach(Ke,Ge=>r.J(Ge,t.limit).next(ze=>{ze.forEach(pt=>{const Ct=Qe.fromSegments(pt.documentKey);l.has(Ct)||(l=l.add(Ct),h.push(Ct))})}))}).next(()=>h)}return ue.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:EW(Nn.create(e.filters,"and")).map(r=>pN(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,o,l,h){const g=(null!=t?t.length:1)*Math.max(r.length,o.length),y=g/(null!=t?t.length:1),I=[];for(let S=0;S<g;++S){const R=t?this.rn(t[S/y]):qD,O=this.on(e,R,r[S%y],i),U=this.un(e,R,o[S%y],l),Z=h.map(te=>this.on(e,R,te,!0));I.push(...this.createRange(O,U,Z))}return I}on(e,t,r,i){const o=new vm(e,Qe.empty(),t,r);return i?o:o.Ue()}un(e,t,r,i){const o=new vm(e,Qe.empty(),t,r);return i?o.Ue():o}tn(e,t){const r=new wW(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let l=null;for(const h of o)r.je(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return ue.forEach(i,o=>this.tn(e,o).next(l=>{l?0!==r&&l.fields.length<function(h){let g=new Ln(Nr.comparator),y=!1;for(const I of h.filters)for(const S of I.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?y=!0:g=g.add(S.field));for(const I of h.orderBy)I.field.isKeyField()||(g=g.add(I.field));return g.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new HE;for(const i of sm(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const l=r.qe(i.kind);ym.Ie.ue(o,l)}return r.Fe()}rn(e){const t=new HE;return ym.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new HE;return ym.Ie.ue(cm(this.databaseId,t),r.qe(function(i){const o=sm(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new HE);let o=0;for(const l of sm(e)){const h=r[o++];for(const g of i)if(this.hn(t,l.fieldPath)&&AE(h))i=this.ln(i,l,h);else{const y=g.qe(l.kind);ym.Ie.ue(h,y)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const h of i){const g=new HE;g.seed(h.Fe()),ym.Ie.ue(l,g.qe(t.kind)),o.push(g)}return o}hn(e,t){return!!e.filters.find(r=>r instanceof dn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=zD(e),i=qE(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(o=>{const l=[];return ue.forEach(o,h=>i.get([h.indexId,this.uid]).next(g=>{l.push(function(y,I){const S=I?new bE(I.sequenceNumber,new Ko(mm(I.readTime),new Qe(sc(I.documentKey)),I.largestBatchId)):bE.empty(),R=y.fields.map(([O,U])=>new SD(Nr.fromServerFormat(O),U));return new DD(y.indexId,y.collectionGroup,R,S)}(h,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:qt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=zD(e),o=qE(e);return this.dn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ue.forEach(h,g=>o.put(uU(g.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,o)=>{const l=r.get(i.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ue.forEach(h,g=>this._n(e,i,g).next(y=>{const I=this.wn(o,g);return y.isEqual(I)?ue.resolve():this.mn(e,o,g,y,I)}))))})}gn(e,t,r,i){return GE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return GE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=GE(e);let o=new Ln(Gf);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,h)=>{o=o.add(new vm(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}wn(e,t){let r=new Ln(Gf);const i=this.cn(t,e);if(null==i)return r;const o=iN(t);if(null!=o){const l=e.data.field(o.fieldPath);if(AE(l))for(const h of l.arrayValue.values||[])r=r.add(new vm(t.indexId,e.key,this.rn(h),i))}else r=r.add(new vm(t.indexId,e.key,qD,i));return r}mn(e,t,r,i,o){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,g,y,I,S){const R=h.getIterator(),O=g.getIterator();let U=Vy(R),Z=Vy(O);for(;U||Z;){let te=!1,$e=!1;if(U&&Z){const Ke=y(U,Z);Ke<0?$e=!0:Ke>0&&(te=!0)}else null!=U?$e=!0:te=!0;te?(I(Z),Z=Vy(O)):$e?(S(U),U=Vy(R)):(U=Vy(R),Z=Vy(O))}}(i,o,Gf,h=>{l.push(this.gn(e,t,r,h))},h=>{l.push(this.yn(e,t,r,h))}),ue.waitFor(l)}dn(e){let t=1;return qE(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Gf(l,h)).filter((l,h,g)=>!h||0!==Gf(l,g[h-1]));const i=[];i.push(e);for(const l of r){const h=Gf(l,e),g=Gf(l,t);if(0===h)i[0]=e.Ue();else if(h>0&&g<0)i.push(l),i.push(l.Ue());else if(g>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.pn(i[l],i[l+1]))return[];o.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,qD,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,qD,[]]))}return o}pn(e,t){return Gf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_U)}getMinOffset(e,t){return ue.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||ct())).next(_U)}}function mU(n){return ki(n,"collectionParents")}function GE(n){return ki(n,"indexEntries")}function zD(n){return ki(n,"indexConfiguration")}function qE(n){return ki(n,"indexState")}function _U(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;sN(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ko(e.readTime,e.documentKey,t)}const yU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fo(e,fo.DEFAULT_COLLECTION_PERCENTILE,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vU(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let h=0;const g=r.Z({range:l},(I,S,R)=>(h++,R.delete()));o.push(g.next(()=>{wt(1===h)}));const y=[];for(const I of t.mutations){const S=eU(e,I.key.path,t.batchId);o.push(i.delete(S)),y.push(I.key)}return ue.waitFor(o).next(()=>y)}function WD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}fo.DEFAULT_COLLECTION_PERCENTILE=10,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fo.DEFAULT=new fo(41943040,fo.DEFAULT_COLLECTION_PERCENTILE,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fo.DISABLED=new fo(-1,0,0);class KD{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){wt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new KD(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qf(e).Z({index:"userMutationsIndex",range:r},(i,o,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Wy(e),l=qf(e);return l.add({}).next(h=>{wt("number"==typeof h);const g=new DN(h,t,r,i),y=function(R,O,U){const Z=U.baseMutations.map($e=>BE(R.ie,$e)),te=U.mutations.map($e=>BE(R.ie,$e));return{userId:O,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:Z,mutations:te}}(this.yt,this.userId,g),I=[];let S=new Ln((R,O)=>qt(R.canonicalString(),O.canonicalString()));for(const R of i){const O=eU(this.userId,R.key.path,h);S=S.add(R.key.path.popLast()),I.push(l.put(y)),I.push(o.put(O,Qz))}return S.forEach(R=>{I.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.In[h]=g.keys()}),ue.waitFor(I).next(()=>g)})}lookupMutationBatch(e,t){return qf(e).get(t).next(r=>r?(wt(r.userId===this.userId),_m(this.yt,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return qf(e).Z({index:"userMutationsIndex",range:i},(l,h,g)=>{h.userId===this.userId&&(wt(h.batchId>=r),o=_m(this.yt,h)),g.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return qf(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,o,l)=>{r=o.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qf(e).W("userMutationsIndex",t).next(r=>r.map(i=>_m(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Wy(e).Z({range:i},(l,h,g)=>{const[y,I,S]=l,R=sc(I);if(y===this.userId&&t.path.isEqual(R))return qf(e).get(S).next(O=>{if(!O)throw ct();wt(O.userId===this.userId),o.push(_m(this.yt,O))});g.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln(qt);const i=[];return t.forEach(o=>{const l=jD(this.userId,o.path),h=IDBKeyRange.lowerBound(l),g=Wy(e).Z({range:h},(y,I,S)=>{const[R,O,U]=y,Z=sc(O);R===this.userId&&o.path.isEqual(Z)?r=r.add(U):S.done()});i.push(g)}),ue.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=jD(this.userId,r),l=IDBKeyRange.lowerBound(o);let h=new Ln(qt);return Wy(e).Z({range:l},(g,y,I)=>{const[S,R,O]=g,U=sc(R);S===this.userId&&r.isPrefixOf(U)?U.length===i&&(h=h.add(O)):I.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(o=>{i.push(qf(e).get(o).next(l=>{if(null===l)throw ct();wt(l.userId===this.userId),r.push(_m(this.yt,l))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return vU(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Wy(e).Z({range:r},(o,l,h)=>{if(o[0]===this.userId){const g=sc(o[1]);i.push(g)}else h.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,t){return wU(e,this.userId,t)}Rn(e){return EU(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function wU(n,e,t){const r=jD(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return Wy(n).Z({range:o,X:!0},(h,g,y)=>{const[I,S,R]=h;I===e&&S===i&&(l=!0),y.done()}).next(()=>l)}function qf(n){return ki(n,"mutations")}function Wy(n){return ki(n,"documentMutations")}function EU(n){return ki(n,"mutationQueues")}class wm{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new wm(0)}static vn(){return new wm(-1)}}class CW{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new wm(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Dt.fromTimestamp(new gr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ky(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Ky(e).Z((l,h)=>{const g=jE(h);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,o.push(this.removeTargetData(e,g)))}).next(()=>ue.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ky(e).Z((r,i)=>{const o=jE(i);t(o)})}Vn(e){return bU(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}Sn(e,t){return bU(e).put("targetGlobalKey",t)}Dn(e,t){return Ky(e).put(oU(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=dm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ky(e).Z({range:i,index:"queryTargetsIndex"},(l,h,g)=>{const y=jE(h);RE(t,y.target)&&(o=y,g.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=zf(e);return t.forEach(l=>{const h=Hs(l.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=zf(e);return ue.forEach(t,o=>{const l=Hs(o.path);return ue.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=zf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=zf(e);let o=Yt();return i.Z({range:r,X:!0},(l,h,g)=>{const y=sc(l[1]),I=new Qe(y);o=o.add(I)}).next(()=>o)}containsKey(e,t){const r=Hs(t.path),i=IDBKeyRange.bound([r],[VL(r)],!1,!0);let o=0;return zf(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],g,y)=>{0!==l&&(o++,y.done())}).next(()=>o>0)}ne(e,t){return Ky(e).get(t).next(r=>r?jE(r):null)}}function Ky(n){return ki(n,"targets")}function bU(n){return ki(n,"targetGlobal")}function zf(n){return ki(n,"targetDocuments")}function IU([n,e],[t,r]){const i=qt(n,t);return 0===i?qt(e,r):i}class TW{constructor(e){this.xn=e,this.buffer=new Ln(IU),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();IU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DW{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ff(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Of(r)}yield t.Fn(3e5)}))}}class SW{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Zo.at);const r=new TW(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(yU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yU):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,o,l,h,g,y;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(o=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),nN()<=Bo.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-I}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${o} targets in `+(g-h)+`ms\n\tRemoved ${S} documents in `+(y-g)+`ms\nTotal Duration: ${y-I}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:S})))}}class AW{constructor(e,t){this.db=e,this.garbageCollector=new SW(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return ZD(e,r)}removeReference(e,t,r){return ZD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ZD(e,t)}Gn(e,t){return function(r,i){let o=!1;return EU(r).tt(l=>wU(r,l,i).next(h=>(h&&(o=!0),ue.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Kn(e,(l,h)=>{if(h<=t){const g=this.Gn(e,l).next(y=>{if(!y)return o++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),zf(e).delete([0,Hs(l.path)])))});i.push(g)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ZD(e,t)}Kn(e,t){const r=zf(e);let i,o=Zo.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:g,sequenceNumber:y})=>{0===l?(o!==Zo.at&&t(new Qe(sc(i)),o),o=y,i=g):o=Zo.at}).next(()=>{o!==Zo.at&&t(new Qe(sc(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ZD(n,e){return zf(n).put((r=n.currentSequenceNumber,{targetId:0,path:Hs(e.path),sequenceNumber:r}));var r}class CU{constructor(){this.changes=new $f(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xW{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Em(e).put(r)}removeEntry(e,t,r){return Em(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],$D(o),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=sr.newInvalidDocument(t);return Em(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zE(t))},(i,o)=>{r=this.jn(t,o)}).next(()=>r)}Wn(e,t){let r={size:0,document:sr.newInvalidDocument(t)};return Em(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zE(t))},(i,o)=>{r={document:this.jn(t,o),size:WD(o)}}).next(()=>r)}getEntries(e,t){let r=ho();return this.zn(e,t,(i,o)=>{const l=this.jn(i,o);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=ho(),i=new kr(Qe.comparator);return this.zn(e,t,(o,l)=>{const h=this.jn(o,l);r=r.insert(o,h),i=i.insert(o,WD(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let i=new Ln(AU);t.forEach(g=>i=i.add(g));const o=IDBKeyRange.bound(zE(i.first()),zE(i.last())),l=i.getIterator();let h=l.getNext();return Em(e).Z({index:"documentKeyIndex",range:o},(g,y,I)=>{const S=Qe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&AU(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,y),h=l.hasNext()?l.getNext():null),h?I.j(zE(h)):I.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),$D(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Em(e).W(IDBKeyRange.bound(i,o,!0)).next(l=>{let h=ho();for(const g of l){const y=this.jn(Qe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let o=ho();const l=SU(t,r),h=SU(t,Ko.max());return Em(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(g,y,I)=>{const S=this.jn(Qe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(S.key,S),o.size===i&&I.done()}).next(()=>o)}newChangeBuffer(e){return new RW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return DU(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Qn(e,t){return DU(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function pW(n,e){let t;if(e.document)t=zV(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=mm(e.noDocument.readTime);t=sr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Qe.fromSegments(e.unknownDocument.path),i=mm(e.unknownDocument.version);t=sr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new gr(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return sr.newInvalidDocument(e)}}function TU(n){return new xW(n)}class RW extends CU{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new $f(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Ln((o,l)=>qt(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const h=this.Xn.get(o);if(t.push(this.Yn.removeEntry(e,o,h.readTime)),l.isValidDocument()){const g=sU(this.Yn.yt,l);i=i.add(o.path.popLast());const y=WD(g);r+=y-h.size,t.push(this.Yn.addEntry(e,o,g))}else if(r-=h.size,this.trackRemovals){const g=sU(this.Yn.yt,l.convertToNoDocument(Dt.min()));t.push(this.Yn.addEntry(e,o,g))}}),i.forEach(o=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((o,l)=>{this.Xn.set(o,{size:l,readTime:r.get(o).readTime})}),r))}}function DU(n){return ki(n,"remoteDocumentGlobal")}function Em(n){return ki(n,"remoteDocumentsV14")}function zE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function SU(n,e){const t=e.documentKey.path.toArray();return[n,$D(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function AU(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=qt(t[o],r[o]),i)return i;return i=qt(t.length,r.length),i||(i=qt(t[t.length-2],r[r.length-2]),i||qt(t[t.length-1],r[r.length-1]))}class MW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&PE(r.mutation,i,co.empty(),gr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=rc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=kE();return o.forEach((h,g)=>{l=l.insert(h,g.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=rc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let o=ho();const l=OE(),h=OE();return t.forEach((g,y)=>{const I=r.get(y.key);i.has(y.key)&&(void 0===I||I.mutation instanceof $d)?o=o.insert(y.key,y):void 0!==I?(l.set(y.key,I.mutation.getFieldMask()),PE(I.mutation,y,I.mutation.getFieldMask(),gr.now())):l.set(y.key,co.empty())}),this.recalculateAndSaveOverlays(e,o).next(g=>(g.forEach((y,I)=>l.set(y,I)),t.forEach((y,I)=>{var S;return h.set(y,new MW(I,null!==(S=l.get(y))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=OE();let i=new kr((l,h)=>l-h),o=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(g=>{const y=t.get(g);if(null===y)return;let I=r.get(g)||co.empty();I=h.applyToLocalView(y,I),r.set(g,I);const S=(i.get(h.batchId)||Yt()).add(g);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),y=g.key,I=g.value,S=OV();I.forEach(R=>{if(!o.has(R)){const O=DV(t.get(R),r.get(R));null!==O&&S.set(R,O),o=o.add(R)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,S))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):mN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ue.resolve(rc());let h=-1,g=o;return l.next(y=>ue.forEach(y,(I,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),o.get(I)?ue.resolve():this.remoteDocumentCache.getEntry(e,I).next(R=>{g=g.insert(I,R)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,g,y,Yt())).next(I=>({batchId:h,changes:kV(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let i=kE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=kE();return this.indexManager.getCollectionParents(e,i).next(l=>ue.forEach(l,h=>{const g=(y=t,I=h.child(i),new jd(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,I;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(y=>{y.forEach((I,S)=>{o=o.insert(I,S)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(o=>(i=o,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(o=>{o.forEach((h,g)=>{const y=g.getKey();null===i.get(y)&&(i=i.insert(y,sr.newInvalidDocument(y)))});let l=kE();return i.forEach((h,g)=>{const y=o.get(h);void 0!==y&&PE(y.mutation,g,co.empty(),gr.now()),vN(t,g)&&(l=l.insert(h,g))}),l})}}class NW{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Gr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:xN(r.bundledQuery),readTime:Gr(r.readTime)}),ue.resolve();var r}}class PW{constructor(){this.overlays=new kr(Qe.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=rc();return ue.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.oe(e,t,o)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=rc(),o=t.length+1,l=new Qe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const g=h.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&g.largestBatchId>r&&i.set(g.getKey(),g)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new kr((y,I)=>y-I);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let I=o.get(y.largestBatchId);null===I&&(I=rc(),o=o.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const h=rc(),g=o.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,I)=>h.set(y,I)),!(h.size()>=i)););return ue.resolve(h)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new AN(t,r));let o=this.es.get(t);void 0===o&&(o=Yt(),this.es.set(t,o)),this.es.set(t,o.add(r.key))}}class FN{constructor(){this.ns=new Ln(Oi.ss),this.rs=new Ln(Oi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Oi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Oi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Qe(new mn([])),r=new Oi(t,e),i=new Oi(t,e+1),o=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),o.push(l.key)}),o}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Qe(new mn([])),r=new Oi(t,e),i=new Oi(t,e+1);let o=Yt();return this.rs.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Oi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Oi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Qe.comparator(e.key,t.key)||qt(e._s,t._s)}static os(e,t){return qt(e._s,t._s)||Qe.comparator(e.key,t.key)}}class kW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ln(Oi.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.ws;this.ws++;const l=new DN(o,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new Oi(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),o=i<0?0:i;return ue.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Oi(t,0),i=new Oi(t,Number.POSITIVE_INFINITY),o=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);o.push(h)}),ue.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln(qt);return t.forEach(i=>{const o=new Oi(i,0),l=new Oi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([o,l],h=>{r=r.add(h._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Qe.isDocumentKey(o)||(o=o.child(""));const l=new Oi(new Qe(o),0);let h=new Ln(qt);return this.gs.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(g._s)),!0)},l),ue.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,i=>{const o=new Oi(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Oi(t,0),i=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class OW{constructor(e){this.Es=e,this.docs=new kr(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():sr.newInvalidDocument(t))}getEntries(e,t){let r=ho();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():sr.newInvalidDocument(i))}),ue.resolve(r)}getAllFromCollection(e,t,r){let i=ho();const o=new Qe(t.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:h,value:{document:g}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||sN(BL(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return ue.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ct()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FW(this)}getSize(e){return ue.resolve(this.size)}}class FW extends CU{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class LW{constructor(e){this.persistence=e,this.Rs=new $f(t=>dm(t),RE),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new FN,this.targetCount=0,this.vs=wm.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new wm(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ue.waitFor(o).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ue.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class RU{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Zo(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new LW(this),this.indexManager=new bW,this.remoteDocumentCache=new OW(r=>this.referenceDelegate.xs(r)),this.yt=new iU(t),this.Ns=new NW(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new kW(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new VW(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(o=>this.referenceDelegate.Os(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class VW extends $L{constructor(e){super(),this.currentSequenceNumber=e}}class YD{constructor(e){this.persistence=e,this.Fs=new FN,this.$s=null}static Bs(e){return new YD(e)}get Ls(){if(this.$s)return this.$s;throw ct()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ls.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const i=Qe.fromPath(r);return this.qs(e,i).next(o=>{o||t.removeEntry(i,Dt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class UW{constructor(e){this.yt=e}$(e,t,r,i){const o=new AD("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XV,{unique:!0}),h.createObjectStore("documentMutations"),MU(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),MU(e)),l=l.next(()=>function(h){const g=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,g){return g.store("mutations").W().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XV,{unique:!0});const I=g.store("mutations"),S=y.map(R=>I.put(R));return ue.waitFor(S)})}(e,o))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Us(o))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(o)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(o))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,o))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(o))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:lW});g.createIndex("collectionPathOverlayIndex",cW,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",dW,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:Jz});g.createIndex("documentKeyIndex",Xz),g.createIndex("collectionGroupIndex",eW)}(e)).next(()=>this.Ws(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,o))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:sW}).createIndex("sequenceNumberIndex",oW,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:aW}).createIndex("documentKeyIndex",uW,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=WD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ue.forEach(i,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>ue.forEach(h,g=>{wt(g.userId===o.userId);const y=_m(this.yt,g);return vU(e,o.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Z((l,h)=>{const g=new mn(l),y=[0,Hs(g)];o.push(t.get(y).next(I=>I?ue.resolve():t.put({targetId:0,path:Hs(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(o))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:iW});const r=t.store("collectionParents"),i=new ON,o=l=>{if(i.add(l)){const h=l.lastSegment(),g=l.popLast();return r.put({collectionId:h,parent:Hs(g)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const g=new mn(l);return o(g.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,g],y)=>{const I=sc(h);return o(I.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const o=jE(i),l=oU(this.yt,o);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((o,l)=>{const h=t.store("remoteDocumentsV14"),g=(y=l,y.document?new Qe(mn.fromString(y.document.name).popFirst(5)):y.noDocument?Qe.fromSegments(y.noDocument.path):y.unknownDocument?Qe.fromSegments(y.unknownDocument.path):ct()).path.toArray();var y;const I={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(I))}).next(()=>ue.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=TU(this.yt),o=new RU(YD.Bs,this.yt.ie);return r.W().next(l=>{const h=new Map;return l.forEach(g=>{var y;let I=null!==(y=h.get(g.userId))&&void 0!==y?y:Yt();_m(this.yt,g).keys().forEach(S=>I=I.add(S)),h.set(g.userId,I)}),ue.forEach(h,(g,y)=>{const I=new Pi(y),S=HD.re(this.yt,I),R=o.getIndexManager(I),O=KD.re(I,this.yt,R,o.referenceDelegate);return new xU(i,O,S,R).recalculateAndSaveOverlaysForDocumentKeys(new TN(t,Zo.at),g).next()})})}}function MU(n){n.createObjectStore("targetDocuments",{keyPath:nW}).createIndex("documentTargetsIndex",rW,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tW,{unique:!0}),n.createObjectStore("targetGlobal")}const LN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class VN{constructor(e,t,r,i,o,l,h,g,y,I,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=o,this.window=l,this.document=h,this.Js=y,this.Ys=I,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=R=>Promise.resolve(),!VN.C())throw new Me(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AW(this,i),this.ii=t+"main",this.yt=new iU(g),this.ri=new Uu(this.ii,this.Xs,new UW(this.yt)),this.Cs=new CW(this.referenceDelegate,this.yt),this.remoteDocumentCache=TU(this.yt),this.Ns=new gW,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===I&&Hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,LN);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Zo(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>QD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ff(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return WE(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return QD(e).delete(this.clientId)}yi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ki(r,"clientMetadata");return i.W().next(o=>{const l=e.Ii(o,18e5),h=o.filter(g=>-1===l.indexOf(g));return ue.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):WE(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Me(ce.FAILED_PRECONDITION,LN);return!1}}return!(!this.networkEnabled||!this.inForeground)||QD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new TN(t,Zo.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>QD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return KD.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IW(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return HD.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(l=this.Xs)?fW:14===l?rU:13===l?nU:12===l?hW:11===l?tU:void ct();var l;let h;return this.ri.runTransaction(e,i,o,g=>(h=new TN(g,this.Ss?this.Ss.next():Zo.at),"readwrite-primary"===t?this.fi(h).next(y=>!!y||this.di(h)).next(y=>{if(!y)throw Hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Me(ce.FAILED_PRECONDITION,jL);return r(h)}).next(y=>this.wi(h).next(()=>y)):this.Vi(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}Vi(e){return WE(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ce.FAILED_PRECONDITION,LN)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return WE(e).put("owner",t)}static C(){return Uu.C()}_i(e){const t=WE(e);return t.get("owner").next(r=>this.mi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Hr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function WE(n){return ki(n,"owner")}function QD(n){return ki(n,"clientMetadata")}function UN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class BN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Yt(),i=Yt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new BN(e,t.fromCache,r,i)}}class NU{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(o=>o||this.Oi(e,t,i,r)).next(o=>o||this.Mi(e,t))}ki(e,t){if(pV(t))return ue.resolve(null);let r=$s(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=OD(t,null,"F"),r=$s(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Yt(...o);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.Fi(t,h);return this.$i(t,y,l,g.readTime)?this.ki(e,OD(t,null,"F")):this.Bi(e,y,t,g)}))})))}Oi(e,t,r,i){return pV(t)||i.isEqual(Dt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(o=>{const l=this.Fi(t,o);return this.$i(t,l,r,i)?this.Mi(e,t):(nN()<=Bo.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yN(t)),this.Bi(e,l,t,UL(i,-1)))})}Fi(e,t){let r=new Ln(_V(e));return t.forEach((i,o)=>{vN(e,o)&&(r=r.add(o))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Mi(e,t){return nN()<=Bo.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",yN(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ko.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}class BW{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new kr(qt),this.Ui=new $f(o=>dm(o),RE),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xU(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function PU(n,e,t,r){return new BW(n,e,t,r)}function kU(n,e){return jN.apply(this,arguments)}function jN(){return jN=(0,ve.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let g=Yt();for(const y of i){l.push(y.batchId);for(const I of y.mutations)g=g.add(I.key)}for(const y of o){h.push(y.batchId);for(const I of y.mutations)g=g.add(I.key)}return t.localDocuments.getDocuments(r,g).next(y=>({ji:y,removedBatchIds:l,addedBatchIds:h}))})})}),jN.apply(this,arguments)}function OU(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function FU(n,e,t){let r=Yt(),i=Yt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=ho();return t.forEach((h,g)=>{const y=o.get(h);g.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),g.isNoDocument()&&g.version.isEqual(Dt.min())?(e.removeEntry(h,g.readTime),l=l.insert(h,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),l=l.insert(h,g)):Ve("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",g.version)}),{Wi:l,zi:i}})}function HW(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zy(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(o=>o?(i=o,ue.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Hf(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Yy(n,e,t){return $N.apply(this,arguments)}function $N(){return $N=(0,ve.Z)(function*(n,e,t){const r=rt(n),i=r.qi.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Ff(l))throw l;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),$N.apply(this,arguments)}function JD(n,e,t){const r=rt(n);let i=Dt.min(),o=Yt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,g,y){const I=rt(h),S=I.Ui.get(y);return void 0!==S?ue.resolve(I.qi.get(S)):I.Cs.getTargetData(g,y)}(r,l,$s(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(g=>{o=g})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Dt.min(),t?o:Yt())).next(h=>(UU(r,mV(e),h),{documents:h,Hi:o})))}function LU(n,e){const t=rt(n),r=rt(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ne(o,e).next(l=>l?l.target:null))}function VU(n,e){const t=rt(n),r=t.Ki.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,UL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(UU(t,e,i),i))}function UU(n,e,t){let r=n.Ki.get(e)||Dt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ki.set(e,r)}function HN(){return HN=(0,ve.Z)(function*(n,e,t,r){const i=rt(n);let o=Yt(),l=ho();for(const y of t){const I=e.Ji(y.metadata.name);y.document&&(o=o.add(I));const S=e.Yi(y);S.setReadTime(e.Xi(y.metadata.readTime)),l=l.insert(I,S)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),g=yield Zy(i,(y=r,$s(Uy(mn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>FU(y,h,l).next(I=>(h.apply(y),I)).next(I=>i.Cs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.Cs.addMatchingKeys(y,o,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,I.Wi,I.zi)).next(()=>I.Wi)))}),HN.apply(this,arguments)}function qW(n,e){return GN.apply(this,arguments)}function GN(){return GN=(0,ve.Z)(function*(n,e,t=Yt()){const r=yield Zy(n,$s(xN(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const l=Gr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(o,e);const h=r.withResumeToken(wi.EMPTY_BYTE_STRING,l);return i.qi=i.qi.insert(h.targetId,h),i.Cs.updateTargetData(o,h).next(()=>i.Cs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Cs.addMatchingKeys(o,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(o,e))})}),GN.apply(this,arguments)}function BU(n,e){return`firestore_clients_${n}_${e}`}function jU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qN(n,e){return`firestore_targets_${n}_${e}`}class XD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let o,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(o=new Me(i.error.code,i.error.message))),l?new XD(e,t,i.state,o):(Hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class KE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Me(r.error.code,r.error.message))),o?new KE(e,r.state,i):(Hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=UD();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=zL(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return i?new eS(e,o):(Hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zN{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zN(t.clientId,t.onlineState):(Hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class WN{constructor(){this.activeTargetIds=UD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KN{constructor(e,t,r,i,o){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new kr(qt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ar=BU(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new WN),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const o=e.getItem(BU(e.persistenceKey,i));if(o){const l=eS.Zi(i,o);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(qN(this.persistenceKey,e));if(r){const i=KE.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qN(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(o){let l=Zo.at;if(null!=o)try{const h=JSON.parse(o);wt("number"==typeof h),l=h}catch(h){Hr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Zo.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Mr(o)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new XD(this.currentUser,e,t,r),o=jU(this.persistenceKey,this.currentUser,e);this.setItem(o,i.tr())}Er(e){const t=jU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=qN(this.persistenceKey,e),o=new KE(e,t,r);this.setItem(i,o.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return eS.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return XD.Zi(new Pi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return KE.Zi(i,t)}yr(e){return zN.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),o=this.Ir(r),l=[],h=[];return o.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{o.has(g)||h.push(g)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=UD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class $U{constructor(){this.Lr=new WN,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new WN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zW{Ur(e){}shutdown(){}}class HU{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const WW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KW{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class ZW extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,o){const l=this.ho(e,t);Ve("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,o),this.fo(e,l,h,r).then(g=>(Ve("RestConnection","Received: ",g),g),g=>{throw im("RestConnection",`${e} failed with error: `,g,"url: ",l,"request:",r),g})}_o(e,t,r,i,o,l){return this.ao(e,t,r,i,o)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Py,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}ho(e,t){return`${this.oo}/v1/${t}:${WW[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((o,l)=>{const h=new Kq;h.setWithCredentials(!0),h.listenOnce(qq.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case tN.NO_ERROR:const y=h.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(y)),o(y);break;case tN.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),l(new Me(ce.DEADLINE_EXCEEDED,"Request time out"));break;case tN.HTTP_ERROR:const I=h.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',I,"response text:",h.getResponseText()),I>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const O=function(U){const Z=U.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Z)>=0?Z:ce.UNKNOWN}(R.status);l(new Me(O,R.message))}else l(new Me(ce.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Me(ce.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);h.send(t,"POST",g,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Hq(),l=Gq(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Wq({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=i.join("");Ve("Connection","Creating WebChannel: "+g,h);const y=o.createWebChannel(g,h);let I=!1,S=!1;const R=new KW({Hr:U=>{S?Ve("Connection","Not sending because WebChannel is closed:",U):(I||(Ve("Connection","Opening WebChannel transport."),y.open(),I=!0),Ve("Connection","WebChannel sending:",U),y.send(U))},Jr:()=>y.close()}),O=(U,Z,te)=>{U.listen(Z,$e=>{try{te($e)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return O(y,TD.EventType.OPEN,()=>{S||Ve("Connection","WebChannel transport opened.")}),O(y,TD.EventType.CLOSE,()=>{S||(S=!0,Ve("Connection","WebChannel transport closed"),R.io())}),O(y,TD.EventType.ERROR,U=>{S||(S=!0,im("Connection","WebChannel transport errored:",U),R.io(new Me(ce.UNAVAILABLE,"The operation could not be completed")))}),O(y,TD.EventType.MESSAGE,U=>{var Z;if(!S){const te=U.data[0];wt(!!te);const Ke=te.error||(null===(Z=te[0])||void 0===Z?void 0:Z.error);if(Ke){Ve("Connection","WebChannel received error:",Ke);const Ge=Ke.status;let ze=function(Ct){const on=ni[Ct];if(void 0!==on)return NV(on)}(Ge),pt=Ke.message;void 0===ze&&(ze=ce.INTERNAL,pt="Unknown error status: "+Ge+" with message "+Ke.message),S=!0,R.io(new Me(ze,pt)),y.close()}else Ve("Connection","WebChannel received:",te),R.ro(te)}}),O(l,zq.STAT_EVENT,U=>{U.stat===PL.PROXY?Ve("Connection","Detected buffering proxy"):U.stat===PL.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.so()},0),R}}function GU(){return typeof window<"u"?window:null}function tS(){return typeof document<"u"?document:null}function ZE(n){return new Bz(n,!0)}class ZN{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class qU{constructor(e,t,r,i,o,l,h,g){this.Hs=e,this.vo=r,this.Vo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new ZN(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ve.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ve.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Me(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ve.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YW extends qU{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.yt=o}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Hz(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:ct(),i=e.targetChange.targetIds||[],o=function(g,y){return g.wt?(wt(void 0===y||"string"==typeof y),wi.fromBase64String(y||"")):(wt(void 0===y||y instanceof Uint8Array),wi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(g){const y=void 0===g.code?ce.UNKNOWN:NV(g.code);return new Me(y,g.message||"")}(l);t=new LV(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=ic(n,r.document.name),o=Gr(r.document.updateTime),l=r.document.createTime?Gr(r.document.createTime):Dt.min(),h=new Ji({mapValue:{fields:r.document.fields}}),g=sr.newFoundDocument(i,o,l,h);t=new BD(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=ic(n,r.document),o=r.readTime?Gr(r.readTime):Dt.min(),l=sr.newNoDocument(i,o);t=new BD([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ic(n,r.document);t=new BD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,o=new Mz(r.count||0);t=new FV(r.targetId,o)}}var g;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return Dt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Dt.min():o.readTime?Gr(o.readTime):Dt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=UE(this.yt),t.addTarget=function(i,o){let l;const h=o.target;return l=ND(h)?{documents:WV(i,h)}:{query:CN(i,h)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?l.resumeToken=jV(i,o.resumeToken):o.snapshotVersion.compareTo(Dt.min())>0&&(l.readTime=Gy(i,o.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function qz(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=UE(this.yt),t.removeTarget=e,this.Bo(t)}}class QW extends qU{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.yt=o,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Gz(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,i){let o=Gr(r.updateTime?r.updateTime:i);return o.isEqual(Dt.min())&&(o=Gr(i)),new Az(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gr(e.commitTime);return this.listener.Zo(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=UE(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>BE(this.yt,r))};this.Bo(t)}}class JW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.ao(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(ce.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection._o(e,t,r,o,l,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ce.UNKNOWN,o.toString())})}terminate(){this.nu=!0}}class e6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Hr(t),this.ou=!1):Ve("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class t6{constructor(e,t,r,i,o){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=o,this.mu.Ur(h=>{r.enqueueAndForget((0,ve.Z)(function*(){var g;Hd(l)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,ve.Z)(function*(y){const I=rt(y);I._u.add(4),yield Qy(I),I.gu.set("Unknown"),I._u.delete(4),yield YE(I)}),function(y){return g.apply(this,arguments)})(l))}))}),this.gu=new e6(r,i)}}function YE(n){return QN.apply(this,arguments)}function QN(){return QN=(0,ve.Z)(function*(n){if(Hd(n))for(const e of n.wu)yield e(!0)}),QN.apply(this,arguments)}function Qy(n){return JN.apply(this,arguments)}function JN(){return JN=(0,ve.Z)(function*(n){for(const e of n.wu)yield e(!1)}),JN.apply(this,arguments)}function nS(n,e){const t=rt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),tP(t)?eP(t):Xy(t).ko()&&XN(t,e))}function QE(n,e){const t=rt(n),r=Xy(t);t.du.delete(e),r.ko()&&zU(t,e),0===t.du.size&&(r.ko()?r.Fo():Hd(t)&&t.gu.set("Unknown"))}function XN(n,e){n.yu.Ot(e.targetId),Xy(n).zo(e)}function zU(n,e){n.yu.Ot(e),Xy(n).Ho(e)}function eP(n){n.yu=new Fz({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Xy(n).start(),n.gu.uu()}function tP(n){return Hd(n)&&!Xy(n).No()&&n.du.size>0}function Hd(n){return 0===rt(n)._u.size}function WU(n){n.yu=void 0}function n6(n){return nP.apply(this,arguments)}function nP(){return nP=(0,ve.Z)(function*(n){n.du.forEach((e,t)=>{XN(n,e)})}),nP.apply(this,arguments)}function r6(n,e){return rP.apply(this,arguments)}function rP(){return rP=(0,ve.Z)(function*(n,e){WU(n),tP(n)?(n.gu.hu(e),eP(n)):n.gu.set("Unknown")}),rP.apply(this,arguments)}function i6(n,e,t){return iP.apply(this,arguments)}function iP(){return iP=(0,ve.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof LV&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,o){const l=o.cause;for(const h of o.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.du.delete(h),i.yu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rS(n,r)}else if(e instanceof BD?n.yu.Kt(e):e instanceof FV?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Dt.min()))try{const r=yield OU(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const l=i.yu.Zt(o);return l.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.du.get(g);y&&i.du.set(g,y.withResumeToken(h.resumeToken,o))}}),l.targetMismatches.forEach(h=>{const g=i.du.get(h);if(!g)return;i.du.set(h,g.withResumeToken(wi.EMPTY_BYTE_STRING,g.snapshotVersion)),zU(i,h);const y=new Hf(g.target,h,1,g.sequenceNumber);XN(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield rS(n,r)}var r}),iP.apply(this,arguments)}function rS(n,e,t){return sP.apply(this,arguments)}function sP(){return sP=(0,ve.Z)(function*(n,e,t){if(!Ff(e))throw e;n._u.add(1),yield Qy(n),n.gu.set("Offline"),t||(t=()=>OU(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield YE(n)}))}),sP.apply(this,arguments)}function KU(n,e){return e().catch(t=>rS(n,t,e))}function Jy(n){return oP.apply(this,arguments)}function oP(){return oP=(0,ve.Z)(function*(n){const e=rt(n),t=Wf(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;s6(e);)try{const i=yield HW(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,o6(e,i)}catch(i){yield rS(e,i)}ZU(e)&&YU(e)}),oP.apply(this,arguments)}function s6(n){return Hd(n)&&n.fu.length<10}function o6(n,e){n.fu.push(e);const t=Wf(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function ZU(n){return Hd(n)&&!Wf(n).No()&&n.fu.length>0}function YU(n){Wf(n).start()}function a6(n){return aP.apply(this,arguments)}function aP(){return aP=(0,ve.Z)(function*(n){Wf(n).eu()}),aP.apply(this,arguments)}function u6(n){return uP.apply(this,arguments)}function uP(){return uP=(0,ve.Z)(function*(n){const e=Wf(n);for(const t of n.fu)e.Xo(t.mutations)}),uP.apply(this,arguments)}function l6(n,e,t){return lP.apply(this,arguments)}function lP(){return lP=(0,ve.Z)(function*(n,e,t){const r=n.fu.shift(),i=SN.from(r,e,t);yield KU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Jy(n)}),lP.apply(this,arguments)}function c6(n,e){return cP.apply(this,arguments)}function cP(){return cP=(0,ve.Z)(function*(n,e){var t;e&&Wf(n).Yo&&(yield(t=(0,ve.Z)(function*(r,i){if(MV(o=i.code)&&o!==ce.ABORTED){const l=r.fu.shift();Wf(r).Mo(),yield KU(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Jy(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),ZU(n)&&YU(n)}),cP.apply(this,arguments)}function QU(n,e){return dP.apply(this,arguments)}function dP(){return dP=(0,ve.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=Hd(t);t._u.add(3),yield Qy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield YE(t)}),dP.apply(this,arguments)}function hP(n,e){return fP.apply(this,arguments)}function fP(){return fP=(0,ve.Z)(function*(n,e){const t=rt(n);e?(t._u.delete(2),yield YE(t)):e||(t._u.add(2),yield Qy(t),t.gu.set("Unknown"))}),fP.apply(this,arguments)}function Xy(n){return n.pu||(n.pu=function(e,t,r){const i=rt(e);return i.su(),new YW(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:n6.bind(null,n),Zr:r6.bind(null,n),Wo:i6.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.pu.Mo(),tP(n)?eP(n):n.gu.set("Unknown")):(yield n.pu.stop(),WU(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Wf(n){return n.Iu||(n.Iu=function(e,t,r){const i=rt(e);return i.su(),new QW(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:a6.bind(null,n),Zr:c6.bind(null,n),tu:u6.bind(null,n),Zo:l6.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Iu.Mo(),yield Jy(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class pP{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,h=new pP(e,t,l,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ev(n,e){if(Hr("AsyncQueue",`${e}: ${n}`),Ff(n))return new Me(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class tv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=kE(),this.sortedSet=new kr(this.comparator)}static emptySet(e){return new tv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new tv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class JU{constructor(){this.Tu=new kr(Qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ct():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class nv{constructor(e,t,r,i,o,l,h,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new nv(e,t,tv.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ME(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class d6{constructor(){this.Au=void 0,this.listeners=[]}}class h6{constructor(){this.queries=new $f(e=>gV(e),ME),this.onlineState="Unknown",this.Ru=new Set}}function gP(n,e){return mP.apply(this,arguments)}function mP(){return mP=(0,ve.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new d6),i)try{o.Au=yield t.onListen(r)}catch(l){const h=ev(l,`Initialization of query '${yN(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.listeners.push(e),e.bu(t.onlineState),o.Au&&e.Pu(o.Au)&&vP(t)}),mP.apply(this,arguments)}function _P(n,e){return yP.apply(this,arguments)}function yP(){return yP=(0,ve.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),yP.apply(this,arguments)}function f6(n,e){const t=rt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Pu(i)&&(r=!0);l.Au=i}}r&&vP(t)}function p6(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function vP(n){n.Ru.forEach(e=>{e.next()})}class wP{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new nv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=nv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class g6{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class XU{constructor(e){this.yt=e}Ji(e){return ic(this.yt,e)}Yi(e){return e.metadata.exists?zV(this.yt,e.document,!1):sr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Gr(e)}}class m6{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eB(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=mn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new XU(this.yt);for(const i of e)if(i.metadata.queries){const o=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Yt()).add(o);t.set(l,h)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function GW(n,e,t,r){return HN.apply(this,arguments)}(e.localStore,new XU(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield qW(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function eB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class tB{constructor(e){this.key=e}}class nB{constructor(e){this.key=e}}class rB{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Yt(),this.mutatedKeys=Yt(),this.Gu=_V(e),this.Qu=new tv(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new JU,i=t?t.Qu:this.Qu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,S)=>{const R=i.get(I),O=vN(this.query,S)?S:null,U=!!R&&this.mutatedKeys.has(R.key),Z=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let te=!1;R&&O?R.data.isEqual(O.data)?U!==Z&&(r.track({type:3,doc:O}),te=!0):this.Hu(R,O)||(r.track({type:2,doc:O}),te=!0,(g&&this.Gu(O,g)>0||y&&this.Gu(O,y)<0)&&(h=!0)):!R&&O?(r.track({type:0,doc:O}),te=!0):R&&!O&&(r.track({type:1,doc:R}),te=!0,(g||y)&&(h=!0)),te&&(O?(l=l.add(O),o=Z?o.add(I):o.delete(I)):(l=l.delete(I),o=o.delete(I)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const I="F"===this.query.limitType?l.last():l.first();l=l.delete(I.key),o=o.delete(I.key),r.track({type:1,doc:I})}return{Qu:l,zu:r,$i:h,mutatedKeys:o}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const o=e.zu.Eu();o.sort((y,I)=>function(S,R){const O=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return O(S)-O(R)}(y.type,I.type)||this.Gu(y.doc,I.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,g=h!==this.Uu;return this.Uu=h,0!==o.length||g?{snapshot:new nv(this.query,e.Qu,i,o,e.mutatedKeys,0===h,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new JU,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Yt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new nB(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new tB(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Yt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return nv.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class _6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class y6{constructor(e){this.key=e,this.nc=!1}}class v6{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new $f(h=>gV(h),ME),this.rc=new Map,this.oc=new Set,this.uc=new kr(Qe.comparator),this.cc=new Map,this.ac=new FN,this.hc={},this.lc=new Map,this.fc=wm.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function w6(n,e){return EP.apply(this,arguments)}function EP(){return EP=(0,ve.Z)(function*(n,e){const t=GP(n);let r,i;const o=t.ic.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.ec();else{const l=yield Zy(t.localStore,$s(e));t.isPrimaryClient&&nS(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield bP(t,e,r,"current"===h,l.resumeToken)}return i}),EP.apply(this,arguments)}function bP(n,e,t,r,i){return IP.apply(this,arguments)}function IP(){return IP=(0,ve.Z)(function*(n,e,t,r,i){n._c=(S,R,O)=>{return(U=(0,ve.Z)(function*(Z,te,$e,Ke){let Ge=te.view.Wu($e);Ge.$i&&(Ge=yield JD(Z.localStore,te.query,!1).then(({documents:Ct})=>te.view.Wu(Ct,Ge)));const ze=Ke&&Ke.targetChanges.get(te.targetId),pt=te.view.applyChanges(Ge,Z.isPrimaryClient,ze);return PP(Z,te.targetId,pt.Xu),pt.snapshot}),function(Z,te,$e,Ke){return U.apply(this,arguments)})(n,S,R,O);var U};const o=yield JD(n.localStore,e,!0),l=new rB(e,o.Hi),h=l.Wu(o.documents),g=LE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=l.applyChanges(h,n.isPrimaryClient,g);PP(n,t,y.Xu);const I=new _6(e,t,l);return n.ic.set(e,I),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),IP.apply(this,arguments)}function E6(n,e){return CP.apply(this,arguments)}function CP(){return CP=(0,ve.Z)(function*(n,e){const t=rt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(o=>!ME(o,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Yy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),QE(t.remoteStore,r.targetId),rv(t,r.targetId)}).catch(Of))):(rv(t,r.targetId),yield Yy(t.localStore,r.targetId,!0))}),CP.apply(this,arguments)}function TP(){return TP=(0,ve.Z)(function*(n,e,t){const r=qP(n);try{const i=yield function(o,l){const h=rt(o),g=gr.now(),y=l.reduce((R,O)=>R.add(O.key),Yt());let I,S;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let O=ho(),U=Yt();return h.Gi.getEntries(R,y).next(Z=>{O=Z,O.forEach((te,$e)=>{$e.isValidDocument()||(U=U.add(te))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,O)).next(Z=>{I=Z;const te=[];for(const $e of l){const Ke=Rz($e,I.get($e.key).overlayedDocument);null!=Ke&&te.push(new $d($e.key,Ke,cV(Ke.value.mapValue),mr.exists(!0)))}return h.mutationQueue.addMutationBatch(R,g,te,l)}).next(Z=>{S=Z;const te=Z.applyToLocalDocumentSet(I,U);return h.documentOverlayCache.saveOverlays(R,Z.batchId,te)})}).then(()=>({batchId:S.batchId,changes:kV(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,h){let g=o.hc[o.currentUser.toKey()];g||(g=new kr(qt)),g=g.insert(l,h),o.hc[o.currentUser.toKey()]=g}(r,i.batchId,t),yield Gd(r,i.changes),yield Jy(r.remoteStore)}catch(i){const o=ev(i,"Failed to persist write");t.reject(o)}}),TP.apply(this,arguments)}function iB(n,e){return DP.apply(this,arguments)}function DP(){return DP=(0,ve.Z)(function*(n,e){const t=rt(n);try{const r=yield function $W(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const h=[];e.targetChanges.forEach((I,S)=>{const R=i.get(S);if(!R)return;h.push(t.Cs.removeMatchingKeys(o,I.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(o,I.addedDocuments,S)));let O=R.withSequenceNumber(o.currentSequenceNumber);var U,Z,te;e.targetMismatches.has(S)?O=O.withResumeToken(wi.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):I.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(I.resumeToken,r)),i=i.insert(S,O),Z=O,te=I,(0===(U=R).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(o,O))});let g=ho(),y=Yt();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,I))}),h.push(FU(o,l,e.documentUpdates).next(I=>{g=I.Wi,y=I.zi})),!r.isEqual(Dt.min())){const I=t.Cs.getLastRemoteSnapshotVersion(o).next(S=>t.Cs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(I)}return ue.waitFor(h).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,g,y)).next(()=>g)}).then(o=>(t.qi=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.cc.get(o);l&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?wt(l.nc):i.removedDocuments.size>0&&(wt(l.nc),l.nc=!1))}),yield Gd(t,r,e)}catch(r){yield Of(r)}}),DP.apply(this,arguments)}function sB(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((o,l)=>{const h=l.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(o,l){const h=rt(o);h.onlineState=l;let g=!1;h.queries.forEach((y,I)=>{for(const S of I.listeners)S.bu(l)&&(g=!0)}),g&&vP(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function I6(n,e,t){return SP.apply(this,arguments)}function SP(){return SP=(0,ve.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),o=i&&i.key;if(o){let l=new kr(Qe.comparator);l=l.insert(o,sr.newNoDocument(o,Dt.min()));const h=Yt().add(o),g=new FE(Dt.min(),new Map,new Ln(qt),l,h);yield iB(r,g),r.uc=r.uc.remove(o),r.cc.delete(e),kP(r)}else yield Yy(r.localStore,e,!1).then(()=>rv(r,e,t)).catch(Of)}),SP.apply(this,arguments)}function C6(n,e){return AP.apply(this,arguments)}function AP(){return AP=(0,ve.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield function jW(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,g,y){const I=g.batch,S=I.keys();let R=ue.resolve();return S.forEach(O=>{R=R.next(()=>y.getEntry(h,O)).next(U=>{const Z=g.docVersions.get(O);wt(null!==Z),U.version.compareTo(Z)<0&&(I.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),y.addEntry(U)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(h,I))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Yt();for(let g=0;g<l.mutationResults.length;++g)l.mutationResults[g].transformResults.length>0&&(h=h.add(l.batch.mutations[g].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);NP(t,r,null),MP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Gd(t,i)}catch(i){yield Of(i)}}),AP.apply(this,arguments)}function T6(n,e,t){return xP.apply(this,arguments)}function xP(){return xP=(0,ve.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(o,l){const h=rt(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return h.mutationQueue.lookupMutationBatch(g,l).next(I=>(wt(null!==I),y=I.keys(),h.mutationQueue.removeMutationBatch(g,I))).next(()=>h.mutationQueue.performConsistencyCheck(g)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(g,y,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>h.localDocuments.getDocuments(g,y))})}(r.localStore,e);NP(r,e,t),MP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Gd(r,i)}catch(i){yield Of(i)}}),xP.apply(this,arguments)}function RP(){return RP=(0,ve.Z)(function*(n,e){const t=rt(n);Hd(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const l=rt(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=ev(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),RP.apply(this,arguments)}function MP(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function NP(n,e,t){const r=rt(n);let i=r.hc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function rv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||oB(n,r)})}function oB(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(QE(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),kP(n))}function PP(n,e,t){for(const r of t)r instanceof tB?(n.ac.addReference(r.key,e),S6(n,r)):r instanceof nB?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||oB(n,r.key)):ct()}function S6(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oc.add(r),kP(n))}function kP(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Qe(mn.fromString(e)),r=n.fc.next();n.cc.set(r,new y6(t)),n.uc=n.uc.insert(t,r),nS(n.remoteStore,new Hf($s(Uy(t.path)),r,2,Zo.at))}}function Gd(n,e,t){return OP.apply(this,arguments)}function OP(){return OP=(0,ve.Z)(function*(n,e,t){const r=rt(n),i=[],o=[],l=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,g)=>{l.push(r._c(g,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const I=BN.Ci(g.targetId,y);o.push(I)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(h=(0,ve.Z)(function*(g,y){const I=rt(g);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ue.forEach(y,R=>ue.forEach(R.Si,O=>I.persistence.referenceDelegate.addReference(S,R.targetId,O)).next(()=>ue.forEach(R.Di,O=>I.persistence.referenceDelegate.removeReference(S,R.targetId,O)))))}catch(S){if(!Ff(S))throw S;Ve("LocalStore","Failed to update sequence numbers: "+S)}for(const S of y){const R=S.targetId;if(!S.fromCache){const O=I.qi.get(R),Z=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);I.qi=I.qi.insert(R,Z)}}}),function(g,y){return h.apply(this,arguments)})(r.localStore,o))}),OP.apply(this,arguments)}function A6(n,e){return FP.apply(this,arguments)}function FP(){return FP=(0,ve.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield kU(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(h=>{h.reject(new Me(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gd(t,r.ji)}var i}),FP.apply(this,arguments)}function x6(n,e){const t=rt(n),r=t.cc.get(e);if(r&&r.nc)return Yt().add(r.key);{let i=Yt();const o=t.rc.get(e);if(!o)return i;for(const l of o){const h=t.ic.get(l);i=i.unionWith(h.view.ju)}return i}}function R6(n,e){return LP.apply(this,arguments)}function LP(){return LP=(0,ve.Z)(function*(n,e){const t=rt(n),r=yield JD(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&PP(t,e.targetId,i.Xu),i}),LP.apply(this,arguments)}function M6(n,e){return VP.apply(this,arguments)}function VP(){return VP=(0,ve.Z)(function*(n,e){const t=rt(n);return VU(t.localStore,e).then(r=>Gd(t,r))}),VP.apply(this,arguments)}function N6(n,e,t,r){return UP.apply(this,arguments)}function UP(){return UP=(0,ve.Z)(function*(n,e,t,r){const i=rt(n),o=yield function(l,h){const g=rt(l),y=rt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",I=>y.Tn(I,h).next(S=>S?g.localDocuments.getDocuments(I,S):ue.resolve(null)))}(i.localStore,e);var h;null!==o?("pending"===t?yield Jy(i.remoteStore):"acknowledged"===t||"rejected"===t?(NP(i,e,r||null),MP(i,e),h=e,rt(rt(i.localStore).mutationQueue).An(h)):ct(),yield Gd(i,o)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),UP.apply(this,arguments)}function BP(){return BP=(0,ve.Z)(function*(n,e){const t=rt(n);if(GP(t),qP(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield aB(t,r.toArray());t.dc=!0,yield hP(t.remoteStore,!0);for(const o of i)nS(t.remoteStore,o)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(rv(t,l),Yy(t.localStore,l,!0))),QE(t.remoteStore,l)}),yield i,yield aB(t,r),function(o){const l=rt(o);l.cc.forEach((h,g)=>{QE(l.remoteStore,g)}),l.ac.fs(),l.cc=new Map,l.uc=new kr(Qe.comparator)}(t),t.dc=!1,yield hP(t.remoteStore,!1)}}),BP.apply(this,arguments)}function aB(n,e,t){return jP.apply(this,arguments)}function jP(){return jP=(0,ve.Z)(function*(n,e,t){const r=rt(n),i=[],o=[];for(const l of e){let h;const g=r.rc.get(l);if(g&&0!==g.length){h=yield Zy(r.localStore,$s(g[0]));for(const y of g){const I=r.ic.get(y),S=yield R6(r,I);S.snapshot&&o.push(S.snapshot)}}else{const y=yield LU(r.localStore,l);h=yield Zy(r.localStore,y),yield bP(r,uB(y),l,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(o),i}),jP.apply(this,arguments)}function uB(n){return fV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function k6(n){const e=rt(n);return rt(rt(e.localStore).persistence).vi()}function O6(n,e,t,r){return $P.apply(this,arguments)}function $P(){return $P=(0,ve.Z)(function*(n,e,t,r){const i=rt(n);if(i.dc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const o=i.rc.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=yield VU(i.localStore,mV(o[0])),h=FE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,wi.EMPTY_BYTE_STRING);yield Gd(i,l,h);break}case"rejected":yield Yy(i.localStore,e,!0),rv(i,e,r);break;default:ct()}}),$P.apply(this,arguments)}function F6(n,e,t){return HP.apply(this,arguments)}function HP(){return HP=(0,ve.Z)(function*(n,e,t){const r=GP(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const o=yield LU(r.localStore,i),l=yield Zy(r.localStore,o);yield bP(r,uB(o),l.targetId,!1,l.resumeToken),nS(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield Yy(r.localStore,i,!1).then(()=>{QE(r.remoteStore,i),rv(r,i)}).catch(Of))}}),HP.apply(this,arguments)}function GP(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I6.bind(null,e),e.sc.Wo=f6.bind(null,e.eventManager),e.sc.wc=p6.bind(null,e.eventManager),e}function qP(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T6.bind(null,e),e}class lB{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.yt=ZE(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return PU(this.persistence,new NU,e.initialUser,this.yt)}yc(e){return new RU(YD.Bs,this.yt)}gc(e){return new $U}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class cB extends lB{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield qP(r.Ac.syncEngine),yield Jy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return PU(this.persistence,new NU,e.initialUser,this.yt)}Tc(e,t){return new DW(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new cz(t,this.persistence);return new lz(e.asyncQueue,r)}yc(e){const t=UN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?fo.withCacheSize(this.cacheSizeBytes):fo.DEFAULT;return new VN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,GU(),tS(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new $U}}class V6 extends cB{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof KN&&(r.sharedClientState.syncEngine={Fr:N6.bind(null,i),$r:O6.bind(null,i),Br:F6.bind(null,i),vi:k6.bind(null,i),Mr:M6.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var o=(0,ve.Z)(function*(l){yield function P6(n,e){return BP.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return o.apply(this,arguments)}}())})()}gc(e){const t=GU();if(!KN.C(t))throw new Me(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=UN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new KN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class zP{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>sB(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=A6.bind(null,r.syncEngine),yield hP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new h6}createDatastore(e){const t=ZE(e.databaseInfo.databaseId),r=new ZW(e.databaseInfo);return new JW(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>sB(this.syncEngine,h,0),l=HU.C()?new HU:new zW,new t6(t,r,i,o,l);var t,r,i,o,l}createSyncEngine(e,t){return function(r,i,o,l,h,g,y){const I=new v6(r,i,o,l,h,g);return y&&(I.dc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=rt(t);Ve("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Qy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function WP(n,e,t){if(!t)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dB(n,e,t,r){if(!0===e&&!0===r)throw new Me(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hB(n){if(!Qe.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fB(n){if(Qe.isDocumentKey(n))throw new Me(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=iS(n);throw new Me(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pB(n,e){if(e<=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const gB=new Map;class mB{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,dB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class JE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Qq;switch(t.type){case"gapi":return new tz(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gB.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),gB.delete(e),t.terminate())}(this),Promise.resolve()}}class or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class oc extends Xi{constructor(e,t,r){super(e,t,Uy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Qe(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function yB(n,e,...t){if(n=(0,k.m9)(n),WP("collection","path",e),n instanceof JE){const r=mn.fromString(e,...t);return fB(r),new oc(n,null,r)}{if(!(n instanceof or||n instanceof oc))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return fB(r),new oc(n.firestore,null,r)}}function sS(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=LL.R()),WP("doc","path",e),n instanceof JE){const r=mn.fromString(e,...t);return hB(r),new or(n,null,new Qe(r))}{if(!(n instanceof or||n instanceof oc))throw new Me(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return hB(r),new or(n.firestore,n instanceof oc?n.converter:null,new Qe(r))}}function vB(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof or||n instanceof oc)&&(e instanceof or||e instanceof oc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function KP(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof Xi&&e instanceof Xi&&n.firestore===e.firestore&&ME(n._query,e._query)&&n.converter===e.converter}function wB(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class oS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class B6{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new vi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const o=yield e.Cc(i);return new g6(JSON.parse(o),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ve.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class H6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(o,l){const h=rt(o),g=UE(h.yt)+"/documents",y={documents:l.map(O=>VE(h.yt,O))},I=yield h._o("BatchGetDocuments",g,y,l.length),S=new Map;I.forEach(O=>{const U=function $z(n,e){return"found"in e?function(t,r){wt(!!r.found);const i=ic(t,r.found.name),o=Gr(r.found.updateTime),l=r.found.createTime?Gr(r.found.createTime):Dt.min(),h=new Ji({mapValue:{fields:r.found.fields}});return sr.newFoundDocument(i,o,l,h)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const i=ic(t,r.missing),o=Gr(r.readTime);return sr.newNoDocument(i,o)}(n,e):ct()}(h.yt,O);S.set(U.key.toString(),U)});const R=[];return l.forEach(O=>{const U=S.get(O.toString());wt(!!U),R.push(U)}),R}),function(o,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Qe.fromPath(i);e.mutations.push(new wN(o,e.precondition(o)))}),yield(r=(0,ve.Z)(function*(i,o){const l=rt(i),h=UE(l.yt)+"/documents",g={writes:o.map(y=>BE(l.yt,y))};yield l.ao("Commit",h,g)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?mr.exists(!1):mr.updateTime(t):mr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Me(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mr.updateTime(t)}return mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class G6{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.kc=r.maxAttempts,this.xo=new ZN(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ve.Z)(function*(){const t=new H6(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Fc(o)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!CE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!MV(t)}return!1}}class q6{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pi.UNAUTHENTICATED,this.clientId=LL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ve.Z)(function*(h){Ve("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ve("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ev(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function EB(n,e){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(o){r.isEqual(o)||(yield kU(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ZP.apply(this,arguments)}function bB(n,e){return YP.apply(this,arguments)}function YP(){return YP=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield QP(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>QU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>QU(e.remoteStore,o)),n.onlineComponents=e}),YP.apply(this,arguments)}function QP(n){return JP.apply(this,arguments)}function JP(){return JP=(0,ve.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield EB(n,new lB)),n.offlineComponents}),JP.apply(this,arguments)}function aS(n){return XP.apply(this,arguments)}function XP(){return XP=(0,ve.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield bB(n,new zP)),n.onlineComponents}),XP.apply(this,arguments)}function IB(n){return QP(n).then(e=>e.persistence)}function uS(n){return QP(n).then(e=>e.localStore)}function ek(n){return aS(n).then(e=>e.remoteStore)}function tk(n){return aS(n).then(e=>e.syncEngine)}function iv(n){return nk.apply(this,arguments)}function nk(){return nk=(0,ve.Z)(function*(n){const e=yield aS(n),t=e.eventManager;return t.onListen=w6.bind(null,e.syncEngine),t.onUnlisten=E6.bind(null,e.syncEngine),t}),nk.apply(this,arguments)}function TB(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,o,l,h,g){const y=new oS({next:S=>{o.enqueueAndForget(()=>_P(i,I));const R=S.docs.has(l);!R&&S.fromCache?g.reject(new Me(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&h&&"server"===h.source?g.reject(new Me(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),I=new wP(Uy(l.path),y,{includeMetadataChanges:!0,Nu:!0});return gP(i,I)}(yield iv(n),n.asyncQueue,e,t,r)})),r.promise}function DB(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,o,l,h,g){const y=new oS({next:S=>{o.enqueueAndForget(()=>_P(i,I)),S.fromCache&&"server"===h.source?g.reject(new Me(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),I=new wP(l,y,{includeMetadataChanges:!0,Nu:!0});return gP(i,I)}(yield iv(n),n.asyncQueue,e,t,r)})),r.promise}class X6{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new ZN(this,"async_queue_retry"),this.Wc=()=>{const t=tS();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=tS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=tS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new vi;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Ff(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Hr("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=pP.createAndSchedule(this,e,t,r,o=>this.Yc(o));return this.Uc.push(i),i}zc(){this.Kc&&ct()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function rk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class e4{constructor(){this._progressObserver={},this._taskCompletionResolver=new vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ar extends JE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new X6,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||SB(this),this._firestoreClient.terminate()}}function qr(n){return n._firestoreClient||SB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function SB(n){var e;const t=n._freezeSettings(),r=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new dz(n._databaseId,o,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var o,h;n._firestoreClient=new q6(n._authCredentials,n._appCheckCredentials,n._queue,r)}function AB(n,e,t){const r=new vi;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield EB(n,t),yield bB(n,e),r.resolve()}catch(i){const o=i;if(!("FirebaseError"===(l=o).name?l.code===ce.FAILED_PRECONDITION||l.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;im("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function xB(n){if(n._initialized||n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ac(wi.fromBase64String(e))}catch(t){throw new Me(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ac(wi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bm{constructor(e){this._methodName=e}}class lS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const c4=/^__.*__$/;class d4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new $d(e,this.data,this.fieldMask,t,this.fieldTransforms):new $y(e,this.data,t,this.fieldTransforms)}}class RB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $d(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class cS{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===o&&this.na(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new cS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return fS(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(MB(this.sa)&&c4.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class h4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||ZE(e)}da(e,t,r,i=!1){return new cS({sa:e,methodName:t,fa:r,path:Nr.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Im(n){const e=n._freezeSettings(),t=ZE(n._databaseId);return new h4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dS(n,e,t,r,i,o={}){const l=n.da(o.merge||o.mergeFields?2:0,e,t,i);ak("Data must be an object, but it was:",l,r);const h=kB(r,l);let g,y;if(o.merge)g=new co(l.fieldMask),y=l.fieldTransforms;else if(o.mergeFields){const I=[];for(const S of o.mergeFields){const R=uk(e,S,t);if(!l.contains(R))throw new Me(ce.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);FB(I,R)||I.push(R)}g=new co(I),y=l.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,y=l.fieldTransforms;return new d4(new Ji(h),g,y)}class XE extends bm{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof XE}}function NB(n,e,t){return new cS({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class ik extends bm{_toFieldTransform(e){return new NE(e.path,new By)}isEqual(e){return e instanceof ik}}class f4 extends bm{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=NB(this,e,!0),r=this._a.map(o=>Cm(o,t)),i=new fm(r);return new NE(e.path,i)}isEqual(e){return this===e}}class p4 extends bm{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=NB(this,e,!0),r=this._a.map(o=>Cm(o,t)),i=new pm(r);return new NE(e.path,i)}isEqual(e){return this===e}}class g4 extends bm{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new jy(e.yt,wV(e.yt,this.wa));return new NE(e.path,t)}isEqual(e){return this===e}}function sk(n,e,t,r){const i=n.da(1,e,t);ak("Data must be an object, but it was:",i,r);const o=[],l=Ji.empty();am(r,(g,y)=>{const I=hS(e,g,t);y=(0,k.m9)(y);const S=i.ca(I);if(y instanceof XE)o.push(I);else{const R=Cm(y,S);null!=R&&(o.push(I),l.set(I,R))}});const h=new co(o);return new RB(l,h,i.fieldTransforms)}function ok(n,e,t,r,i,o){const l=n.da(1,e,t),h=[uk(e,r,t)],g=[i];if(o.length%2!=0)throw new Me(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<o.length;R+=2)h.push(uk(e,o[R])),g.push(o[R+1]);const y=[],I=Ji.empty();for(let R=h.length-1;R>=0;--R)if(!FB(y,h[R])){const O=h[R];let U=g[R];U=(0,k.m9)(U);const Z=l.ca(O);if(U instanceof XE)y.push(O);else{const te=Cm(U,Z);null!=te&&(y.push(O),I.set(O,te))}}const S=new co(y);return new RB(I,S,l.fieldTransforms)}function PB(n,e,t,r=!1){return Cm(t,n.da(r?4:3,e))}function Cm(n,e){if(OB(n=(0,k.m9)(n)))return ak("Unsupported field value:",e,n),kB(n,e);if(n instanceof bm)return function(t,r){if(!MB(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const l of t){let h=Cm(l,r.aa(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wV(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=gr.fromDate(t);return{timestampValue:Gy(r.yt,i)}}if(t instanceof gr){const i=new gr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Gy(r.yt,i)}}if(t instanceof lS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ac)return{bytesValue:jV(r.yt,t._byteString)};if(t instanceof or){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.ha(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:EN(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${iS(t)}`)}(n,e)}function kB(n,e){const t={};return qL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):am(n,(r,i)=>{const o=Cm(i,e.ra(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function OB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof gr||n instanceof lS||n instanceof ac||n instanceof or||n instanceof bm)}function ak(n,e,t){if(!OB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=iS(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function uk(n,e,t){if((e=(0,k.m9)(e))instanceof qd)return e._internalPath;if("string"==typeof e)return hS(n,e);throw fS("Field path arguments must be of type string or ",n,!1,void 0,t)}const m4=new RegExp("[~\\*/\\[\\]]");function hS(n,e,t){if(e.search(m4)>=0)throw fS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qd(...e.split("."))._internalPath}catch{throw fS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fS(n,e,t,r,i){const o=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(o||l)&&(g+=" (found",o&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new Me(ce.INVALID_ARGUMENT,h+n+g)}function FB(n,e){return n.some(t=>t.isEqual(e))}class eb{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _4 extends eb{data(){return super.data()}}function pS(n,e){return"string"==typeof e?hS(n,e):e instanceof qd?e._internalPath:e._delegate._internalPath}function LB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lk{}class tb extends lk{}function Kf(n,e,...t){let r=[];e instanceof lk&&r.push(e),r=r.concat(t),function(i){const o=i.filter(h=>h instanceof sv).length,l=i.filter(h=>h instanceof nb).length;if(o>1||o>0&&l>0)throw new Me(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class nb extends tb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new nb(e,t,r)}_apply(e){const t=this._parse(e);return jB(e._query,t),new Xi(e.firestore,e.converter,_N(e._query,t))}_parse(e){const t=Im(e.firestore);return function(i,o,l,h,g,y,I){let S;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){BB(I,y);const R=[];for(const O of I)R.push(UB(h,i,O));S={arrayValue:{values:R}}}else S=UB(h,i,I)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||BB(I,y),S=PB(l,"where",I,"in"===y||"not-in"===y);return dn.create(g,y,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class sv extends lk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Nn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const h of l)jB(o,h),o=_N(o,h)}(e._query,t),new Xi(e.firestore,e.converter,_N(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ck extends tb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ck(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Ly(i,o);return function(h,g){if(null===gN(h)){const y=kD(h);null!==y&&$B(0,y,g.field)}}(r,l),l}(e._query,this._field,this._direction);return new Xi(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new jd(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class gS extends tb{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new gS(e,t,r)}_apply(e){return new Xi(e.firestore,e.converter,OD(e._query,this._limit,this._limitType))}}class mS extends tb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new mS(e,t,r)}_apply(e){const t=VB(e,this.type,this._docOrFields,this._inclusive);return new Xi(e.firestore,e.converter,(i=t,new jd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class _S extends tb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _S(e,t,r)}_apply(e){const t=VB(e,this.type,this._docOrFields,this._inclusive);return new Xi(e.firestore,e.converter,(i=t,new jd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function VB(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof eb)return function(i,o,l,h,g){if(!h)throw new Me(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const I of hm(i))if(I.field.isKeyField())y.push(cm(o,h.key));else{const S=h.data.field(I.field);if(uN(S))throw new Me(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const R=I.field.canonicalString();throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(S)}return new jf(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Im(n.firestore);return function(o,l,h,g,y,I){const S=o.explicitOrderBy;if(y.length>S.length)throw new Me(ce.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let O=0;O<y.length;O++){const U=y[O];if(S[O].field.isKeyField()){if("string"!=typeof U)throw new Me(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof U}`);if(!mN(o)&&-1!==U.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${U}' contains a slash.`);const Z=o.path.child(mn.fromString(U));if(!Qe.isDocumentKey(Z))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Z}' is not because it contains an odd number of segments.`);const te=new Qe(Z);R.push(cm(l,te))}else{const Z=PB(h,g,U);R.push(Z)}}return new jf(R,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function UB(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Me(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mN(e)&&-1!==t.indexOf("/"))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!Qe.isDocumentKey(r))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cm(n,new Qe(r))}if(t instanceof or)return cm(n,t._key);throw new Me(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iS(t)}.`)}function BB(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function jB(n,e){if(e.isInequality()){const r=kD(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=gN(n);null!==o&&$B(0,i,o)}const t=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Me(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function $B(n,e,t){if(!t.isEqual(e))throw new Me(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class dk{convertValue(e,t="none"){switch(lm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(um(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return am(e.fields,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new lS(Pr(e.latitude),Pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=WL(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(DE(e));default:return null}}convertTimestamp(e){const t=Vf(e);return new gr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);wt(QV(r));const i=new Lf(r.get(1),r.get(3)),o=new Qe(r.popFirst(5));return i.isEqual(t)||Hr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function yS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class D4 extends dk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}class Tm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zd extends eb{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class rb extends zd{data(e={}){return super.data(e)}}class Zf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Tm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new rb(this._firestore,this._userDataWriter,r.key,r,new Tm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new rb(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Tm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new rb(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Tm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==l.type&&(g=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),y=o.indexOf(l.doc.key)),{type:S4(l.type),doc:h,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function S4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function GB(n,e){return n instanceof zd&&e instanceof zd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Zf&&e instanceof Zf&&n._firestore===e._firestore&&KP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Yf extends dk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}function qB(n,e,t){n=hn(n,or);const r=hn(n.firestore,ar),i=yS(n.converter,e,t);return ov(r,[dS(Im(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,mr.none())])}function zB(n,e,t,...r){n=hn(n,or);const i=hn(n.firestore,ar),o=Im(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof qd?ok(o,"updateDoc",n._key,e,t,r):sk(o,"updateDoc",n._key,e),ov(i,[l.toMutation(n._key,mr.exists(!0))])}function WB(n,...e){var t,r,i;n=(0,k.m9)(n);let o={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||rk(e[l])||(o=e[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges};if(rk(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let g,y,I;if(n instanceof or)y=hn(n.firestore,ar),I=Uy(n._key.path),g={next:S=>{e[l]&&e[l](hk(y,n,S))},error:e[l+1],complete:e[l+2]};else{const S=hn(n,Xi);y=hn(S.firestore,ar),I=S._query;const R=new Yf(y);g={next:O=>{e[l]&&e[l](new Zf(y,R,S,O))},error:e[l+1],complete:e[l+2]},LB(n._query)}return function(S,R,O,U){const Z=new oS(U),te=new wP(R,Z,O);return S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return gP(yield iv(S),te)})),()=>{Z.bc(),S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return _P(yield iv(S),te)}))}}(qr(y),I,h,g)}function ov(n,e){return function(t,r){const i=new vi;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function b6(n,e,t){return TP.apply(this,arguments)}(yield tk(t),r,i)})),i.promise}(qr(n),e)}function hk(n,e,t){const r=t.docs.get(e._key),i=new Yf(n);return new zd(n,i,e._key,r,new Tm(t.hasPendingWrites,t.fromCache),e.converter)}const L4={maxAttempts:5};class KB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Im(e)}set(e,t,r){this._verifyNotCommitted();const i=Qf(e,this._firestore),o=yS(i.converter,t,r),l=dS(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,mr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Qf(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof qd?ok(this._dataReader,"WriteBatch.update",o._key,t,r,i):sk(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qf(e,this._firestore);return this._mutations=this._mutations.concat(new Hy(t._key,mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qf(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Me(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class V4 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Im(e)}get(e){const t=Qf(e,this._firestore),r=new D4(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const o=i[0];if(o.isFoundDocument())return new eb(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new eb(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=Qf(e,this._firestore),o=yS(i.converter,t,r),l=dS(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const o=Qf(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof qd?ok(this._dataReader,"Transaction.update",o._key,t,r,i):sk(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=Qf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qf(e,this._firestore),r=new Yf(this._firestore);return super.get(e).then(i=>new zd(this._firestore,r,t._key,i._document,new Tm(!1,!1),t.converter))}}!function(n,e=!0){Py=xi.SDK_VERSION,(0,xi._registerComponent)(new qi.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),l=new ar(new Xq(t.getProvider("auth-internal")),new nz(t.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Me(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lf(h.options.projectId,g)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,xi.registerVersion)(kL,"3.8.1",n),(0,xi.registerVersion)(kL,"3.8.1","esm2017")}();function fk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function YB(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function QB(){if(!function hz(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ib{constructor(e){this._delegate=e}static fromBase64String(e){return QB(),new ib(ac.fromBase64String(e))}static fromUint8Array(e){return YB(),new ib(ac.fromUint8Array(e))}toBase64(){return QB(),this._delegate.toBase64()}toUint8Array(){return YB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pk(n){return function W4(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class K4{enableIndexedDbPersistence(e,t){return function n4(n,e){xB(n=hn(n,ar));const t=qr(n),r=n._freezeSettings(),i=new zP;return AB(t,i,new cB(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function r4(n){xB(n=hn(n,ar));const e=qr(n),t=n._freezeSettings(),r=new zP;return AB(e,r,new V6(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function i4(n){if(n._initialized&&!n._terminated)throw new Me(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Uu.C())return Promise.resolve();const i=r+"main";yield Uu.delete(i)}),function(r){return t.apply(this,arguments)})(UN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class JB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Lf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&im("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function _B(n,e,t,r={}){var i;const o=(n=hn(n,JE))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&im("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Pi.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Me(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Pi(g)}n._authCredentials=new Jq(new OL(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function o4(n){return function z6(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield IB(n),t=yield ek(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i._u.delete(0),YE(i)}(t)}))}(qr(n=hn(n,ar)))}(this._delegate)}disableNetwork(){return function a4(n){return function W6(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield IB(n),t=yield ek(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const o=rt(i);o._u.add(0),yield Qy(o),o.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(qr(n=hn(n,ar)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,dB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function s4(n){return function(e){const t=new vi;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function D6(n,e){return RP.apply(this,arguments)}(yield tk(e),t)})),t.promise}(qr(n=hn(n,ar)))}(this._delegate)}onSnapshotsInSync(e){return function F4(n,e){return function Y6(n,e){const t=new oS(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield iv(n),i=t,rt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield iv(n),i=t,void rt(r).Ru.delete(i);var r,i}))}}(qr(n=hn(n,ar)),rk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new av(this,yB(this._delegate,e))}catch(t){throw Gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new $a(this,sS(this._delegate,e))}catch(t){throw Gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qs(this,function U6(n,e){if(n=hn(n,JE),WP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xi(n,null,(t=e,new jd(mn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function U4(n,e,t){n=hn(n,ar);const r=Object.assign(Object.assign({},L4),t);return function(i){if(i.maxAttempts<1)throw new Me(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,l){const h=new vi;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const g=yield function CB(n){return aS(n).then(e=>e.datastore)}(i);new G6(i.asyncQueue,g,l,o,h).run()})),h.promise}(qr(n),i=>e(new V4(n,i)),r)}(this._delegate,t=>e(new XB(this,t)))}batch(){return qr(this._delegate),new e2(new KB(this._delegate,e=>ov(this._delegate,e)))}loadBundle(e){return function u4(n,e){const t=qr(n=hn(n,ar)),r=new e4;return function Q6(n,e,t,r){const i=function(o,l){let h;return h="string"==typeof o?(new TextEncoder).encode(o):o,g=function(g,y){if(g instanceof Uint8Array)return wB(g,y);if(g instanceof ArrayBuffer)return wB(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new B6(g,l);var g}(t,ZE(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function L6(n,e,t){const r=rt(n);var i;(i=(0,ve.Z)(function*(o,l,h){try{const g=yield l.getMetadata();if(yield function(R,O){const U=rt(R),Z=Gr(O.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",te=>U.Ns.getBundleMetadata(te,O.id)).then(te=>!!te&&te.createTime.compareTo(Z)>=0)}(o.localStore,g))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=g).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(eB(g));const y=new m6(g,o.localStore,l.yt);let I=yield l.mc();for(;I;){const R=yield y.Fu(I);R&&h._updateProgress(R),I=yield l.mc()}const S=yield y.complete();return yield Gd(o,S.Lu,void 0),yield function(R,O){const U=rt(R);return U.persistence.runTransaction("Save bundle","readwrite",Z=>U.Ns.saveBundleMetadata(Z,O))}(o.localStore,g),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(g){return im("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var R}),function(o,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield tk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function l4(n,e){return function J6(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ns.getNamedQuery(o,r))}(yield uS(n),e)}))}(qr(n=hn(n,ar)),e).then(t=>t?new Xi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new qs(this,t):null)}}class vS extends dk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ib(new ac(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $a.forKey(t,this.firestore,null)}}class XB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vS(e)}get(e){const t=Sm(e);return this._delegate.get(t).then(r=>new sb(this._firestore,new zd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Sm(e);return r?(fk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Sm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Sm(e);return this._delegate.delete(t),this}}class e2{constructor(e){this._delegate=e}set(e,t,r){const i=Sm(e);return r?(fk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Sm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Sm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new rb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ob(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Dm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Dm(e,new vS(e),t),i.set(t,o)),o}}Dm.INSTANCES=new WeakMap;class $a{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $a(t,new or(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new $a(t,new or(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new av(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new av(this.firestore,yB(this._delegate,e))}catch(t){throw Gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof or&&vB(this._delegate,e)}set(e,t){t=fk("DocumentReference.set",t);try{return t?qB(this._delegate,e,t):qB(this._delegate,e)}catch(r){throw Gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?zB(this._delegate,e):zB(this._delegate,e,t,...r)}catch(i){throw Gs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function k4(n){return ov(hn(n.firestore,ar),[new Hy(n._key,mr.none())])}(this._delegate)}onSnapshot(...e){const t=t2(e),r=n2(e,i=>new sb(this.firestore,new zd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WB(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function x4(n){n=hn(n,or);const e=hn(n.firestore,ar),t=qr(e),r=new Yf(e);return function K6(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,o,l){try{const h=yield function(g,y){const I=rt(g);return I.persistence.runTransaction("read document","readonly",S=>I.localDocuments.getDocument(S,y))}(i,o);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Me(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=ev(h,`Failed to get document '${o} from cache`);l.reject(g)}}),function(i,o,l){return r.apply(this,arguments)})(yield uS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new zd(e,r,n._key,i,new Tm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function R4(n){n=hn(n,or);const e=hn(n.firestore,ar);return TB(qr(e),n._key,{source:"server"}).then(t=>hk(e,n,t))}(this._delegate):function A4(n){n=hn(n,or);const e=hn(n.firestore,ar);return TB(qr(e),n._key).then(t=>hk(e,n,t))}(this._delegate),t.then(r=>new sb(this.firestore,new zd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new $a(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}function Gs(n,e,t){return n.message=n.message.replace(e,t),n}function t2(n){for(const e of n)if("object"==typeof e&&!pk(e))return e;return{}}function n2(n,e){var t,r;let i;return i=pk(n[0])?n[0]:pk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class sb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $a(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GB(this._delegate,e._delegate)}}class ob extends sb{data(e){const t=this._delegate.data(e);return function Yq(n,e){n||ct()}(void 0!==t),t}}class qs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vS(e)}where(e,t,r){try{return new qs(this.firestore,Kf(this._delegate,function y4(n,e,t){const r=e,i=pS("where",n);return nb._create(i,r,t)}(e,t,r)))}catch(i){throw Gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new qs(this.firestore,Kf(this._delegate,function v4(n,e="asc"){const t=e,r=pS("orderBy",n);return ck._create(r,t)}(e,t)))}catch(r){throw Gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new qs(this.firestore,Kf(this._delegate,function w4(n){return pB("limit",n),gS._create("limit",n,"F")}(e)))}catch(t){throw Gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new qs(this.firestore,Kf(this._delegate,function E4(n){return pB("limitToLast",n),gS._create("limitToLast",n,"L")}(e)))}catch(t){throw Gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new qs(this.firestore,Kf(this._delegate,function b4(...n){return mS._create("startAt",n,!0)}(...e)))}catch(t){throw Gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new qs(this.firestore,Kf(this._delegate,function I4(...n){return mS._create("startAfter",n,!1)}(...e)))}catch(t){throw Gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new qs(this.firestore,Kf(this._delegate,function C4(...n){return _S._create("endBefore",n,!1)}(...e)))}catch(t){throw Gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new qs(this.firestore,Kf(this._delegate,function T4(...n){return _S._create("endAt",n,!0)}(...e)))}catch(t){throw Gs(t,"endAt()","Query.endAt()")}}isEqual(e){return KP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function N4(n){n=hn(n,Xi);const e=hn(n.firestore,ar),t=qr(e),r=new Yf(e);return function Z6(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,o,l){try{const h=yield JD(i,o,!0),g=new rB(o,h.Hi),y=g.Wu(h.documents),I=g.applyChanges(y,!1);l.resolve(I.snapshot)}catch(h){const g=ev(h,`Failed to execute query '${o} against cache`);l.reject(g)}}),function(i,o,l){return r.apply(this,arguments)})(yield uS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Zf(e,r,n,i))}(this._delegate):"server"===e?.source?function P4(n){n=hn(n,Xi);const e=hn(n.firestore,ar),t=qr(e),r=new Yf(e);return DB(t,n._query,{source:"server"}).then(i=>new Zf(e,r,n,i))}(this._delegate):function M4(n){n=hn(n,Xi);const e=hn(n.firestore,ar),t=qr(e),r=new Yf(e);return LB(n._query),DB(t,n._query).then(i=>new Zf(e,r,n,i))}(this._delegate),t.then(r=>new gk(this.firestore,new Zf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=t2(e),r=n2(e,i=>new gk(this.firestore,new Zf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WB(this._delegate,t,r)}withConverter(e){return new qs(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}class Y4{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ob(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ob(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Y4(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ob(this._firestore,r))})}isEqual(e){return GB(this._delegate,e._delegate)}}class av extends qs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $a(this.firestore,e):null}doc(e){try{return new $a(this.firestore,void 0===e?sS(this._delegate):sS(this._delegate,e))}catch(t){throw Gs(t,"doc()","CollectionReference.doc()")}}add(e){return function O4(n,e){const t=hn(n.firestore,ar),r=sS(n),i=yS(n.converter,e);return ov(t,[dS(Im(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,mr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new $a(this.firestore,t))}isEqual(e){return vB(this._delegate,e._delegate)}withConverter(e){return new av(this.firestore,this._delegate.withConverter(e?Dm.getInstance(this.firestore,e):null))}}function Sm(n){return hn(n,or)}class mk{constructor(...e){this._delegate=new qd(...e)}static documentId(){return new mk(Nr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof qd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Am{constructor(e){this._delegate=e}static serverTimestamp(){const e=function j4(){return new ik("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Am(e)}static delete(){const e=function B4(){return new XE("deleteField")}();return e._methodName="FieldValue.delete",new Am(e)}static arrayUnion(...e){const t=function $4(...n){return new f4("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Am(t)}static arrayRemove(...e){const t=function H4(...n){return new p4("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Am(t)}static increment(e){const t=function G4(n){return new g4("increment",n)}(e);return t._methodName="FieldValue.increment",new Am(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Q4={Firestore:JB,GeoPoint:lS,Timestamp:gr,Blob:ib,Transaction:XB,WriteBatch:e2,DocumentReference:$a,DocumentSnapshot:sb,Query:qs,QueryDocumentSnapshot:ob,QuerySnapshot:gk,CollectionReference:av,FieldPath:mk,FieldValue:Am,setLogLevel:function Z4(n){!function Zq(n){kf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function r2(n,e){return function eK(n,e=Rw.z){return new tr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function _k(n,e){return r2(n,e).pipe((0,D.U)(t=>({payload:t,type:"query"})))}function wS(n,e){return _k(n,e).pipe(Uc(void 0),gM(),(0,D.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const g=i.find(I=>I.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(I=>I.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),o}))}function i2(n,e,t){return wS(n,t).pipe(Ro((r,i)=>function nK(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function rK(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return yk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return yk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return yk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),so(),(0,D.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function yk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function s2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function X4(n){(function J4(n,e){n.INTERNAL.registerComponent(new qi.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Q4)))})(n,(e,t)=>new JB(e,t,new K4)),n.registerVersion("@firebase/firestore-compat","0.3.1")}(gg.Z);class o2{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=wS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,D.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Uc(void 0),gM(),Ms(([r,i])=>i.length>0||!r),(0,D.U)(([r,i])=>i),pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ro((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=s2(e);return i2(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return _k(this.query,this.afs.schedulers.outsideAngular).pipe((0,D.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pn.iC)}get(e){return(0,sn.D)(this.query.get(e)).pipe(pn.iC)}add(e){return this.ref.add(e)}doc(e){return new a2(this.ref.doc(e),this.afs)}}class a2{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=c2(r,t);return new o2(i,o,this.afs)}snapshotChanges(){return function tK(n,e){return r2(n,e).pipe(Uc(void 0),gM(),(0,D.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,D.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,sn.D)(this.ref.get(e)).pipe(pn.iC)}}class iK{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?wS(this.query,this.afs.schedulers.outsideAngular).pipe((0,D.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ms(t=>t.length>0),pn.iC):wS(this.query,this.afs.schedulers.outsideAngular).pipe(pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ro((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=s2(e);return i2(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return _k(this.query,this.afs.schedulers.outsideAngular).pipe((0,D.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),pn.iC)}get(e){return(0,sn.D)(this.query.get(e)).pipe(pn.iC)}}const u2=new d.OlP("angularfire2.enableFirestorePersistence"),l2=new d.OlP("angularfire2.firestore.persistenceSettings"),sK=new d.OlP("angularfire2.firestore.settings"),oK=new d.OlP("angularfire2.firestore.use-emulator");function c2(n,e=(t=>t)){return{query:e(n),ref:n}}let aK=(()=>{class n{constructor(t,r,i,o,l,h,g,y,I,S,R,O,U,Z,te,$e,Ke){this.schedulers=g;const Ge=(0,$r.on)(t,h,r),ze=I;S&&QR(Ge,h,R,U,Z,te,O,$e),[this.firestore,this.persistenceEnabled$]=(0,$r.cc)(`${Ge.name}.firestore`,"AngularFirestore",Ge.name,()=>{const pt=h.runOutsideAngular(()=>Ge.firestore());if(o&&pt.settings(o),ze&&pt.useEmulator(...ze),i&&!Bu(l)){const Ct=()=>{try{return(0,sn.D)(pt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(on){return typeof console<"u"&&console.warn(on),ot(!1)}};return[pt,h.runOutsideAngular(Ct)]}return[pt,ot(!1)]},[o,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:l}=c2(i,r),h=this.schedulers.ngZone.run(()=>o);return new o2(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),o=this.firestore.collectionGroup(t);return new iK(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new a2(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($r.Dh),d.LFG($r.xv,8),d.LFG(u2,8),d.LFG(sK,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(l2,8),d.LFG(oK,8),d.LFG(GT,8),d.LFG(qR,8),d.LFG(zR,8),d.LFG(WR,8),d.LFG(KR,8),d.LFG(ZR,8),d.LFG(YR,8),d.LFG(K0,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uK=(()=>{class n{constructor(){HT.Z.registerVersion("angularfire",pn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:u2,useValue:!0},{provide:l2,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[aK]}),n})();const lK_firebaseConfig={apiKey:"AIzaSyBZ_2peiV0j05_bd4fZnezeUoe1RDbsR5M",authDomain:"crud-students-ea6df.firebaseapp.com",projectId:"crud-students-ea6df",storageBucket:"crud-students-ea6df.appspot.com",messagingSenderId:"462416042904",appId:"1:462416042904:web:cfc244d41bae9d1266a9ed",measurementId:"G-DYZX5SMDCF"};function d2(n){return new d.vHH(3e3,!1)}function GK(){return typeof window<"u"&&typeof window.document<"u"}function vk(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Jf(n){switch(n.length){case 0:return new Q0;case 1:return n[0];default:return new x1(n)}}function h2(n,e,t,r,i=new Map,o=new Map){const l=[],h=[];let g=-1,y=null;if(r.forEach(I=>{const S=I.get("offset"),R=S==g,O=R&&y||new Map;I.forEach((U,Z)=>{let te=Z,$e=U;if("offset"!==Z)switch(te=e.normalizePropertyName(te,l),$e){case eM:$e=i.get(Z);break;case Od:$e=o.get(Z);break;default:$e=e.normalizeStyleValue(Z,te,$e,l)}O.set(te,$e)}),R||h.push(O),y=O,g=S}),l.length)throw function NK(n){return new d.vHH(3502,!1)}();return h}function wk(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Ek(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Ek(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Ek(t,"destroy",n)))}}function Ek(n,e,t){const o=bk(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(o._data=l),o}function bk(n,e,t,r,i="",o=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!l}}function Yo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function f2(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Ik=(n,e)=>!1,p2=(n,e,t)=>[],g2=null;function Ck(n){const e=n.parentNode||n.host;return e===g2?null:e}(vk()||typeof Element<"u")&&(GK()?(g2=(()=>document.documentElement)(),Ik=(n,e)=>{for(;e;){if(e===n)return!0;e=Ck(e)}return!1}):Ik=(n,e)=>n.contains(e),p2=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let xm=null,m2=!1;const _2=Ik,y2=p2;let v2=(()=>{class n{validateStyleProperty(t){return function zK(n){xm||(xm=function WK(){return typeof document<"u"?document.body:null}()||{},m2=!!xm.style&&"WebkitAppearance"in xm.style);let e=!0;return xm.style&&!function qK(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in xm.style,!e&&m2&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in xm.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return _2(t,r)}getParentElement(t){return Ck(t)}query(t,r,i){return y2(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,l,h=[],g){return new Q0(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Tk=(()=>{class n{}return n.NOOP=new v2,n})();const KK=1e3,Dk="ng-enter",ES="ng-leave",bS="ng-trigger",IS=".ng-trigger",E2="ng-animating",Sk=".ng-animating";function Wd(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ak(parseFloat(e[1]),e[2])}function Ak(n,e){return"s"===e?n*KK:n}function CS(n,e,t){return n.hasOwnProperty("duration")?n:function YK(n,e,t){let i,o=0,l="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(d2()),{duration:0,delay:0,easing:""};i=Ak(parseFloat(h[1]),h[2]);const g=h[3];null!=g&&(o=Ak(parseFloat(g),h[4]));const y=h[5];y&&(l=y)}else i=n;if(!t){let h=!1,g=e.length;i<0&&(e.push(function cK(){return new d.vHH(3100,!1)}()),h=!0),o<0&&(e.push(function dK(){return new d.vHH(3101,!1)}()),h=!0),h&&e.splice(g,0,d2())}return{duration:i,delay:o,easing:l}}(n,e,t)}function ab(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function b2(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Xf(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function C2(n,e,t){return t?e+":"+t+";":""}function T2(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=C2(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=C2(0,eZ(t),n.style[t]));n.setAttribute("style",e)}function uc(n,e,t){n.style&&(e.forEach((r,i)=>{const o=Rk(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),vk()&&T2(n))}function Rm(n,e){n.style&&(e.forEach((t,r)=>{const i=Rk(r);n.style[i]=""}),vk()&&T2(n))}function ub(n){return Array.isArray(n)?1==n.length?n[0]:D1(n):n}const xk=new RegExp("{{\\s*(.+?)\\s*}}","g");function D2(n){let e=[];if("string"==typeof n){let t;for(;t=xk.exec(n);)e.push(t[1]);xk.lastIndex=0}return e}function lb(n,e,t){const r=n.toString(),i=r.replace(xk,(o,l)=>{let h=e[l];return null==h&&(t.push(function fK(n){return new d.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function TS(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const XK=/-+([a-z0-9])/g;function Rk(n){return n.replace(XK,(...e)=>e[1].toUpperCase())}function eZ(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Qo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function pK(n){return new d.vHH(3004,!1)}()}}function S2(n,e){return window.getComputedStyle(n)[e]}const AS="*";function oZ(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function aZ(n,e,t){if(":"==n[0]){const g=function uZ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function AK(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function SK(n){return new d.vHH(3015,!1)}()),e;const i=r[1],o=r[2],l=r[3];e.push(A2(i,l));"<"==o[0]&&!(i==AS&&l==AS)&&e.push(A2(l,i))}(r,t,e)):t.push(n),t}const xS=new Set(["true","1"]),RS=new Set(["false","0"]);function A2(n,e){const t=xS.has(n)||RS.has(n),r=xS.has(e)||RS.has(e);return(i,o)=>{let l=n==AS||n==i,h=e==AS||e==o;return!l&&t&&"boolean"==typeof i&&(l=i?xS.has(n):RS.has(n)),!h&&r&&"boolean"==typeof o&&(h=o?xS.has(e):RS.has(e)),l&&h}}const lZ=new RegExp("s*:selfs*,?","g");function Mk(n,e,t,r){return new cZ(n).build(e,t,r)}class cZ{constructor(e){this._driver=e}build(e,t,r){const i=new fZ(t);return this._resetContextStyleTimingState(i),Qo(this,ub(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function mK(){return new d.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const g=h,y=g.name;y.toString().split(/\s*,\s*/).forEach(I=>{g.name=I,o.push(this.visitState(g,t))}),g.name=y}else if(1==h.type){const g=this.visitTransition(h,t);r+=g.queryCount,i+=g.depCount,l.push(g)}else t.errors.push(function _K(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,l=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(g=>{D2(g).forEach(y=>{l.hasOwnProperty(y)||o.add(y)})})}),o.size&&(TS(o.values()),t.errors.push(function yK(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Qo(this,ub(e.animation),t);return{type:1,matchers:oZ(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Mm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Qo(this,r,t)),options:Mm(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(l=>{t.currentTime=r;const h=Qo(this,l,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:o,options:Mm(e.options)}}visitAnimate(e,t){const r=function gZ(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Nk(CS(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Nk(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=CS(t,e);return Nk(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:Y0({});if(5==o.type)i=this.visitKeyframes(o,t);else{let l=e.styles,h=!1;if(!l){h=!0;const y={};r.easing&&(y.easing=r.easing),l=Y0(y)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(l,t);g.isEmptyStep=h,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===Od?r.push(h):t.errors.push(new d.vHH(3002,!1)):r.push(b2(h));let o=!1,l=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!o))for(let g of h.values())if(g.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((h,g)=>{const y=t.collectedStyles.get(t.currentQuerySelector),I=y.get(g);let S=!0;I&&(o!=i&&o>=I.startTime&&i<=I.endTime&&(t.errors.push(function wK(n,e,t,r,i){return new d.vHH(3010,!1)}()),S=!1),o=I.startTime),S&&y.set(g,{startTime:o,endTime:i}),t.options&&function JK(n,e,t){const r=e.params||{},i=D2(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function hK(n){return new d.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function EK(){return new d.vHH(3011,!1)}()),r;let o=0;const l=[];let h=!1,g=!1,y=0;const I=e.steps.map($e=>{const Ke=this._makeStyleAst($e,t);let Ge=null!=Ke.offset?Ke.offset:function pZ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ke.styles),ze=0;return null!=Ge&&(o++,ze=Ke.offset=Ge),g=g||ze<0||ze>1,h=h||ze<y,y=ze,l.push(ze),Ke});g&&t.errors.push(function bK(){return new d.vHH(3012,!1)}()),h&&t.errors.push(function IK(){return new d.vHH(3200,!1)}());const S=e.steps.length;let R=0;o>0&&o<S?t.errors.push(function CK(){return new d.vHH(3202,!1)}()):0==o&&(R=1/(S-1));const O=S-1,U=t.currentTime,Z=t.currentAnimateTimings,te=Z.duration;return I.forEach(($e,Ke)=>{const Ge=R>0?Ke==O?1:R*Ke:l[Ke],ze=Ge*te;t.currentTime=U+Z.delay+ze,Z.duration=ze,this._validateStyleAst($e,t),$e.offset=Ge,r.styles.push($e)}),r}visitReference(e,t){return{type:8,animation:Qo(this,ub(e.animation),t),options:Mm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Mm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Mm(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,l]=function dZ(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(lZ,"")),n=n.replace(/@\*/g,IS).replace(/@\w+/g,t=>IS+"-"+t.slice(1)).replace(/:animating/g,Sk),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Yo(t.collectedStyles,t.currentQuerySelector,new Map);const h=Qo(this,ub(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:h,originalSelector:e.selector,options:Mm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function TK(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:CS(e.timings,t.errors,!0);return{type:12,animation:Qo(this,ub(e.animation),t),timings:r,options:null}}}class fZ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Mm(n){return n?(n=ab(n)).params&&(n.params=function hZ(n){return n?ab(n):null}(n.params)):n={},n}function Nk(n,e,t){return{duration:n,delay:e,easing:t}}function Pk(n,e,t,r,i,o,l=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:l,subTimeline:h}}class MS{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const yZ=new RegExp(":enter","g"),wZ=new RegExp(":leave","g");function kk(n,e,t,r,i,o=new Map,l=new Map,h,g,y=[]){return(new EZ).buildKeyframes(n,e,t,r,i,o,l,h,g,y)}class EZ{buildKeyframes(e,t,r,i,o,l,h,g,y,I=[]){y=y||new MS;const S=new Ok(e,t,y,i,o,I,[]);S.options=g;const R=g.delay?Wd(g.delay):0;S.currentTimeline.delayNextStep(R),S.currentTimeline.setStyles([l],null,S.errors,g),Qo(this,r,S);const O=S.timelines.filter(U=>U.containsAnimation());if(O.length&&h.size){let U;for(let Z=O.length-1;Z>=0;Z--){const te=O[Z];if(te.element===t){U=te;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([h],null,S.errors,g)}return O.length?O.map(U=>U.buildKeyframes()):[Pk(t,[],[],[],0,R,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);o!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const o=i?.delay;if(o){const l="number"==typeof o?o:Wd(lb(o,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const l=null!=r.duration?Wd(r.duration):null,h=null!=r.delay?Wd(r.delay):null;return 0!==l&&e.forEach(g=>{const y=t.appendInstructionToTimeline(g,l,h);o=Math.max(o,y.duration+y.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Qo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=NS);const l=Wd(o.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Qo(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Wd(e.options.delay):0;e.steps.forEach(l=>{const h=t.createSubContext(e.options);o&&h.delayNextStep(o),Qo(this,l,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return CS(t.params?lb(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(g=>{h.forwardTime((g.offset||0)*o),h.setStyles(g.styles,g.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Wd(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=NS);let l=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let g=null;h.forEach((y,I)=>{t.currentQueryIndex=I;const S=t.createSubContext(e.options,y);o&&S.delayNextStep(o),y===t.element&&(g=S.currentTimeline),Qo(this,e.animation,S),S.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,l=Math.abs(o.duration),h=l*(t.currentQueryTotal-1);let g=l*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":g=h-g;break;case"full":g=r.currentStaggerTime}const I=t.currentTimeline;g&&I.delayNextStep(g);const S=I.currentTime;Qo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const NS={};class Ok{constructor(e,t,r,i,o,l,h,g){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=NS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new PS(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Wd(r.duration)),null!=r.delay&&(i.delay=Wd(r.delay));const o=r.params;if(o){let l=i.params;l||(l=this.options.params={}),Object.keys(o).forEach(h=>{(!t||!l.hasOwnProperty(h))&&(l[h]=lb(o[h],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new Ok(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=NS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new bZ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,l){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(yZ,"."+this._enterClassName)).replace(wZ,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!o&&0==h.length&&l.push(function DK(n){return new d.vHH(3014,!1)}()),h}}class PS{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new PS(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Od),this._currentKeyframe.set(t,Od);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},l=function IZ(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,Od)}else Xf(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,g]of l){const y=lb(g,o,r);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??Od),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,g)=>{const y=Xf(h,new Map,this._backFill);y.forEach((I,S)=>{I===eM?e.add(S):I===Od&&t.add(S)}),r||y.set("offset",g/this.duration),i.push(y)});const o=e.size?TS(e.values()):[],l=t.size?TS(t.values()):[];if(r){const h=i[0],g=new Map(h);h.set("offset",0),g.set("offset",1),i=[h,g]}return Pk(this.element,i,o,l,this.duration,this.startTime,this.easing,!1)}}class bZ extends PS{constructor(e,t,r,i,o,l,h=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],l=r+t,h=t/l,g=Xf(e[0]);g.set("offset",0),o.push(g);const y=Xf(e[0]);y.set("offset",M2(h)),o.push(y);const I=e.length-1;for(let S=1;S<=I;S++){let R=Xf(e[S]);const O=R.get("offset");R.set("offset",M2((t+O*r)/l)),o.push(R)}r=l,t=0,i="",e=o}return Pk(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function M2(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Fk{}const CZ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class TZ extends Fk{normalizePropertyName(e,t){return Rk(e)}normalizeStyleValue(e,t,r,i){let o="";const l=r.toString().trim();if(CZ.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function gK(n,e){return new d.vHH(3005,!1)}())}return l+o}}function N2(n,e,t,r,i,o,l,h,g,y,I,S,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:l,timelines:h,queriedElements:g,preStyleProps:y,postStyleProps:I,totalTime:S,errors:R}}const Lk={};class P2{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function DZ(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,l,h,g,y,I){const S=[],R=this.ast.options&&this.ast.options.params||Lk,U=this.buildStyles(r,h&&h.params||Lk,S),Z=g&&g.params||Lk,te=this.buildStyles(i,Z,S),$e=new Set,Ke=new Map,Ge=new Map,ze="void"===i,pt={params:SZ(Z,R),delay:this.ast.options?.delay},Ct=I?[]:kk(e,t,this.ast.animation,o,l,U,te,pt,y,S);let on=0;if(Ct.forEach(Jo=>{on=Math.max(Jo.duration+Jo.delay,on)}),S.length)return N2(t,this._triggerName,r,i,ze,U,te,[],[],Ke,Ge,on,S);Ct.forEach(Jo=>{const Kd=Jo.element,K2=Yo(Ke,Kd,new Set);Jo.preStyleProps.forEach(Nm=>K2.add(Nm));const db=Yo(Ge,Kd,new Set);Jo.postStyleProps.forEach(Nm=>db.add(Nm)),Kd!==t&&$e.add(Kd)});const zr=TS($e.values());return N2(t,this._triggerName,r,i,ze,U,te,Ct,zr,Ke,Ge,on)}}function SZ(n,e){const t=ab(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class AZ{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=ab(this.defaultParams);return Object.keys(e).forEach(o=>{const l=e[o];null!==l&&(i[o]=l)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,h)=>{l&&(l=lb(l,i,t));const g=this.normalizer.normalizePropertyName(h,t);l=this.normalizer.normalizeStyleValue(h,g,l,t),r.set(h,l)})}),r}}class RZ{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new AZ(i.style,i.options&&i.options.params||{},r))}),k2(this.states,"true","1"),k2(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new P2(e,i,this.states))}),this.fallbackTransition=function MZ(n,e,t){return new P2(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function k2(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const NZ=new MS;class PZ{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],o=Mk(this._driver,t,r,i);if(r.length)throw function PK(n){return new d.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=h2(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let l;const h=new Map;if(o?(l=kk(this._driver,t,o,Dk,ES,new Map,new Map,r,NZ,i),l.forEach(I=>{const S=Yo(h,I.element,new Map);I.postStyleProps.forEach(R=>S.set(R,null))})):(i.push(function kK(){return new d.vHH(3300,!1)}()),l=[]),i.length)throw function OK(n){return new d.vHH(3504,!1)}();h.forEach((I,S)=>{I.forEach((R,O)=>{I.set(O,this._driver.computeStyle(S,O,Od))})});const y=Jf(l.map(I=>{const S=h.get(I.element);return this._buildPlayer(I,new Map,S)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function FK(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const o=bk(t,"","","");return wk(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const O2="ng-animate-queued",Vk="ng-animate-disabled",VZ=[],F2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},UZ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ha="__ng_removed";class Uk{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function HZ(n){return n??null}(r?e.value:e),r){const o=ab(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const cb="void",Bk=new Uk(cb);class BZ{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ga(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function LK(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function VK(n){return new d.vHH(3303,!1)}();if(!function GZ(n){return"start"==n||"done"==n}(r))throw function UK(n,e){return new d.vHH(3400,!1)}();const o=Yo(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};o.push(l);const h=Yo(this._engine.statesByElement,e,new Map);return h.has(t)||(Ga(e,bS),Ga(e,bS+"-"+t),h.set(t,Bk)),()=>{this._engine.afterFlush(()=>{const g=o.indexOf(l);g>=0&&o.splice(g,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function BK(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),l=new jk(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Ga(e,bS),Ga(e,bS+"-"+t),this._engine.statesByElement.set(e,h=new Map));let g=h.get(t);const y=new Uk(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&y.absorbOptions(g.options),h.set(t,y),g||(g=Bk),y.value!==cb&&g.value===y.value){if(!function WZ(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(g.params,y.params)){const Z=[],te=o.matchStyles(g.value,g.params,Z),$e=o.matchStyles(y.value,y.params,Z);Z.length?this._engine.reportError(Z):this._engine.afterFlush(()=>{Rm(e,te),uc(e,$e)})}return}const R=Yo(this._engine.playersByElement,e,[]);R.forEach(Z=>{Z.namespaceId==this.id&&Z.triggerName==t&&Z.queued&&Z.destroy()});let O=o.matchTransition(g.value,y.value,e,y.params),U=!1;if(!O){if(!i)return;O=o.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:g,toState:y,player:l,isFallbackTransition:U}),U||(Ga(e,O2),l.onStart(()=>{uv(e,O2)})),l.onDone(()=>{let Z=this.players.indexOf(l);Z>=0&&this.players.splice(Z,1);const te=this._engine.playersByElement.get(e);if(te){let $e=te.indexOf(l);$e>=0&&te.splice($e,1)}}),this.players.push(l),R.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,IS,!0);r.forEach(i=>{if(i[Ha])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),l=new Map;if(o){const h=[];if(o.forEach((g,y)=>{if(l.set(y,g.value),this._triggers.has(y)){const I=this.trigger(e,y,cb,i);I&&h.push(I)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&Jf(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const l=o.name;if(i.has(l))return;i.add(l);const g=this._triggers.get(l).fallbackTransition,y=r.get(l)||Bk,I=new Uk(cb),S=new jk(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:g,fromState:y,toState:I,player:S,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Ha];(!o||o===F2)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ga(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,l=this._elementListeners.get(o);l&&l.forEach(h=>{if(h.name==r.triggerName){const g=bk(o,r.triggerName,r.fromState.value,r.toState.value);g._data=e,wk(r.player,h.phase,g,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==o||0==l?o-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class jZ{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new BZ(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,h=this.driver.getParentElement(t);for(;h;){const g=i.get(h);if(g){const y=r.indexOf(g);r.splice(y+1,0,e),l=!0;break}h=this.driver.getParentElement(h)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(kS(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!kS(t))return;const o=t[Ha];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ga(e,Vk)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),uv(e,Vk))}removeNode(e,t,r,i){if(kS(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Ha]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return kS(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,IS,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Sk,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Jf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ha];if(t&&t.setForRemoval){if(e[Ha]=F2,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Vk)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ga(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Jf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function jK(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new MS,i=[],o=new Map,l=[],h=new Map,g=new Map,y=new Map,I=new Set;this.disabledNodes.forEach(_t=>{I.add(_t);const kt=this.driver.query(_t,".ng-animate-queued",!0);for(let Ut=0;Ut<kt.length;Ut++)I.add(kt[Ut])});const S=this.bodyNode,R=Array.from(this.statesByElement.keys()),O=U2(R,this.collectedEnterElements),U=new Map;let Z=0;O.forEach((_t,kt)=>{const Ut=Dk+Z++;U.set(kt,Ut),_t.forEach(vn=>Ga(vn,Ut))});const te=[],$e=new Set,Ke=new Set;for(let _t=0;_t<this.collectedLeaveElements.length;_t++){const kt=this.collectedLeaveElements[_t],Ut=kt[Ha];Ut&&Ut.setForRemoval&&(te.push(kt),$e.add(kt),Ut.hasAnimation?this.driver.query(kt,".ng-star-inserted",!0).forEach(vn=>$e.add(vn)):Ke.add(kt))}const Ge=new Map,ze=U2(R,Array.from($e));ze.forEach((_t,kt)=>{const Ut=ES+Z++;Ge.set(kt,Ut),_t.forEach(vn=>Ga(vn,Ut))}),e.push(()=>{O.forEach((_t,kt)=>{const Ut=U.get(kt);_t.forEach(vn=>uv(vn,Ut))}),ze.forEach((_t,kt)=>{const Ut=Ge.get(kt);_t.forEach(vn=>uv(vn,Ut))}),te.forEach(_t=>{this.processLeaveNode(_t)})});const pt=[],Ct=[];for(let _t=this._namespaceList.length-1;_t>=0;_t--)this._namespaceList[_t].drainQueuedTransitions(t).forEach(Ut=>{const vn=Ut.player,Fi=Ut.element;if(pt.push(vn),this.collectedEnterElements.length){const _s=Fi[Ha];if(_s&&_s.setForMove){if(_s.previousTriggersValues&&_s.previousTriggersValues.has(Ut.triggerName)){const Pm=_s.previousTriggersValues.get(Ut.triggerName),qa=this.statesByElement.get(Ut.element);if(qa&&qa.has(Ut.triggerName)){const LS=qa.get(Ut.triggerName);LS.value=Pm,qa.set(Ut.triggerName,LS)}}return void vn.destroy()}}const lc=!S||!this.driver.containsElement(S,Fi),Xo=Ge.get(Fi),ep=U.get(Fi),Ir=this._buildInstruction(Ut,r,ep,Xo,lc);if(Ir.errors&&Ir.errors.length)return void Ct.push(Ir);if(lc)return vn.onStart(()=>Rm(Fi,Ir.fromStyles)),vn.onDestroy(()=>uc(Fi,Ir.toStyles)),void i.push(vn);if(Ut.isFallbackTransition)return vn.onStart(()=>Rm(Fi,Ir.fromStyles)),vn.onDestroy(()=>uc(Fi,Ir.toStyles)),void i.push(vn);const Q2=[];Ir.timelines.forEach(_s=>{_s.stretchStartingKeyframe=!0,this.disabledNodes.has(_s.element)||Q2.push(_s)}),Ir.timelines=Q2,r.append(Fi,Ir.timelines),l.push({instruction:Ir,player:vn,element:Fi}),Ir.queriedElements.forEach(_s=>Yo(h,_s,[]).push(vn)),Ir.preStyleProps.forEach((_s,Pm)=>{if(_s.size){let qa=g.get(Pm);qa||g.set(Pm,qa=new Set),_s.forEach((LS,Gk)=>qa.add(Gk))}}),Ir.postStyleProps.forEach((_s,Pm)=>{let qa=y.get(Pm);qa||y.set(Pm,qa=new Set),_s.forEach((LS,Gk)=>qa.add(Gk))})});if(Ct.length){const _t=[];Ct.forEach(kt=>{_t.push(function $K(n,e){return new d.vHH(3505,!1)}())}),pt.forEach(kt=>kt.destroy()),this.reportError(_t)}const on=new Map,zr=new Map;l.forEach(_t=>{const kt=_t.element;r.has(kt)&&(zr.set(kt,kt),this._beforeAnimationBuild(_t.player.namespaceId,_t.instruction,on))}),i.forEach(_t=>{const kt=_t.element;this._getPreviousPlayers(kt,!1,_t.namespaceId,_t.triggerName,null).forEach(vn=>{Yo(on,kt,[]).push(vn),vn.destroy()})});const Jo=te.filter(_t=>j2(_t,g,y)),Kd=new Map;V2(Kd,this.driver,Ke,y,Od).forEach(_t=>{j2(_t,g,y)&&Jo.push(_t)});const db=new Map;O.forEach((_t,kt)=>{V2(db,this.driver,new Set(_t),g,eM)}),Jo.forEach(_t=>{const kt=Kd.get(_t),Ut=db.get(_t);Kd.set(_t,new Map([...Array.from(kt?.entries()??[]),...Array.from(Ut?.entries()??[])]))});const Nm=[],Z2=[],Y2={};l.forEach(_t=>{const{element:kt,player:Ut,instruction:vn}=_t;if(r.has(kt)){if(I.has(kt))return Ut.onDestroy(()=>uc(kt,vn.toStyles)),Ut.disabled=!0,Ut.overrideTotalTime(vn.totalTime),void i.push(Ut);let Fi=Y2;if(zr.size>1){let Xo=kt;const ep=[];for(;Xo=Xo.parentNode;){const Ir=zr.get(Xo);if(Ir){Fi=Ir;break}ep.push(Xo)}ep.forEach(Ir=>zr.set(Ir,Fi))}const lc=this._buildAnimation(Ut.namespaceId,vn,on,o,db,Kd);if(Ut.setRealPlayer(lc),Fi===Y2)Nm.push(Ut);else{const Xo=this.playersByElement.get(Fi);Xo&&Xo.length&&(Ut.parentPlayer=Jf(Xo)),i.push(Ut)}}else Rm(kt,vn.fromStyles),Ut.onDestroy(()=>uc(kt,vn.toStyles)),Z2.push(Ut),I.has(kt)&&i.push(Ut)}),Z2.forEach(_t=>{const kt=o.get(_t.element);if(kt&&kt.length){const Ut=Jf(kt);_t.setRealPlayer(Ut)}}),i.forEach(_t=>{_t.parentPlayer?_t.syncPlayerEvents(_t.parentPlayer):_t.destroy()});for(let _t=0;_t<te.length;_t++){const kt=te[_t],Ut=kt[Ha];if(uv(kt,ES),Ut&&Ut.hasAnimation)continue;let vn=[];if(h.size){let lc=h.get(kt);lc&&lc.length&&vn.push(...lc);let Xo=this.driver.query(kt,Sk,!0);for(let ep=0;ep<Xo.length;ep++){let Ir=h.get(Xo[ep]);Ir&&Ir.length&&vn.push(...Ir)}}const Fi=vn.filter(lc=>!lc.destroyed);Fi.length?qZ(this,kt,Fi):this.processLeaveNode(kt)}return te.length=0,Nm.forEach(_t=>{this.players.push(_t),_t.onDone(()=>{_t.destroy();const kt=this.players.indexOf(_t);this.players.splice(kt,1)}),_t.play()}),Nm}elementContainsData(e,t){let r=!1;const i=t[Ha];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let l=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(l=h)}else{const h=this.playersByElement.get(e);if(h){const g=!o||o==cb;h.forEach(y=>{y.queued||!g&&y.triggerName!=i||l.push(y)})}}return(r||i)&&(l=l.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),l}_beforeAnimationBuild(e,t,r){const o=t.element,l=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const y=g.element,I=y!==o,S=Yo(r,y,[]);this._getPreviousPlayers(y,I,l,h,t.toState).forEach(O=>{const U=O.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),O.destroy(),S.push(O)})}Rm(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,l){const h=t.triggerName,g=t.element,y=[],I=new Set,S=new Set,R=t.timelines.map(U=>{const Z=U.element;I.add(Z);const te=Z[Ha];if(te&&te.removedBeforeQueried)return new Q0(U.duration,U.delay);const $e=Z!==g,Ke=function zZ(n){const e=[];return B2(n,e),e}((r.get(Z)||VZ).map(on=>on.getRealPlayer())).filter(on=>!!on.element&&on.element===Z),Ge=o.get(Z),ze=l.get(Z),pt=h2(0,this._normalizer,0,U.keyframes,Ge,ze),Ct=this._buildPlayer(U,pt,Ke);if(U.subTimeline&&i&&S.add(Z),$e){const on=new jk(e,h,Z);on.setRealPlayer(Ct),y.push(on)}return Ct});y.forEach(U=>{Yo(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function $Z(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,U.element,U))}),I.forEach(U=>Ga(U,E2));const O=Jf(R);return O.onDestroy(()=>{I.forEach(U=>uv(U,E2)),uc(g,t.toStyles)}),S.forEach(U=>{Yo(i,U,[]).push(O)}),O}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Q0(e.duration,e.delay)}}class jk{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Q0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>wk(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Yo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function kS(n){return n&&1===n.nodeType}function L2(n,e){const t=n.style.display;return n.style.display=e??"none",t}function V2(n,e,t,r,i){const o=[];t.forEach(g=>o.push(L2(g)));const l=[];r.forEach((g,y)=>{const I=new Map;g.forEach(S=>{const R=e.computeStyle(y,S,i);I.set(S,R),(!R||0==R.length)&&(y[Ha]=UZ,l.push(y))}),n.set(y,I)});let h=0;return t.forEach(g=>L2(g,o[h++])),l}function U2(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const r=1,i=new Set(e),o=new Map;function l(h){if(!h)return r;let g=o.get(h);if(g)return g;const y=h.parentNode;return g=t.has(y)?y:i.has(y)?r:l(y),o.set(h,g),g}return e.forEach(h=>{const g=l(h);g!==r&&t.get(g).push(h)}),t}function Ga(n,e){n.classList?.add(e)}function uv(n,e){n.classList?.remove(e)}function qZ(n,e,t){Jf(t).onDone(()=>n.processLeaveNode(e))}function B2(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof x1?B2(r.players,e):e.push(r)}}function j2(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class OS{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new jZ(e,t,r),this._timelineEngine=new PZ(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const l=e+"-"+i;let h=this._triggerCache[l];if(!h){const g=[],y=[],I=Mk(this._driver,o,g,y);if(g.length)throw function MK(n,e){return new d.vHH(3404,!1)}();h=function xZ(n,e,t){return new RZ(n,e,t)}(i,I,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,l]=f2(r);this._timelineEngine.command(o,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[l,h]=f2(r);return this._timelineEngine.listen(l,t,h,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ZZ=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&uc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(uc(this._element,this._initialStyles),this._endStyles&&(uc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Rm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rm(this._element,this._endStyles),this._endStyles=null),uc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function $k(n){let e=null;return n.forEach((t,r)=>{(function YZ(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class $2{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:S2(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class QZ{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return _2(e,t)}getParentElement(e){return Ck(e)}query(e,t,r){return y2(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,l=[]){const g={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(g.easing=o);const y=new Map,I=l.filter(O=>O instanceof $2);(function tZ(n,e){return 0===n||0===e})(r,i)&&I.forEach(O=>{O.currentSnapshot.forEach((U,Z)=>y.set(Z,U))});let S=function QK(n){return n.length?n[0]instanceof Map?n:n.map(e=>b2(e)):[]}(t).map(O=>Xf(O));S=function nZ(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,l)=>{r.has(l)||i.push(l),r.set(l,o)}),i.length)for(let o=1;o<e.length;o++){let l=e[o];i.forEach(h=>l.set(h,S2(n,h)))}}return e}(e,S,y);const R=function KZ(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=$k(e[0]),e.length>1&&(r=$k(e[e.length-1]))):e instanceof Map&&(t=$k(e)),t||r?new ZZ(n,t,r):null}(e,S);return new $2(e,S,g,R)}}let JZ=(()=>{class n extends C1{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?D1(t):t;return H2(this._renderer,null,r,"register",[i]),new XZ(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class XZ extends Y${constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new e8(this._id,e,t||{},this._renderer)}}class e8{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return H2(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function H2(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const G2="@.disabled";let t8=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,l)=>{const h=l?.parentNode(o);h&&l.removeChild(h,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(o);return I||(I=new q2("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,I)),I}const l=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const g=I=>{Array.isArray(I)?I.forEach(g):this.engine.registerTrigger(l,h,t,I.name,I)};return r.data.animation.forEach(g),new n8(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[l,h]=o;l(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(OS),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class q2{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==G2?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class n8 extends q2{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==G2?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function r8(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),l="";return"@"!=o.charAt(0)&&([o,l]=function i8(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,l,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let s8=(()=>{class n extends OS{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie),d.LFG(Tk),d.LFG(Fk),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const z2=[{provide:C1,useClass:JZ},{provide:Fk,useFactory:function o8(){return new TZ}},{provide:OS,useClass:s8},{provide:d.FYo,useFactory:function a8(n,e,t){return new t8(n,e,t)},deps:[Ar,OS,d.R0b]}],Hk=[{provide:Tk,useFactory:()=>new QZ},{provide:d.QbO,useValue:"BrowserAnimations"},...z2],W2=[{provide:Tk,useClass:v2},{provide:d.QbO,useValue:"NoopAnimations"},...z2];let u8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?W2:Hk}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Hk,imports:[Ia]}),n})(),l8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[nG]}),n.\u0275inj=d.cJS({imports:[Ia,tG,$r.hO.initializeApp(lK_firebaseConfig),O$,uK,z3,Z$,u8,yH.forRoot(),BH,xw,ka]}),n})();gh().bootstrapModule(l8).catch(n=>console.error(n))},9751:(gt,De,L)=>{L.d(De,{y:()=>pe});var d=L(930),J=L(727),F=L(8822),ae=L(9635),oe=L(2416),ie=L(576),me=L(2806);let pe=(()=>{class Y{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const We=new Y;return We.source=this,We.operator=Se,We}subscribe(Se,We,ut){const ge=function G(Y){return Y&&Y instanceof d.Lv||function q(Y){return Y&&(0,ie.m)(Y.next)&&(0,ie.m)(Y.error)&&(0,ie.m)(Y.complete)}(Y)&&(0,J.Nn)(Y)}(Se)?Se:new d.Hp(Se,We,ut);return(0,me.x)(()=>{const{operator:xe,source:Ae}=this;ge.add(xe?xe.call(ge,Ae):Ae?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Se){try{return this._subscribe(Se)}catch(We){Se.error(We)}}forEach(Se,We){return new(We=de(We))((ut,ge)=>{const xe=new d.Hp({next:Ae=>{try{Se(Ae)}catch(ke){ge(ke),xe.unsubscribe()}},error:ge,complete:ut});this.subscribe(xe)})}_subscribe(Se){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(Se)}[F.L](){return this}pipe(...Se){return(0,ae.U)(Se)(this)}toPromise(Se){return new(Se=de(Se))((We,ut)=>{let ge;this.subscribe(xe=>ge=xe,xe=>ut(xe),()=>We(ge))})}}return Y.create=je=>new Y(je),Y})();function de(Y){var je;return null!==(je=Y??oe.v.Promise)&&void 0!==je?je:Promise}},7579:(gt,De,L)=>{L.d(De,{x:()=>me});var d=L(9751),J=L(727);const ae=(0,L(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=L(8737),ie=L(2806);let me=(()=>{class de extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Y=new pe(this,this);return Y.operator=G,Y}_throwIfClosed(){if(this.closed)throw new ae}next(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(G)}})}error(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Y}=this;for(;Y.length;)Y.shift().error(G)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Y,isStopped:je,observers:Se}=this;return Y||je?J.Lc:(this.currentObservers=null,Se.push(G),new J.w0(()=>{this.currentObservers=null,(0,oe.P)(Se,G)}))}_checkFinalizedStatuses(G){const{hasError:Y,thrownError:je,isStopped:Se}=this;Y?G.error(je):Se&&G.complete()}asObservable(){const G=new d.y;return G.source=this,G}}return de.create=(q,G)=>new pe(q,G),de})();class pe extends me{constructor(q,G){super(),this.destination=q,this.source=G}next(q){var G,Y;null===(Y=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Y||Y.call(G,q)}error(q){var G,Y;null===(Y=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Y||Y.call(G,q)}complete(){var q,G;null===(G=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===G||G.call(q)}_subscribe(q){var G,Y;return null!==(Y=null===(G=this.source)||void 0===G?void 0:G.subscribe(q))&&void 0!==Y?Y:J.Lc}}},930:(gt,De,L)=>{L.d(De,{Hp:()=>ut,Lv:()=>Y});var d=L(576),J=L(727),F=L(2416),ae=L(7849),oe=L(5032);const ie=de("C",void 0,void 0);function de(Te,Ie,Re){return{kind:Te,value:Ie,error:Re}}var q=L(3410),G=L(2806);class Y extends J.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,J.Nn)(Ie)&&Ie.add(this)):this.destination=ke}static create(Ie,Re,Oe){return new ut(Ie,Re,Oe)}next(Ie){this.isStopped?Ae(function pe(Te){return de("N",Te,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?Ae(function me(Te){return de("E",void 0,Te)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?Ae(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Se(Te,Ie){return je.call(Te,Ie)}class We{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:Re}=this;if(Re.next)try{Re.next(Ie)}catch(Oe){ge(Oe)}}error(Ie){const{partialObserver:Re}=this;if(Re.error)try{Re.error(Ie)}catch(Oe){ge(Oe)}else ge(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(Re){ge(Re)}}}class ut extends Y{constructor(Ie,Re,Oe){let Pe;if(super(),(0,d.m)(Ie)||!Ie)Pe={next:Ie??void 0,error:Re??void 0,complete:Oe??void 0};else{let $;this&&F.v.useDeprecatedNextContext?($=Object.create(Ie),$.unsubscribe=()=>this.unsubscribe(),Pe={next:Ie.next&&Se(Ie.next,$),error:Ie.error&&Se(Ie.error,$),complete:Ie.complete&&Se(Ie.complete,$)}):Pe=Ie}this.destination=new We(Pe)}}function ge(Te){F.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Te):(0,ae.h)(Te)}function Ae(Te,Ie){const{onStoppedNotification:Re}=F.v;Re&&q.z.setTimeout(()=>Re(Te,Ie))}const ke={closed:!0,next:oe.Z,error:function xe(Te){throw Te},complete:oe.Z}},727:(gt,De,L)=>{L.d(De,{Lc:()=>ie,w0:()=>oe,Nn:()=>me});var d=L(576);const F=(0,L(3888).d)(de=>function(G){de(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Y,je)=>`${je+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ae=L(8737);class oe{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Se of G)Se.remove(this);else G.remove(this);const{initialTeardown:Y}=this;if((0,d.m)(Y))try{Y()}catch(Se){q=Se instanceof F?Se.errors:[Se]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Se of je)try{pe(Se)}catch(We){q=q??[],We instanceof F?q=[...q,...We.errors]:q.push(We)}}if(q)throw new F(q)}}add(q){var G;if(q&&q!==this)if(this.closed)pe(q);else{if(q instanceof oe){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(q)}}_hasParent(q){const{_parentage:G}=this;return G===q||Array.isArray(G)&&G.includes(q)}_addParent(q){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(q),G):G?[G,q]:q}_removeParent(q){const{_parentage:G}=this;G===q?this._parentage=null:Array.isArray(G)&&(0,ae.P)(G,q)}remove(q){const{_finalizers:G}=this;G&&(0,ae.P)(G,q),q instanceof oe&&q._removeParent(this)}}oe.EMPTY=(()=>{const de=new oe;return de.closed=!0,de})();const ie=oe.EMPTY;function me(de){return de instanceof oe||de&&"closed"in de&&(0,d.m)(de.remove)&&(0,d.m)(de.add)&&(0,d.m)(de.unsubscribe)}function pe(de){(0,d.m)(de)?de():de.unsubscribe()}},2416:(gt,De,L)=>{L.d(De,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,De,L)=>{L.d(De,{E:()=>J});const J=new(L(9751).y)(oe=>oe.complete())},8996:(gt,De,L)=>{L.d(De,{D:()=>Ie});var d=L(8421),J=L(5363),F=L(9468),ie=L(9751),pe=L(2202),de=L(576),q=L(9672);function Y(Re,Oe){if(!Re)throw new Error("Iterable cannot be null");return new ie.y(Pe=>{(0,q.f)(Pe,Oe,()=>{const $=Re[Symbol.asyncIterator]();(0,q.f)(Pe,Oe,()=>{$.next().then(Ee=>{Ee.done?Pe.complete():Pe.next(Ee.value)})},0,!0)})})}var je=L(3670),Se=L(8239),We=L(1144),ut=L(6495),ge=L(2206),xe=L(4532),Ae=L(3260);function Ie(Re,Oe){return Oe?function Te(Re,Oe){if(null!=Re){if((0,je.c)(Re))return function ae(Re,Oe){return(0,d.Xf)(Re).pipe((0,F.R)(Oe),(0,J.Q)(Oe))}(Re,Oe);if((0,We.z)(Re))return function me(Re,Oe){return new ie.y(Pe=>{let $=0;return Oe.schedule(function(){$===Re.length?Pe.complete():(Pe.next(Re[$++]),Pe.closed||this.schedule())})})}(Re,Oe);if((0,Se.t)(Re))return function oe(Re,Oe){return(0,d.Xf)(Re).pipe((0,F.R)(Oe),(0,J.Q)(Oe))}(Re,Oe);if((0,ge.D)(Re))return Y(Re,Oe);if((0,ut.T)(Re))return function G(Re,Oe){return new ie.y(Pe=>{let $;return(0,q.f)(Pe,Oe,()=>{$=Re[pe.h](),(0,q.f)(Pe,Oe,()=>{let Ee,Be;try{({value:Ee,done:Be}=$.next())}catch(Ze){return void Pe.error(Ze)}Be?Pe.complete():Pe.next(Ee)},0,!0)}),()=>(0,de.m)($?.return)&&$.return()})}(Re,Oe);if((0,Ae.L)(Re))return function ke(Re,Oe){return Y((0,Ae.Q)(Re),Oe)}(Re,Oe)}throw(0,xe.z)(Re)}(Re,Oe):(0,d.Xf)(Re)}},8421:(gt,De,L)=>{L.d(De,{Xf:()=>je});var d=L(7582),J=L(1144),F=L(8239),ae=L(9751),oe=L(3670),ie=L(2206),me=L(4532),pe=L(6495),de=L(3260),q=L(576),G=L(7849),Y=L(8822);function je(Te){if(Te instanceof ae.y)return Te;if(null!=Te){if((0,oe.c)(Te))return function Se(Te){return new ae.y(Ie=>{const Re=Te[Y.L]();if((0,q.m)(Re.subscribe))return Re.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,J.z)(Te))return function We(Te){return new ae.y(Ie=>{for(let Re=0;Re<Te.length&&!Ie.closed;Re++)Ie.next(Te[Re]);Ie.complete()})}(Te);if((0,F.t)(Te))return function ut(Te){return new ae.y(Ie=>{Te.then(Re=>{Ie.closed||(Ie.next(Re),Ie.complete())},Re=>Ie.error(Re)).then(null,G.h)})}(Te);if((0,ie.D)(Te))return xe(Te);if((0,pe.T)(Te))return function ge(Te){return new ae.y(Ie=>{for(const Re of Te)if(Ie.next(Re),Ie.closed)return;Ie.complete()})}(Te);if((0,de.L)(Te))return function Ae(Te){return xe((0,de.Q)(Te))}(Te)}throw(0,me.z)(Te)}function xe(Te){return new ae.y(Ie=>{(function ke(Te,Ie){var Re,Oe,Pe,$;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Re=(0,d.KL)(Te);!(Oe=yield Re.next()).done;)if(Ie.next(Oe.value),Ie.closed)return}catch(Ee){Pe={error:Ee}}finally{try{Oe&&!Oe.done&&($=Re.return)&&(yield $.call(Re))}finally{if(Pe)throw Pe.error}}Ie.complete()})})(Te,Ie).catch(Re=>Ie.error(Re))})}},6451:(gt,De,L)=>{L.d(De,{T:()=>ie});var d=L(8189),J=L(8421),F=L(515),ae=L(7669),oe=L(8996);function ie(...me){const pe=(0,ae.yG)(me),de=(0,ae._6)(me,1/0),q=me;return q.length?1===q.length?(0,J.Xf)(q[0]):(0,d.J)(de)((0,oe.D)(q,pe)):F.E}},5403:(gt,De,L)=>{L.d(De,{x:()=>J});var d=L(930);function J(ae,oe,ie,me,pe){return new F(ae,oe,ie,me,pe)}class F extends d.Lv{constructor(oe,ie,me,pe,de,q){super(oe),this.onFinalize=de,this.shouldUnsubscribe=q,this._next=ie?function(G){try{ie(G)}catch(Y){oe.error(Y)}}:super._next,this._error=pe?function(G){try{pe(G)}catch(Y){oe.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(G){oe.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(gt,De,L)=>{L.d(De,{U:()=>F});var d=L(4482),J=L(5403);function F(ae,oe){return(0,d.e)((ie,me)=>{let pe=0;ie.subscribe((0,J.x)(me,de=>{me.next(ae.call(oe,de,pe++))}))})}},8189:(gt,De,L)=>{L.d(De,{J:()=>F});var d=L(5577),J=L(4671);function F(ae=1/0){return(0,d.z)(J.y,ae)}},5577:(gt,De,L)=>{L.d(De,{z:()=>pe});var d=L(4004),J=L(8421),F=L(4482),ae=L(9672),oe=L(5403),me=L(576);function pe(de,q,G=1/0){return(0,me.m)(q)?pe((Y,je)=>(0,d.U)((Se,We)=>q(Y,Se,je,We))((0,J.Xf)(de(Y,je))),G):("number"==typeof q&&(G=q),(0,F.e)((Y,je)=>function ie(de,q,G,Y,je,Se,We,ut){const ge=[];let xe=0,Ae=0,ke=!1;const Te=()=>{ke&&!ge.length&&!xe&&q.complete()},Ie=Oe=>xe<Y?Re(Oe):ge.push(Oe),Re=Oe=>{Se&&q.next(Oe),xe++;let Pe=!1;(0,J.Xf)(G(Oe,Ae++)).subscribe((0,oe.x)(q,$=>{je?.($),Se?Ie($):q.next($)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(xe--;ge.length&&xe<Y;){const $=ge.shift();We?(0,ae.f)(q,We,()=>Re($)):Re($)}Te()}catch($){q.error($)}}))};return de.subscribe((0,oe.x)(q,Ie,()=>{ke=!0,Te()})),()=>{ut?.()}}(Y,je,de,G)))}},5363:(gt,De,L)=>{L.d(De,{Q:()=>ae});var d=L(9672),J=L(4482),F=L(5403);function ae(oe,ie=0){return(0,J.e)((me,pe)=>{me.subscribe((0,F.x)(pe,de=>(0,d.f)(pe,oe,()=>pe.next(de),ie),()=>(0,d.f)(pe,oe,()=>pe.complete(),ie),de=>(0,d.f)(pe,oe,()=>pe.error(de),ie)))})}},3099:(gt,De,L)=>{L.d(De,{B:()=>oe});var d=L(8421),J=L(7579),F=L(930),ae=L(4482);function oe(me={}){const{connector:pe=(()=>new J.x),resetOnError:de=!0,resetOnComplete:q=!0,resetOnRefCountZero:G=!0}=me;return Y=>{let je,Se,We,ut=0,ge=!1,xe=!1;const Ae=()=>{Se?.unsubscribe(),Se=void 0},ke=()=>{Ae(),je=We=void 0,ge=xe=!1},Te=()=>{const Ie=je;ke(),Ie?.unsubscribe()};return(0,ae.e)((Ie,Re)=>{ut++,!xe&&!ge&&Ae();const Oe=We=We??pe();Re.add(()=>{ut--,0===ut&&!xe&&!ge&&(Se=ie(Te,G))}),Oe.subscribe(Re),!je&&ut>0&&(je=new F.Hp({next:Pe=>Oe.next(Pe),error:Pe=>{xe=!0,Ae(),Se=ie(ke,de,Pe),Oe.error(Pe)},complete:()=>{ge=!0,Ae(),Se=ie(ke,q),Oe.complete()}}),(0,d.Xf)(Ie).subscribe(je))})(Y)}}function ie(me,pe,...de){if(!0===pe)return void me();if(!1===pe)return;const q=new F.Hp({next:()=>{q.unsubscribe(),me()}});return(0,d.Xf)(pe(...de)).subscribe(q)}},9468:(gt,De,L)=>{L.d(De,{R:()=>J});var d=L(4482);function J(F,ae=0){return(0,d.e)((oe,ie)=>{ie.add(F.schedule(()=>oe.subscribe(ie),ae))})}},8505:(gt,De,L)=>{L.d(De,{b:()=>oe});var d=L(576),J=L(4482),F=L(5403),ae=L(4671);function oe(ie,me,pe){const de=(0,d.m)(ie)||me||pe?{next:ie,error:me,complete:pe}:ie;return de?(0,J.e)((q,G)=>{var Y;null===(Y=de.subscribe)||void 0===Y||Y.call(de);let je=!0;q.subscribe((0,F.x)(G,Se=>{var We;null===(We=de.next)||void 0===We||We.call(de,Se),G.next(Se)},()=>{var Se;je=!1,null===(Se=de.complete)||void 0===Se||Se.call(de),G.complete()},Se=>{var We;je=!1,null===(We=de.error)||void 0===We||We.call(de,Se),G.error(Se)},()=>{var Se,We;je&&(null===(Se=de.unsubscribe)||void 0===Se||Se.call(de)),null===(We=de.finalize)||void 0===We||We.call(de)}))}):ae.y}},4408:(gt,De,L)=>{L.d(De,{o:()=>oe});var d=L(727);class J extends d.w0{constructor(me,pe){super()}schedule(me,pe=0){return this}}const F={setInterval(ie,me,...pe){const{delegate:de}=F;return de?.setInterval?de.setInterval(ie,me,...pe):setInterval(ie,me,...pe)},clearInterval(ie){const{delegate:me}=F;return(me?.clearInterval||clearInterval)(ie)},delegate:void 0};var ae=L(8737);class oe extends J{constructor(me,pe){super(me,pe),this.scheduler=me,this.work=pe,this.pending=!1}schedule(me,pe=0){var de;if(this.closed)return this;this.state=me;const q=this.id,G=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(G,q,pe)),this.pending=!0,this.delay=pe,this.id=null!==(de=this.id)&&void 0!==de?de:this.requestAsyncId(G,this.id,pe),this}requestAsyncId(me,pe,de=0){return F.setInterval(me.flush.bind(me,this),de)}recycleAsyncId(me,pe,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return pe;null!=pe&&F.clearInterval(pe)}execute(me,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(me,pe);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,pe){let q,de=!1;try{this.work(me)}catch(G){de=!0,q=G||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:me,scheduler:pe}=this,{actions:de}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(de,this),null!=me&&(this.id=this.recycleAsyncId(pe,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,De,L)=>{L.d(De,{v:()=>F});var d=L(6063);class J{constructor(oe,ie=J.now){this.schedulerActionCtor=oe,this.now=ie}schedule(oe,ie=0,me){return new this.schedulerActionCtor(this,oe).schedule(me,ie)}}J.now=d.l.now;class F extends J{constructor(oe,ie=J.now){super(oe,ie),this.actions=[],this._active=!1}flush(oe){const{actions:ie}=this;if(this._active)return void ie.push(oe);let me;this._active=!0;do{if(me=oe.execute(oe.state,oe.delay))break}while(oe=ie.shift());if(this._active=!1,me){for(;oe=ie.shift();)oe.unsubscribe();throw me}}}},4986:(gt,De,L)=>{L.d(De,{z:()=>F});var d=L(4408);const F=new(L(7565).v)(d.o)},6063:(gt,De,L)=>{L.d(De,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(gt,De,L)=>{L.d(De,{z:()=>d});const d={setTimeout(J,F,...ae){const{delegate:oe}=d;return oe?.setTimeout?oe.setTimeout(J,F,...ae):setTimeout(J,F,...ae)},clearTimeout(J){const{delegate:F}=d;return(F?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(gt,De,L)=>{L.d(De,{h:()=>J});const J=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,De,L)=>{L.d(De,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(gt,De,L)=>{L.d(De,{_6:()=>ie,jO:()=>ae,yG:()=>oe});var d=L(576);function F(me){return me[me.length-1]}function ae(me){return(0,d.m)(F(me))?me.pop():void 0}function oe(me){return function J(me){return me&&(0,d.m)(me.schedule)}(F(me))?me.pop():void 0}function ie(me,pe){return"number"==typeof F(me)?me.pop():pe}},8737:(gt,De,L)=>{function d(J,F){if(J){const ae=J.indexOf(F);0<=ae&&J.splice(ae,1)}}L.d(De,{P:()=>d})},3888:(gt,De,L)=>{function d(J){const ae=J(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}L.d(De,{d:()=>d})},2806:(gt,De,L)=>{L.d(De,{O:()=>ae,x:()=>F});var d=L(2416);let J=null;function F(oe){if(d.v.useDeprecatedSynchronousErrorHandling){const ie=!J;if(ie&&(J={errorThrown:!1,error:null}),oe(),ie){const{errorThrown:me,error:pe}=J;if(J=null,me)throw pe}}else oe()}function ae(oe){d.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=oe)}},9672:(gt,De,L)=>{function d(J,F,ae,oe=0,ie=!1){const me=F.schedule(function(){ae(),ie?J.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(J.add(me),!ie)return me}L.d(De,{f:()=>d})},4671:(gt,De,L)=>{function d(J){return J}L.d(De,{y:()=>d})},1144:(gt,De,L)=>{L.d(De,{z:()=>d});const d=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(gt,De,L)=>{L.d(De,{D:()=>J});var d=L(576);function J(F){return Symbol.asyncIterator&&(0,d.m)(F?.[Symbol.asyncIterator])}},576:(gt,De,L)=>{function d(J){return"function"==typeof J}L.d(De,{m:()=>d})},3670:(gt,De,L)=>{L.d(De,{c:()=>F});var d=L(8822),J=L(576);function F(ae){return(0,J.m)(ae[d.L])}},6495:(gt,De,L)=>{L.d(De,{T:()=>F});var d=L(2202),J=L(576);function F(ae){return(0,J.m)(ae?.[d.h])}},8239:(gt,De,L)=>{L.d(De,{t:()=>J});var d=L(576);function J(F){return(0,d.m)(F?.then)}},3260:(gt,De,L)=>{L.d(De,{L:()=>ae,Q:()=>F});var d=L(7582),J=L(576);function F(oe){return(0,d.FC)(this,arguments,function*(){const me=oe.getReader();try{for(;;){const{value:pe,done:de}=yield(0,d.qq)(me.read());if(de)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(pe)}}finally{me.releaseLock()}})}function ae(oe){return(0,J.m)(oe?.getReader)}},4482:(gt,De,L)=>{L.d(De,{A:()=>J,e:()=>F});var d=L(576);function J(ae){return(0,d.m)(ae?.lift)}function F(ae){return oe=>{if(J(oe))return oe.lift(function(ie){try{return ae(ie,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(gt,De,L)=>{function d(){}L.d(De,{Z:()=>d})},9635:(gt,De,L)=>{L.d(De,{U:()=>F,z:()=>J});var d=L(4671);function J(...ae){return F(ae)}function F(ae){return 0===ae.length?d.y:1===ae.length?ae[0]:function(ie){return ae.reduce((me,pe)=>pe(me),ie)}}},7849:(gt,De,L)=>{L.d(De,{h:()=>F});var d=L(2416),J=L(3410);function F(ae){J.z.setTimeout(()=>{const{onUnhandledError:oe}=d.v;if(!oe)throw ae;oe(ae)})}},4532:(gt,De,L)=>{function d(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(De,{z:()=>d})},4650:(gt,De,L)=>{L.d(De,{$8M:()=>al,$WT:()=>vs,$Z:()=>Wb,AFp:()=>E0,ALo:()=>J_,AaK:()=>pe,AsE:()=>mg,BQk:()=>hg,CHM:()=>Ic,CRH:()=>Vg,CZH:()=>ay,CqO:()=>ww,D6c:()=>Ql,EJc:()=>b0,EiD:()=>BS,EpF:()=>vw,F4k:()=>AI,FYo:()=>Fv,FiY:()=>ml,GfV:()=>Sb,Gpc:()=>G,JOm:()=>Tt,JVY:()=>K,JZr:()=>ut,KtG:()=>rh,L6k:()=>fe,LAX:()=>Xe,LFG:()=>fn,Lbi:()=>oR,Lck:()=>xx,MAs:()=>yw,MGl:()=>N_,MMx:()=>xg,NdJ:()=>Ew,OlP:()=>tn,Oqu:()=>U_,P3R:()=>yb,PXZ:()=>M0,Q6J:()=>D_,QGY:()=>fg,QbO:()=>aR,Qsj:()=>QS,R0b:()=>hs,RDi:()=>Po,Rgc:()=>Ua,SBq:()=>$h,Sil:()=>lT,Suo:()=>h0,TTD:()=>ju,TgZ:()=>dg,Tol:()=>V_,Udp:()=>UI,VKq:()=>OC,X6Q:()=>vT,XFs:()=>ht,Xpm:()=>Ws,Xts:()=>Dv,Y36:()=>Wh,YKP:()=>RC,YNc:()=>_w,Yjl:()=>dc,Yz7:()=>qe,Z0I:()=>an,ZZ4:()=>Jg,_Bn:()=>Jw,_UZ:()=>TI,_Vd:()=>jh,_c5:()=>fs,_uU:()=>GI,aQg:()=>H0,c2e:()=>ly,cJS:()=>vt,cg1:()=>$_,d8E:()=>Bw,dDg:()=>Md,dqk:()=>yn,eBb:()=>He,eFA:()=>Ho,eJc:()=>f0,ekj:()=>xw,eoX:()=>_y,f3M:()=>Ce,g9A:()=>If,h0i:()=>gf,hGG:()=>Cy,hij:()=>Oa,iGM:()=>ty,ifc:()=>ne,ip1:()=>oT,jDz:()=>Va,kL8:()=>jw,lG2:()=>Un,lqb:()=>nd,lri:()=>my,mCW:()=>Ra,n5z:()=>ph,oAB:()=>ta,oJD:()=>gb,oxw:()=>bw,pB0:()=>At,q3G:()=>rr,q4F:()=>Ab,qLn:()=>zp,qOj:()=>I_,qZA:()=>S_,qzn:()=>A,rWj:()=>Wg,sBO:()=>pR,s_b:()=>X_,soG:()=>cy,tb:()=>yy,tp0:()=>D,uIk:()=>II,vHH:()=>ge,vpe:()=>ks,wAp:()=>Rt,xi3:()=>UC,xp6:()=>Ub,ynx:()=>A_,z2F:()=>Ey,z3N:()=>E,zSh:()=>Ol,zs3:()=>Gh});var d=L(7579),J=L(727),F=L(9751),ae=L(6451),oe=L(3099);function ie(s){for(let a in s)if(s[a]===ie)return a;throw Error("Could not find renamed property on target object.")}function me(s,a){for(const u in a)a.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=a[u])}function pe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(pe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function de(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const q=ie({__forward_ref__:ie});function G(s){return s.__forward_ref__=G,s.toString=function(){return pe(this())},s}function Y(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===G}function Se(s){return s&&!!s.\u0275providers}const ut="https://g.co/ng/security#xss";class ge extends Error{constructor(a,u){super(xe(a,u)),this.code=a}}function xe(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}function Ae(s){return"string"==typeof s?s:null==s?"":String(s)}function Oe(s,a){throw new ge(-201,!1)}function le(s,a){null==s&&function ee(s,a,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${a} <=Actual]`))}(a,s,null,"!=")}function qe(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function vt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Qt(s){return Jt(s,xn)||Jt(s,ri)}function an(s){return null!==Qt(s)}function Jt(s,a){return s.hasOwnProperty(a)?s[a]:null}function lr(s){return s&&(s.hasOwnProperty(Vn)||s.hasOwnProperty(Cn))?s[Vn]:null}const xn=ie({\u0275prov:ie}),Vn=ie({\u0275inj:ie}),ri=ie({ngInjectableDef:ie}),Cn=ie({ngInjectorDef:ie});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let es;function kn(s){const a=es;return es=s,a}function Ei(s,a,u){const c=Qt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ht.Optional?null:void 0!==a?a:void Oe(pe(s))}const yn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Wr={},Hn="__NG_DI_FLAG__",Tn="ngTempTokenPath",zs="ngTokenPath",Cr=/\n/gm,ea="\u0275",ln="__source";let si;function en(s){const a=si;return si=s,a}function ts(s,a=ht.Default){if(void 0===si)throw new ge(-203,!1);return null===si?Ei(s,void 0,a):si.get(s,a&ht.Optional?null:void 0,a)}function fn(s,a=ht.Default){return(function po(){return es}()||ts)(Y(s),a)}function Ce(s,a=ht.Default){return fn(s,it(a))}function it(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Nt(s){const a=[];for(let u=0;u<s.length;u++){const c=Y(s[u]);if(Array.isArray(c)){if(0===c.length)throw new ge(900,!1);let f,m=ht.Default;for(let w=0;w<c.length;w++){const b=c[w],C=Wt(b);"number"==typeof C?-1===C?f=b.token:m|=C:f=b}a.push(fn(f,m))}else a.push(fn(c))}return a}function Mt(s,a){return s[Hn]=a,s.prototype[Hn]=a,s}function Wt(s){return s[Hn]}function W(s){return{toString:s}.toString()}var _e=(()=>((_e=_e||{})[_e.OnPush=0]="OnPush",_e[_e.Default=1]="Default",_e))(),ne=(()=>{return(s=ne||(ne={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ne;var s})();const tt={},Je=[],cn=ie({\u0275cmp:ie}),Tr=ie({\u0275dir:ie}),Dn=ie({\u0275pipe:ie}),Or=ie({\u0275mod:ie}),Ft=ie({\u0275fac:ie}),Gn=ie({__NG_ELEMENT_ID__:ie});let za=0;function Ws(s){return W(()=>{const a=go(s),u={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===_e.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||ne.Emulated,id:"c"+za++,styles:s.styles||Je,_:null,schemas:s.schemas||null,tView:null};Lr(u);const c=s.dependencies;return u.directiveDefs=na(c,!1),u.pipeDefs=na(c,!0),u})}function np(s){return un(s)||Jn(s)}function cc(s){return null!==s}function ta(s){return W(()=>({type:s.type,bootstrap:s.bootstrap||Je,declarations:s.declarations||Je,imports:s.imports||Je,exports:s.exports||Je,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Yd(s,a){if(null==s)return tt;const u={};for(const c in s)if(s.hasOwnProperty(c)){let f=s[c],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=c,a&&(a[f]=m)}return u}function Un(s){return W(()=>{const a=go(s);return Lr(a),a})}function dc(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function un(s){return s[cn]||null}function Jn(s){return s[Tr]||null}function yr(s){return s[Dn]||null}function vs(s){const a=un(s)||Jn(s)||yr(s);return null!==a&&a.standalone}function Fr(s,a){const u=s[Or]||null;if(!u&&!0===a)throw new Error(`Type ${pe(s)} does not have '\u0275mod' property.`);return u}function go(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Je,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Yd(s.inputs,a),outputs:Yd(s.outputs)}}function Lr(s){s.features?.forEach(a=>a(s))}function na(s,a){if(!s)return null;const u=a?yr:np;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter(cc)}const bi=0,nt=1,Bt=2,Sn=3,Kr=4,ws=5,Xn=6,Ii=7,On=8,ra=9,Ci=10,jt=11,hc=12,Ks=13,fc=14,Li=15,Vr=16,ia=17,mo=18,Vi=19,Zs=20,Es=21,wn=22,Ti=1,Qd=2,sa=7,_o=8,Zr=9,Ur=10;function oi(s){return Array.isArray(s)&&"object"==typeof s[Ti]}function Ui(s){return Array.isArray(s)&&!0===s[Ti]}function Wa(s){return 0!=(4&s.flags)}function Bi(s){return s.componentOffset>-1}function pc(s){return 1==(1&s.flags)}function ai(s){return!!s.template}function Ka(s){return 0!=(256&s[Bt])}function vo(s,a){return s.hasOwnProperty(Ft)?s[Ft]:null}class wo{constructor(a,u,c){this.previousValue=a,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function ju(){return la}function la(s){return s.type.prototype.ngOnChanges&&(s.setInput=ca),$u}function $u(){const s=Ya(this),a=s?.current;if(a){const u=s.previous;if(u===tt)s.previous=a;else for(let c in a)u[c]=a[c];s.current=null,this.ngOnChanges(a)}}function ca(s,a,u,c){const f=this.declaredInputs[u],m=Ya(s)||function th(s,a){return s[Eo]=a}(s,{previous:tt,current:null}),w=m.current||(m.current={}),b=m.previous,C=b[f];w[f]=new wo(C&&C.currentValue,a,b===tt),s[c]=a}ju.ngInherit=!0;const Eo="__ngSimpleChanges__";function Ya(s){return s[Eo]||null}const ui=function(s,a,u){};function qn(s){for(;Array.isArray(s);)s=s[bi];return s}function bo(s,a){return qn(a[s])}function er(s,a){return qn(a[s.index])}function pa(s,a){return s.data[a]}function Io(s,a){return s[a]}function cr(s,a){const u=a[s];return oi(u)?u:u[bi]}function ga(s){return 64==(64&s[Bt])}function Is(s,a){return null==a?null:s[a]}function Ja(s){s[mo]=0}function Xa(s,a){s[ws]+=a;let u=s,c=s[Sn];for(;null!==c&&(1===a&&1===u[ws]||-1===a&&0===u[ws]);)c[ws]+=a,u=c,c=c[Sn]}const Ot={lFrame:lv(null),bindingsEnabled:!0};function Wu(){return Ot.bindingsEnabled}function ye(){return Ot.lFrame.lView}function rn(){return Ot.lFrame.tView}function Ic(s){return Ot.lFrame.contextLView=s,s[On]}function rh(s){return Ot.lFrame.contextLView=null,s}function Dr(){let s=eu();for(;null!==s&&64===s.type;)s=s.parent;return s}function eu(){return Ot.lFrame.currentTNode}function li(s,a){const u=Ot.lFrame;u.currentTNode=s,u.isParent=a}function Zu(){return Ot.lFrame.isParent}function Yu(){Ot.lFrame.isParent=!1}function dr(){const s=Ot.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Co(){return Ot.lFrame.bindingIndex++}function is(s){const a=Ot.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,u}function oh(s,a){const u=Ot.lFrame;u.bindingIndex=u.bindingRootIndex=s,Dc(a)}function Dc(s){Ot.lFrame.currentDirectiveIndex=s}function Cs(s){const a=Ot.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}function ah(){return Ot.lFrame.currentQueryIndex}function Sc(s){Ot.lFrame.currentQueryIndex=s}function uh(s){const a=s[nt];return 2===a.type?a.declTNode:1===a.type?s[Xn]:null}function ap(s,a,u){if(u&ht.SkipSelf){let f=a,m=s;for(;!(f=f.parent,null!==f||u&ht.Host||(f=uh(m),null===f||(m=m[Li],10&f.type))););if(null===f)return!1;a=f,s=m}const c=Ot.lFrame=up();return c.currentTNode=a,c.lView=s,!0}function Ju(s){const a=up(),u=s[nt];Ot.lFrame=a,a.currentTNode=u.firstChild,a.lView=s,a.tView=u,a.contextLView=s,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function up(){const s=Ot.lFrame,a=null===s?null:s.child;return null===a?lv(s):a}function lv(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Fm(){const s=Ot.lFrame;return Ot.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Ac=Fm;function Lm(){const s=Fm();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Qr(){return Ot.lFrame.selectedIndex}function ma(s){Ot.lFrame.selectedIndex=s}function An(){const s=Ot.lFrame;return pa(s.tView,s.selectedIndex)}function nu(s,a){for(let u=a.directiveStart,c=a.directiveEnd;u<c;u++){const m=s.data[u].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:b,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:N}=m;w&&(s.contentHooks??(s.contentHooks=[])).push(-u,w),b&&((s.contentHooks??(s.contentHooks=[])).push(u,b),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(u,b)),C&&(s.viewHooks??(s.viewHooks=[])).push(-u,C),x&&((s.viewHooks??(s.viewHooks=[])).push(u,x),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(u,x)),null!=N&&(s.destroyHooks??(s.destroyHooks=[])).push(u,N)}}function To(s,a,u){ru(s,a,3,u)}function Rc(s,a,u,c){(3&s[Bt])===u&&ru(s,a,u,c)}function Qs(s,a){let u=s[Bt];(3&u)===a&&(u&=2047,u+=1,s[Bt]=u)}function ru(s,a,u,c){const m=c??-1,w=a.length-1;let b=0;for(let C=void 0!==c?65535&s[mo]:0;C<w;C++)if("number"==typeof a[C+1]){if(b=a[C],null!=c&&b>=c)break}else a[C]<0&&(s[mo]+=65536),(b<m||-1==m)&&(iu(s,u,a,C),s[mo]=(4294901760&s[mo])+C+2),C++}function iu(s,a,u,c){const f=u[c]<0,m=u[c+1],b=s[f?-u[c]:u[c]];if(f){if(s[Bt]>>11<s[mo]>>16&&(3&s[Bt])===a){s[Bt]+=2048,ui(4,b,m);try{m.call(b)}finally{ui(5,b,m)}}}else{ui(4,b,m);try{m.call(b)}finally{ui(5,b,m)}}}const ya=-1;class Js{constructor(a,u,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Fn(s,a,u){let c=0;for(;c<u.length;){const f=u[c];if("number"==typeof f){if(0!==f)break;c++;const m=u[c++],w=u[c++],b=u[c++];s.setAttribute(a,w,b,m)}else{const m=f,w=u[++c];Ts(m)?s.setProperty(a,m,w):s.setAttribute(a,m,w),c++}}return c}function ou(s){return 3===s||4===s||6===s}function Ts(s){return 64===s.charCodeAt(0)}function Ds(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let u=-1;for(let c=0;c<a.length;c++){const f=a[c];"number"==typeof f?u=f:0===u||va(s,u,f,null,-1===u||2===u?a[++c]:null)}}return s}function va(s,a,u,c,f){let m=0,w=s.length;if(-1===a)w=-1;else for(;m<s.length;){const b=s[m++];if("number"==typeof b){if(b===a){w=-1;break}if(b>a){w=m-1;break}}}for(;m<s.length;){const b=s[m];if("number"==typeof b)break;if(b===u){if(null===c)return void(null!==f&&(s[m+1]=f));if(c===s[m+1])return void(s[m+2]=f)}m++,null!==c&&m++,null!==f&&m++}-1!==w&&(s.splice(w,0,a),m=w+1),s.splice(m++,0,u),null!==c&&s.splice(m++,0,c),null!==f&&s.splice(m++,0,f)}function Mc(s){return s!==ya}function au(s){return 32767&s}function tl(s,a){let u=function el(s){return s>>16}(s),c=a;for(;u>0;)c=c[Li],u--;return c}let Xs=!0;function wa(s){const a=Xs;return Xs=s,a}const uu=255,lu=5;let nl=0;const Ar={};function ba(s,a){const u=du(s,a);if(-1!==u)return u;const c=a[nt];c.firstCreatePass&&(s.injectorIndex=a.length,eo(c.data,s),eo(a,null),eo(c.blueprint,null));const f=rl(s,a),m=s.injectorIndex;if(Mc(f)){const w=au(f),b=tl(f,a),C=b[nt].data;for(let x=0;x<8;x++)a[m+x]=b[w+x]|C[w+x]}return a[m+8]=f,m}function eo(s,a){s.push(0,0,0,0,0,0,0,0,a)}function du(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function rl(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,f=a;for(;null!==f;){if(c=Pc(f),null===c)return ya;if(u++,f=f[Li],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return ya}function hu(s,a,u){!function cu(s,a,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Gn)&&(c=u[Gn]),null==c&&(c=u[Gn]=nl++);const f=c&uu;a.data[s+(f>>lu)]|=1<<f}(s,a,u)}function Ao(s,a,u){if(u&ht.Optional||void 0!==s)return s;Oe()}function fu(s,a,u,c){if(u&ht.Optional&&void 0===c&&(c=null),!(u&(ht.Self|ht.Host))){const f=s[ra],m=kn(void 0);try{return f?f.get(a,c,u&ht.Optional):Ei(a,c,u&ht.Optional)}finally{kn(m)}}return Ao(c,0,u)}function hh(s,a,u,c=ht.Default,f){if(null!==s){if(1024&a[Bt]){const w=function gh(s,a,u,c,f){let m=s,w=a;for(;null!==m&&null!==w&&1024&w[Bt]&&!(256&w[Bt]);){const b=ss(m,w,u,c|ht.Self,Ar);if(b!==Ar)return b;let C=m.parent;if(!C){const x=w[Es];if(x){const N=x.get(u,Ar,c);if(N!==Ar)return N}C=Pc(w),w=w[Li]}m=C}return f}(s,a,u,c,Ar);if(w!==Ar)return w}const m=ss(s,a,u,c,Ar);if(m!==Ar)return m}return fu(a,u,c,f)}function ss(s,a,u,c,f){const m=function fh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Gn)?s[Gn]:void 0;return"number"==typeof a?a>=0?a&uu:Bm:a}(u);if("function"==typeof m){if(!ap(a,s,c))return c&ht.Host?Ao(f,0,c):fu(a,u,c,f);try{const w=m(c);if(null!=w||c&ht.Optional)return w;Oe()}finally{Ac()}}else if("number"==typeof m){let w=null,b=du(s,a),C=ya,x=c&ht.Host?a[Vr][Xn]:null;for((-1===b||c&ht.SkipSelf)&&(C=-1===b?rl(s,a):a[b+8],C!==ya&&Ss(c,!1)?(w=a[nt],b=au(C),a=tl(C,a)):b=-1);-1!==b;){const N=a[nt];if(sl(m,b,N.data)){const V=il(b,a,u,w,c,x);if(V!==Ar)return V}C=a[b+8],C!==ya&&Ss(c,a[nt].data[b+8]===x)&&sl(m,b,a)?(w=N,b=au(C),a=tl(C,a)):b=-1}}return f}function il(s,a,u,c,f,m){const w=a[nt],b=w.data[s+8],N=xo(b,w,u,null==c?Bi(b)&&Xs:c!=w&&0!=(3&b.type),f&ht.Host&&m===b);return null!==N?os(a,w,N,b):Ar}function xo(s,a,u,c,f){const m=s.providerIndexes,w=a.data,b=1048575&m,C=s.directiveStart,N=m>>20,z=f?b+N:s.directiveEnd;for(let X=c?b:b+N;X<z;X++){const be=w[X];if(X<C&&u===be||X>=C&&be.type===u)return X}if(f){const X=w[C];if(X&&ai(X)&&X.type===u)return C}return null}function os(s,a,u,c){let f=s[u];const m=a.data;if(function Di(s){return s instanceof Js}(f)){const w=f;w.resolving&&function Te(s,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new ge(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ke(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ae(s)}(m[u]));const b=wa(w.canSeeViewProviders);w.resolving=!0;const C=w.injectImpl?kn(w.injectImpl):null;ap(s,c,ht.Default);try{f=s[u]=w.factory(void 0,m,s,c),a.firstCreatePass&&u>=c.directiveStart&&function Um(s,a,u){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(c){const w=la(a);(u.preOrderHooks??(u.preOrderHooks=[])).push(s,w),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,w)}f&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-s,f),m&&((u.preOrderHooks??(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,m))}(u,m[u],a)}finally{null!==C&&kn(C),wa(b),w.resolving=!1,Ac()}}return f}function sl(s,a,u){return!!(u[a+(s>>lu)]&1<<s)}function Ss(s,a){return!(s&ht.Self||s&ht.Host&&a)}class ji{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,c){return hh(this._tNode,this._lView,a,it(c),u)}}function Bm(){return new ji(Dr(),ye())}function ph(s){return W(()=>{const a=s.prototype.constructor,u=a[Ft]||ol(a),c=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==c;){const m=f[Ft]||ol(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function ol(s){return je(s)?()=>{const a=ol(Y(s));return a&&a()}:vo(s)}function Pc(s){const a=s[nt],u=a.type;return 2===u?a.declTNode:1===u?s[Xn]:null}function al(s){return function Nc(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const u=s.attrs;if(u){const c=u.length;let f=0;for(;f<c;){const m=u[f];if(ou(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<c&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(Dr(),s)}const Ia="__parameters__";function pu(s,a,u){return W(()=>{const c=function dp(s){return function(...u){if(s){const c=s(...u);for(const f in c)this[f]=c[f]}}}(a);function f(...m){if(this instanceof f)return c.apply(this,m),this;const w=new f(...m);return b.annotation=w,b;function b(C,x,N){const V=C.hasOwnProperty(Ia)?C[Ia]:Object.defineProperty(C,Ia,{value:[]})[Ia];for(;V.length<=N;)V.push(null);return(V[N]=V[N]||[]).push(w),C}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class tn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=qe({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function as(s,a){s.forEach(u=>Array.isArray(u)?as(u,a):a(u))}function fl(s,a,u){a>=s.length?s.push(u):s.splice(a,0,u)}function gu(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Jr(s,a,u){let c=vr(s,a);return c>=0?s[1|c]=u:(c=~c,function yh(s,a,u,c){let f=s.length;if(f==a)s.push(u,c);else if(1===f)s.push(c,s[0]),s[0]=u;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=u,s[a+1]=c}}(s,c,a,u)),c}function sn(s,a){const u=vr(s,a);if(u>=0)return s[1|u]}function vr(s,a){return function xr(s,a,u){let c=0,f=s.length>>u;for(;f!==c;){const m=c+(f-c>>1),w=s[m<<u];if(a===w)return m<<u;w>a?f=m:c=m+1}return~(f<<u)}(s,a,1)}const ml=Mt(pu("Optional"),8),D=Mt(pu("SkipSelf"),4);var Tt=(()=>((Tt=Tt||{})[Tt.Important=1]="Important",Tt[Tt.DashCase=2]="DashCase",Tt))();const jc=new Map;let to=0;const Dh="__ngContext__";function Br(s,a){oi(a)?(s[Dh]=a[Zs],function Wm(s){jc.set(s[Zs],s)}(a)):s[Dh]=a}let Hc;function Eu(s,a){return Hc(s,a)}function bu(s){const a=s[Sn];return Ui(a)?a[Sn]:a}function El(s){return Zm(s[Ks])}function bl(s){return Zm(s[Kr])}function Zm(s){for(;null!==s&&!Ui(s);)s=s[Kr];return s}function Aa(s,a,u,c,f){if(null!=c){let m,w=!1;Ui(c)?m=c:oi(c)&&(w=!0,c=c[bi]);const b=qn(c);0===s&&null!==u?null==f?Cu(a,u,b):xa(a,u,b,f||null,!0):1===s&&null!==u?xa(a,u,b,f||null,!0):2===s?function Tu(s,a,u){const c=Mo(s,a);c&&function Dl(s,a,u,c){s.removeChild(a,u,c)}(s,c,a,u)}(a,b,w):3===s&&a.destroyNode(b),null!=m&&function Qc(s,a,u,c,f){const m=u[sa];m!==qn(u)&&Aa(a,s,c,m,f);for(let b=Ur;b<u.length;b++){const C=u[b];Zc(C[nt],C,s,a,c,m)}}(a,s,m,u,f)}}function qc(s,a,u){return s.createElement(a,u)}function zc(s,a){const u=s[Zr],c=u.indexOf(a),f=a[Sn];512&a[Bt]&&(a[Bt]&=-513,Xa(f,-1)),u.splice(c,1)}function Np(s,a){if(s.length<=Ur)return;const u=Ur+a,c=s[u];if(c){const f=c[ia];null!==f&&f!==s&&zc(f,c),a>0&&(s[u-1][Kr]=c[Kr]);const m=gu(s,Ur+a);!function fv(s,a){Zc(s,a,a[jt],2,null,null),a[bi]=null,a[Xn]=null}(c[nt],c);const w=m[Vi];null!==w&&w.detachView(m[nt]),c[Sn]=null,c[Kr]=null,c[Bt]&=-65}return c}function Ah(s,a){if(!(128&a[Bt])){const u=a[jt];u.destroyNode&&Zc(s,a,u,3,null,null),function Mp(s){let a=s[Ks];if(!a)return Tl(s[nt],s);for(;a;){let u=null;if(oi(a))u=a[Ks];else{const c=a[Ur];c&&(u=c)}if(!u){for(;a&&!a[Kr]&&a!==s;)oi(a)&&Tl(a[nt],a),a=a[Sn];null===a&&(a=s),oi(a)&&Tl(a[nt],a),u=a&&a[Kr]}a=u}}(a)}}function Tl(s,a){if(!(128&a[Bt])){a[Bt]&=-65,a[Bt]|=128,function Iu(s,a){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const f=a[u[c]];if(!(f instanceof Js)){const m=u[c+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const b=f[m[w]],C=m[w+1];ui(4,b,C);try{C.call(b)}finally{ui(5,b,C)}}else{ui(4,f,m);try{m.call(f)}finally{ui(5,f,m)}}}}}(s,a),function Ym(s,a){const u=s.cleanup,c=a[Ii];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const w=u[m+3];w>=0?c[f=w]():c[f=-w].unsubscribe(),m+=2}else{const w=c[f=u[m+1]];u[m].call(w)}if(null!==c){for(let m=f+1;m<c.length;m++)(0,c[m])();a[Ii]=null}}(s,a),1===a[nt].type&&a[jt].destroy();const u=a[ia];if(null!==u&&Ui(a[Sn])){u!==a[Sn]&&zc(u,a);const c=a[Vi];null!==c&&c.detachView(s)}!function fb(s){jc.delete(s[Zs])}(a)}}function xh(s,a,u){return function _v(s,a,u){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return u[bi];{const{componentOffset:f}=c;if(f>-1){const{encapsulation:m}=s.data[c.directiveStart+f];if(m===ne.None||m===ne.Emulated)return null}return er(c,u)}}(s,a.parent,u)}function xa(s,a,u,c,f){s.insertBefore(a,u,c,f)}function Cu(s,a,u){s.appendChild(a,u)}function Qm(s,a,u,c,f){null!==c?xa(s,a,u,c,f):Cu(s,a,u)}function Mo(s,a){return s.parentNode(a)}let Wc,Du,Lp,Xc,No=function Mh(s,a,u){return 40&s.type?er(s,u):null};function Kc(s,a,u,c){const f=xh(s,c,a),m=a[jt],b=function Pp(s,a,u){return No(s,a,u)}(c.parent||a[Xn],c,a);if(null!=f)if(Array.isArray(u))for(let C=0;C<u.length;C++)Qm(m,f,u[C],b,!1);else Qm(m,f,u,b,!1);void 0!==Wc&&Wc(m,c,a,u,f)}function Sl(s,a){if(null!==a){const u=a.type;if(3&u)return er(a,s);if(4&u)return fr(-1,s[a.index]);if(8&u){const c=a.child;if(null!==c)return Sl(s,c);{const f=s[a.index];return Ui(f)?fr(-1,f):qn(f)}}if(32&u)return Eu(a,s)()||qn(s[a.index]);{const c=Nh(s,a);return null!==c?Array.isArray(c)?c[0]:Sl(bu(s[Vr]),c):Sl(s,a.next)}}return null}function Nh(s,a){return null!==a?s[Vr][Xn].projection[a.projection]:null}function fr(s,a){const u=Ur+s+1;if(u<a.length){const c=a[u],f=c[nt].firstChild;if(null!==f)return Sl(c,f)}return a[sa]}function Al(s,a,u,c,f,m,w){for(;null!=u;){const b=c[u.index],C=u.type;if(w&&0===a&&(b&&Br(qn(b),c),u.flags|=2),32!=(32&u.flags))if(8&C)Al(s,a,u.child,c,f,m,!1),Aa(a,s,f,b,m);else if(32&C){const x=Eu(u,c);let N;for(;N=x();)Aa(a,s,f,N,m);Aa(a,s,f,b,m)}else 16&C?Yc(s,a,c,u,f,m):Aa(a,s,f,b,m);u=w?u.projectionNext:u.next}}function Zc(s,a,u,c,f,m){Al(u,c,s.firstChild,a,f,m,!1)}function Yc(s,a,u,c,f,m){const w=u[Vr],C=w[Xn].projection[c.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)Aa(a,s,f,C[x],m);else Al(s,a,C,w[Sn],f,m,!0)}function _i(s,a,u){""===u?s.removeAttribute(a,"class"):s.setAttribute(a,"class",u)}function xl(s,a,u){const{mergedAttrs:c,classes:f,styles:m}=u;null!==c&&Fn(s,a,c),null!==f&&_i(s,a,f),null!==m&&function Op(s,a,u){s.setAttribute(a,"style",u)}(s,a,m)}function Rl(s){return function Jc(){if(void 0===Du&&(Du=null,yn.trustedTypes))try{Du=yn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Du}()?.createHTML(s)||s}function Po(s){Lp=s}function kh(){if(void 0===Xc&&(Xc=null,yn.trustedTypes))try{Xc=yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Xc}function t_(s){return kh()?.createHTML(s)||s}function n_(s){return kh()?.createScriptURL(s)||s}class Su{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}class yv extends Su{getTypeName(){return"HTML"}}class vv extends Su{getTypeName(){return"Style"}}class v extends Su{getTypeName(){return"Script"}}class p extends Su{getTypeName(){return"URL"}}class _ extends Su{getTypeName(){return"ResourceURL"}}function E(s){return s instanceof Su?s.changingThisBreaksApplicationSecurity:s}function A(s,a){const u=function P(s){return s instanceof Su&&s.getTypeName()||null}(s);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see ${ut})`)}return u===a}function K(s){return new yv(s)}function fe(s){return new vv(s)}function He(s){return new v(s)}function Xe(s){return new p(s)}function At(s){return new _(s)}class Kn{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Rl(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class us{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const u=this.inertDocument.createElement("template");return u.innerHTML=Rl(a),u}}const Vp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ra(s){return(s=String(s)).match(Vp)?s:"unsafe:"+s}function ls(s){const a={};for(const u of s.split(","))a[u]=!0;return a}function Pl(...s){const a={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(a[c]=!0);return a}const Ma=ls("area,br,col,hr,img,wbr"),Up=ls("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Bp=ls("rp,rt"),kl=Pl(Ma,Pl(Up,ls("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pl(Bp,ls("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pl(Bp,Up)),Fh=ls("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jp=Pl(Fh,ls("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ls("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ev=ls("script,style,template");class VS{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!kl.hasOwnProperty(u))return this.sanitizedSomething=!0,!Ev.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=a.attributes;for(let f=0;f<c.length;f++){const m=c.item(f),w=m.name,b=w.toLowerCase();if(!jp.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let C=m.value;Fh[b]&&(C=Ra(C)),this.buf.push(" ",w,'="',Iv(C),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();kl.hasOwnProperty(u)&&!Ma.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(Iv(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const US=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bv=/([^\#-~ |!])/g;function Iv(s){return s.replace(/&/g,"&amp;").replace(US,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(bv,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cv;function BS(s,a){let u=null;try{Cv=Cv||function Et(s){const a=new us(s);return function Nl(){try{return!!(new window.DOMParser).parseFromString(Rl(""),"text/html")}catch{return!1}}()?new Kn(a):a}(s);let c=a?String(a):"";u=Cv.getInertBodyElement(c);let f=5,m=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=m,m=u.innerHTML,u=Cv.getInertBodyElement(c)}while(c!==m);return Rl((new VS).sanitizeChildren(pb(u)||u))}finally{if(u){const c=pb(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function pb(s){return"content"in s&&function zk(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var rr=(()=>((rr=rr||{})[rr.NONE=0]="NONE",rr[rr.HTML=1]="HTML",rr[rr.STYLE=2]="STYLE",rr[rr.SCRIPT=3]="SCRIPT",rr[rr.URL=4]="URL",rr[rr.RESOURCE_URL=5]="RESOURCE_URL",rr))();function gb(s){const a=Hp();return a?t_(a.sanitize(rr.HTML,s)||""):A(s,"HTML")?t_(E(s)):BS(function Ml(){return void 0!==Lp?Lp:typeof document<"u"?document:void 0}(),Ae(s))}function mb(s){const a=Hp();return a?a.sanitize(rr.URL,s)||"":A(s,"URL")?E(s):Ra(Ae(s))}function s_(s){const a=Hp();if(a)return n_(a.sanitize(rr.RESOURCE_URL,s)||"");if(A(s,"ResourceURL"))return n_(E(s));throw new ge(904,!1)}function yb(s,a,u){return function $S(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?s_:mb}(a,u)(s)}function Hp(){const s=ye();return s&&s[hc]}const Dv=new tn("ENVIRONMENT_INITIALIZER"),td=new tn("INJECTOR",-1),Lh=new tn("INJECTOR_DEF_TYPES");class vb{get(a,u=Wr){if(u===Wr){const c=new Error(`NullInjectorError: No provider for ${pe(a)}!`);throw c.name="NullInjectorError",c}return u}}function Gp(...s){return{\u0275providers:Vh(0,s),\u0275fromNgModule:!0}}function Vh(s,...a){const u=[],c=new Set;let f;return as(a,m=>{const w=m;Sv(w,u,[],c)&&(f||(f=[]),f.push(w))}),void 0!==f&&wb(f,u),u}function wb(s,a){for(let u=0;u<s.length;u++){const{providers:f}=s[u];Av(f,m=>{a.push(m)})}}function Sv(s,a,u,c){if(!(s=Y(s)))return!1;let f=null,m=lr(s);const w=!m&&un(s);if(m||w){if(w&&!w.standalone)return!1;f=s}else{const C=s.ngModule;if(m=lr(C),!m)return!1;f=C}const b=c.has(f);if(w){if(b)return!1;if(c.add(f),w.dependencies){const C="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const x of C)Sv(x,a,u,c)}}else{if(!m)return!1;{if(null!=m.imports&&!b){let x;c.add(f);try{as(m.imports,N=>{Sv(N,a,u,c)&&(x||(x=[]),x.push(N))})}finally{}void 0!==x&&wb(x,a)}if(!b){const x=vo(f)||(()=>new f);a.push({provide:f,useFactory:x,deps:Je},{provide:Lh,useValue:f,multi:!0},{provide:Dv,useValue:()=>fn(f),multi:!0})}const C=m.providers;null==C||b||Av(C,N=>{a.push(N)})}}return f!==s&&void 0!==s.providers}function Av(s,a){for(let u of s)Se(u)&&(u=u.\u0275providers),Array.isArray(u)?Av(u,a):a(u)}const GS=ie({provide:String,useValue:ie});function xv(s){return null!==s&&"object"==typeof s&&GS in s}function Au(s){return"function"==typeof s}const Ol=new tn("Set Injector scope."),a_={},zS={};let Rv;function u_(){return void 0===Rv&&(Rv=new vb),Rv}class nd{}class bb extends nd{get destroyed(){return this._destroyed}constructor(a,u,c,f){super(),this.parent=u,this.source=c,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bh(a,w=>this.processProvider(w)),this.records.set(td,Uh(void 0,this)),f.has("environment")&&this.records.set(nd,Uh(void 0,this));const m=this.records.get(Ol);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Lh.multi,Je,ht.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=en(this),c=kn(void 0);try{return a()}finally{en(u),kn(c)}}get(a,u=Wr,c=ht.Default){this.assertNotDestroyed(),c=it(c);const f=en(this),m=kn(void 0);try{if(!(c&ht.SkipSelf)){let b=this.records.get(a);if(void 0===b){const C=function kv(s){return"function"==typeof s||"object"==typeof s&&s instanceof tn}(a)&&Qt(a);b=C&&this.injectableDefInScope(C)?Uh(Mv(a),a_):null,this.records.set(a,b)}if(null!=b)return this.hydrate(a,b)}return(c&ht.Self?u_():this.parent).get(a,u=c&ht.Optional&&u===Wr?null:u)}catch(w){if("NullInjectorError"===w.name){if((w[Tn]=w[Tn]||[]).unshift(pe(a)),f)throw w;return function H(s,a,u,c){const f=s[Tn];throw a[ln]&&f.unshift(a[ln]),s.message=function j(s,a,u,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==ea?s.slice(2):s;let f=pe(a);if(Array.isArray(a))f=a.map(pe).join(" -> ");else if("object"==typeof a){let m=[];for(let w in a)if(a.hasOwnProperty(w)){let b=a[w];m.push(w+":"+("string"==typeof b?JSON.stringify(b):pe(b)))}f=`{${m.join(", ")}}`}return`${u}${c?"("+c+")":""}[${f}]: ${s.replace(Cr,"\n  ")}`}("\n"+s.message,f,u,c),s[zs]=f,s[Tn]=null,s}(w,a,"R3InjectorError",this.source)}throw w}finally{kn(m),en(f)}}resolveInjectorInitializers(){const a=en(this),u=kn(void 0);try{const c=this.get(Dv.multi,Je,ht.Self);for(const f of c)f()}finally{en(a),kn(u)}}toString(){const a=[],u=this.records;for(const c of u.keys())a.push(pe(c));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(a){let u=Au(a=Y(a))?a:Y(a&&a.provide);const c=function KS(s){return xv(s)?Uh(void 0,s.useValue):Uh(Nv(s),a_)}(a);if(Au(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=Uh(void 0,a_,!0),f.factory=()=>Nt(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,c)}hydrate(a,u){return u.value===a_&&(u.value=zS,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Ib(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=Y(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Mv(s){const a=Qt(s),u=null!==a?a.factory:vo(s);if(null!==u)return u;if(s instanceof tn)throw new ge(204,!1);if(s instanceof Function)return function WS(s){const a=s.length;if(a>0)throw function Ca(s,a){const u=[];for(let c=0;c<s;c++)u.push(a);return u}(a,"?"),new ge(204,!1);const u=function ur(s){return s&&(s[xn]||s[ri])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ge(204,!1)}function Nv(s,a,u){let c;if(Au(s)){const f=Y(s);return vo(f)||Mv(f)}if(xv(s))c=()=>Y(s.useValue);else if(function Eb(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Nt(s.deps||[]));else if(function qS(s){return!(!s||!s.useExisting)}(s))c=()=>fn(Y(s.useExisting));else{const f=Y(s&&(s.useClass||s.provide));if(!function Pv(s){return!!s.deps}(s))return vo(f)||Mv(f);c=()=>new f(...Nt(s.deps))}return c}function Uh(s,a,u=!1){return{factory:s,value:a,multi:u?[]:void 0}}function Bh(s,a){for(const u of s)Array.isArray(u)?Bh(u,a):u&&Se(u)?Bh(u.\u0275providers,a):a(u)}class ZS{}class Cb{}class Db{resolveComponentFactory(a){throw function YS(s){const a=Error(`No component factory found for ${pe(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let jh=(()=>{class s{}return s.NULL=new Db,s})();function l_(){return xu(Dr(),ye())}function xu(s,a){return new $h(er(s,a))}let $h=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=l_,s})();function qp(s){return s instanceof $h?s.nativeElement:s}class Fv{}let QS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function JS(){const s=ye(),u=cr(Dr().index,s);return(oi(u)?u:s)[jt]}(),s})(),XS=(()=>{class s{}return s.\u0275prov=qe({token:s,providedIn:"root",factory:()=>null}),s})();class Sb{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Ab=new Sb("15.2.9"),c_={},Lv="ngOriginalError";function Vv(s){return s[Lv]}class zp{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Vv(a);for(;u&&Vv(u);)u=Vv(u);return u||null}}function Na(s){return s instanceof Function?s():s}function kb(s,a,u){let c=s.length;for(;;){const f=s.indexOf(a,u);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const m=a.length;if(f+m===c||s.charCodeAt(f+m)<=32)return f}u=f+1}}const Uv="ng-template";function Bv(s,a,u){let c=0,f=!0;for(;c<s.length;){let m=s[c++];if("string"==typeof m&&f){const w=s[c++];if(u&&"class"===m&&-1!==kb(w.toLowerCase(),a,0))return!0}else{if(1===m){for(;c<s.length&&"string"==typeof(m=s[c++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(f=!1)}}return!1}function jv(s){return 4===s.type&&s.value!==Uv}function Hh(s,a,u){return a===(4!==s.type||u?s.value:Uv)}function $v(s,a,u){let c=4;const f=s.attrs||[],m=function Fb(s){for(let a=0;a<s.length;a++)if(ou(s[a]))return a;return s.length}(f);let w=!1;for(let b=0;b<a.length;b++){const C=a[b];if("number"!=typeof C){if(!w)if(4&c){if(c=2|1&c,""!==C&&!Hh(s,C,u)||""===C&&1===a.length){if(ko(c))return!1;w=!0}}else{const x=8&c?C:a[++b];if(8&c&&null!==s.attrs){if(!Bv(s.attrs,x,u)){if(ko(c))return!1;w=!0}continue}const V=Ob(8&c?"class":C,f,jv(s),u);if(-1===V){if(ko(c))return!1;w=!0;continue}if(""!==x){let z;z=V>m?"":f[V+1].toLowerCase();const X=8&c?z:null;if(X&&-1!==kb(X,x,0)||2&c&&x!==z){if(ko(c))return!1;w=!0}}}}else{if(!w&&!ko(c)&&!ko(C))return!1;if(w&&ko(C))continue;w=!1,c=C|1&c}}return ko(c)||w}function ko(s){return 0==(1&s)}function Ob(s,a,u,c){if(null===a)return-1;let f=0;if(c||!u){let m=!1;for(;f<a.length;){const w=a[f];if(w===s)return f;if(3===w||6===w)m=!0;else{if(1===w||2===w){let b=a[++f];for(;"string"==typeof b;)b=a[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=m?1:2}return-1}return function Lb(s,a){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===a)return u;u++}return-1}(a,s)}function Kp(s,a,u=!1){for(let c=0;c<a.length;c++)if($v(s,a[c],u))return!0;return!1}function Vb(s,a){return s?":not("+a.trim()+")":a}function aA(s){let a=s[0],u=1,c=2,f="",m=!1;for(;u<s.length;){let w=s[u];if("string"==typeof w)if(2&c){const b=s[++u];f+="["+w+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?f+="."+w:4&c&&(f+=" "+w);else""!==f&&!ko(w)&&(a+=Vb(m,f),f=""),c=w,m=m||!ko(c);u++}return""!==f&&(a+=Vb(m,f)),a}const Vt={};function Ub(s){Bb(rn(),ye(),Qr()+s,!1)}function Bb(s,a,u,c){if(!c)if(3==(3&a[Bt])){const m=s.preOrderCheckHooks;null!==m&&To(a,m,u)}else{const m=s.preOrderHooks;null!==m&&Rc(a,m,0,u)}ma(u)}function $b(s,a=null,u=null,c){const f=Hv(s,a,u,c);return f.resolveInjectorInitializers(),f}function Hv(s,a=null,u=null,c,f=new Set){const m=[u||Je,Gp(s)];return c=c||("object"==typeof s?void 0:pe(s)),new bb(m,a||u_(),c||null,f)}let Gh=(()=>{class s{static create(u,c){if(Array.isArray(u))return $b({name:""},c,u,"");{const f=u.name??"";return $b({name:f},u.parent,u.providers,f)}}}return s.THROW_IF_NOT_FOUND=Wr,s.NULL=new vb,s.\u0275prov=qe({token:s,providedIn:"any",factory:()=>fn(td)}),s.__NG_ELEMENT_ID__=-1,s})();function Wh(s,a=ht.Default){const u=ye();return null===u?fn(s,a):hh(Dr(),u,Y(s),a)}function Wb(){throw new Error("invalid")}function Kb(s,a){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const m=u[c+1];if(-1!==m){const w=s.data[m];Sc(u[c]),w.contentQueries(2,a[m],m)}}}function p_(s,a,u,c,f,m,w,b,C,x,N){const V=a.blueprint.slice();return V[bi]=f,V[Bt]=76|c,(null!==N||s&&1024&s[Bt])&&(V[Bt]|=1024),Ja(V),V[Sn]=V[Li]=s,V[On]=u,V[Ci]=w||s&&s[Ci],V[jt]=b||s&&s[jt],V[hc]=C||s&&s[hc]||null,V[ra]=x||s&&s[ra]||null,V[Xn]=m,V[Zs]=function Ch(){return to++}(),V[Es]=N,V[Vr]=2==a.type?s[Vr]:V,V}function Xp(s,a,u,c,f){let m=s.data[a];if(null===m)m=function Kv(s,a,u,c,f){const m=eu(),w=Zu(),C=s.data[a]=function Ai(s,a,u,c,f,m){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,u,a,c,f);return null===s.firstChild&&(s.firstChild=C),null!==m&&(w?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C,C.prev=m)),C}(s,a,u,c,f),function sh(){return Ot.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=u,m.value=c,m.attrs=f;const w=function Ku(){const s=Ot.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return li(m,!0),m}function Kh(s,a,u,c){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(c),s.blueprint.push(c),s.data.push(null);return f}function Ru(s,a,u){Ju(a);try{const c=s.viewQuery;null!==c&&tg(1,c,u);const f=s.template;null!==f&&Yb(s,a,f,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Kb(s,a),s.staticViewQueries&&tg(2,s.viewQuery,u);const m=s.components;null!==m&&function Zb(s,a){for(let u=0;u<a.length;u++)Ll(s,a[u])}(a,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{a[Bt]&=-5,Lm()}}function Ps(s,a,u,c){const f=a[Bt];if(128!=(128&f)){Ju(a);try{Ja(a),function Ys(s){return Ot.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Yb(s,a,u,2,c);const w=3==(3&f);if(w){const x=s.preOrderCheckHooks;null!==x&&To(a,x,null)}else{const x=s.preOrderHooks;null!==x&&Rc(a,x,0,null),Qs(a,0)}if(function dI(s){for(let a=El(s);null!==a;a=bl(a)){if(!a[Qd])continue;const u=a[Zr];for(let c=0;c<u.length;c++){const f=u[c];512&f[Bt]||Xa(f[Sn],1),f[Bt]|=512}}}(a),function cI(s){for(let a=El(s);null!==a;a=bl(a))for(let u=Ur;u<a.length;u++){const c=a[u],f=c[nt];ga(c)&&Ps(f,c,f.template,c[On])}}(a),null!==s.contentQueries&&Kb(s,a),w){const x=s.contentCheckHooks;null!==x&&To(a,x)}else{const x=s.contentHooks;null!==x&&Rc(a,x,1),Qs(a,1)}!function TA(s,a){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const f=u[c];if(f<0)ma(~f);else{const m=f,w=u[++c],b=u[++c];oh(w,m),b(2,a[m])}}}finally{ma(-1)}}(s,a);const b=s.components;null!==b&&function DA(s,a){for(let u=0;u<a.length;u++)hI(s,a[u])}(a,b);const C=s.viewQuery;if(null!==C&&tg(2,C,c),w){const x=s.viewCheckHooks;null!==x&&To(a,x)}else{const x=s.viewHooks;null!==x&&Rc(a,x,2),Qs(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Bt]&=-41,512&a[Bt]&&(a[Bt]&=-513,Xa(a[Sn],-1))}finally{Lm()}}}function Yb(s,a,u,c,f){const m=Qr(),w=2&c;try{ma(-1),w&&a.length>wn&&Bb(s,a,wn,!1),ui(w?2:0,f),u(c,f)}finally{ma(m),ui(w?3:1,f)}}function g_(s,a,u){if(Wa(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const w=s.data[m];w.contentQueries&&w.contentQueries(1,u[m],m)}}}function Zv(s,a,u){Wu()&&(function rI(s,a,u,c){const f=u.directiveStart,m=u.directiveEnd;Bi(u)&&function nw(s,a,u){const c=er(a,s),f=Qb(u),m=s[Ci],w=iw(s,p_(s,f,null,u.onPush?32:16,c,a,m,m.createRenderer(c,u),null,null,null));s[a.index]=w}(a,u,s.data[f+u.componentOffset]),s.firstCreatePass||ba(u,a),Br(c,a);const w=u.initialInputs;for(let b=f;b<m;b++){const C=s.data[b],x=os(a,s,b,u);Br(x,a),null!==w&&lI(0,b-f,x,C,0,w),ai(C)&&(cr(u.index,a)[On]=os(a,s,b,u))}}(s,a,u,er(u,a)),64==(64&u.flags)&&Xv(s,a,u))}function Yv(s,a,u=er){const c=a.localNames;if(null!==c){let f=a.index+1;for(let m=0;m<c.length;m+=2){const w=c[m+1],b=-1===w?u(a,s):s[w];s[f++]=b}}}function Qb(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=id(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function id(s,a,u,c,f,m,w,b,C,x){const N=wn+c,V=N+f,z=function SA(s,a){const u=[];for(let c=0;c<a;c++)u.push(c<s?null:Vt);return u}(N,V),X="function"==typeof x?x():x;return z[nt]={type:s,blueprint:z,template:u,queries:null,viewQuery:b,declTNode:a,data:z.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:C,consts:X,incompleteFirstPass:!1}}function Qv(s,a,u,c){const f=gI(a);null===u?f.push(c):(f.push(u),s.firstCreatePass&&v_(s).push(c,f.length-1))}function Mu(s,a,u,c){for(let f in s)if(s.hasOwnProperty(f)){u=null===u?{}:u;const m=s[f];null===c?Jb(u,a,f,m):c.hasOwnProperty(f)&&Jb(u,a,c[f],m)}return u}function Jb(s,a,u,c){s.hasOwnProperty(u)?s[u].push(a,c):s[u]=[a,c]}function cs(s,a,u,c,f,m,w,b){const C=er(a,u);let N,x=a.inputs;!b&&null!=x&&(N=x[c])?(_I(s,u,N,c,f),Bi(a)&&function eI(s,a){const u=cr(a,s);16&u[Bt]||(u[Bt]|=32)}(u,a.index)):3&a.type&&(c=function Xb(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),f=null!=w?w(f,a.value||"",c):f,m.setProperty(C,c,f))}function m_(s,a,u,c){if(Wu()){const f=null===c?null:{"":-1},m=function sI(s,a){const u=s.directiveRegistry;let c=null,f=null;if(u)for(let m=0;m<u.length;m++){const w=u[m];if(Kp(a,w.selectors,!1))if(c||(c=[]),ai(w))if(null!==w.findHostDirectiveDefs){const b=[];f=f||new Map,w.findHostDirectiveDefs(w,b,f),c.unshift(...b,w),ew(s,a,b.length)}else c.unshift(w),ew(s,a,0);else f=f||new Map,w.findHostDirectiveDefs?.(w,c,f),c.push(w)}return null===c?null:[c,f]}(s,u);let w,b;null===m?w=b=null:[w,b]=m,null!==w&&Jv(s,a,u,w,f,b),f&&function oI(s,a,u){if(a){const c=s.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new ge(-301,!1);c.push(a[f],m)}}}(u,c,f)}u.mergedAttrs=Ds(u.mergedAttrs,u.attrs)}function Jv(s,a,u,c,f,m){for(let x=0;x<c.length;x++)hu(ba(u,a),s,c[x].type);!function tw(s,a,u){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+u,s.providerIndexes=a}(u,s.data.length,c.length);for(let x=0;x<c.length;x++){const N=c[x];N.providersResolver&&N.providersResolver(N)}let w=!1,b=!1,C=Kh(s,a,c.length,null);for(let x=0;x<c.length;x++){const N=c[x];u.mergedAttrs=Ds(u.mergedAttrs,N.hostAttrs),uI(s,u,a,C,N),aI(C,N,f),null!==N.contentQueries&&(u.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(u.flags|=64);const V=N.type.prototype;!w&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(u.index),w=!0),!b&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(u.index),b=!0),C++}!function io(s,a,u){const f=a.directiveEnd,m=s.data,w=a.attrs,b=[];let C=null,x=null;for(let N=a.directiveStart;N<f;N++){const V=m[N],z=u?u.get(V):null,be=z?z.outputs:null;C=Mu(V.inputs,N,C,z?z.inputs:null),x=Mu(V.outputs,N,x,be);const Ue=null===C||null===w||jv(a)?null:rw(C,N,w);b.push(Ue)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=8),C.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=b,a.inputs=C,a.outputs=x}(s,u,m)}function Xv(s,a,u){const c=u.directiveStart,f=u.directiveEnd,m=u.index,w=function Tc(){return Ot.lFrame.currentDirectiveIndex}();try{ma(m);for(let b=c;b<f;b++){const C=s.data[b],x=a[b];Dc(b),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&iI(C,x)}}finally{ma(-1),Dc(w)}}function iI(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function ew(s,a,u){a.componentOffset=u,(s.components??(s.components=[])).push(a.index)}function aI(s,a,u){if(u){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)u[a.exportAs[c]]=s;ai(a)&&(u[""]=s)}}function uI(s,a,u,c,f){s.data[c]=f;const m=f.factory||(f.factory=vo(f.type)),w=new Js(m,ai(f),Wh);s.blueprint[c]=w,u[c]=w,function nI(s,a,u,c,f){const m=f.hostBindings;if(m){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const b=~a.index;(function __(s){let a=s.length;for(;a>0;){const u=s[--a];if("number"==typeof u&&u<0)return u}return 0})(w)!=b&&w.push(b),w.push(u,c,m)}}(s,a,c,Kh(s,u,f.hostVars,Vt),f)}function Oo(s,a,u,c,f,m){const w=er(s,a);!function y_(s,a,u,c,f,m,w){if(null==m)s.removeAttribute(a,f,u);else{const b=null==w?Ae(m):w(m,c||"",f);s.setAttribute(a,f,b,u)}}(a[jt],w,m,s.value,u,c,f)}function lI(s,a,u,c,f,m){const w=m[a];if(null!==w){const b=c.setInput;for(let C=0;C<w.length;){const x=w[C++],N=w[C++],V=w[C++];null!==b?c.setInput(u,V,x,N):u[N]=V}}}function rw(s,a,u){let c=null,f=0;for(;f<u.length;){const m=u[f];if(0!==m)if(5!==m){if("number"==typeof m)break;if(s.hasOwnProperty(m)){null===c&&(c=[]);const w=s[m];for(let b=0;b<w.length;b+=2)if(w[b]===a){c.push(m,w[b+1],u[f+1]);break}}f+=2}else f+=2;else f+=4}return c}function eg(s,a,u,c){return[s,!0,!1,a,null,0,c,u,null,null]}function hI(s,a){const u=cr(a,s);if(ga(u)){const c=u[nt];48&u[Bt]?Ps(c,u,c.template,u[On]):u[ws]>0&&yi(u)}}function yi(s){for(let c=El(s);null!==c;c=bl(c))for(let f=Ur;f<c.length;f++){const m=c[f];if(ga(m))if(512&m[Bt]){const w=m[nt];Ps(w,m,w.template,m[On])}else m[ws]>0&&yi(m)}const u=s[nt].components;if(null!==u)for(let c=0;c<u.length;c++){const f=cr(u[c],s);ga(f)&&f[ws]>0&&yi(f)}}function Ll(s,a){const u=cr(a,s),c=u[nt];(function fI(s,a){for(let u=a.length;u<s.blueprint.length;u++)a.push(s.blueprint[u])})(c,u),Ru(c,u,u[On])}function iw(s,a){return s[Ks]?s[fc][Kr]=a:s[Ks]=a,s[fc]=a,a}function sw(s){for(;s;){s[Bt]|=32;const a=bu(s);if(Ka(s)&&!a)return s;s=a}return null}function Zh(s,a,u,c=!0){const f=a[Ci];f.begin&&f.begin();try{Ps(s,a,s.template,u)}catch(w){throw c&&xA(a,w),w}finally{f.end&&f.end()}}function tg(s,a,u){Sc(0),a(s,u)}function gI(s){return s[Ii]||(s[Ii]=[])}function v_(s){return s.cleanup||(s.cleanup=[])}function xA(s,a){const u=s[ra],c=u?u.get(zp,null):null;c&&c.handleError(a)}function _I(s,a,u,c,f){for(let m=0;m<u.length;){const w=u[m++],b=u[m++],C=a[w],x=s.data[w];null!==x.setInput?x.setInput(C,f,c,b):C[b]=f}}function Vl(s,a,u){const c=bo(a,s);!function xp(s,a,u){s.setValue(a,u)}(s[jt],c,u)}function aw(s,a,u){let c=u?s.styles:null,f=u?s.classes:null,m=0;if(null!==a)for(let w=0;w<a.length;w++){const b=a[w];"number"==typeof b?m=b:1==m?f=de(f,b):2==m&&(c=de(c,b+": "+a[++w]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=f:s.classesWithoutHost=f}function uw(s,a,u,c,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&c.push(qn(m)),Ui(m))for(let b=Ur;b<m.length;b++){const C=m[b],x=C[nt].firstChild;null!==x&&uw(C[nt],C,x,c)}const w=u.type;if(8&w)uw(s,a,u.child,c);else if(32&w){const b=Eu(u,a);let C;for(;C=b();)c.push(C)}else if(16&w){const b=Nh(a,u);if(Array.isArray(b))c.push(...b);else{const C=bu(a[Vr]);uw(C[nt],C,b,c,!0)}}u=f?u.projectionNext:u.next}return c}class w_{get rootNodes(){const a=this._lView,u=a[nt];return uw(u,a,u.firstChild,[])}constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(a){this._lView[On]=a}get destroyed(){return 128==(128&this._lView[Bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Sn];if(Ui(a)){const u=a[_o],c=u?u.indexOf(this):-1;c>-1&&(Np(a,c),gu(u,c))}this._attachedToViewContainer=!1}Ah(this._lView[nt],this._lView)}onDestroy(a){Qv(this._lView[nt],this._lView,null,a)}markForCheck(){sw(this._cdRefInjectingView||this._lView)}detach(){this._lView[Bt]&=-65}reattach(){this._lView[Bt]|=64}detectChanges(){Zh(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cl(s,a){Zc(s,a,a[jt],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=a}}class rO extends w_{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Zh(a[nt],a,a[On],!1)}checkNoChanges(){}get context(){return null}}class yI extends jh{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=un(a);return new ng(u,this.ngModule)}}function lw(s){const a=[];for(let u in s)s.hasOwnProperty(u)&&a.push({propName:s[u],templateName:u});return a}class MA{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,c){c=it(c);const f=this.injector.get(a,c_,c);return f!==c_||u===c_?f:this.parentInjector.get(a,u,c)}}class ng extends Cb{get inputs(){return lw(this.componentDef.inputs)}get outputs(){return lw(this.componentDef.outputs)}constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function uA(s){return s.map(aA).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}create(a,u,c,f){let m=(f=f||this.ngModule)instanceof nd?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const w=m?new MA(a,m):a,b=w.get(Fv,null);if(null===b)throw new ge(407,!1);const C=w.get(XS,null),x=b.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",V=c?function Fl(s,a,u){return s.selectRootElement(a,u===ne.ShadowDom)}(x,c,this.componentDef.encapsulation):qc(x,N,function RA(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(N)),z=this.componentDef.onPush?288:272,X=id(0,null,null,1,0,null,null,null,null,null),be=p_(null,X,null,z,null,null,b,x,C,w,null);let Ue,Ye;Ju(be);try{const lt=this.componentDef;let Pt,Ne=null;lt.findHostDirectiveDefs?(Pt=[],Ne=new Map,lt.findHostDirectiveDefs(lt,Pt,Ne),Pt.push(lt)):Pt=[lt];const $t=function b_(s,a){const u=s[nt],c=wn;return s[c]=a,Xp(u,c,2,"#host",null)}(be,V),Yn=function Yh(s,a,u,c,f,m,w,b){const C=f[nt];!function rg(s,a,u,c){for(const f of s)a.mergedAttrs=Ds(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(aw(a,a.mergedAttrs,!0),null!==u&&xl(c,u,a))}(c,s,a,w);const x=m.createRenderer(a,u),N=p_(f,Qb(u),null,u.onPush?32:16,f[s.index],s,m,x,b||null,null,null);return C.firstCreatePass&&ew(C,s,c.length-1),iw(f,N),f[s.index]=N}($t,V,lt,Pt,be,b,x);Ye=pa(X,wn),V&&function NA(s,a,u,c){if(c)Fn(s,u,["ng-version",Ab.full]);else{const{attrs:f,classes:m}=function lA(s){const a=[],u=[];let c=1,f=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===f?""!==m&&a.push(m,s[++c]):8===f&&u.push(m);else{if(!ko(f))break;f=m}c++}return{attrs:a,classes:u}}(a.selectors[0]);f&&Fn(s,u,f),m&&m.length>0&&_i(s,u,m.join(" "))}}(x,lt,V,c),void 0!==u&&function hw(s,a,u){const c=s.projection=[];for(let f=0;f<a.length;f++){const m=u[f];c.push(null!=m?Array.from(m):null)}}(Ye,this.ngContentSelectors,u),Ue=function dw(s,a,u,c,f,m){const w=Dr(),b=f[nt],C=er(w,f);Jv(b,f,w,u,null,c);for(let N=0;N<u.length;N++)Br(os(f,b,w.directiveStart+N,w),f);Xv(b,f,w),C&&Br(C,f);const x=os(f,b,w.directiveStart+w.componentOffset,w);if(s[On]=f[On]=x,null!==m)for(const N of m)N(x,a);return g_(b,w,s),x}(Yn,lt,Pt,Ne,be,[PA]),Ru(X,be,null)}finally{Lm()}return new cw(this.componentType,Ue,xu(Ye,be),be,Ye)}}class cw extends ZS{constructor(a,u,c,f,m){super(),this.location=c,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new rO(f),this.componentType=a}setInput(a,u){const c=this._tNode.inputs;let f;if(null!==c&&(f=c[a])){const m=this._rootLView;_I(m[nt],m,f,a,u),sw(cr(this._tNode.index,m))}}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function PA(){const s=Dr();nu(ye()[nt],s)}function I_(s){let a=function ig(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;a;){let f;if(ai(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ge(903,!1);f=a.\u0275dir}if(f){if(u){c.push(f);const w=s;w.inputs=Qh(s.inputs),w.declaredInputs=Qh(s.declaredInputs),w.outputs=Qh(s.outputs);const b=f.hostBindings;b&&sO(s,b);const C=f.viewQuery,x=f.contentQueries;if(C&&sg(s,C),x&&iO(s,x),me(s.inputs,f.inputs),me(s.declaredInputs,f.declaredInputs),me(s.outputs,f.outputs),ai(f)&&f.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let w=0;w<m.length;w++){const b=m[w];b&&b.ngInherit&&b(s),b===I_&&(u=!1)}}a=Object.getPrototypeOf(a)}!function vI(s){let a=0,u=null;for(let c=s.length-1;c>=0;c--){const f=s[c];f.hostVars=a+=f.hostVars,f.hostAttrs=Ds(f.hostAttrs,u=Ds(u,f.hostAttrs))}}(c)}function Qh(s){return s===tt?{}:s===Je?[]:s}function sg(s,a){const u=s.viewQuery;s.viewQuery=u?(c,f)=>{a(c,f),u(c,f)}:a}function iO(s,a){const u=s.contentQueries;s.contentQueries=u?(c,f,m)=>{a(c,f,m),u(c,f,m)}:a}function sO(s,a){const u=s.hostBindings;s.hostBindings=u?(c,f)=>{a(c,f),u(c,f)}:a}function od(s){return!!T_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function T_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Fo(s,a,u){return s[a]=u}function Gi(s,a,u){return!Object.is(s[a],u)&&(s[a]=u,!0)}function ad(s,a,u,c){const f=Gi(s,a,u);return Gi(s,a+1,c)||f}function II(s,a,u,c){const f=ye();return Gi(f,Co(),a)&&(rn(),Oo(An(),f,s,a,u,c)),II}function ef(s,a,u,c){return Gi(s,Co(),u)?a+Ae(u)+c:Vt}function ud(s,a,u,c,f,m){const b=ad(s,function ci(){return Ot.lFrame.bindingIndex}(),u,f);return is(2),b?a+Ae(u)+c+Ae(f)+m:Vt}function _w(s,a,u,c,f,m,w,b){const C=ye(),x=rn(),N=s+wn,V=x.firstCreatePass?function jA(s,a,u,c,f,m,w,b,C){const x=a.consts,N=Xp(a,s,4,w||null,Is(x,b));m_(a,u,N,Is(x,C)),nu(a,N);const V=N.tView=id(2,N,c,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x);return null!==a.queries&&(a.queries.template(a,N),V.queries=a.queries.embeddedTView(N)),N}(N,x,C,a,u,c,f,m,w):x.data[N];li(V,!1);const z=C[jt].createComment("");Kc(x,C,z,V),Br(z,C),iw(C,C[N]=eg(z,C,z,V)),pc(V)&&Zv(x,C,V),null!=w&&Yv(C,V,b)}function yw(s){return Io(function ih(){return Ot.lFrame.contextLView}(),wn+s)}function D_(s,a,u){const c=ye();return Gi(c,Co(),a)&&cs(rn(),An(),c,s,a,c[jt],u,!1),D_}function cg(s,a,u,c,f){const w=f?"class":"style";_I(s,u,a.inputs[w],w,c)}function dg(s,a,u,c){const f=ye(),m=rn(),w=wn+s,b=f[jt],C=m.firstCreatePass?function HA(s,a,u,c,f,m){const w=a.consts,C=Xp(a,s,2,c,Is(w,f));return m_(a,u,C,Is(w,m)),null!==C.attrs&&aw(C,C.attrs,!1),null!==C.mergedAttrs&&aw(C,C.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,C),C}(w,m,f,a,u,c):m.data[w],x=f[w]=qc(b,a,function Vm(){return Ot.lFrame.currentNamespace}()),N=pc(C);return li(C,!0),xl(b,x,C),32!=(32&C.flags)&&Kc(m,f,x,C),0===function zu(){return Ot.lFrame.elementDepthCount}()&&Br(x,f),function wc(){Ot.lFrame.elementDepthCount++}(),N&&(Zv(m,f,C),g_(m,C,f)),null!==c&&Yv(f,C),dg}function S_(){let s=Dr();Zu()?Yu():(s=s.parent,li(s,!1));const a=s;!function Ec(){Ot.lFrame.elementDepthCount--}();const u=rn();return u.firstCreatePass&&(nu(u,s),Wa(s)&&u.queries.elementEnd(s)),null!=a.classesWithoutHost&&function dh(s){return 0!=(8&s.flags)}(a)&&cg(u,a,ye(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function cp(s){return 0!=(16&s.flags)}(a)&&cg(u,a,ye(),a.stylesWithoutHost,!1),S_}function TI(s,a,u,c){return dg(s,a,u,c),S_(),TI}function A_(s,a,u){const c=ye(),f=rn(),m=s+wn,w=f.firstCreatePass?function DI(s,a,u,c,f){const m=a.consts,w=Is(m,c),b=Xp(a,s,8,"ng-container",w);return null!==w&&aw(b,w,!0),m_(a,u,b,Is(m,f)),null!==a.queries&&a.queries.elementStart(a,b),b}(m,f,c,a,u):f.data[m];li(w,!0);const b=c[m]=c[jt].createComment("");return Kc(f,c,b,w),Br(b,c),pc(w)&&(Zv(f,c,w),g_(f,w,c)),null!=u&&Yv(c,w),A_}function hg(){let s=Dr();const a=rn();return Zu()?Yu():(s=s.parent,li(s,!1)),a.firstCreatePass&&(nu(a,s),Wa(s)&&a.queries.elementEnd(s)),hg}function vw(){return ye()}function fg(s){return!!s&&"function"==typeof s.then}function AI(s){return!!s&&"function"==typeof s.subscribe}const ww=AI;function Ew(s,a,u,c){const f=ye(),m=rn(),w=Dr();return function x_(s,a,u,c,f,m,w){const b=pc(c),x=s.firstCreatePass&&v_(s),N=a[On],V=gI(a);let z=!0;if(3&c.type||w){const Ue=er(c,a),Ye=w?w(Ue):Ue,lt=V.length,Pt=w?$t=>w(qn($t[c.index])):c.index;let Ne=null;if(!w&&b&&(Ne=function GA(s,a,u,c){const f=s.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const w=f[m];if(w===u&&f[m+1]===c){const b=a[Ii],C=f[m+2];return b.length>C?b[C]:null}"string"==typeof w&&(m+=2)}return null}(s,a,f,c.index)),null!==Ne)(Ne.__ngLastListenerFn__||Ne).__ngNextListenerFn__=m,Ne.__ngLastListenerFn__=m,z=!1;else{m=R_(c,a,N,m,!1);const $t=u.listen(Ye,f,m);V.push(m,$t),x&&x.push(f,Pt,lt,lt+1)}}else m=R_(c,a,N,m,!1);const X=c.outputs;let be;if(z&&null!==X&&(be=X[f])){const Ue=be.length;if(Ue)for(let Ye=0;Ye<Ue;Ye+=2){const Yn=a[be[Ye]][be[Ye+1]].subscribe(m),Er=V.length;V.push(m,Yn),x&&x.push(f,c.index,Er,-(Er+1))}}}(m,f,f[jt],w,s,a,c),Ew}function xI(s,a,u,c){try{return ui(6,a,u),!1!==u(c)}catch(f){return xA(s,f),!1}finally{ui(7,a,u)}}function R_(s,a,u,c,f){return function m(w){if(w===Function)return c;sw(s.componentOffset>-1?cr(s.index,a):a);let C=xI(a,u,c,w),x=m.__ngNextListenerFn__;for(;x;)C=xI(a,u,x,w)&&C,x=x.__ngNextListenerFn__;return f&&!1===C&&(w.preventDefault(),w.returnValue=!1),C}}function bw(s=1){return function cv(s){return(Ot.lFrame.contextLView=function lh(s,a){for(;s>0;)a=a[Li],s--;return a}(s,Ot.lFrame.contextLView))[On]}(s)}function N_(s,a,u,c,f){const m=ye(),w=ef(m,a,u,c);return w!==Vt&&cs(rn(),An(),m,s,w,m[jt],f,!1),N_}function pg(s,a){return s<<17|a<<2}function Nu(s){return s>>17&32767}function O_(s){return 2|s}function cd(s){return(131068&s)>>2}function F_(s,a){return-131069&s|a<<2}function Tw(s){return 1|s}function OI(s,a,u,c,f){const m=s[u+1],w=null===a;let b=c?Nu(m):cd(m),C=!1;for(;0!==b&&(!1===C||w);){const N=s[b+1];FI(s[b],a)&&(C=!0,s[b+1]=c?Tw(N):O_(N)),b=c?Nu(N):cd(N)}C&&(s[u+1]=c?O_(m):Tw(m))}function FI(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&vr(s,a)>=0}const jr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Dw(s){return s.substring(jr.key,jr.keyEnd)}function XA(s,a){const u=jr.textEnd;return u===a?-1:(a=jr.keyEnd=function lO(s,a,u){for(;a<u&&s.charCodeAt(a)>32;)a++;return a}(s,jr.key=a,u),dd(s,a,u))}function dd(s,a,u){for(;a<u&&s.charCodeAt(a)<=32;)a++;return a}function UI(s,a,u){return so(s,a,u,!1),UI}function xw(s,a){return so(s,a,null,!0),xw}function V_(s){!function Uo(s,a,u,c){const f=rn(),m=is(2);f.firstUpdatePass&&jI(f,null,m,c);const w=ye();if(u!==Vt&&Gi(w,m,u)){const b=f.data[Qr()];if(HI(b,c)&&!BI(f,m)){let C=c?b.classesWithoutHost:b.stylesWithoutHost;null!==C&&(u=de(C,u||"")),cg(f,b,w,u,c)}else!function Bo(s,a,u,c,f,m,w,b){f===Vt&&(f=Je);let C=0,x=0,N=0<f.length?f[0]:null,V=0<m.length?m[0]:null;for(;null!==N||null!==V;){const z=C<f.length?f[C+1]:void 0,X=x<m.length?m[x+1]:void 0;let Ue,be=null;N===V?(C+=2,x+=2,z!==X&&(be=V,Ue=X)):null===V||null!==N&&N<V?(C+=2,be=N):(x+=2,be=V,Ue=X),null!==be&&Mw(s,a,u,c,be,Ue,w,b),N=C<f.length?f[C]:null,V=x<m.length?m[x]:null}}(f,b,w,w[jt],w[m+1],w[m+1]=function ve(s,a,u){if(null==u||""===u)return Je;const c=[],f=E(u);if(Array.isArray(f))for(let m=0;m<f.length;m++)s(c,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&s(c,m,f[m]);else"string"==typeof f&&a(c,f);return c}(s,a,u),c,m)}}(k,Vo,s,!0)}function Vo(s,a){for(let u=function LI(s){return function Sw(s){jr.key=0,jr.keyEnd=0,jr.value=0,jr.valueEnd=0,jr.textEnd=s.length}(s),XA(s,dd(s,0,jr.textEnd))}(a);u>=0;u=XA(a,u))Jr(s,Dw(a),!0)}function so(s,a,u,c){const f=ye(),m=rn(),w=is(2);m.firstUpdatePass&&jI(m,s,w,c),a!==Vt&&Gi(f,w,a)&&Mw(m,m.data[Qr()],f,f[jt],s,f[w+1]=function $I(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=pe(E(s)))),s}(a,u),c,w)}function BI(s,a){return a>=s.expandoStartIndex}function jI(s,a,u,c){const f=s.data;if(null===f[u+1]){const m=f[Qr()],w=BI(s,u);HI(m,c)&&null===a&&!w&&(a=!1),a=function nx(s,a,u,c){const f=Cs(s);let m=c?a.residualClasses:a.residualStyles;if(null===f)0===(c?a.classBindings:a.styleBindings)&&(u=qi(u=gg(null,s,a,u,c),a.attrs,c),m=null);else{const w=a.directiveStylingLast;if(-1===w||s[w]!==f)if(u=gg(f,s,a,u,c),null===m){let C=function pn(s,a,u){const c=u?a.classBindings:a.styleBindings;if(0!==cd(c))return s[Nu(c)]}(s,a,c);void 0!==C&&Array.isArray(C)&&(C=gg(null,s,a,C[1],c),C=qi(C,a.attrs,c),function $r(s,a,u,c){s[Nu(u?a.classBindings:a.styleBindings)]=c}(s,a,c,C))}else m=function dO(s,a,u){let c;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)c=qi(c,s[m].hostAttrs,u);return qi(c,a.attrs,u)}(s,a,c)}return void 0!==m&&(c?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,c),function QA(s,a,u,c,f,m){let w=m?a.classBindings:a.styleBindings,b=Nu(w),C=cd(w);s[c]=u;let N,x=!1;if(Array.isArray(u)?(N=u[1],(null===N||vr(u,N)>0)&&(x=!0)):N=u,f)if(0!==C){const z=Nu(s[b+1]);s[c+1]=pg(z,b),0!==z&&(s[z+1]=F_(s[z+1],c)),s[b+1]=function KA(s,a){return 131071&s|a<<17}(s[b+1],c)}else s[c+1]=pg(b,0),0!==b&&(s[b+1]=F_(s[b+1],c)),b=c;else s[c+1]=pg(C,0),0===b?b=c:s[C+1]=F_(s[C+1],c),C=c;x&&(s[c+1]=O_(s[c+1])),OI(s,N,c,!0),OI(s,N,c,!1),function kI(s,a,u,c,f){const m=f?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof a&&vr(m,a)>=0&&(u[c+1]=Tw(u[c+1]))}(a,N,s,c,m),w=pg(b,C),m?a.classBindings=w:a.styleBindings=w}(f,m,a,u,w,c)}}function gg(s,a,u,c,f){let m=null;const w=u.directiveEnd;let b=u.directiveStylingLast;for(-1===b?b=u.directiveStart:b++;b<w&&(m=a[b],c=qi(c,m.hostAttrs,f),m!==s);)b++;return null!==s&&(u.directiveStylingLast=b),c}function qi(s,a,u){const c=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const w=a[m];"number"==typeof w?f=w:f===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Jr(s,w,!!u||a[++m]))}return void 0===s?null:s}function k(s,a,u){const c=String(a);""!==c&&!c.includes(" ")&&Jr(s,c,u)}function Mw(s,a,u,c,f,m,w,b){if(!(3&a.type))return;const C=s.data,x=C[b+1],N=function ZA(s){return 1==(1&s)}(x)?Nw(C,a,u,f,cd(x),w):void 0;af(N)||(af(m)||function ld(s){return 2==(2&s)}(x)&&(m=Nw(C,null,u,f,b,w)),function Ns(s,a,u,c,f){if(a)f?s.addClass(u,c):s.removeClass(u,c);else{let m=-1===c.indexOf("-")?void 0:Tt.DashCase;null==f?s.removeStyle(u,c,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Tt.Important),s.setStyle(u,c,f,m))}}(c,w,bo(Qr(),u),f,m))}function Nw(s,a,u,c,f,m){const w=null===a;let b;for(;f>0;){const C=s[f],x=Array.isArray(C),N=x?C[1]:C,V=null===N;let z=u[f+1];z===Vt&&(z=V?Je:void 0);let X=V?sn(z,c):N===c?z:void 0;if(x&&!af(X)&&(X=sn(C,c)),af(X)&&(b=X,w))return b;const be=s[f+1];f=w?Nu(be):cd(be)}if(null!==a){let C=m?a.residualClasses:a.residualStyles;null!=C&&(b=sn(C,c))}return b}function af(s){return void 0!==s}function HI(s,a){return 0!=(s.flags&(a?8:16))}function GI(s,a=""){const u=ye(),c=rn(),f=s+wn,m=c.firstCreatePass?Xp(c,f,1,a,null):c.data[f],w=u[f]=function Il(s,a){return s.createText(a)}(u[jt],a);Kc(c,u,w,m),li(m,!1)}function U_(s){return Oa("",s,""),U_}function Oa(s,a,u){const c=ye(),f=ef(c,s,a,u);return f!==Vt&&Vl(c,Qr(),f),Oa}function mg(s,a,u,c,f){const m=ye(),w=ud(m,s,a,u,c,f);return w!==Vt&&Vl(m,Qr(),w),mg}function Bw(s,a,u){const c=ye();if(Gi(c,Co(),a)){const m=rn(),w=An();cs(m,w,c,s,a,function mI(s,a,u){return(null===s||ai(s))&&(u=function fa(s){for(;Array.isArray(s);){if("object"==typeof s[Ti])return s;s=s[bi]}return null}(u[a.index])),u[jt]}(Cs(m.data),w,c),u,!0)}return Bw}const jo=void 0;var eC=["en",[["a","p"],["AM","PM"],jo],[["AM","PM"],jo,jo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jo,"{1} 'at' {0}",jo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function j_(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let gd={};function $_(s){const a=function nC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=$w(a);if(u)return u;const c=a.split("-")[0];if(u=$w(c),u)return u;if("en"===c)return eC;throw new ge(701,!1)}function jw(s){return $_(s)[Rt.PluralCase]}function $w(s){return s in gd||(gd[s]=yn.ng&&yn.ng.common&&yn.ng.common.locales&&yn.ng.common.locales[s]),gd[s]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const md="en-US";let rC=md;function Sg(s,a,u,c,f){if(s=Y(s),Array.isArray(s))for(let m=0;m<s.length;m++)Sg(s[m],a,u,c,f);else{const m=rn(),w=ye();let b=Au(s)?s:Y(s.provide),C=Nv(s);const x=Dr(),N=1048575&x.providerIndexes,V=x.directiveStart,z=x.providerIndexes>>20;if(Au(s)||!s.multi){const X=new Js(C,f,Wh),be=W_(b,a,f?N:N+z,V);-1===be?(hu(ba(x,w),m,b),Ag(m,s,a.length),a.push(b),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),u.push(X),w.push(X)):(u[be]=X,w[be]=X)}else{const X=W_(b,a,N+z,V),be=W_(b,a,N,N+z),Ye=be>=0&&u[be];if(f&&!Ye||!f&&!(X>=0&&u[X])){hu(ba(x,w),m,b);const lt=function xC(s,a,u,c,f){const m=new Js(s,u,Wh);return m.multi=[],m.index=a,m.componentProviders=0,DC(m,f,c&&!u),m}(f?AC:SC,u.length,f,c,C);!f&&Ye&&(u[be].providerFactory=lt),Ag(m,s,a.length,0),a.push(b),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),u.push(lt),w.push(lt)}else Ag(m,s,X>-1?X:be,DC(u[f?be:X],C,!f&&c));!f&&c&&Ye&&u[be].componentProviders++}}}function Ag(s,a,u,c){const f=Au(a),m=function o_(s){return!!s.useClass}(a);if(f||m){const C=(m?Y(a.useClass):a).prototype.ngOnDestroy;if(C){const x=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const N=x.indexOf(u);-1===N?x.push(u,[c,C]):x[N+1].push(c,C)}else x.push(u,C)}}}function DC(s,a,u){return u&&s.componentProviders++,s.multi.push(a)-1}function W_(s,a,u,c){for(let f=u;f<c;f++)if(a[f]===s)return f;return-1}function SC(s,a,u,c){return zl(this.multi,[])}function AC(s,a,u,c){const f=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,b=os(u,u[nt],this.providerFactory.index,c);m=b.slice(0,w),zl(f,m);for(let C=w;C<b.length;C++)m.push(b[C])}else m=[],zl(f,m);return m}function zl(s,a){for(let u=0;u<s.length;u++)a.push((0,s[u])());return a}function Jw(s,a=[]){return u=>{u.providersResolver=(c,f)=>function Ax(s,a,u){const c=rn();if(c.firstCreatePass){const f=ai(s);Sg(u,c.data,c.blueprint,f,!0),Sg(a,c.data,c.blueprint,f,!1)}}(c,f?f(s):s,a)}}class gf{}class RC{}function xx(s,a){return new MC(s,a??null)}class MC extends gf{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yI(this);const c=Fr(a);this._bootstrapComponents=Na(c.bootstrap),this._r3Injector=Hv(a,u,[{provide:gf,useValue:this},{provide:jh,useValue:this.componentFactoryResolver}],pe(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Xw extends RC{constructor(a){super(),this.moduleType=a}create(a){return new MC(this.moduleType,a)}}class K_ extends gf{constructor(a,u,c){super(),this.componentFactoryResolver=new yI(this),this.instance=null;const f=new bb([...a,{provide:gf,useValue:this},{provide:jh,useValue:this.componentFactoryResolver}],u||u_(),c,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function xg(s,a,u=null){return new K_(s,a,u).injector}let mf=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=Vh(0,u.type),f=c.length>0?xg([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=qe({token:s,providedIn:"environment",factory:()=>new s(fn(nd))}),s})();function Va(s){s.getStandaloneInjector=a=>a.get(mf).getOrCreateStandaloneInjector(s)}function OC(s,a,u,c){return function Pg(s,a,u,c,f,m){const w=a+u;return Gi(s,w,f)?Fo(s,w+1,m?c.call(m,f):c(f)):vf(s,w+1)}(ye(),dr(),s,a,u,c)}function vf(s,a){const u=s[a];return u===Vt?void 0:u}function J_(s,a){const u=rn();let c;const f=s+wn;u.firstCreatePass?(c=function Lx(s,a){if(a)for(let u=a.length-1;u>=0;u--){const c=a[u];if(s===c.name)return c}}(a,u.pipeRegistry),u.data[f]=c,c.onDestroy&&(u.destroyHooks??(u.destroyHooks=[])).push(f,c.onDestroy)):c=u.data[f];const m=c.factory||(c.factory=vo(c.type)),w=kn(Wh);try{const b=wa(!1),C=m();return wa(b),function $A(s,a,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),a[u]=c}(u,ye(),f,C),C}finally{kn(w)}}function UC(s,a,u,c){const f=s+wn,m=ye(),w=Io(m,f);return function Id(s,a){return s[nt].data[a].pure}(m,f)?function LC(s,a,u,c,f,m,w){const b=a+u;return ad(s,b,f,m)?Fo(s,b+2,w?c.call(w,f,m):c(f,m)):vf(s,b+2)}(m,dr(),a,w.transform,u,c,w):w.transform(u,c)}function Og(s){return a=>{setTimeout(s,void 0,a)}}const ks=class o0 extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,c){let f=a,m=u||(()=>null),w=c;if(a&&"object"==typeof a){const C=a;f=C.next?.bind(C),m=C.error?.bind(C),w=C.complete?.bind(C)}this.__isAsync&&(m=Og(m),f&&(f=Og(f)),w&&(w=Og(w)));const b=super.subscribe({next:f,error:m,complete:w});return a instanceof J.w0&&a.add(b),b}};function Fg(){return this._results[Symbol.iterator]()}class ku{get changes(){return this._changes||(this._changes=new ks)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ku.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=Fg)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const c=this;c.dirty=!1;const f=function di(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function Lc(s,a,u){if(s.length!==a.length)return!1;for(let c=0;c<s.length;c++){let f=s[c],m=a[c];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(c._results,f,u))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ua=(()=>{class s{}return s.__NG_ELEMENT_ID__=jx,s})();const Wl=Ua,Bx=class extends Wl{constructor(a,u,c){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(a,u){const c=this._declarationTContainer.tView,f=p_(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null,u||null);f[ia]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[Vi];return null!==w&&(f[Vi]=w.createEmbeddedView(c)),Ru(c,f,a),new w_(f)}};function jx(){return Kl(Dr(),ye())}function Kl(s,a){return 4&s.type?new Bx(a,s,xu(s,a)):null}let X_=(()=>{class s{}return s.__NG_ELEMENT_ID__=$x,s})();function $x(){return Zl(Dr(),ye())}const ey=X_,wf=class extends ey{constructor(a,u,c){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=c}get element(){return xu(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){const a=rl(this._hostTNode,this._hostLView);if(Mc(a)){const u=tl(a,this._hostLView),c=au(a);return new ji(u[nt].data[c+8],u)}return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=a0(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-Ur}createEmbeddedView(a,u,c){let f,m;"number"==typeof c?f=c:null!=c&&(f=c.index,m=c.injector);const w=a.createEmbeddedView(u||{},m);return this.insert(w,f),w}createComponent(a,u,c,f,m){const w=a&&!function hl(s){return"function"==typeof s}(a);let b;if(w)b=u;else{const V=u||{};b=V.index,c=V.injector,f=V.projectableNodes,m=V.environmentInjector||V.ngModuleRef}const C=w?a:new ng(un(a)),x=c||this.parentInjector;if(!m&&null==C.ngModule){const z=(w?x:this.parentInjector).get(nd,null);z&&(m=z)}const N=C.create(x,f,void 0,m);return this.insert(N.hostView,b),N}insert(a,u){const c=a._lView,f=c[nt];if(function Gu(s){return Ui(s[Sn])}(c)){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const V=c[Sn],z=new wf(V,V[Xn],V[Sn]);z.detach(z.indexOf(a))}}const m=this._adjustIndex(u),w=this._lContainer;!function gv(s,a,u,c){const f=Ur+c,m=u.length;c>0&&(u[f-1][Kr]=a),c<m-Ur?(a[Kr]=u[f],fl(u,Ur+c,a)):(u.push(a),a[Kr]=null),a[Sn]=u;const w=a[ia];null!==w&&u!==w&&function mv(s,a){const u=s[Zr];a[Vr]!==a[Sn][Sn][Vr]&&(s[Qd]=!0),null===u?s[Zr]=[a]:u.push(a)}(w,a);const b=a[Vi];null!==b&&b.insertView(s),a[Bt]|=64}(f,c,w,m);const b=fr(m,w),C=c[jt],x=Mo(C,w[sa]);return null!==x&&function pv(s,a,u,c,f,m){c[bi]=f,c[Xn]=a,Zc(s,c,u,1,f,m)}(f,w[Xn],C,c,x,b),a.attachToViewContainerRef(),fl(Ef(w),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=a0(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),c=Np(this._lContainer,u);c&&(gu(Ef(this._lContainer),u),Ah(c[nt],c))}detach(a){const u=this._adjustIndex(a,-1),c=Np(this._lContainer,u);return c&&null!=gu(Ef(this._lContainer),u)?new w_(c):null}_adjustIndex(a,u=0){return a??this.length+u}};function a0(s){return s[_o]}function Ef(s){return s[_o]||(s[_o]=[])}function Zl(s,a){let u;const c=a[s.index];if(Ui(c))u=c;else{let f;if(8&s.type)f=qn(c);else{const m=a[jt];f=m.createComment("");const w=er(s,a);xa(m,Mo(m,w),f,function Jm(s,a){return s.nextSibling(a)}(m,w),!1)}a[s.index]=u=eg(c,a,f,s),iw(a,u)}return new wf(u,s,a)}class Lg{constructor(a){this.queryList=a,this.matches=null}clone(){return new Lg(this.queryList)}setDirty(){this.queryList.setDirty()}}class u0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const c=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<c;m++){const w=u.getByIndex(m);f.push(this.queries[w.indexInDeclarationView].clone())}return new u0(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==HC(a,u).matches&&this.queries[u].setDirty()}}class Mn{constructor(a,u,c=null){this.predicate=a,this.flags=u,this.read=c}}class Os{constructor(a=[]){this.queries=a}elementStart(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let c=0;c<this.length;c++){const f=null!==u?u.length:0,m=this.getByIndex(c).embeddedTView(a,f);m&&(m.indexInDeclarationView=c,null!==u?u.push(m):u=[m])}return null!==u?new Os(u):null}template(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Cd{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new Cd(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const m=c[f];this.matchTNodeWithReadOption(a,u,l0(u,m)),this.matchTNodeWithReadOption(a,u,xo(u,a,m,!1,!1))}else c===Ua?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,xo(u,a,c,!1,!1))}matchTNodeWithReadOption(a,u,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===$h||f===X_||f===Ua&&4&u.type)this.addMatch(u.index,-2);else{const m=xo(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,c)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function l0(s,a){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===a)return u[c+1];return null}function c0(s,a,u,c){return-1===u?function BC(s,a){return 11&s.type?xu(s,a):4&s.type?Kl(s,a):null}(a,s):-2===u?function Td(s,a,u){return u===$h?xu(a,s):u===Ua?Kl(a,s):u===X_?Zl(a,s):void 0}(s,a,c):os(s,s[nt],u,a)}function d0(s,a,u,c){const f=a[Vi].queries[c];if(null===f.matches){const m=s.data,w=u.matches,b=[];for(let C=0;C<w.length;C+=2){const x=w[C];b.push(x<0?null:c0(a,m[x],w[C+1],u.metadata.read))}f.matches=b}return f.matches}function Ba(s,a,u,c){const f=s.queries.getByIndex(u),m=f.matches;if(null!==m){const w=d0(s,a,f,u);for(let b=0;b<m.length;b+=2){const C=m[b];if(C>0)c.push(w[b/2]);else{const x=m[b+1],N=a[-C];for(let V=Ur;V<N.length;V++){const z=N[V];z[ia]===z[Sn]&&Ba(z[nt],z,x,c)}if(null!==N[Zr]){const V=N[Zr];for(let z=0;z<V.length;z++){const X=V[z];Ba(X[nt],X,x,c)}}}}}return c}function ty(s){const a=ye(),u=rn(),c=ah();Sc(c+1);const f=HC(u,c);if(s.dirty&&function Qa(s){return 4==(4&s[Bt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const m=f.crossesNgTemplate?Ba(u,a,c,[]):d0(u,a,f,c);s.reset(m,qp),s.notifyOnChanges()}return!0}return!1}function h0(s,a,u,c){const f=rn();if(f.firstCreatePass){const m=Dr();(function $C(s,a,u){null===s.queries&&(s.queries=new Os),s.queries.track(new Cd(a,u))})(f,new Mn(a,u,c),m.index),function Gx(s,a){const u=s.contentQueries||(s.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,a)}(f,s),2==(2&u)&&(f.staticContentQueries=!0)}!function jC(s,a,u){const c=new ku(4==(4&u));Qv(s,a,c,c.destroy),null===a[Vi]&&(a[Vi]=new u0),a[Vi].queries.push(new Lg(c))}(f,ye(),u)}function Vg(){return function Hx(s,a){return s[Vi].queries[a].queryList}(ye(),ah())}function HC(s,a){return s.queries.getByIndex(a)}function f0(s){return!!Fr(s)}function Rd(...s){}const oT=new tn("Application Initializer");let ay=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Rd,this.reject=Rd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(fg(m))u.push(m);else if(ww(m)){const w=new Promise((b,C)=>{m.subscribe({complete:b,error:C})});u.push(w)}}Promise.all(u).then(()=>{c()}).catch(f=>{this.reject(f)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(fn(oT,8))},s.\u0275prov=qe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const E0=new tn("AppId",{providedIn:"root",factory:function uy(){return`${ja()}${ja()}${ja()}`}});function ja(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const If=new tn("Platform Initializer"),oR=new tn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),aR=new tn("AnimationModuleType");let ly=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=qe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const cy=new tn("LocaleId",{providedIn:"root",factory:()=>Ce(cy,ht.Optional|ht.SkipSelf)||function aT(){return typeof $localize<"u"&&$localize.locale||md}()}),b0=new tn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class uT{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let lT=(()=>{class s{compileModuleSync(u){return new Xw(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),m=Na(Fr(u).declarations).reduce((w,b)=>{const C=un(b);return C&&w.push(new ng(C)),w},[]);return new uT(c,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=qe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const zg=(()=>Promise.resolve(0))();function C0(s){typeof Zone>"u"?zg.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class hs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ks(!1),this.onMicrotaskEmpty=new ks(!1),this.onStable=new ks(!1),this.onError=new ks(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&u,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function uR(){let s=yn.requestAnimationFrame,a=yn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function lR(s){const a=()=>{!function hT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(yn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,S0(s),s.isCheckStableRunning=!0,D0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),S0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,f,m,w,b)=>{try{return A0(s),u.invokeTask(f,m,w,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&a(),gy(s)}},onInvoke:(u,c,f,m,w,b,C)=>{try{return A0(s),u.invoke(f,m,w,b,C)}finally{s.shouldCoalesceRunChangeDetection&&a(),gy(s)}},onHasTask:(u,c,f,m)=>{u.hasTask(f,m),c===f&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,S0(s),D0(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,c,f,m)=>(u.handleError(f,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hs.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(hs.isInAngularZone())throw new ge(909,!1)}run(a,u,c){return this._inner.run(a,u,c)}runTask(a,u,c,f){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+f,a,T0,Rd,Rd);try{return m.runTask(w,u,c)}finally{m.cancelTask(w)}}runGuarded(a,u,c){return this._inner.runGuarded(a,u,c)}runOutsideAngular(a){return this._outer.run(a)}}const T0={};function D0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function S0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function A0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function gy(s){s._nesting--,D0(s)}class x0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ks,this.onMicrotaskEmpty=new ks,this.onStable=new ks,this.onError=new ks}run(a,u,c){return a.apply(u,c)}runGuarded(a,u,c){return a.apply(u,c)}runOutsideAngular(a){return a()}runTask(a,u,c,f){return a.apply(u,c)}}const my=new tn(""),Wg=new tn("");let R0,Md=(()=>{class s{constructor(u,c,f){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,R0||(function fT(s){R0=s}(f),f.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hs.assertNotInAngularZone(),C0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())C0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,f){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,f){return[]}}return s.\u0275fac=function(u){return new(u||s)(fn(hs),fn(_y),fn(Wg))},s.\u0275prov=qe({token:s,factory:s.\u0275fac}),s})(),_y=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return R0?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=qe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const lo=!1;let Ou=null;const pT=new tn("AllowMultipleToken"),Nd=new tn("PlatformDestroyListeners"),yy=new tn("appBootstrapListener");class M0{constructor(a,u){this.name=a,this.token=u}}function Ho(s,a,u=[]){const c=`Platform: ${a}`,f=new tn(c);return(m=[])=>{let w=Zg();if(!w||w.injector.get(pT,!1)){const b=[...u,...m,{provide:f,useValue:!0}];s?s(b):function vy(s){if(Ou&&!Ou.get(pT,!1))throw new ge(400,!1);Ou=s;const a=s.get(Cf);(function mT(s){const a=s.get(If,null);a&&a.forEach(u=>u())})(s)}(function _T(s=[],a){return Gh.create({name:a,providers:[{provide:Ol,useValue:"platform"},{provide:Nd,useValue:new Set([()=>Ou=null])},...s]})}(b,c))}return function Kg(s){const a=Zg();if(!a)throw new ge(401,!1);return a}()}}function Zg(){return Ou?.get(Cf)??null}let Cf=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const f=function yT(s,a){let u;return u="noop"===s?new x0:("zone.js"===s?void 0:s)||new hs(a),u}(c?.ngZone,function Tf(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),m=[{provide:hs,useValue:f}];return f.run(()=>{const w=Gh.create({providers:m,parent:this.injector,name:u.moduleType.name}),b=u.create(w),C=b.injector.get(zp,null);if(!C)throw new ge(402,!1);return f.runOutsideAngular(()=>{const x=f.onError.subscribe({next:N=>{C.handleError(N)}});b.onDestroy(()=>{Pd(this._modules,b),x.unsubscribe()})}),function Fs(s,a,u){try{const c=u();return fg(c)?c.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):c}catch(c){throw a.runOutsideAngular(()=>s.handleError(c)),c}}(C,f,()=>{const x=b.injector.get(ay);return x.runInitializers(),x.donePromise.then(()=>(function Gw(s){le(s,"Expected localeId to be defined"),"string"==typeof s&&(rC=s.toLowerCase().replace(/_/g,"-"))}(b.injector.get(cy,md)||md),this._moduleDoBootstrap(b),b))})})}bootstrapModule(u,c=[]){const f=N0({},c);return function cR(s,a,u){const c=new Xw(u);return Promise.resolve(c)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const c=u.injector.get(Ey);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new ge(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Nd,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(fn(Gh))},s.\u0275prov=qe({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function N0(s,a){return Array.isArray(a)?a.reduce(N0,s):{...s,...a}}let Ey=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,f){this._zone=u,this._injector=c,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new F.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),w=new F.y(b=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{hs.assertNotInAngularZone(),C0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{hs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{C.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ae.T)(m,w.pipe((0,oe.B)()))}bootstrap(u,c){const f=u instanceof Cb;if(!this._injector.get(ay).done){!f&&vs(u);throw new ge(405,lo)}let w;w=f?u:this._injector.get(jh).resolveComponentFactory(u),this.componentTypes.push(w.componentType);const b=function dR(s){return s.isBoundToModule}(w)?void 0:this._injector.get(gf),x=w.create(Gh.NULL,[],c||w.selector,b),N=x.location.nativeElement,V=x.injector.get(my,null);return V?.registerApplication(N),x.onDestroy(()=>{this.detachView(x.hostView),Pd(this.components,x),V?.unregisterApplication(N)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Pd(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(yy,[]);c.push(...this._bootstrapListeners),c.forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Pd(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ge(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(fn(hs),fn(nd),fn(zp))},s.\u0275prov=qe({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Pd(s,a){const u=s.indexOf(a);u>-1&&s.splice(u,1)}function vT(){return!1}let pR=(()=>{class s{}return s.__NG_ELEMENT_ID__=ET,s})();function ET(s){return function Yg(s,a,u){if(Bi(s)&&!u){const c=cr(s.index,a);return new w_(c,c)}return 47&s.type?new w_(a[Vr],a):null}(Dr(),ye(),16==(16&s))}class DT{constructor(){}supports(a){return od(a)}create(a){return new wR(a)}}const Sf=(s,a)=>a;class wR{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Sf}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,c=this._removalsHead,f=0,m=null;for(;u||c;){const w=!c||u&&u.currentIndex<Qg(c,f,m)?u:c,b=Qg(w,f,m),C=w.currentIndex;if(w===c)f--,c=c._nextRemoved;else if(u=u._next,null==w.previousIndex)f++;else{m||(m=[]);const x=b-f,N=C-f;if(x!=N){for(let z=0;z<x;z++){const X=z<m.length?m[z]:m[z]=0,be=X+z;N<=be&&be<x&&(m[z]=X+1)}m[w.previousIndex]=N-x}}b!==C&&a(w,b,C)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!od(a))throw new ge(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,w,u=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let b=0;b<this.length;b++)m=a[b],w=this._trackByFn(b,m),null!==u&&Object.is(u.trackById,w)?(c&&(u=this._verifyReinsertion(u,m,w,b)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,w,b),c=!0),u=u._next}else f=0,function OA(s,a){if(Array.isArray(s))for(let u=0;u<s.length;u++)a(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)a(c.value)}}(a,b=>{w=this._trackByFn(f,b),null!==u&&Object.is(u.trackById,w)?(c&&(u=this._verifyReinsertion(u,b,w,f)),Object.is(u.item,b)||this._addIdentityChange(u,b)):(u=this._mismatch(u,b,w,f),c=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,c,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new ST(u,c),m,f),a}_verifyReinsertion(a,u,c,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,c),this._addToMoves(a,c),a}_moveAfter(a,u,c){return this._unlink(a),this._insertAfter(a,u,c),this._addToMoves(a,c),a}_addAfter(a,u,c){return this._insertAfter(a,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,c){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new B0),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,c=a._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new B0),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class ST{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AT{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const u=a._prevDup,c=a._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class B0{constructor(){this.map=new Map}put(a){const u=a.trackById;let c=this.map.get(u);c||(c=new AT,this.map.set(u,c)),c.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Qg(s,a,u){const c=s.previousIndex;if(null===c)return c;let f=0;return u&&c<u.length&&(f=u[c]),c+a+f}class Iy{constructor(){}supports(a){return a instanceof Map||T_(a)}create(){return new j0}}class j0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||T_(a)))throw new ge(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,c);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const c=a._prev;return u._next=a,u._prev=c,a._prev=u,c&&(c._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,w=f._next;return m&&(m._next=w),w&&(w._prev=m),f._next=null,f._prev=null,f}const c=new ER(a);return this._records.set(a,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(c=>u(a[c],c))}}class ER{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xT(){return new Jg([new DT])}let Jg=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const f=c.factories.slice();u=u.concat(f)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||xT()),deps:[[s,new D,new ml]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(null!=c)return c;throw new ge(901,!1)}}return s.\u0275prov=qe({token:s,providedIn:"root",factory:xT}),s})();function $0(){return new H0([new Iy])}let H0=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const f=c.factories.slice();u=u.concat(f)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||$0()),deps:[[s,new D,new ml]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(c)return c;throw new ge(901,!1)}}return s.\u0275prov=qe({token:s,providedIn:"root",factory:$0}),s})();const fs=Ho(null,"core",[]);let Cy=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(fn(Ey))},s.\u0275mod=ta({type:s}),s.\u0275inj=vt({}),s})();function Ql(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(gt,De,L)=>{L.d(De,{Z:()=>We});var d=L(2090),J=L(4859),F=L(9681),ae=L(1877);class oe{constructor(ge,xe){this._delegate=ge,this.firebase=xe,(0,F._addComponent)(ge,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ge,xe=F._DEFAULT_ENTRY_NAME){var Ae;this._delegate.checkDestroyed();const ke=this._delegate.container.getProvider(ge);return!ke.isInitialized()&&"EXPLICIT"===(null===(Ae=ke.getComponent())||void 0===Ae?void 0:Ae.instantiationMode)&&ke.initialize(),ke.getImmediate({identifier:xe})}_removeServiceInstance(ge,xe=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(xe)}_addComponent(ge){(0,F._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,F._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function de(){const ut=function pe(ut){const ge={},xe={__esModule:!0,initializeApp:function Te(Pe,$={}){const Ee=F.initializeApp(Pe,$);if((0,d.r3)(ge,Ee.name))return ge[Ee.name];const Be=new ut(Ee,xe);return ge[Ee.name]=Be,Be},app:ke,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Re(Pe){const $=Pe.name,Ee=$.replace("-compat","");if(F._registerComponent(Pe)&&"PUBLIC"===Pe.type){const Be=(Ze=ke())=>{if("function"!=typeof Ze[Ee])throw me.create("invalid-app-argument",{appName:$});return Ze[Ee]()};void 0!==Pe.serviceProps&&(0,d.ZB)(Be,Pe.serviceProps),xe[Ee]=Be,ut.prototype[Ee]=function(...Ze){return this._getService.bind(this,$).apply(this,Pe.multipleInstances?Ze:[])}}return"PUBLIC"===Pe.type?xe[Ee]:null},removeApp:function Ae(Pe){delete ge[Pe]},useAsService:function Oe(Pe,$){return"serverAuth"===$?null:$},modularAPIs:F}};function ke(Pe){if(!(0,d.r3)(ge,Pe=Pe||F._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Pe});return ge[Pe]}return xe.default=xe,Object.defineProperty(xe,"apps",{get:function Ie(){return Object.keys(ge).map(Pe=>ge[Pe])}}),ke.App=ut,xe}(oe);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function ge(xe){(0,d.ZB)(ut,xe)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ut}(),G=new ae.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=q;!function Se(ut){(0,F.registerVersion)("@firebase/app-compat","0.2.1",ut)}()},9681:(gt,De,L)=>{L.r(De),L.d(De,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>ur,_DEFAULT_ENTRY_NAME:()=>se,_addComponent:()=>Fe,_addOrOverwriteComponent:()=>Le,_apps:()=>le,_clearComponents:()=>vt,_components:()=>ee,_getProvider:()=>qe,_registerComponent:()=>yt,_removeServiceInstance:()=>zt,deleteApp:()=>ri,getApp:()=>xn,getApps:()=>Vn,initializeApp:()=>lr,onLog:()=>es,registerVersion:()=>ht,setLogLevel:()=>po});var d=L(5861),J=L(4859),F=L(1877),ae=L(2090),oe=L(8766);class ie{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(it=>{if(function me(st){return"VERSION"===st.getComponent()?.type}(it)){const Nt=it.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(it=>it).join(" ")}}const pe="@firebase/app",q=new F.Yd("@firebase/app"),se="[DEFAULT]",he={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},le=new Map,ee=new Map;function Fe(st,Ce){try{st.container.addComponent(Ce)}catch(it){q.debug(`Component ${Ce.name} failed to register with FirebaseApp ${st.name}`,it)}}function Le(st,Ce){st.container.addOrOverwriteComponent(Ce)}function yt(st){const Ce=st.name;if(ee.has(Ce))return q.debug(`There were multiple attempts to register component ${Ce}.`),!1;ee.set(Ce,st);for(const it of le.values())Fe(it,st);return!0}function qe(st,Ce){const it=st.container.getProvider("heartbeat").getImmediate({optional:!0});return it&&it.triggerHeartbeat(),st.container.getProvider(Ce)}function zt(st,Ce,it=se){qe(st,Ce).clearInstance(it)}function vt(){ee.clear()}const an=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Jt{constructor(Ce,it,Nt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},it),this._name=it.name,this._automaticDataCollectionEnabled=it.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}const ur="9.16.0";function lr(st,Ce={}){let it=st;"object"!=typeof Ce&&(Ce={name:Ce});const Nt=Object.assign({name:se,automaticDataCollectionEnabled:!1},Ce),Mt=Nt.name;if("string"!=typeof Mt||!Mt)throw an.create("bad-app-name",{appName:String(Mt)});if(it||(it=(0,ae.aH)()),!it)throw an.create("no-options");const Wt=le.get(Mt);if(Wt){if((0,ae.vZ)(it,Wt.options)&&(0,ae.vZ)(Nt,Wt.config))return Wt;throw an.create("duplicate-app",{appName:Mt})}const H=new J.H0(Mt);for(const W of ee.values())H.addComponent(W);const j=new Jt(it,Nt,H);return le.set(Mt,j),j}function xn(st=se){const Ce=le.get(st);if(!Ce&&st===se)return lr();if(!Ce)throw an.create("no-app",{appName:st});return Ce}function Vn(){return Array.from(le.values())}function ri(st){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,d.Z)(function*(st){const Ce=st.name;le.has(Ce)&&(le.delete(Ce),yield Promise.all(st.container.getProviders().map(it=>it.delete())),st.isDeleted=!0)})).apply(this,arguments)}function ht(st,Ce,it){var Nt;let Mt=null!==(Nt=he[st])&&void 0!==Nt?Nt:st;it&&(Mt+=`-${it}`);const Wt=Mt.match(/\s|\//),H=Ce.match(/\s|\//);if(Wt||H){const j=[`Unable to register library "${Mt}" with version "${Ce}":`];return Wt&&j.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),Wt&&H&&j.push("and"),H&&j.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void q.warn(j.join(" "))}yt(new J.wA(`${Mt}-version`,()=>({library:Mt,version:Ce}),"VERSION"))}function es(st,Ce){if(null!==st&&"function"!=typeof st)throw an.create("invalid-log-argument");(0,F.Am)(st,Ce)}function po(st){(0,F.Ub)(st)}const kn="firebase-heartbeat-database",Ei=1,ii="firebase-heartbeat-store";let yn=null;function En(){return yn||(yn=(0,oe.X3)(kn,Ei,{upgrade:(st,Ce)=>{0===Ce&&st.createObjectStore(ii)}}).catch(st=>{throw an.create("idb-open",{originalErrorMessage:st.message})})),yn}function xt(){return(xt=(0,d.Z)(function*(st){try{return(yield En()).transaction(ii).objectStore(ii).get(Tn(st))}catch(Ce){if(Ce instanceof ae.ZR)q.warn(Ce.message);else{const it=an.create("idb-get",{originalErrorMessage:Ce?.message});q.warn(it.message)}}})).apply(this,arguments)}function Wr(st,Ce){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,d.Z)(function*(st,Ce){try{const Nt=(yield En()).transaction(ii,"readwrite");return yield Nt.objectStore(ii).put(Ce,Tn(st)),Nt.done}catch(it){if(it instanceof ae.ZR)q.warn(it.message);else{const Nt=an.create("idb-set",{originalErrorMessage:it?.message});q.warn(Nt.message)}}})).apply(this,arguments)}function Tn(st){return`${st.name}!${st.options.appId}`}class ea{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const it=this.container.getProvider("app").getImmediate();this._storage=new en(it),this._heartbeatsCachePromise=this._storage.read().then(Nt=>(this._heartbeatsCache=Nt,Nt))}triggerHeartbeat(){var Ce=this;return(0,d.Z)(function*(){const Nt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=ln();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!Ce._heartbeatsCache.heartbeats.some(Wt=>Wt.date===Mt))return Ce._heartbeatsCache.heartbeats.push({date:Mt,agent:Nt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Wt=>{const H=new Date(Wt.date).valueOf();return Date.now()-H<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,d.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const it=ln(),{heartbeatsToSend:Nt,unsentEntries:Mt}=function si(st,Ce=1024){const it=[];let Nt=st.slice();for(const Mt of st){const Wt=it.find(H=>H.agent===Mt.agent);if(Wt){if(Wt.dates.push(Mt.date),ts(it)>Ce){Wt.dates.pop();break}}else if(it.push({agent:Mt.agent,dates:[Mt.date]}),ts(it)>Ce){it.pop();break}Nt=Nt.slice(1)}return{heartbeatsToSend:it,unsentEntries:Nt}}(Ce._heartbeatsCache.heartbeats),Wt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Nt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=it,Mt.length>0?(Ce._heartbeatsCache.heartbeats=Mt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Wt})()}}function ln(){return(new Date).toISOString().substring(0,10)}class en{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,d.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function It(st){return xt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var it=this;return(0,d.Z)(function*(){var Nt;if(yield it._canUseIndexedDBPromise){const Wt=yield it.read();return Wr(it.app,{lastSentHeartbeatDate:null!==(Nt=Ce.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Wt.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var it=this;return(0,d.Z)(function*(){var Nt;if(yield it._canUseIndexedDBPromise){const Wt=yield it.read();return Wr(it.app,{lastSentHeartbeatDate:null!==(Nt=Ce.lastSentHeartbeatDate)&&void 0!==Nt?Nt:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...Ce.heartbeats]})}})()}}function ts(st){return(0,ae.L)(JSON.stringify({version:2,heartbeats:st})).length}!function fn(st){yt(new J.wA("platform-logger",Ce=>new ie(Ce),"PRIVATE")),yt(new J.wA("heartbeat",Ce=>new ea(Ce),"PRIVATE")),ht(pe,"0.9.1",st),ht(pe,"0.9.1","esm2017"),ht("fire-js","")}("")},4859:(gt,De,L)=>{L.d(De,{H0:()=>pe,wA:()=>F,zt:()=>oe});var d=L(5861),J=L(2090);class F{constructor(q,G,Y){this.name=q,this.instanceFactory=G,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const ae="[DEFAULT]";class oe{constructor(q,G){this.name=q,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const G=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(G)){const Y=new J.BH;if(this.instancesDeferred.set(G,Y),this.isInitialized(G)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:G});je&&Y.resolve(je)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(q){var G;const Y=this.normalizeInstanceIdentifier(q?.identifier),je=null!==(G=q?.optional)&&void 0!==G&&G;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Se){if(je)return null;throw Se}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function me(de){return"EAGER"===de.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[G,Y]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(G);try{const Se=this.getOrInitializeService({instanceIdentifier:je});Y.resolve(Se)}catch{}}}}clearInstance(q=ae){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,d.Z)(function*(){const G=Array.from(q.instances.values());yield Promise.all([...G.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...G.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=ae){return this.instances.has(q)}getOptions(q=ae){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:G={}}=q,Y=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Y,options:G});for(const[Se,We]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Se)&&We.resolve(je);return je}onInit(q,G){var Y;const je=this.normalizeInstanceIdentifier(G),Se=null!==(Y=this.onInitCallbacks.get(je))&&void 0!==Y?Y:new Set;Se.add(q),this.onInitCallbacks.set(je,Se);const We=this.instances.get(je);return We&&q(We,je),()=>{Se.delete(q)}}invokeOnInitCallbacks(q,G){const Y=this.onInitCallbacks.get(G);if(Y)for(const je of Y)try{je(q,G)}catch{}}getOrInitializeService({instanceIdentifier:q,options:G={}}){let Y=this.instances.get(q);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(de=q,de===ae?void 0:de),options:G}),this.instances.set(q,Y),this.instancesOptions.set(q,G),this.invokeOnInitCallbacks(Y,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,Y)}catch{}var de;return Y||null}normalizeInstanceIdentifier(q=ae){return this.component?this.component.multipleInstances?q:ae:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const G=this.getProvider(q.name);if(G.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);G.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const G=new oe(q,this);return this.providers.set(q,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,De,L)=>{L.d(De,{Am:()=>de,Ub:()=>pe,Yd:()=>me,in:()=>J});const d=[];var J=(()=>{return(q=J||(J={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",J;var q})();const F={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ae=J.INFO,oe={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ie=(q,G,...Y)=>{if(G<q.logLevel)return;const je=(new Date).toISOString(),Se=oe[G];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Se](`[${je}]  ${q.name}:`,...Y)};class me{constructor(G){this.name=G,this._logLevel=ae,this._logHandler=ie,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in J))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?F[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...G),this._logHandler(this,J.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...G),this._logHandler(this,J.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,J.INFO,...G),this._logHandler(this,J.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,J.WARN,...G),this._logHandler(this,J.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...G),this._logHandler(this,J.ERROR,...G)}}function pe(q){d.forEach(G=>{G.setLogLevel(q)})}function de(q,G){for(const Y of d){let je=null;G&&G.level&&(je=F[G.level]),Y.userLogHandler=null===q?null:(Se,We,...ut)=>{const ge=ut.map(xe=>{if(null==xe)return null;if("string"==typeof xe)return xe;if("number"==typeof xe||"boolean"==typeof xe)return xe.toString();if(xe instanceof Error)return xe.message;try{return JSON.stringify(xe)}catch{return null}}).filter(xe=>xe).join(" ");We>=(je??Se.logLevel)&&q({level:J[We].toLowerCase(),message:ge,args:ut,type:Se.name})}}}},259:(gt,De,L)=>{L.d(De,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=L(9681);(0,d.registerVersion)("firebase","9.16.0","app")},9260:(gt,De,L)=>{L.d(De,{Z:()=>d.Z});var d=L(3942);d.Z.registerVersion("firebase","9.16.0","app-compat")},750:(gt,De,L)=>{L.r(De);var d=L(5861),J=L(3942),F=L(2090),ae=L(9681),oe=L(1877),ie=L(7582),me=L(4859);const de={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y_EMAIL_SIGNIN="EMAIL_SIGNIN",Y_PASSWORD_RESET="PASSWORD_RESET",Y_RECOVER_EMAIL="RECOVER_EMAIL",Y_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Y_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Y_VERIFY_EMAIL="VERIFY_EMAIL";const We=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ut=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new oe.Yd("@firebase/auth");function ke(v,...p){Ae.logLevel<=oe.in.ERROR&&Ae.error(`Auth (${ae.SDK_VERSION}): ${v}`,...p)}function Te(v,...p){throw Pe(v,...p)}function Ie(v,...p){return Pe(v,...p)}function Re(v,p,_){const E=Object.assign(Object.assign({},ut()),{[p]:_});return new F.LL("auth","Firebase",E).create(p,{appName:v.name})}function Oe(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Te(v,"argument-error"),Re(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pe(v,...p){if("string"!=typeof v){const _=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(_,...E)}return ge.create(v,...p)}function $(v,p,..._){if(!v)throw Pe(p,..._)}function Ee(v){const p="INTERNAL ASSERTION FAILED: "+v;throw ke(p),new Error(p)}function Be(v,p){v||Ee(p)}const Ze=new Map;function mt(v){Be(v instanceof Function,"Expected a class definition");let p=Ze.get(v);return p?(Be(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Ze.set(v,p),p)}function _r(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Qn(){return"http:"===ys()||"https:"===ys()}function ys(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class le{constructor(p,_){this.shortDelay=p,this.longDelay=_,Be(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function se(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qn()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ee(v,p){Be(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Fe{static initialize(p,_,E){this.fetchImpl=p,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Le={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},yt=new le(3e4,6e4);function qe(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function zt(v,p,_,E){return vt.apply(this,arguments)}function vt(){return(vt=(0,d.Z)(function*(v,p,_,E,A={}){return Qt(v,A,(0,d.Z)(function*(){let P={},K={};E&&("GET"===p?K=E:P={body:JSON.stringify(E)});const fe=(0,F.xO)(Object.assign({key:v.config.apiKey},K)).slice(1),He=yield v._getAdditionalHeaders();return He["Content-Type"]="application/json",v.languageCode&&(He["X-Firebase-Locale"]=v.languageCode),Fe.fetch()(lr(v,v.config.apiHost,_,fe),Object.assign({method:p,headers:He,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Qt(v,p,_){return an.apply(this,arguments)}function an(){return(an=(0,d.Z)(function*(v,p,_){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},Le),p);try{const A=new xn(v),P=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const K=yield P.json();if("needConfirmation"in K)throw Vn(v,"account-exists-with-different-credential",K);if(P.ok&&!("errorMessage"in K))return K;{const fe=P.ok?K.errorMessage:K.error.message,[He,Xe]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw Vn(v,"credential-already-in-use",K);if("EMAIL_EXISTS"===He)throw Vn(v,"email-already-in-use",K);if("USER_DISABLED"===He)throw Vn(v,"user-disabled",K);const At=E[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Re(v,At,Xe);Te(v,At)}}catch(A){if(A instanceof F.ZR)throw A;Te(v,"network-request-failed")}})).apply(this,arguments)}function Jt(v,p,_,E){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(v,p,_,E,A={}){const P=yield zt(v,p,_,E,A);return"mfaPendingCredential"in P&&Te(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function lr(v,p,_,E){const A=`${p}${_}?${E}`;return v.config.emulator?ee(v.config,A):`${v.config.apiScheme}://${A}`}class xn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Ie(this.auth,"network-request-failed")),yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(v,p,_){const E={appName:v.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const A=Ie(v,p,E);return A.customData._tokenResponse=_,A}function Cn(){return(Cn=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function es(){return(es=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function kn(){return(kn=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Ei(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function En(){return(En=(0,d.Z)(function*(v,p=!1){const _=(0,F.m9)(v),E=yield _.getIdToken(p),A=xt(E);$(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const P="object"==typeof A.firebase?A.firebase:void 0,K=P?.sign_in_provider;return{claims:A,token:E,authTime:Ei(It(A.auth_time)),issuedAtTime:Ei(It(A.iat)),expirationTime:Ei(It(A.exp)),signInProvider:K||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function It(v){return 1e3*Number(v)}function xt(v){const[p,_,E]=v.split(".");if(void 0===p||void 0===_||void 0===E)return ke("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,F.tV)(_);return A?JSON.parse(A):(ke("Failed to decode base64 JWT payload"),null)}catch(A){return ke("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Hn(v,p){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(E){throw E instanceof F.ZR&&function zs({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class Cr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),E)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&p.schedule(!0))}p.schedule()})()}}class ea{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ei(this.lastLoginAt),this.creationTime=Ei(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ln(v){return si.apply(this,arguments)}function si(){return si=(0,d.Z)(function*(v){var p;const _=v.auth,E=yield v.getIdToken(),A=yield Hn(v,function po(v,p){return kn.apply(this,arguments)}(_,{idToken:E}));$(A?.users.length,_,"internal-error");const P=A.users[0];v._notifyReloadListener(P);const K=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?function st(v){return v.map(p=>{var{providerId:_}=p,E=(0,ie._T)(p,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(P.providerUserInfo):[],fe=function fn(v,p){return[...v.filter(E=>!p.some(A=>A.providerId===E.providerId)),...p]}(v.providerData,K),At=!!v.isAnonymous&&!(v.email&&P.passwordHash||fe?.length),Et={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:fe,metadata:new ea(P.createdAt,P.lastLoginAt),isAnonymous:At};Object.assign(v,Et)}),si.apply(this,arguments)}function ts(){return(ts=(0,d.Z)(function*(v){const p=(0,F.m9)(v);yield ln(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(v,p){const _=yield Qt(v,{},(0,d.Z)(function*(){const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:P}=v.config,K=lr(v,A,"/v1/token",`key=${P}`),fe=yield v._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",Fe.fetch()(K,{method:"POST",headers:fe,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){$(p.idToken,"internal-error"),$(typeof p.idToken<"u","internal-error"),$(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Wr(v){const p=xt(v);return $(p,"internal-error"),$(typeof p.exp<"u","internal-error"),$(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var E=this;return(0,d.Z)(function*(){return $(!E.accessToken||E.refreshToken,p,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var E=this;return(0,d.Z)(function*(){const{accessToken:A,refreshToken:P,expiresIn:K}=yield function Ce(v,p){return it.apply(this,arguments)}(p,_);E.updateTokensAndExpiration(A,P,Number(K))})()}updateTokensAndExpiration(p,_,E){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,_){const{refreshToken:E,accessToken:A,expirationTime:P}=_,K=new Nt;return E&&($("string"==typeof E,"internal-error",{appName:p}),K.refreshToken=E),A&&($("string"==typeof A,"internal-error",{appName:p}),K.accessToken=A),P&&($("number"==typeof P,"internal-error",{appName:p}),K.expirationTime=P),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Nt,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function Mt(v,p){$("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Wt{constructor(p){var{uid:_,auth:E,stsTokenManager:A}=p,P=(0,ie._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new ea(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,d.Z)(function*(){const E=yield Hn(_,_.stsTokenManager.getToken(_.auth,p));return $(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(p){return function yn(v){return En.apply(this,arguments)}(this,p)}reload(){return function en(v){return ts.apply(this,arguments)}(this)}_assign(p){this!==p&&($(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Wt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var E=this;return(0,d.Z)(function*(){let A=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),A=!0),_&&(yield ln(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,d.Z)(function*(){const _=yield p.getIdToken();return yield Hn(p,function ri(v,p){return Cn.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var E,A,P,K,fe,He,Xe,At;const Et=null!==(E=_.displayName)&&void 0!==E?E:void 0,Kn=null!==(A=_.email)&&void 0!==A?A:void 0,us=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Nl=null!==(K=_.photoURL)&&void 0!==K?K:void 0,Vp=null!==(fe=_.tenantId)&&void 0!==fe?fe:void 0,Ra=null!==(He=_._redirectEventId)&&void 0!==He?He:void 0,ls=null!==(Xe=_.createdAt)&&void 0!==Xe?Xe:void 0,Pl=null!==(At=_.lastLoginAt)&&void 0!==At?At:void 0,{uid:Ma,emailVerified:Up,isAnonymous:Bp,providerData:Oh,stsTokenManager:r_}=_;$(Ma&&r_,p,"internal-error");const wv=Nt.fromJSON(this.name,r_);$("string"==typeof Ma,p,"internal-error"),Mt(Et,p.name),Mt(Kn,p.name),$("boolean"==typeof Up,p,"internal-error"),$("boolean"==typeof Bp,p,"internal-error"),Mt(us,p.name),Mt(Nl,p.name),Mt(Vp,p.name),Mt(Ra,p.name),Mt(ls,p.name),Mt(Pl,p.name);const kl=new Wt({uid:Ma,auth:p,email:Kn,emailVerified:Up,displayName:Et,isAnonymous:Bp,photoURL:Nl,phoneNumber:us,tenantId:Vp,stsTokenManager:wv,createdAt:ls,lastLoginAt:Pl});return Oh&&Array.isArray(Oh)&&(kl.providerData=Oh.map(Fh=>Object.assign({},Fh))),Ra&&(kl._redirectEventId=Ra),kl}static _fromIdTokenResponse(p,_,E=!1){return(0,d.Z)(function*(){const A=new Nt;A.updateFromServerResponse(_);const P=new Wt({uid:_.localId,auth:p,stsTokenManager:A,isAnonymous:E});return yield ln(P),P})()}}const j=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,E){var A=this;return(0,d.Z)(function*(){A.storage[_]=E})()}_get(_){var E=this;return(0,d.Z)(function*(){const A=E.storage[_];return void 0===A?null:A})()}_remove(_){var E=this;return(0,d.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return v.type="NONE",v})();function W(v,p,_){return`firebase:${v}:${p}:${_}`}class _e{constructor(p,_,E){this.persistence=p,this.auth=_,this.userKey=E;const{config:A,name:P}=this.auth;this.fullUserKey=W(this.userKey,A.apiKey,P),this.fullPersistenceKey=W("persistence",A.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Wt._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,d.Z)(function*(){if(_.persistence===p)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,E="authUser"){return(0,d.Z)(function*(){if(!_.length)return new _e(mt(j),p,E);const A=(yield Promise.all(_.map(function(){var Xe=(0,d.Z)(function*(At){if(yield At._isAvailable())return At});return function(At){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let P=A[0]||mt(j);const K=W(E,p.config.apiKey,p.name);let fe=null;for(const Xe of _)try{const At=yield Xe._get(K);if(At){const Et=Wt._fromJSON(p,At);Xe!==P&&(fe=Et),P=Xe;break}}catch{}const He=A.filter(Xe=>Xe._shouldAllowMigration);return P._shouldAllowMigration&&He.length?(P=He[0],fe&&(yield P._set(K,fe.toJSON())),yield Promise.all(_.map(function(){var Xe=(0,d.Z)(function*(At){if(At!==P)try{yield At._remove(K)}catch{}});return function(At){return Xe.apply(this,arguments)}}())),new _e(P,p,E)):new _e(P,p,E)})()}}function ne(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Tr(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(tt(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Or(p))return"Blackberry";if(Ft(p))return"Webos";if(Je(p))return"Safari";if((p.includes("chrome/")||cn(p))&&!p.includes("edge/"))return"Chrome";if(Dn(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function tt(v=(0,F.z$)()){return/firefox\//i.test(v)}function Je(v=(0,F.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function cn(v=(0,F.z$)()){return/crios\//i.test(v)}function Tr(v=(0,F.z$)()){return/iemobile/i.test(v)}function Dn(v=(0,F.z$)()){return/android/i.test(v)}function Or(v=(0,F.z$)()){return/blackberry/i.test(v)}function Ft(v=(0,F.z$)()){return/webos/i.test(v)}function Gn(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function np(v=(0,F.z$)()){return Gn(v)||Dn(v)||Ft(v)||Or(v)||/windows phone/i.test(v)||Tr(v)}function ta(v,p=[]){let _;switch(v){case"Browser":_=ne((0,F.z$)());break;case"Worker":_=`${ne((0,F.z$)())}-${v}`;break;default:_=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${ae.SDK_VERSION}/${E}`}class Zd{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const E=P=>new Promise((K,fe)=>{try{K(p(P))}catch(He){fe(He)}});E.onAbort=_,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===p)return;const E=[];try{for(const A of _.queue)yield A(p),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const P of E)try{P()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Yd{constructor(p,_,E){this.app=p,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dc(this),this.idTokenSubscription=new dc(this),this.beforeStateQueue=new Zd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,_){var E=this;return _&&(this._popupRedirectResolver=mt(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var A,P;if(!E._deleted&&(E.persistenceManager=yield _e.create(E,p),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,d.Z)(function*(){var E;const A=yield _.assertedPersistence.getCurrentUser();let P=A,K=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const fe=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,He=P?._redirectEventId,Xe=yield _.tryRedirectSignIn(p);(!fe||fe===He)&&Xe?.user&&(P=Xe.user,K=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(K)try{yield _.beforeStateQueue.runMiddleware(P)}catch(fe){P=A,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(fe))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return $(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var _=this;return(0,d.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,d.Z)(function*(){try{yield ln(p)}catch(E){if("auth/network-request-failed"!==E?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function he(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,d.Z)(function*(){const E=p?(0,F.m9)(p):null;return E&&$(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(p,_=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return p&&$(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(mt(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,_,E){return this.registerStateListener(this.authStateSubscription,p,_,E)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,E){return this.registerStateListener(this.idTokenSubscription,p,_,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var E=this;return(0,d.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(_);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const E=p&&mt(p)||_._popupRedirectResolver;$(E,_,"argument-error"),_.redirectPersistenceManager=yield _e.create(_,[mt(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,d.Z)(function*(){var E,A;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===p?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,d.Z)(function*(){if(p===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,E,A){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),K=this._isInitialized?Promise.resolve():this._initializationPromise;return $(K,this,"internal-error"),K.then(()=>P(this.currentUser)),"function"==typeof _?p.addObserver(_,E,A):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ta(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var _;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function Un(v){return(0,F.m9)(v)}class dc{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(_=>this.observer=_)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Jn(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function vs(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class go{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Ee("not implemented")}_getIdTokenResponse(p){return Ee("not implemented")}_linkToIdToken(p,_){return Ee("not implemented")}_getReauthenticationResolver(p){return Ee("not implemented")}}function Lr(v,p){return na.apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:resetPassword",qe(v,p))})).apply(this,arguments)}function bi(v,p){return nt.apply(this,arguments)}function nt(){return(nt=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Sn(){return(Sn=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",qe(v,p))})).apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(v,p){return Jt(v,"POST","/v1/accounts:signInWithPassword",qe(v,p))})).apply(this,arguments)}function Xn(v,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:sendOobCode",qe(v,p))})).apply(this,arguments)}function ra(){return(ra=(0,d.Z)(function*(v,p){return Xn(v,p)})).apply(this,arguments)}function jt(){return(jt=(0,d.Z)(function*(v,p){return Xn(v,p)})).apply(this,arguments)}function Ks(){return(Ks=(0,d.Z)(function*(v,p){return Xn(v,p)})).apply(this,arguments)}function Li(){return(Li=(0,d.Z)(function*(v,p){return Xn(v,p)})).apply(this,arguments)}function ia(){return(ia=(0,d.Z)(function*(v,p){return Jt(v,"POST","/v1/accounts:signInWithEmailLink",qe(v,p))})).apply(this,arguments)}function Vi(){return(Vi=(0,d.Z)(function*(v,p){return Jt(v,"POST","/v1/accounts:signInWithEmailLink",qe(v,p))})).apply(this,arguments)}class Zs extends go{constructor(p,_,E,A=null){super("password",E),this._email=p,this._password=_,this._tenantId=A}static _fromEmailAndPassword(p,_){return new Zs(p,_,"password")}static _fromEmailAndCode(p,_,E=null){return new Zs(p,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function Kr(v,p){return ws.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Vr(v,p){return ia.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Te(p,"internal-error")}})()}_linkToIdToken(p,_){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return bi(p,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function mo(v,p){return Vi.apply(this,arguments)}(p,{idToken:_,email:E._email,oobCode:E._password});default:Te(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Es(v,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(v,p){return Jt(v,"POST","/v1/accounts:signInWithIdp",qe(v,p))})).apply(this,arguments)}class Ti extends go{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Ti(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Te("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A}=_,P=(0,ie._T)(_,["providerId","signInMethod"]);if(!E||!A)return null;const K=new Ti(E,A);return K.idToken=P.idToken||void 0,K.accessToken=P.accessToken||void 0,K.secret=P.secret,K.nonce=P.nonce,K.pendingToken=P.pendingToken||null,K}_getIdTokenResponse(p){return Es(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,Es(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Es(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,F.xO)(_)}return p}}function sa(){return(sa=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:sendVerificationCode",qe(v,p))})).apply(this,arguments)}function Zr(){return(Zr=(0,d.Z)(function*(v,p){return Jt(v,"POST","/v1/accounts:signInWithPhoneNumber",qe(v,p))})).apply(this,arguments)}function Jd(){return(Jd=(0,d.Z)(function*(v,p){const _=yield Jt(v,"POST","/v1/accounts:signInWithPhoneNumber",qe(v,p));if(_.temporaryProof)throw Vn(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const oi={USER_NOT_FOUND:"user-not-found"};function Wa(){return(Wa=(0,d.Z)(function*(v,p){return Jt(v,"POST","/v1/accounts:signInWithPhoneNumber",qe(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),oi)})).apply(this,arguments)}class Bi extends go{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Bi({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Bi({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function _o(v,p){return Zr.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Ur(v,p){return Jd.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ui(v,p){return Wa.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:E,verificationCode:A}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:E,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:E,phoneNumber:A,temporaryProof:P}=p;return E||_||A||P?new Bi({verificationId:_,verificationCode:E,phoneNumber:A,temporaryProof:P}):null}}class Ka{constructor(p){var _,E,A,P,K,fe;const He=(0,F.zd)((0,F.pd)(p)),Xe=null!==(_=He.apiKey)&&void 0!==_?_:null,At=null!==(E=He.oobCode)&&void 0!==E?E:null,Et=function pc(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=He.mode)&&void 0!==A?A:null);$(Xe&&At&&Et,"argument-error"),this.apiKey=Xe,this.operation=Et,this.code=At,this.continueUrl=null!==(P=He.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(K=He.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(fe=He.tenantId)&&void 0!==fe?fe:null}static parseLink(p){const _=function ai(v){const p=(0,F.zd)((0,F.pd)(v)).link,_=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||_||p||v}(p);try{return new Ka(_)}catch{return null}}}let gc=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,E){return Zs._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const A=Ka.parseLink(E);return $(A,"argument-error"),Zs._fromEmailAndCode(_,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class bs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class oa extends bs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Za extends oa{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return $("providerId"in _&&"signInMethod"in _,"argument-error"),Ti._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return $(p.idToken||p.accessToken,"argument-error"),Ti._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Za.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Za.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:P,nonce:K,providerId:fe}=p;if(!E&&!A&&!_&&!P||!fe)return null;try{return new Za(fe)._credential({idToken:_,accessToken:E,nonce:K,pendingToken:P})}catch{return null}}}let mc=(()=>{class v extends oa{constructor(){super("facebook.com")}static credential(_){return Ti._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Xd=(()=>{class v extends oa{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return Ti._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:A}=_;if(!E&&!A)return null;try{return v.credential(E,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ip=(()=>{class v extends oa{constructor(){super("github.com")}static credential(_){return Ti._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class aa extends go{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Es(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,Es(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Es(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A,pendingToken:P}=_;return E&&A&&P&&E===A?new aa(E,P):null}static _create(p,_){return new aa(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class rs extends bs{constructor(p){$(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return rs.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return rs.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=aa.fromJSON(p);return $(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:E}=p;if(!_||!E)return null;try{return aa._create(E,_)}catch{return null}}}let Om=(()=>{class v extends oa{constructor(){super("twitter.com")}static credential(_,E){return Ti._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=_;if(!E||!A)return null;try{return v.credential(E,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ua(v,p){return _c.apply(this,arguments)}function _c(){return(_c=(0,d.Z)(function*(v,p){return Jt(v,"POST","/v1/accounts:signUp",qe(v,p))})).apply(this,arguments)}class Yr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,E,A=!1){return(0,d.Z)(function*(){const P=yield Wt._fromIdTokenResponse(p,E,A),K=yc(E);return new Yr({user:P,providerId:K,_tokenResponse:E,operationType:_})})()}static _forOperation(p,_,E){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const A=yc(E);return new Yr({user:p,providerId:A,_tokenResponse:E,operationType:_})})()}}function yc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function sp(){return(sp=(0,d.Z)(function*(v){var p;const _=Un(v);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new Yr({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield ua(_,{returnSecureToken:!0}),A=yield Yr._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Bu extends F.ZR{constructor(p,_,E,A){var P;super(_.code,_.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Bu.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,_,E,A){return new Bu(p,_,E,A)}}function vo(v,p,_,E){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Bu._fromErrorAndOperation(v,P,p,E):P})}function wo(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function la(){return la=(0,d.Z)(function*(v,p){const _=(0,F.m9)(v);yield Eo(!0,_,p);const{providerUserInfo:E}=yield function ht(v,p){return es.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),A=wo(E||[]);return _.providerData=_.providerData.filter(P=>A.has(P.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),la.apply(this,arguments)}function $u(v,p){return ca.apply(this,arguments)}function ca(){return(ca=(0,d.Z)(function*(v,p,_=!1){const E=yield Hn(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return Yr._forOperation(v,"link",E)})).apply(this,arguments)}function Eo(v,p,_){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(v,p,_){yield ln(p);const A=!1===v?"provider-already-linked":"no-such-provider";$(wo(p.providerData).has(_)===v,p.auth,A)})).apply(this,arguments)}function th(v,p){return da.apply(this,arguments)}function da(){return(da=(0,d.Z)(function*(v,p,_=!1){const{auth:E}=v,A="reauthenticate";try{const P=yield Hn(v,vo(E,A,p,v),_);$(P.idToken,E,"internal-error");const K=xt(P.idToken);$(K,E,"internal-error");const{sub:fe}=K;return $(v.uid===fe,E,"user-mismatch"),Yr._forOperation(v,A,P)}catch(P){throw"auth/user-not-found"===P?.code&&Te(E,"user-mismatch"),P}})).apply(this,arguments)}function ha(v,p){return ui.apply(this,arguments)}function ui(){return(ui=(0,d.Z)(function*(v,p,_=!1){const E="signIn",A=yield vo(v,E,p),P=yield Yr._fromIdTokenResponse(v,E,A);return _||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Bn(v,p){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,d.Z)(function*(v,p){return ha(Un(v),p)})).apply(this,arguments)}function qn(v,p){return fa.apply(this,arguments)}function fa(){return(fa=(0,d.Z)(function*(v,p){const _=(0,F.m9)(v);return yield Eo(!1,_,p.providerId),$u(_,p)})).apply(this,arguments)}function bo(v,p){return er.apply(this,arguments)}function er(){return(er=(0,d.Z)(function*(v,p){return th((0,F.m9)(v),p)})).apply(this,arguments)}function pa(){return(pa=(0,d.Z)(function*(v,p){return Jt(v,"POST","/v1/accounts:signInWithCustomToken",qe(v,p))})).apply(this,arguments)}function cr(){return cr=(0,d.Z)(function*(v,p){const _=Un(v),E=yield function vc(v,p){return pa.apply(this,arguments)}(_,{token:p,returnSecureToken:!0}),A=yield Yr._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(A.user),A}),cr.apply(this,arguments)}class Qa{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?ga._fromServerResponse(p,_):Te(p,"internal-error")}}class ga extends Qa{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new ga(_)}}function Gu(v,p,_){var E;$((null===(E=_.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),$(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&($(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&($(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Ja(){return Ja=(0,d.Z)(function*(v,p,_){const E=(0,F.m9)(v),A={requestType:"PASSWORD_RESET",email:p};_&&Gu(E,A,_),yield function Ci(v,p){return jt.apply(this,arguments)}(E,A)}),Ja.apply(this,arguments)}function Ot(){return(Ot=(0,d.Z)(function*(v,p,_){yield Lr((0,F.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function nh(){return nh=(0,d.Z)(function*(v,p){yield function Bt(v,p){return Sn.apply(this,arguments)}((0,F.m9)(v),{oobCode:p})}),nh.apply(this,arguments)}function zu(v,p){return wc.apply(this,arguments)}function wc(){return(wc=(0,d.Z)(function*(v,p){const _=(0,F.m9)(v),E=yield Lr(_,{oobCode:p}),A=E.requestType;switch($(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(E.mfaInfo,_,"internal-error");default:$(E.email,_,"internal-error")}let P=null;return E.mfaInfo&&(P=Qa._fromServerResponse(Un(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:A}})).apply(this,arguments)}function Wu(){return(Wu=(0,d.Z)(function*(v,p){const{data:_}=yield zu((0,F.m9)(v),p);return _.email})).apply(this,arguments)}function bc(){return(bc=(0,d.Z)(function*(v,p,_){const E=Un(v),A=yield ua(E,{returnSecureToken:!0,email:p,password:_}),P=yield Yr._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function Ic(){return Ic=(0,d.Z)(function*(v,p,_){const E=(0,F.m9)(v),A={requestType:"EMAIL_SIGNIN",email:p};$(_.handleCodeInApp,E,"argument-error"),_&&Gu(E,A,_),yield function hc(v,p){return Ks.apply(this,arguments)}(E,A)}),Ic.apply(this,arguments)}function eu(){return(eu=(0,d.Z)(function*(v,p,_){const E=(0,F.m9)(v),A=gc.credentialWithLink(p,_||_r());return $(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Bn(E,A)})).apply(this,arguments)}function li(){return(li=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:createAuthUri",qe(v,p))})).apply(this,arguments)}function Yu(){return Yu=(0,d.Z)(function*(v,p){const E={identifier:p,continueUri:Qn()?_r():"http://localhost"},{signinMethods:A}=yield function Ku(v,p){return li.apply(this,arguments)}((0,F.m9)(v),E);return A||[]}),Yu.apply(this,arguments)}function Cc(){return Cc=(0,d.Z)(function*(v,p){const _=(0,F.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Gu(_.auth,A,p);const{email:P}=yield function On(v,p){return ra.apply(this,arguments)}(_.auth,A);P!==v.email&&(yield v.reload())}),Cc.apply(this,arguments)}function dr(){return dr=(0,d.Z)(function*(v,p,_){const E=(0,F.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&Gu(E.auth,P,_);const{email:K}=yield function fc(v,p){return Li.apply(this,arguments)}(E.auth,P);K!==v.email&&(yield v.reload())}),dr.apply(this,arguments)}function Ys(){return(Ys=(0,d.Z)(function*(v,p){return zt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function is(){return is=(0,d.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const E=(0,F.m9)(v),P={idToken:yield E.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},K=yield Hn(E,function ci(v,p){return Ys.apply(this,arguments)}(E.auth,P));E.displayName=K.displayName||null,E.photoURL=K.photoUrl||null;const fe=E.providerData.find(({providerId:He})=>"password"===He);fe&&(fe.displayName=E.displayName,fe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(K)}),is.apply(this,arguments)}function oh(v,p,_){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,d.Z)(function*(v,p,_){const{auth:E}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(P.email=p),_&&(P.password=_);const K=yield Hn(v,bi(E,P));yield v._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class Cs{constructor(p,_,E={}){this.isNewUser=p,this.providerId=_,this.profile=E}}class ah extends Cs{constructor(p,_,E,A){super(p,_,E),this.username=A}}class Sc extends Cs{constructor(p,_){super(p,"facebook.com",_)}}class uh extends ah{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class ap extends Cs{constructor(p,_){super(p,"google.com",_)}}class Ju extends ah{constructor(p,_,E){super(p,"twitter.com",_,E)}}function up(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Dc(v){var p,_;if(!v)return null;const{providerId:E}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const K=null===(_=null===(p=xt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(K)return new Cs(P,"anonymous"!==K&&"custom"!==K?K:null)}if(!E)return null;switch(E){case"facebook.com":return new Sc(P,A);case"github.com":return new uh(P,A);case"google.com":return new ap(P,A);case"twitter.com":return new Ju(P,A,v.screenName||null);case"custom":case"anonymous":return new Cs(P,null);default:return new Cs(P,E,A)}}(_)}class _a{constructor(p,_,E){this.type=p,this.credential=_,this.auth=E}static _fromIdtoken(p,_){return new _a("enroll",p,_)}static _fromMfaPendingCredential(p){return new _a("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,E;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return _a._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return _a._fromIdtoken(p.multiFactorSession.idToken)}return null}}class xc{constructor(p,_,E){this.session=p,this.hints=_,this.signInResolver=E}static _fromError(p,_){const E=Un(p),A=_.customData._serverResponse,P=(A.mfaInfo||[]).map(fe=>Qa._fromServerResponse(E,fe));$(A.mfaPendingCredential,E,"internal-error");const K=_a._fromMfaPendingCredential(A.mfaPendingCredential);return new xc(K,P,function(){var fe=(0,d.Z)(function*(He){const Xe=yield He._process(E,K);delete A.mfaInfo,delete A.mfaPendingCredential;const At=Object.assign(Object.assign({},A),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(_.operationType){case"signIn":const Et=yield Yr._fromIdTokenResponse(E,_.operationType,At);return yield E._updateCurrentUser(Et.user),Et;case"reauthenticate":return $(_.user,E,"internal-error"),Yr._forOperation(_.user,_.operationType,At);default:Te(E,"internal-error")}});return function(He){return fe.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,d.Z)(function*(){return _.signInResolver(p)})()}}class nu{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Qa._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new nu(p)}getSession(){var p=this;return(0,d.Z)(function*(){return _a._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var E=this;return(0,d.Z)(function*(){const A=p,P=yield E.getSession(),K=yield Hn(E.user,A._process(E.user.auth,P,_));return yield E.user._updateTokensIfNecessary(K),E.user.reload()})()}unenroll(p){var _=this;return(0,d.Z)(function*(){const E="string"==typeof p?p:p.uid,A=yield _.user.getIdToken(),P=yield Hn(_.user,function Um(v,p){return zt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",qe(v,p))}(_.user.auth,{idToken:A,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:K})=>K!==E),yield _.user._updateTokensIfNecessary(P);try{yield _.user.reload()}catch(K){if("auth/user-token-expired"!==K?.code)throw K}})()}}const To=new WeakMap,Qs="__sak";class ru{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Qs,"1"),this.storage.removeItem(Qs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xu=(()=>{class v extends ru{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function iu(){const v=(0,F.z$)();return Je(v)||Gn(v)}()&&function cc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=np(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),P=this.localCache[E];A!==P&&_(E,P,A)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((fe,He,Xe)=>{this.notifyListeners(fe,Xe)});const A=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(A);if(_.newValue!==fe)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!E)return}const P=()=>{const fe=this.storage.getItem(A);!E&&this.localCache[A]===fe||this.notifyListeners(A,fe)},K=this.storage.getItem(A);!function tp(){return(0,F.w1)()&&10===document.documentMode}()||K===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,E){this.localCache[_]=E;const A=this.listeners[_];if(A)for(const P of Array.from(A))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var A=()=>super._set,P=this;return(0,d.Z)(function*(){yield A().call(P,_,E),P.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,A=this;return(0,d.Z)(function*(){const P=yield E().call(A,_);return A.localCache[_]=JSON.stringify(P),P})()}_remove(_){var E=()=>super._remove,A=this;return(0,d.Z)(function*(){yield E().call(A,_),delete A.localCache[_]})()}}return v.type="LOCAL",v})(),Do=(()=>{class v extends ru{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return v.type="SESSION",v})();let cp=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(P=>P.isListeningto(_));if(E)return E;const A=new v(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,d.Z)(function*(){const A=_,{eventId:P,eventType:K,data:fe}=A.data,He=E.handlersMap[K];if(!He?.size)return;A.ports[0].postMessage({status:"ack",eventId:P,eventType:K});const Xe=Array.from(He).map(function(){var Et=(0,d.Z)(function*(Kn){return Kn(A.origin,fe)});return function(Kn){return Et.apply(this,arguments)}}()),At=yield function dh(v){return Promise.all(v.map(function(){var p=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return p.apply(this,arguments)}}()))}(Xe);A.ports[0].postMessage({status:"done",eventId:P,eventType:K,response:At})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function So(v="",p=10){let _="";for(let E=0;E<p;E++)_+=Math.floor(10*Math.random());return v+_}class su{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,E=50){var A=this;return(0,d.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let K,fe;return new Promise((He,Xe)=>{const At=So("",20);P.port1.start();const Et=setTimeout(()=>{Xe(new Error("unsupported_event"))},E);fe={messageChannel:P,onMessage(Kn){const us=Kn;if(us.data.eventId===At)switch(us.data.status){case"ack":clearTimeout(Et),K=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),He(us.data.response);break;default:clearTimeout(Et),clearTimeout(K),Xe(new Error("invalid_response"))}}},A.handlers.add(fe),P.port1.addEventListener("message",fe.onMessage),A.target.postMessage({eventType:p,eventId:At,data:_},[P.port2])}).finally(()=>{fe&&A.removeMessageHandler(fe)})})()}}function Fn(){return window}function Ts(){return typeof Fn().WorkerGlobalScope<"u"&&"function"==typeof Fn().importScripts}function va(){return(va=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const el="firebaseLocalStorageDb",tl=1,Xs="firebaseLocalStorage",wa="fbase_key";class Ea{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function uu(v,p){return v.transaction([Xs],p?"readwrite":"readonly").objectStore(Xs)}function nl(){const v=indexedDB.open(el,tl);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Xs,{keyPath:wa})}catch(A){_(A)}}),v.addEventListener("success",(0,d.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Xs)?p(E):(E.close(),yield function lu(){const v=indexedDB.deleteDatabase(el);return new Ea(v).toPromise()}(),p(yield nl()))}))})}function Ar(v,p,_){return cu.apply(this,arguments)}function cu(){return(cu=(0,d.Z)(function*(v,p,_){const E=uu(v,!0).put({[wa]:p,value:_});return new Ea(E).toPromise()})).apply(this,arguments)}function eo(){return(eo=(0,d.Z)(function*(v,p){const _=uu(v,!1).get(p),E=yield new Ea(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function du(v,p){const _=uu(v,!0).delete(p);return new Ea(_).toPromise()}const Ao=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield nl()),_.db})()}_withRetries(_){var E=this;return(0,d.Z)(function*(){let A=0;for(;;)try{const P=yield E._openDb();return yield _(P)}catch(P){if(A++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return Ts()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=cp._getInstance(function au(){return Ts()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(A,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(A,P){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(A,P){return["keyChanged"]});return function(A,P){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var E,A;if(_.activeServiceWorker=yield function Ds(){return va.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new su(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(E=P[0])&&void 0!==E&&E.fulfilled&&null!==(A=P[0])&&void 0!==A&&A.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Mc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield nl();return yield Ar(_,Qs,"1"),yield du(_,Qs),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var A=this;return(0,d.Z)(function*(){return A._withPendingWrite((0,d.Z)(function*(){return yield A._withRetries(P=>Ar(P,_,E)),A.localCache[_]=E,A.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,d.Z)(function*(){const A=yield E._withRetries(P=>function ba(v,p){return eo.apply(this,arguments)}(P,_));return E.localCache[_]=A,A})()}_remove(_){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(A=>du(A,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const E=yield _._withRetries(K=>{const fe=uu(K,!1).getAll();return new Ea(fe).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const A=[],P=new Set;for(const{fbase_key:K,value:fe}of E)P.add(K),JSON.stringify(_.localCache[K])!==JSON.stringify(fe)&&(_.notifyListeners(K,fe),A.push(K));for(const K of Object.keys(_.localCache))_.localCache[K]&&!P.has(K)&&(_.notifyListeners(K,null),A.push(K));return A})()}notifyListeners(_,E){this.localCache[_]=E;const A=this.listeners[_];if(A)for(const P of Array.from(A))P(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function il(){return(il=(0,d.Z)(function*(v){return(yield zt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function os(v){return new Promise((p,_)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=A=>{const P=Ie("internal-error");P.customData=A,_(P)},E.type="text/javascript",E.charset="UTF-8",function xo(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function fh(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ji=1e12;class Bm{constructor(p){this.auth=p,this.counter=ji,this._widgets=new Map}render(p,_){const E=this.counter;return this._widgets.set(E,new ph(p,this.auth.name,_||{})),this.counter++,E}reset(p){var _;const E=p||ji;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(p){var _;return(null===(_=this._widgets.get(p||ji))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,d.Z)(function*(){var E;return null===(E=_._widgets.get(p||ji))||void 0===E||E.execute(),""})()}}class ph{constructor(p,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;$(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ol(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const gh=fh("rcb"),Pc=new le(3e4,6e4);class As{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Fn().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return $(function Ia(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Fn().grecaptcha):new Promise((E,A)=>{const P=Fn().setTimeout(()=>{A(Ie(p,"network-request-failed"))},Pc.get());Fn()[gh]=()=>{Fn().clearTimeout(P),delete Fn()[gh];const fe=Fn().grecaptcha;if(!fe)return void A(Ie(p,"internal-error"));const He=fe.render;fe.render=(Xe,At)=>{const Et=He(Xe,At);return this.counter++,Et},this.hostLanguage=_,E(fe)},os(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:gh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),A(Ie(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Fn().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ul{load(p){return(0,d.Z)(function*(){return new Bm(p)})()}clearedOneInstance(){}}const mh="recaptcha",dp={theme:"light",type:"image"};class pu{constructor(p,_=Object.assign({},dp),E){this.parameters=_,this.type=mh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Un(E),this.isInvisible="invisible"===this.parameters.size,$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;$(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ul:new As,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(_)||new Promise(P=>{const K=fe=>{fe&&(p.tokenChangeListeners.delete(K),P(fe))};p.tokenChangeListeners.add(K),p.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof p)p(_);else if("string"==typeof p){const E=Fn()[p];"function"==typeof E&&E(_)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){$(Qn()&&!Ts(),p.auth,"internal-error"),yield function hp(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function ss(v){return il.apply(this,arguments)}(p.auth);$(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class kc{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Bi._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Oc(){return(Oc=(0,d.Z)(function*(v,p,_){const E=Un(v),A=yield _h(E,p,(0,F.m9)(_));return new kc(A,P=>Bn(E,P))})).apply(this,arguments)}function ll(){return(ll=(0,d.Z)(function*(v,p,_){const E=(0,F.m9)(v);yield Eo(!1,E,"phone");const A=yield _h(E.auth,p,(0,F.m9)(_));return new kc(A,P=>qn(E,P))})).apply(this,arguments)}function pp(){return(pp=(0,d.Z)(function*(v,p,_){const E=(0,F.m9)(v),A=yield _h(E.auth,p,(0,F.m9)(_));return new kc(A,P=>bo(E,P))})).apply(this,arguments)}function _h(v,p,_){return gp.apply(this,arguments)}function gp(){return gp=(0,d.Z)(function*(v,p,_){var E;const A=yield _.verify();try{let P;if($("string"==typeof A,v,"argument-error"),$(_.type===mh,v,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const K=P.session;if("phoneNumber"in P)return $("enroll"===K.type,v,"internal-error"),(yield function lp(v,p){return zt(v,"POST","/v2/accounts/mfaEnrollment:start",qe(v,p))}(v,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{$("signin"===K.type,v,"internal-error");const fe=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return $(fe,v,"missing-multi-factor-info"),(yield function fu(v,p){return zt(v,"POST","/v2/accounts/mfaSignIn:start",qe(v,p))}(v,{mfaPendingCredential:K.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield function Qd(v,p){return sa.apply(this,arguments)}(v,{phoneNumber:P.phoneNumber,recaptchaToken:A});return K}}finally{_._reset()}}),gp.apply(this,arguments)}function mp(){return(mp=(0,d.Z)(function*(v,p){yield $u((0,F.m9)(v),p)})).apply(this,arguments)}let Fc=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Un(_)}verifyPhoneNumber(_,E){return _h(this.auth,_,(0,F.m9)(E))}static credential(_,E){return Bi._fromVerification(_,E)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:A}=_;return E&&A?Bi._fromTokenResponse(E,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function bn(v,p){return p?mt(p):($(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class dl extends go{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Es(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Es(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Es(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function hl(v){return ha(v.auth,new dl(v),v.bypassAuthState)}function Lc(v){const{auth:p,user:_}=v;return $(_,p,"internal-error"),th(_,new dl(v),v.bypassAuthState)}function di(v){return as.apply(this,arguments)}function as(){return(as=(0,d.Z)(function*(v){const{auth:p,user:_}=v;return $(_,p,"internal-error"),$u(_,new dl(v),v.bypassAuthState)})).apply(this,arguments)}class fl{constructor(p,_,E,A,P=!1){this.auth=p,this.resolver=E,this.user=A,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,d.Z)(function*(E,A){p.pendingPromise={resolve:E,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(E,A){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:P,tenantId:K,error:fe,type:He}=p;if(fe)return void _.reject(fe);const Xe={auth:_.auth,requestUri:E,sessionId:A,tenantId:K||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(He)(Xe))}catch(At){_.reject(At)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return hl;case"linkViaPopup":case"linkViaRedirect":return di;case"reauthViaPopup":case"reauthViaRedirect":return Lc;default:Te(this.auth,"internal-error")}}resolve(p){Be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gu=new le(2e3,1e4);function pl(){return(pl=(0,d.Z)(function*(v,p,_){const E=Un(v);Oe(v,p,bs);const A=bn(E,_);return new sn(E,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function yh(){return(yh=(0,d.Z)(function*(v,p,_){const E=(0,F.m9)(v);Oe(E.auth,p,bs);const A=bn(E.auth,_);return new sn(E.auth,"reauthViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}function Jr(){return(Jr=(0,d.Z)(function*(v,p,_){const E=(0,F.m9)(v);Oe(E.auth,p,bs);const A=bn(E.auth,_);return new sn(E.auth,"linkViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}let sn=(()=>{class v extends fl{constructor(_,E,A,P,K){super(_,E,P,K),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const E=yield _.execute();return $(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,d.Z)(function*(){Be(1===_.filter.length,"Popup operations only handle one event");const E=So();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(Ie(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,gu.get())};_()}}return v.currentPopupAction=null,v})();const vr="pendingRedirect",ot=new Map;class xr extends fl{constructor(p,_,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,d.Z)(function*(){let E=ot.get(_.auth._key());if(!E){try{const P=(yield function $i(v,p){return xs.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;E=()=>Promise.resolve(P)}catch(A){E=()=>Promise.reject(A)}ot.set(_.auth._key(),E)}return _.bypassAuthState||ot.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(E,p);if("unknown"!==p.type){if(p.eventId){const A=yield E.auth._redirectUserForId(p.eventId);if(A)return E.user=A,_().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function xs(){return(xs=(0,d.Z)(function*(v,p){const _=_u(p),E=mu(v);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(_));return yield E._remove(_),A})).apply(this,arguments)}function Ta(v,p){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(v,p){return mu(v)._set(_u(p),"true")})).apply(this,arguments)}function vh(v,p){ot.set(v._key(),p)}function mu(v){return mt(v._redirectPersistence)}function _u(v){return W(vr,v.config.apiKey,v.name)}function gl(v,p,_){return function ml(v,p,_){return T.apply(this,arguments)}(v,p,_)}function T(){return(T=(0,d.Z)(function*(v,p,_){const E=Un(v);Oe(v,p,bs),yield E._initializationPromise;const A=bn(E,_);return yield Ta(A,E),A._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function D(v,p,_){return function M(v,p,_){return B.apply(this,arguments)}(v,p,_)}function B(){return(B=(0,d.Z)(function*(v,p,_){const E=(0,F.m9)(v);Oe(E.auth,p,bs),yield E.auth._initializationPromise;const A=bn(E.auth,_);yield Ta(A,E.auth);const P=yield St(E);return A._openRedirect(E.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function Q(v,p,_){return function re(v,p,_){return we.apply(this,arguments)}(v,p,_)}function we(){return(we=(0,d.Z)(function*(v,p,_){const E=(0,F.m9)(v);Oe(E.auth,p,bs),yield E.auth._initializationPromise;const A=bn(E.auth,_);yield Eo(!1,E,p.providerId),yield Ta(A,E.auth);const P=yield St(E);return A._openRedirect(E.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(v,p){return yield Un(v)._initializationPromise,dt(v,p,!1)})).apply(this,arguments)}function dt(v,p){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,d.Z)(function*(v,p,_=!1){const E=Un(v),A=bn(E,p),K=yield new xr(E,A,_).execute();return K&&!_&&(delete K.user._redirectEventId,yield E._persistUserIfCurrent(K.user),yield E._setRedirectUser(null,p)),K})).apply(this,arguments)}function St(v){return hi.apply(this,arguments)}function hi(){return(hi=(0,d.Z)(function*(v){const p=So(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Rs{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(_=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function fi(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Da(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var E;if(p.error&&!Da(p)){const A=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Ie(this.auth,A))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const E=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_l(p))}saveEventToCache(p){this.cachedEventUids.add(_l(p)),this.lastProcessedEventTime=Date.now()}}function _l(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Da({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function pi(v){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,d.Z)(function*(v,p={}){return zt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const yp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rr=/^https?/;function vp(){return(vp=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield pi(v);for(const _ of p)try{if(Wn(_))return}catch{}Te(v,"unauthorized-domain")})).apply(this,arguments)}function Wn(v){const p=_r(),{protocol:_,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const K=new URL(v);return""===K.hostname&&""===E?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&K.hostname===E}if(!Rr.test(_))return!1;if(yp.test(v))return E===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Vc=new le(3e4,6e4);function Uc(){const v=Fn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let hr=null;const dv=new le(5e3,15e3),Ep="__/auth/iframe",Sa="emulator/auth/iframe",yl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yu(v){const p=v.config;$(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?ee(p,Sa):`https://${v.config.authDomain}/${Ep}`,E={apiKey:p.apiKey,appName:v.name,v:ae.SDK_VERSION},A=gi.get(v.config.apiHost);A&&(E.eid=A);const P=v._getFrameworks();return P.length&&(E.fw=P.join(",")),`${_}?${(0,F.xO)(E).slice(1)}`}function Ro(){return Ro=(0,d.Z)(function*(v){const p=yield function wp(v){return hr=hr||function Ms(v){return new Promise((p,_)=>{var E,A,P;function K(){Uc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Uc(),_(Ie(v,"network-request-failed"))},timeout:Vc.get()})}if(null!==(A=null===(E=Fn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(P=Fn().gapi)||void 0===P||!P.load){const fe=fh("iframefcb");return Fn()[fe]=()=>{gapi.load?K():_(Ie(v,"network-request-failed"))},os(`https://apis.google.com/js/api.js?onload=${fe}`).catch(He=>_(He))}K()}}).catch(p=>{throw hr=null,p})}(v),hr}(v),_=Fn().gapi;return $(_,v,"internal-error"),p.open({where:document.body,url:yu(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yl,dontclear:!0},E=>new Promise(function(){var A=(0,d.Z)(function*(P,K){yield E.restyle({setHideOnLeave:!1});const fe=Ie(v,"network-request-failed"),He=Fn().setTimeout(()=>{K(fe)},dv.get());function Xe(){Fn().clearTimeout(He),P(E)}E.ping(Xe).then(Xe,()=>{K(fe)})});return function(P,K){return A.apply(this,arguments)}}()))}),Ro.apply(this,arguments)}const Eh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bh=500,Gm=600,qm="_blank",Ih="http://localhost";class Tt{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const vl="__/auth/handler",zm="emulator/auth/handler";function jc(v,p,_,E,A,P){$(v.config.authDomain,v,"auth-domain-config-required"),$(v.config.apiKey,v,"invalid-api-key");const K={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:E,v:ae.SDK_VERSION,eventId:A};if(p instanceof bs){p.setDefaultLanguage(v.languageCode),K.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(K.customParameters=JSON.stringify(p.getCustomParameters()));for(const[He,Xe]of Object.entries(P||{}))K[He]=Xe}if(p instanceof oa){const He=p.getScopes().filter(Xe=>""!==Xe);He.length>0&&(K.scopes=He.join(","))}v.tenantId&&(K.tid=v.tenantId);const fe=K;for(const He of Object.keys(fe))void 0===fe[He]&&delete fe[He];return`${function to({config:v}){return v.emulator?ee(v,zm):`https://${v.authDomain}/${vl}`}(v)}?${(0,F.xO)(fe).slice(1)}`}const Ch="webStorageSupport",Th=class Wm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Do,this._completeRedirectFn=dt,this._overrideRedirectResult=vh}_openPopup(p,_,E,A){var P=this;return(0,d.Z)(function*(){var K;Be(null===(K=P.eventManagers[p._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const fe=jc(p,_,E,_r(),A);return function Bc(v,p,_,E=bh,A=Gm){const P=Math.max((window.screen.availHeight-A)/2,0).toString(),K=Math.max((window.screen.availWidth-E)/2,0).toString();let fe="";const He=Object.assign(Object.assign({},Eh),{width:E.toString(),height:A.toString(),top:P,left:K}),Xe=(0,F.z$)().toLowerCase();_&&(fe=cn(Xe)?qm:_),tt(Xe)&&(p=p||Ih,He.scrollbars="yes");const At=Object.entries(He).reduce((Kn,[us,Nl])=>`${Kn}${us}=${Nl},`,"");if(function Ws(v=(0,F.z$)()){var p;return Gn(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Xe)&&"_self"!==fe)return function hv(v,p){const _=document.createElement("a");_.href=v,_.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(p||"",fe),new Tt(null);const Et=window.open(p||"",fe,At);$(Et,v,"popup-blocked");try{Et.focus()}catch{}return new Tt(Et)}(p,fe,So())})()}_openRedirect(p,_,E,A){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(p),function ou(v){Fn().location.href=v}(jc(p,_,E,_r(),A)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:A,promise:P}=this.eventManagers[_];return A?Promise.resolve(A):(Be(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(p);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(p){var _=this;return(0,d.Z)(function*(){const E=yield function hb(v){return Ro.apply(this,arguments)}(p),A=new Rs(p);return E.register("authEvent",P=>($(P?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:A},_.iframes[p._key()]=E,A})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Ch,{type:Ch},A=>{var P;const K=null===(P=A?.[0])||void 0===P?void 0:P[Ch];void 0!==K&&_(!!K),Te(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function wh(v){return vp.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return np()||Je()||Gn()}};class fb{constructor(p){this.factorId=p}_process(p,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,E);case"signin":return this._finalizeSignIn(p,_.credential);default:return Ee("unexpected MultiFactorSessionType")}}}class wr extends fb{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new wr(p)}_finalizeEnroll(p,_,E){return function Vm(v,p){return zt(v,"POST","/v2/accounts/mfaEnrollment:finalize",qe(v,p))}(p,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function hh(v,p){return zt(v,"POST","/v2/accounts/mfaSignIn:finalize",qe(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let nr=(()=>{class v{constructor(){}static assertion(_){return wr._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var vu="@firebase/auth";class Dh{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);_&&(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mi(){return window}(0,F.Pz)("authIdTokenMaxAge"),function $c(v){(0,ae._registerComponent)(new me.wA("auth",(p,{options:_})=>{const E=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),{apiKey:P,authDomain:K}=E.options;return((fe,He)=>{$(P&&!P.includes(":"),"invalid-api-key",{appName:fe.name}),$(!K?.includes(":"),"argument-error",{appName:fe.name});const Xe={apiKey:P,authDomain:K,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ta(v)},At=new Yd(fe,He,Xe);return function Pn(v,p){const _=p?.persistence||[],E=(Array.isArray(_)?_:[_]).map(mt);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,p?.popupRedirectResolver)}(At,_),At})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,E)=>{p.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new me.wA("auth-internal",p=>{const _=Un(p.getProvider("auth").getImmediate());return new Dh(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(vu,"0.21.1",function Br(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ae.registerVersion)(vu,"0.21.1","esm2017")}("Browser");const Kt=2e3;function Sp(){return Sp=(0,d.Z)(function*(v,p,_){var E;const{BuildInfo:A}=mi();Be(p.sessionId,"AuthEvent did not contain a session ID");const P=yield function Gc(v){return El.apply(this,arguments)}(p.sessionId),K={};return Gn()?K.ibi=A.packageName:Dn()?K.apn=A.packageName:Te(v,"operation-not-supported-in-this-environment"),A.displayName&&(K.appDisplayName=A.displayName),K.sessionId=P,jc(v,_,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,K)}),Sp.apply(this,arguments)}function Hc(){return(Hc=(0,d.Z)(function*(v){const{BuildInfo:p}=mi(),_={};Gn()?_.iosBundleId=p.packageName:Dn()?_.androidPackageName=p.packageName:Te(v,"operation-not-supported-in-this-environment"),yield pi(v,_)})).apply(this,arguments)}function bu(){return(bu=(0,d.Z)(function*(v,p,_){const{cordova:E}=mi();let A=()=>{};try{yield new Promise((P,K)=>{let fe=null;function He(){var Et;P();const Kn=null===(Et=E.plugins.browsertab)||void 0===Et?void 0:Et.close;"function"==typeof Kn&&Kn(),"function"==typeof _?.close&&_.close()}function Xe(){fe||(fe=window.setTimeout(()=>{K(Ie(v,"redirect-cancelled-by-user"))},Kt))}function At(){"visible"===document?.visibilityState&&Xe()}p.addPassiveListener(He),document.addEventListener("resume",Xe,!1),Dn()&&document.addEventListener("visibilitychange",At,!1),A=()=>{p.removePassiveListener(He),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",At,!1),fe&&window.clearTimeout(fe)}})}finally{A()}})).apply(this,arguments)}function El(){return(El=(0,d.Z)(function*(v){const p=function bl(v){if(Be(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),_=new Uint8Array(p);for(let E=0;E<v.length;E++)_[E]=v.charCodeAt(E);return _}(v),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Zm=20;class Aa extends Rs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.Z)(function*(){yield p.initPromise})()}}function Rp(v){return qc.apply(this,arguments)}function qc(){return(qc=(0,d.Z)(function*(v){const p=yield Cl()._get(Mp(v));return p&&(yield Cl()._remove(Mp(v))),p})).apply(this,arguments)}function pv(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<Zm;_++){const E=Math.floor(Math.random()*p.length);v.push(p.charAt(E))}return v.join("")}function Cl(){return mt(Xu)}function Mp(v){return W("authEvent",v.config.apiKey,v.name)}function zc(v){if(!v?.includes("?"))return{};const[p,..._]=v.split("?");return(0,F.zd)(_.join("?"))}const Tl=class Ah{constructor(){this._redirectPersistence=Do,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=dt,this._overrideRedirectResult=vh}_initialize(p){var _=this;return(0,d.Z)(function*(){const E=p._key();let A=_.eventManagers.get(E);return A||(A=new Aa(p),_.eventManagers.set(E,A),_.attachCallbackListeners(p,A)),A})()}_openPopup(p){Te(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,E,A){var P=this;return(0,d.Z)(function*(){!function Sh(v){var p,_,E,A,P,K,fe,He,Xe,At;const Et=mi();$("function"==typeof(null===(p=Et?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(typeof(null===(_=Et?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(P=null===(A=null===(E=Et?.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(He=null===(fe=null===(K=Et?.cordova)||void 0===K?void 0:K.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===He?void 0:He.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(At=null===(Xe=Et?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===At?void 0:At.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const K=yield P._initialize(p);yield K.initialized(),K.resetRedirect(),function _p(){ot.clear()}(),yield P._originValidation(p);const fe=function Il(v,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:pv(),postBody:null,tenantId:v.tenantId,error:Ie(v,"no-auth-event")}}(p,E,A);yield function xp(v,p){return Cl()._set(Mp(v),p)}(p,fe);const He=yield function wl(v,p,_){return Sp.apply(this,arguments)}(p,fe,_),Xe=yield function Eu(v){const{cordova:p}=mi();return new Promise(_=>{p.plugins.browsertab.isAvailable(E=>{let A=null;E?p.plugins.browsertab.openUrl(v):A=p.InAppBrowser.open(v,function za(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(A)})})}(He);return function Ap(v,p,_){return bu.apply(this,arguments)}(p,K,Xe)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function wu(v){return Hc.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:E,handleOpenURL:A,BuildInfo:P}=mi(),K=setTimeout((0,d.Z)(function*(){yield Rp(p),_.onEvent(Ym())}),500),fe=function(){var At=(0,d.Z)(function*(Et){clearTimeout(K);const Kn=yield Rp(p);let us=null;Kn&&Et?.url&&(us=function fv(v,p){var _,E;const A=function mv(v){const p=zc(v),_=p.link?decodeURIComponent(p.link):void 0,E=zc(_).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return zc(A).link||A||E||_||v}(p);if(A.includes("/__/auth/callback")){const P=zc(A),K=P.firebaseError?function gv(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,fe=null===(E=null===(_=K?.code)||void 0===_?void 0:_.split("auth/"))||void 0===E?void 0:E[1],He=fe?Ie(fe):null;return He?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:He,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(Kn,Et.url)),_.onEvent(us||Ym())});return function(Kn){return At.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,fe);const He=A,Xe=`${P.packageName.toLowerCase()}://`;mi().handleOpenURL=function(){var At=(0,d.Z)(function*(Et){if(Et.toLowerCase().startsWith(Xe)&&fe({url:Et}),"function"==typeof He)try{He(Et)}catch(Kn){console.error(Kn)}});return function(Et){return At.apply(this,arguments)}}()}};function Ym(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}const xa=1e3;function Cu(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Dl(v=(0,F.z$)()){return!("file:"!==Cu()&&"ionic:"!==Cu()&&"capacitor:"!==Cu()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mh(){try{const v=self.localStorage,p=So();if(v)return v.setItem(p,"1"),v.removeItem(p),!function Pp(v=(0,F.z$)()){return function Mo(){return(0,F.w1)()&&11===document?.documentMode}()||function Jm(v=(0,F.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,F.hl)()}catch{return No()&&(0,F.hl)()}return!1}function No(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wc(){return(function Qm(){return"http:"===Cu()||"https:"===Cu()}()||(0,F.ru)()||Dl())&&!function Rh(){return(0,F.b$)()||(0,F.UG)()}()&&Mh()&&!No()}function kp(){return Dl()&&typeof document<"u"}function Sl(){return(Sl=(0,d.Z)(function*(){return!!kp()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},xa);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const fr={LOCAL:"local",NONE:"none",SESSION:"session"},Tu=$,Al="persistence";function Ph(v){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,d.Z)(function*(v){yield v._initializationPromise;const p=Ns(),_=W(Al,v.config.apiKey,v.name);p&&p.setItem(_,v._getPersistence())})).apply(this,arguments)}function Ns(){var v;try{return(null===(v=function Nh(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Op=$;class _i{constructor(){this.browserResolver=mt(Th),this.cordovaResolver=mt(Tl),this.underlyingResolver=null,this._redirectPersistence=Do,this._completeRedirectFn=dt,this._overrideRedirectResult=vh}_initialize(p){var _=this;return(0,d.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,E,A){var P=this;return(0,d.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(p,_,E,A)})()}_openRedirect(p,_,E,A){var P=this;return(0,d.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(p,_,E,A)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return kp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Op(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.Z)(function*(){if(p.underlyingResolver)return;const _=yield function Kc(){return Sl.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function xl(v){return v.unwrap()}function Jc(v){return Xm(v)}function Xm(v){const{_tokenResponse:p}=v instanceof F.ZR?v.customData:v;if(!p)return null;if(!(v instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Fc.credentialFromResult(v);const _=p.providerId;if(!_||_===de.PASSWORD)return null;let E;switch(_){case de.GOOGLE:E=Xd;break;case de.FACEBOOK:E=mc;break;case de.GITHUB:E=ip;break;case de.TWITTER:E=Om;break;default:const{oauthIdToken:A,oauthAccessToken:P,oauthTokenSecret:K,pendingToken:fe,nonce:He}=p;return P||K||A||fe?fe?_.startsWith("saml.")?aa._create(_,fe):Ti._fromParams({providerId:_,signInMethod:_,pendingToken:fe,idToken:A,accessToken:P}):new Za(_).credential({idToken:A,accessToken:P,rawNonce:He}):null}return v instanceof F.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Si(v,p){return p.catch(_=>{throw _ instanceof F.ZR&&function Rl(v,p){var _;const E=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Lp(v,function Sr(v,p){var _;const E=(0,F.m9)(v),A=p;return $(p.customData.operationType,E,"argument-error"),$(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),xc._fromError(E,A)}(v,p));else if(E){const A=Xm(p),P=p;A&&(P.credential=A,P.tenantId=E.tenantId||void 0,P.email=E.email||void 0,P.phoneNumber=E.phoneNumber||void 0)}}(v,_),_}).then(_=>{const A=_.user;return{operationType:_.operationType,credential:Jc(_),additionalUserInfo:up(_),user:Po.getOrCreate(A)}})}function e_(v,p){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,d.Z)(function*(v,p){const _=yield p;return{verificationId:_.verificationId,confirm:E=>Si(v,_.confirm(E))}})).apply(this,arguments)}class Lp{constructor(p,_){this.resolver=_,this.auth=function Du(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Si(xl(this.auth),this.resolver.resolveSignIn(p))}}class Po{constructor(p){this._delegate=p,this.multiFactor=function Rc(v){const p=(0,F.m9)(v);return To.has(p)||To.set(p,nu._fromUser(p)),To.get(p)}(p)}static getOrCreate(p){return Po.USER_MAP.has(p)||Po.USER_MAP.set(p,new Po(p)),Po.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,d.Z)(function*(){return Si(_.auth,qn(_._delegate,p))})()}linkWithPhoneNumber(p,_){var E=this;return(0,d.Z)(function*(){return e_(E.auth,function jm(v,p,_){return ll.apply(this,arguments)}(E._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,d.Z)(function*(){return Si(_.auth,function Hm(v,p,_){return Jr.apply(this,arguments)}(_._delegate,p,_i))})()}linkWithRedirect(p){var _=this;return(0,d.Z)(function*(){return yield Ph(Un(_.auth)),Q(_._delegate,p,_i)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,d.Z)(function*(){return Si(_.auth,bo(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return e_(this.auth,function fp(v,p,_){return pp.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return Si(this.auth,function $m(v,p,_){return yh.apply(this,arguments)}(this._delegate,p,_i))}reauthenticateWithRedirect(p){var _=this;return(0,d.Z)(function*(){return yield Ph(Un(_.auth)),D(_._delegate,p,_i)})()}sendEmailVerification(p){return function ih(v,p){return Cc.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,d.Z)(function*(){return yield function ju(v,p){return la.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function sh(v,p){return oh((0,F.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function tu(v,p){return oh((0,F.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function cl(v,p){return mp.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Co(v,p){return is.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Qu(v,p,_){return dr.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Po.USER_MAP=new WeakMap;const Ml=$;let Xc=(()=>{class v{constructor(_,E){if(this.app=_,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=_.options;Ml(A,"invalid-api-key",{appName:_.name}),Ml(A,"invalid-api-key",{appName:_.name});const P=typeof window<"u"?_i:void 0;this._delegate=E.initialize({options:{persistence:t_(A,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Po.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,E){!function un(v,p,_){const E=Un(v);$(E._canInitEmulator,E,"emulator-config-failed"),$(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const A=!!_?.disableWarnings,P=Jn(p),{host:K,port:fe}=function yr(v){const p=Jn(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const P=A[1];return{host:P,port:vs(E.substr(P.length+1))}}{const[P,K]=E.split(":");return{host:P,port:vs(K)}}}(p);E.config.emulator={url:`${P}//${K}${null===fe?"":`:${fe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:K,port:fe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Fr(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,E)}applyActionCode(_){return function qu(v,p){return nh.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return zu(this._delegate,_)}confirmPasswordReset(_,E){return function Xa(v,p,_){return Ot.apply(this,arguments)}(this._delegate,_,E)}createUserWithEmailAndPassword(_,E){var A=this;return(0,d.Z)(function*(){return Si(A._delegate,function op(v,p,_){return bc.apply(this,arguments)}(A._delegate,_,E))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Zu(v,p){return Yu.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function rh(v,p){return"EMAIL_SIGNIN"===Ka.parseLink(p)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,d.Z)(function*(){Ml(Wc(),_._delegate,"operation-not-supported-in-this-environment");const E=yield function at(v,p){return ft.apply(this,arguments)}(_._delegate,_i);return E?Si(_._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Iu(v,p){Un(v)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,E,A){const{next:P,error:K,complete:fe}=kh(_,E,A);return this._delegate.onAuthStateChanged(P,K,fe)}onIdTokenChanged(_,E,A){const{next:P,error:K,complete:fe}=kh(_,E,A);return this._delegate.onIdTokenChanged(P,K,fe)}sendSignInLinkToEmail(_,E){return function rn(v,p,_){return Ic.apply(this,arguments)}(this._delegate,_,E)}sendPasswordResetEmail(_,E){return function Is(v,p,_){return Ja.apply(this,arguments)}(this._delegate,_,E||void 0)}setPersistence(_){var E=this;return(0,d.Z)(function*(){let A;switch(function Zc(v,p){Tu(Object.values(fr).includes(p),v,"invalid-persistence-type"),(0,F.b$)()?Tu(p!==fr.SESSION,v,"unsupported-persistence-type"):(0,F.UG)()?Tu(p===fr.NONE,v,"unsupported-persistence-type"):No()?Tu(p===fr.NONE||p===fr.LOCAL&&(0,F.hl)(),v,"unsupported-persistence-type"):Tu(p===fr.NONE||Mh(),v,"unsupported-persistence-type")}(E._delegate,_),_){case fr.SESSION:A=Do;break;case fr.LOCAL:A=(yield mt(Ao)._isAvailable())?Ao:Xu;break;case fr.NONE:A=j;break;default:return Te("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Si(this._delegate,function eh(v){return sp.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Si(this._delegate,Bn(this._delegate,_))}signInWithCustomToken(_){return Si(this._delegate,function Io(v,p){return cr.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,E){return Si(this._delegate,function ye(v,p,_){return Bn((0,F.m9)(v),gc.credential(p,_))}(this._delegate,_,E))}signInWithEmailLink(_,E){return Si(this._delegate,function Dr(v,p,_){return eu.apply(this,arguments)}(this._delegate,_,E))}signInWithPhoneNumber(_,E){return e_(this._delegate,function tn(v,p,_){return Oc.apply(this,arguments)}(this._delegate,_,E))}signInWithPopup(_){var E=this;return(0,d.Z)(function*(){return Ml(Wc(),E._delegate,"operation-not-supported-in-this-environment"),Si(E._delegate,function Ca(v,p,_){return pl.apply(this,arguments)}(E._delegate,_,_i))})()}signInWithRedirect(_){var E=this;return(0,d.Z)(function*(){return Ml(Wc(),E._delegate,"operation-not-supported-in-this-environment"),yield Ph(E._delegate),gl(E._delegate,_,_i)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Ec(v,p){return Wu.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=fr,v})();function kh(v,p,_){let E=v;"function"!=typeof v&&({next:E,error:p,complete:_}=v);const A=E;return{next:K=>A(K&&Po.getOrCreate(K)),error:p,complete:_}}function t_(v,p){const _=function Qc(v,p){const _=Ns();if(!_)return[];const E=W(Al,v,p);switch(_.getItem(E)){case fr.NONE:return[j];case fr.LOCAL:return[Ao,Do];case fr.SESSION:return[Do];default:return[]}}(v,p);if(typeof self<"u"&&!_.includes(Ao)&&_.push(Ao),typeof window<"u")for(const E of[Xu,Do])_.includes(E)||_.push(E);return _.includes(j)||_.push(j),_}class ed{constructor(){this.providerId="phone",this._delegate=new Fc(xl(J.Z.auth()))}static credential(p,_){return Fc.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}ed.PHONE_SIGN_IN_METHOD=Fc.PHONE_SIGN_IN_METHOD,ed.PROVIDER_ID=Fc.PROVIDER_ID;const n_=$;class Su{constructor(p,_,E=J.Z.app()){var A;n_(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new pu(p,_,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vv(v){v.INTERNAL.registerComponent(new me.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new Xc(_,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Y_EMAIL_SIGNIN,PASSWORD_RESET:Y_PASSWORD_RESET,RECOVER_EMAIL:Y_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Y_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Y_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Y_VERIFY_EMAIL}},EmailAuthProvider:gc,FacebookAuthProvider:mc,GithubAuthProvider:ip,GoogleAuthProvider:Xd,OAuthProvider:Za,SAMLAuthProvider:rs,PhoneAuthProvider:ed,PhoneMultiFactorGenerator:nr,RecaptchaVerifier:Su,TwitterAuthProvider:Om,Auth:Xc,AuthCredential:go,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.3.1")}(J.Z)},8766:(gt,De,L)=>{L.d(De,{Lj:()=>Te,X3:()=>ke});var d=L(5861);const J=($,Ee)=>Ee.some(Be=>$ instanceof Be);let F,ae;const me=new WeakMap,pe=new WeakMap,de=new WeakMap,q=new WeakMap,G=new WeakMap;let Se={get($,Ee,Be){if($ instanceof IDBTransaction){if("done"===Ee)return pe.get($);if("objectStoreNames"===Ee)return $.objectStoreNames||de.get($);if("store"===Ee)return Be.objectStoreNames[1]?void 0:Be.objectStore(Be.objectStoreNames[0])}return xe($[Ee])},set:($,Ee,Be)=>($[Ee]=Be,!0),has:($,Ee)=>$ instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in $};function ge($){return"function"==typeof $?function ut($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...Ee){return $.apply(Ae(this),Ee),xe(me.get(this))}:function(...Ee){return xe($.apply(Ae(this),Ee))}:function(Ee,...Be){const Ze=$.call(Ae(this),Ee,...Be);return de.set(Ze,Ee.sort?Ee.sort():[Ee]),xe(Ze)}}($):($ instanceof IDBTransaction&&function je($){if(pe.has($))return;const Ee=new Promise((Be,Ze)=>{const mt=()=>{$.removeEventListener("complete",et),$.removeEventListener("error",Pn),$.removeEventListener("abort",Pn)},et=()=>{Be(),mt()},Pn=()=>{Ze($.error||new DOMException("AbortError","AbortError")),mt()};$.addEventListener("complete",et),$.addEventListener("error",Pn),$.addEventListener("abort",Pn)});pe.set($,Ee)}($),J($,function oe(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Se):$)}function xe($){if($ instanceof IDBRequest)return function Y($){const Ee=new Promise((Be,Ze)=>{const mt=()=>{$.removeEventListener("success",et),$.removeEventListener("error",Pn)},et=()=>{Be(xe($.result)),mt()},Pn=()=>{Ze($.error),mt()};$.addEventListener("success",et),$.addEventListener("error",Pn)});return Ee.then(Be=>{Be instanceof IDBCursor&&me.set(Be,$)}).catch(()=>{}),G.set(Ee,$),Ee}($);if(q.has($))return q.get($);const Ee=ge($);return Ee!==$&&(q.set($,Ee),G.set(Ee,$)),Ee}const Ae=$=>G.get($);function ke($,Ee,{blocked:Be,upgrade:Ze,blocking:mt,terminated:et}={}){const Pn=indexedDB.open($,Ee),_r=xe(Pn);return Ze&&Pn.addEventListener("upgradeneeded",Qn=>{Ze(xe(Pn.result),Qn.oldVersion,Qn.newVersion,xe(Pn.transaction))}),Be&&Pn.addEventListener("blocked",()=>Be()),_r.then(Qn=>{et&&Qn.addEventListener("close",()=>et()),mt&&Qn.addEventListener("versionchange",()=>mt())}).catch(()=>{}),_r}function Te($,{blocked:Ee}={}){const Be=indexedDB.deleteDatabase($);return Ee&&Be.addEventListener("blocked",()=>Ee()),xe(Be).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],Re=["put","add","delete","clear"],Oe=new Map;function Pe($,Ee){if(!($ instanceof IDBDatabase)||Ee in $||"string"!=typeof Ee)return;if(Oe.get(Ee))return Oe.get(Ee);const Be=Ee.replace(/FromIndex$/,""),Ze=Ee!==Be,mt=Re.includes(Be);if(!(Be in(Ze?IDBIndex:IDBObjectStore).prototype)||!mt&&!Ie.includes(Be))return;const et=function(){var Pn=(0,d.Z)(function*(_r,...Qn){const ys=this.transaction(_r,mt?"readwrite":"readonly");let se=ys.store;return Ze&&(se=se.index(Qn.shift())),(yield Promise.all([se[Be](...Qn),mt&&ys.done]))[0]});return function(Qn){return Pn.apply(this,arguments)}}();return Oe.set(Ee,et),et}!function We($){Se=$(Se)}($=>({...$,get:(Ee,Be,Ze)=>Pe(Ee,Be)||$.get(Ee,Be,Ze),has:(Ee,Be)=>!!Pe(Ee,Be)||$.has(Ee,Be)}))},5861:(gt,De,L)=>{function d(F,ae,oe,ie,me,pe,de){try{var q=F[pe](de),G=q.value}catch(Y){return void oe(Y)}q.done?ae(G):Promise.resolve(G).then(ie,me)}function J(F){return function(){var ae=this,oe=arguments;return new Promise(function(ie,me){var pe=F.apply(ae,oe);function de(G){d(pe,ie,me,de,q,"next",G)}function q(G){d(pe,ie,me,de,q,"throw",G)}de(void 0)})}}L.d(De,{Z:()=>J})},7582:(gt,De,L)=>{function ae(se,he){var le={};for(var ee in se)Object.prototype.hasOwnProperty.call(se,ee)&&he.indexOf(ee)<0&&(le[ee]=se[ee]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(ee=Object.getOwnPropertySymbols(se);Fe<ee.length;Fe++)he.indexOf(ee[Fe])<0&&Object.prototype.propertyIsEnumerable.call(se,ee[Fe])&&(le[ee[Fe]]=se[ee[Fe]])}return le}function Y(se,he,le,ee){return new(le||(le=Promise))(function(Le,yt){function qe(Qt){try{vt(ee.next(Qt))}catch(an){yt(an)}}function zt(Qt){try{vt(ee.throw(Qt))}catch(an){yt(an)}}function vt(Qt){Qt.done?Le(Qt.value):function Fe(Le){return Le instanceof le?Le:new le(function(yt){yt(Le)})}(Qt.value).then(qe,zt)}vt((ee=ee.apply(se,he||[])).next())})}function Te(se){return this instanceof Te?(this.v=se,this):new Te(se)}function Ie(se,he,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ee=le.apply(se,he||[]),Le=[];return Fe={},yt("next"),yt("throw"),yt("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function yt(Jt){ee[Jt]&&(Fe[Jt]=function(ur){return new Promise(function(lr,xn){Le.push([Jt,ur,lr,xn])>1||qe(Jt,ur)})})}function qe(Jt,ur){try{!function zt(Jt){Jt.value instanceof Te?Promise.resolve(Jt.value.v).then(vt,Qt):an(Le[0][2],Jt)}(ee[Jt](ur))}catch(lr){an(Le[0][3],lr)}}function vt(Jt){qe("next",Jt)}function Qt(Jt){qe("throw",Jt)}function an(Jt,ur){Jt(ur),Le.shift(),Le.length&&qe(Le[0][0],Le[0][1])}}function Oe(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,he=se[Symbol.asyncIterator];return he?he.call(se):(se=function ut(se){var he="function"==typeof Symbol&&Symbol.iterator,le=he&&se[he],ee=0;if(le)return le.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&ee>=se.length&&(se=void 0),{value:se&&se[ee++],done:!se}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),le={},ee("next"),ee("throw"),ee("return"),le[Symbol.asyncIterator]=function(){return this},le);function ee(Le){le[Le]=se[Le]&&function(yt){return new Promise(function(qe,zt){!function Fe(Le,yt,qe,zt){Promise.resolve(zt).then(function(vt){Le({value:vt,done:qe})},yt)}(qe,zt,(yt=se[Le](yt)).done,yt.value)})}}}L.d(De,{FC:()=>Ie,KL:()=>Oe,_T:()=>ae,mG:()=>Y,qq:()=>Te}),"function"==typeof SuppressedError&&SuppressedError}},gt=>{gt(gt.s=229)}]);